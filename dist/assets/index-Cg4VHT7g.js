var w2=Object.defineProperty;var Vx=r=>{throw TypeError(r)};var A2=(r,e,t)=>e in r?w2(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var q=(r,e,t)=>A2(r,typeof e!="symbol"?e+"":e,t),vg=(r,e,t)=>e.has(r)||Vx("Cannot "+t);var d=(r,e,t)=>(vg(r,e,"read from private field"),t?t.call(r):e.get(r)),E=(r,e,t)=>e.has(r)?Vx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),x=(r,e,t,i)=>(vg(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),S=(r,e,t)=>(vg(r,e,"access private method"),t);var ar=(r,e,t,i)=>({set _(n){x(r,e,n,t)},get _(){return d(r,e,i)}});import{a as g0,r as A,g as wn,c as E2,b as S2}from"./vendor-Q3K9tvtn.js";import{u as _2,L as ma,N as P2,a as Xc,b as C2,R as D2,c as Qi,B as O2}from"./router-Dbs5cE6r.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var nA={exports:{}},v0={};/**
 * @license React
 * react-jsx-dev-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2=Symbol.for("react.fragment");v0.Fragment=T2;v0.jsxDEV=void 0;nA.exports=v0;var v=nA.exports,ev={},$x=g0;ev.createRoot=$x.createRoot,ev.hydrateRoot=$x.hydrateRoot;const sA=A.createContext(void 0),bs=()=>{const r=A.useContext(sA);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},du="provaexpress_user",k2=({children:r})=>{const[e,t]=A.useState(null),[i,n]=A.useState(!0);A.useEffect(()=>{const u=localStorage.getItem(du);if(u)try{const h=JSON.parse(u);h.createdAt=new Date(h.createdAt),t(h)}catch{t(null)}n(!1)},[]);const c={user:e,loading:i,login:async(u,h)=>{n(!0);try{await new Promise(p=>setTimeout(p,1e3));const f=u==="victorsilva43@gmail.com",m={id:f?"admin-1":"1",email:u,name:f?"Victor Silva (Admin)":"Usuário Teste",createdAt:new Date,subscription:f?"pro":"free",role:f?"admin":"user"};t(m),localStorage.setItem(du,JSON.stringify(m))}catch{throw new Error("Erro no login")}finally{n(!1)}},register:async(u,h,f)=>{n(!0);try{await new Promise(g=>setTimeout(g,1e3));const m=u==="victorsilva43@gmail.com",p={id:m?"admin-1":"1",email:u,name:m?"Victor Silva (Admin)":f,createdAt:new Date,subscription:m?"pro":"free",role:m?"admin":"user"};t(p),localStorage.setItem(du,JSON.stringify(p))}catch{throw new Error("Erro no registro")}finally{n(!1)}},logout:async()=>{n(!0);try{await new Promise(u=>setTimeout(u,500)),t(null),localStorage.removeItem(du)}catch{throw new Error("Erro no logout")}finally{n(!1)}},createAdminUser:()=>{const u={id:"admin-1",email:"admin@provaexpress.com",name:"Administrador",createdAt:new Date,subscription:"pro",role:"admin"};t(u),localStorage.setItem(du,JSON.stringify(u))}};return v.jsxDEV(sA.Provider,{value:c,children:r},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/contexts/AuthContext.tsx",lineNumber:137,columnNumber:5},void 0)},aA=A.createContext(void 0),Rh=()=>{const r=A.useContext(aA);if(r===void 0)throw new Error("useQuestions must be used within a QuestionProvider");return r},M2=[{id:"1",specialty:"Cardiologia",topic:"Insuficiência Cardíaca",subtopic:"Tratamento",board:"USP",year:2023,statement:"Paciente de 65 anos com insuficiência cardíaca classe funcional II da NYHA apresenta dispneia aos esforços. Qual é o tratamento de primeira linha mais adequado?",alternatives:[{id:"1a",text:"Digoxina",letter:"A"},{id:"1b",text:"IECA + Betabloqueador",letter:"B"},{id:"1c",text:"Diurético de alça isolado",letter:"C"},{id:"1d",text:"Anticoagulante oral",letter:"D"},{id:"1e",text:"Antiarrítmico classe I",letter:"E"}],correctAnswer:"1b",explanation:"O tratamento de primeira linha para insuficiência cardíaca classe funcional II da NYHA inclui IECA (ou BRA) e betabloqueador, que reduzem a mortalidade e melhoram a sobrevida.",difficulty:"medium",tags:["cardiologia","insuficiência cardíaca","tratamento"],createdAt:new Date,updatedAt:new Date},{id:"2",specialty:"Neurologia",topic:"Acidente Vascular Cerebral",subtopic:"Diagnóstico",board:"UNIFESP",year:2023,statement:"Paciente de 58 anos apresenta hemiparesia direita de início súbito há 2 horas. Qual exame de imagem deve ser realizado prioritariamente?",alternatives:[{id:"2a",text:"Ressonância magnética",letter:"A"},{id:"2b",text:"Tomografia computadorizada sem contraste",letter:"B"},{id:"2c",text:"Angiografia cerebral",letter:"C"},{id:"2d",text:"Eletroencefalograma",letter:"D"},{id:"2e",text:"Radiografia de crânio",letter:"E"}],correctAnswer:"2b",explanation:"A tomografia computadorizada sem contraste é o exame de escolha inicial para confirmar o diagnóstico de AVC isquêmico e excluir hemorragia intracraniana.",difficulty:"easy",tags:["neurologia","avc","diagnóstico"],createdAt:new Date,updatedAt:new Date},{id:"3",specialty:"Pneumologia",topic:"Asma",subtopic:"Crise Asmática",board:"UNICAMP",year:2023,statement:"Paciente asmático em crise moderada apresenta sibilos difusos e uso de musculatura acessória. Qual é a medicação de primeira escolha?",alternatives:[{id:"3a",text:"Corticosteróide oral",letter:"A"},{id:"3b",text:"Beta-2 agonista inalatório",letter:"B"},{id:"3c",text:"Anticolinérgico inalatório",letter:"C"},{id:"3d",text:"Aminofilina endovenosa",letter:"D"},{id:"3e",text:"Antibiótico oral",letter:"E"}],correctAnswer:"3b",explanation:"O beta-2 agonista inalatório de curta duração (salbutamol) é a medicação de primeira escolha para alívio imediato dos sintomas da crise asmática.",difficulty:"easy",tags:["pneumologia","asma","crise"],createdAt:new Date,updatedAt:new Date},{id:"4",specialty:"Clínica Médica",topic:"Endocrinologia",subtopic:"Diabetes Mellitus",board:"UFMG",year:2023,statement:"Paciente diabético tipo 2 com HbA1c de 8.5% e creatinina de 1.8 mg/dL. Qual é a medicação antidiabética mais segura para este paciente?",alternatives:[{id:"4a",text:"Metformina",letter:"A"},{id:"4b",text:"Sulfonilureia",letter:"B"},{id:"4c",text:"Incretina mimética",letter:"C"},{id:"4d",text:"Insulina NPH",letter:"D"},{id:"4e",text:"Tiazolidinediona",letter:"E"}],correctAnswer:"4c",explanation:"Incretinas miméticas são seguras em pacientes com insuficiência renal e não requerem ajuste de dose, sendo uma opção adequada para este paciente.",difficulty:"medium",tags:["endocrinologia","diabetes","insuficiência renal"],createdAt:new Date,updatedAt:new Date},{id:"5",specialty:"Cirurgia",topic:"Cirurgia Geral",subtopic:"Abdome Agudo",board:"UFRJ",year:2023,statement:"Paciente de 45 anos com dor abdominal difusa há 12 horas, febre e leucocitose. Qual é o diagnóstico mais provável?",alternatives:[{id:"5a",text:"Apendicite aguda",letter:"A"},{id:"5b",text:"Colecistite aguda",letter:"B"},{id:"5c",text:"Diverticulite",letter:"C"},{id:"5d",text:"Peritonite difusa",letter:"D"},{id:"5e",text:"Obstrução intestinal",letter:"E"}],correctAnswer:"5d",explanation:"A peritonite difusa é caracterizada por dor abdominal difusa, febre e leucocitose, indicando processo inflamatório generalizado da cavidade peritoneal.",difficulty:"hard",tags:["cirurgia","abdome agudo","peritonite"],createdAt:new Date,updatedAt:new Date},{id:"6",specialty:"Ginecologia",topic:"Ginecologia Geral",subtopic:"Menopausa",board:"UNESP",year:2023,statement:"Paciente de 52 anos com amenorreia há 8 meses, ondas de calor e sudorese noturna. Qual é a conduta mais adequada?",alternatives:[{id:"6a",text:"Reposição hormonal imediata",letter:"A"},{id:"6b",text:"Aguardar 12 meses de amenorreia",letter:"B"},{id:"6c",text:"Solicitar FSH e LH",letter:"C"},{id:"6d",text:"Prescrever antidepressivo",letter:"D"},{id:"6e",text:"Encaminhar para psiquiatra",letter:"E"}],correctAnswer:"6c",explanation:"A dosagem de FSH e LH é necessária para confirmar o diagnóstico de menopausa e orientar a conduta terapêutica adequada.",difficulty:"medium",tags:["ginecologia","menopausa","diagnóstico"],createdAt:new Date,updatedAt:new Date},{id:"7",specialty:"Pediatria",topic:"Neonatologia",subtopic:"Icterícia Neonatal",board:"UFPR",year:2023,statement:"Recém-nascido de 3 dias com icterícia generalizada e bilirrubina total de 18 mg/dL. Qual é a conduta mais adequada?",alternatives:[{id:"7a",text:"Observação ambulatorial",letter:"A"},{id:"7b",text:"Fototerapia",letter:"B"},{id:"7c",text:"Exsanguineotransfusão",letter:"C"},{id:"7d",text:"Antibioticoterapia",letter:"D"},{id:"7e",text:"Alta hospitalar",letter:"E"}],correctAnswer:"7b",explanation:"Para recém-nascido de 3 dias com bilirrubina total de 18 mg/dL, a fototerapia é indicada para prevenir encefalopatia bilirrubínica.",difficulty:"easy",tags:["pediatria","neonatologia","icterícia"],createdAt:new Date,updatedAt:new Date},{id:"8",specialty:"Medicina Preventiva",topic:"Saúde Pública",subtopic:"Epidemiologia",board:"FIOCRUZ",year:2023,statement:"Em um estudo de coorte, qual medida de associação é mais adequada para avaliar o risco de desenvolver uma doença?",alternatives:[{id:"8a",text:"Odds Ratio",letter:"A"},{id:"8b",text:"Risco Relativo",letter:"B"},{id:"8c",text:"Prevalência",letter:"C"},{id:"8d",text:"Incidência",letter:"D"},{id:"8e",text:"Sensibilidade",letter:"E"}],correctAnswer:"8b",explanation:"O Risco Relativo é a medida de associação mais adequada em estudos de coorte, pois permite comparar diretamente a incidência da doença entre expostos e não expostos.",difficulty:"medium",tags:["epidemiologia","estudos de coorte","medidas de associação"],createdAt:new Date,updatedAt:new Date}],R2=[{questionId:"1",selectedAnswer:"1b",isCorrect:!0,timeSpent:45,answeredAt:new Date,markedForReview:!1},{questionId:"2",selectedAnswer:"2a",isCorrect:!1,timeSpent:30,answeredAt:new Date,markedForReview:!1},{questionId:"3",selectedAnswer:"3b",isCorrect:!0,timeSpent:60,answeredAt:new Date,markedForReview:!1},{questionId:"4",selectedAnswer:"4c",isCorrect:!0,timeSpent:50,answeredAt:new Date,markedForReview:!1},{questionId:"5",selectedAnswer:"5d",isCorrect:!0,timeSpent:70,answeredAt:new Date,markedForReview:!1},{questionId:"6",selectedAnswer:"6a",isCorrect:!1,timeSpent:40,answeredAt:new Date,markedForReview:!0},{questionId:"7",selectedAnswer:"7b",isCorrect:!0,timeSpent:35,answeredAt:new Date,markedForReview:!1},{questionId:"8",selectedAnswer:"8b",isCorrect:!0,timeSpent:55,answeredAt:new Date,markedForReview:!1}],j2=({children:r})=>{const[e,t]=A.useState(M2),[i]=A.useState(null),[n,s]=A.useState(R2),[a,o]=A.useState({}),p={questions:e,currentQuestion:i,userAnswers:n,filters:a,setFilters:o,answerQuestion:(g,b,y)=>{const N=e.find(P=>P.id===g);if(!N)return;const w=b===N.correctAnswer,_={questionId:g,selectedAnswer:b,isCorrect:w,timeSpent:y,answeredAt:new Date,markedForReview:!1};s(P=>[...P,_])},markForReview:g=>{s(b=>b.map(y=>y.questionId===g?{...y,markedForReview:!y.markedForReview}:y))},getNextQuestion:()=>{const g=n.map(y=>y.questionId),b=e.filter(y=>!g.includes(y.id));return b.length>0?b[0]:null},getFilteredQuestions:()=>Object.values(a).some(b=>b!==void 0&&(Array.isArray(b)?b.length>0:!0))?e.filter(b=>{var y;if(a.specialty&&b.specialty!==a.specialty||a.topic&&b.topic!==a.topic||a.subtopic&&b.subtopic!==a.subtopic||a.board&&b.board!==a.board||a.year&&b.year!==a.year||a.difficulty&&b.difficulty!==a.difficulty)return!1;if(a.answered!==void 0){const N=n.some(w=>w.questionId===b.id);if(a.answered!==N)return!1}if(a.markedForReview!==void 0){const N=(y=n.find(w=>w.questionId===b.id))==null?void 0:y.markedForReview;if(a.markedForReview!==N)return!1}if(a.specialties&&a.specialties.length>0&&!a.specialties.includes(b.specialty)||a.subtopics&&a.subtopics.length>0&&!a.subtopics.includes(b.subtopic)||a.institutions&&a.institutions.length>0&&!a.institutions.includes(b.board))return!1;if(a.years&&Array.isArray(a.years)){if(!a.years.includes(b.year))return!1}else if(a.year&&b.year!==a.year)return!1;return!(a.regions&&a.regions.length>0&&!({USP:["SP"],UNIFESP:["SP"],UNICAMP:["SP"],UNESP:["SP"],UFMG:["MG"],UFRJ:["RJ"],UFPR:["PR"],UFSC:["SC"],UFBA:["BA"],UFPE:["PE"],UFPB:["PB"],UFG:["GO"],UFAM:["AM"],UFES:["ES"],FIOCRUZ:["RJ"],"Hospital das Clínicas (USP)":["SP"],"Hospital Sírio-Libanês":["SP"],"Hospital Albert Einstein":["SP"],"Hospital Samaritano":["SP"],"Hospital do Coração (HCor)":["SP"],"Hospital Moinhos de Vento":["RS"],"Hospital de Clínicas de Porto Alegre":["RS"],"Hospital Universitário Pedro Ernesto (UERJ)":["RJ"],"Hospital das Clínicas (UFMG)":["MG"],"Hospital das Clínicas (UNICAMP)":["SP"],"Hospital Universitário (UFSC)":["SC"],"Hospital Universitário (UFPR)":["PR"],"Hospital Universitário (UFBA)":["BA"],"Hospital Universitário (UFRJ)":["RJ"],"Hospital Universitário (UNIFESP)":["SP"],"Hospital Universitário (UFPE)":["PE"],"Hospital Universitário (UFG)":["GO"],"Hospital Universitário (UFAM)":["AM"],"Hospital Universitário (UFPB)":["PB"],"Hospital Universitário (UFES)":["ES"]}[b.board]||["NAC"]).some(P=>a.regions.includes(P))||a.purposes&&a.purposes.length>0&&!({USP:["Residência (Acesso Direto)"],UNIFESP:["Residência (Acesso Direto)"],UNICAMP:["Residência (Acesso Direto)"],UNESP:["Residência (Acesso Direto)"],UFMG:["Residência (Acesso Direto)"],UFRJ:["Residência (Acesso Direto)"],UFPR:["Residência (Acesso Direto)"],UFSC:["Residência (Acesso Direto)"],UFBA:["Residência (Acesso Direto)"],UFPE:["Residência (Acesso Direto)"],UFPB:["Residência (Acesso Direto)"],UFG:["Residência (Acesso Direto)"],UFAM:["Residência (Acesso Direto)"],UFES:["Residência (Acesso Direto)"],FIOCRUZ:["Residência (Acesso Direto)"],"Hospital das Clínicas (USP)":["Residência (Acesso Direto)"],"Hospital Sírio-Libanês":["Residência (Acesso Direto)"],"Hospital Albert Einstein":["Residência (Acesso Direto)"],"Hospital Samaritano":["Residência (Acesso Direto)"],"Hospital do Coração (HCor)":["Residência (Acesso Direto)"],"Hospital Moinhos de Vento":["Residência (Acesso Direto)"],"Hospital de Clínicas de Porto Alegre":["Residência (Acesso Direto)"],"Hospital Universitário Pedro Ernesto (UERJ)":["Residência (Acesso Direto)"],"Hospital das Clínicas (UFMG)":["Residência (Acesso Direto)"],"Hospital das Clínicas (UNICAMP)":["Residência (Acesso Direto)"],"Hospital Universitário (UFSC)":["Residência (Acesso Direto)"],"Hospital Universitário (UFPR)":["Residência (Acesso Direto)"],"Hospital Universitário (UFBA)":["Residência (Acesso Direto)"],"Hospital Universitário (UFRJ)":["Residência (Acesso Direto)"],"Hospital Universitário (UNIFESP)":["Residência (Acesso Direto)"],"Hospital Universitário (UFPE)":["Residência (Acesso Direto)"],"Hospital Universitário (UFG)":["Residência (Acesso Direto)"],"Hospital Universitário (UFAM)":["Residência (Acesso Direto)"],"Hospital Universitário (UFPB)":["Residência (Acesso Direto)"],"Hospital Universitário (UFES)":["Residência (Acesso Direto)"]}[b.board]||["Residência (Acesso Direto)"]).some(P=>a.purposes.includes(P)))}):[],addQuestion:g=>{t(b=>[...b,g])},addQuestions:g=>{t(b=>[...b,...g])}};return v.jsxDEV(aA.Provider,{value:p,children:r},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/contexts/QuestionContext.tsx",lineNumber:437,columnNumber:5},void 0)};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(r,e)=>{const t=A.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...c},u)=>A.createElement("svg",{ref:u,...I2,width:n,height:n,stroke:i,strokeWidth:a?Number(s)*24/Number(n):s,className:["lucide",`lucide-${L2(r)}`,o].join(" "),...c},[...e.map(([h,f])=>A.createElement(h,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Ne("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=Ne("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=Ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=Ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=Ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Ne("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=Ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=Ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=Ne("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=Ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=Ne("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=Ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=Ne("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=Ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=Ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=Ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eO=()=>{const r=_2(),{user:e,logout:t}=bs(),[i,n]=A.useState(!1),s=[{path:"/",icon:H2,label:"Início"},{path:"/questions",icon:sm,label:"Questões"},{path:"/revisoes",icon:G2,label:"Revisões"},{path:"/dashboard",icon:oA,label:"Dashboard"},{path:"/profile",icon:y0,label:"Perfil"}],a=(e==null?void 0:e.role)==="admin"?[...s,{path:"/admin",icon:Sf,label:"Admin"}]:s,o=[{name:"Cardiologia",icon:B2,color:"text-red-400"},{name:"Neurologia",icon:F2,color:"text-success-400"},{name:"Pneumologia",icon:U2,color:"text-green-400"}];return v.jsxDEV("aside",{className:`h-screen bg-white border-r border-gray-100 flex flex-col justify-between transition-all duration-200
        ${i?"w-64 shadow-md":"w-20 shadow-sm"}
      `,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[v.jsxDEV("div",{children:[v.jsxDEV("div",{className:`flex items-center h-20 px-4 border-b border-gray-100 transition-all duration-200 ${i?"justify-start":"justify-center"}`,children:i?v.jsxDEV(v.Fragment,{children:[v.jsxDEV("img",{src:"/logo.png",alt:"Logo",className:"h-12 w-12 object-contain mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:55,columnNumber:15},void 0),v.jsxDEV("span",{className:"text-xl font-bold text-success-600 tracking-tight",children:"ProvaExpress"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:56,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:54,columnNumber:13},void 0):v.jsxDEV("span",{className:"flex items-center justify-center w-20 h-20",children:v.jsxDEV("img",{src:"/logo.png",alt:"Logo",className:"h-12 w-12 object-contain"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:60,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:59,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:51,columnNumber:9},void 0),v.jsxDEV("nav",{className:"mt-4 flex flex-col gap-1",children:a.map(l=>{const c=l.icon,u=r.pathname===l.path;return v.jsxDEV(ma,{to:l.path,className:`flex items-center ${i?"gap-3 justify-start":"justify-center"} px-4 py-3 rounded-xl mx-2 my-1 transition-colors text-sm font-medium
                  ${u?"bg-success-50 text-success-600":"text-gray-600 hover:bg-gray-50 hover:text-success-600"}`,title:l.label,children:[v.jsxDEV(c,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:77,columnNumber:17},void 0),v.jsxDEV("span",{className:`${i?"inline":"hidden"} transition-all duration-200`,children:l.label},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:78,columnNumber:17},void 0)]},l.path,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:70,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:65,columnNumber:9},void 0),v.jsxDEV("div",{className:"mt-6",children:[v.jsxDEV("h3",{className:`${i?"block":"hidden"} px-6 text-xs text-gray-400 font-semibold uppercase mb-2 tracking-wider transition-all duration-200`,children:"Especialidades"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:85,columnNumber:11},void 0),v.jsxDEV("nav",{className:"flex flex-col gap-1",children:o.map(l=>{const c=l.icon;return v.jsxDEV(ma,{to:`/questions?specialty=${l.name}`,className:`flex items-center ${i?"gap-3 justify-start":"justify-center"} px-4 py-2 rounded-xl mx-2 my-1 text-gray-500 hover:bg-gray-50 hover:text-success-600 transition-colors text-sm`,title:l.name,children:[v.jsxDEV(c,{className:`h-5 w-5 ${l.color}`},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:96,columnNumber:19},void 0),v.jsxDEV("span",{className:`${i?"inline":"hidden"} transition-all duration-200`,children:l.name},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:97,columnNumber:19},void 0)]},l.name,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:90,columnNumber:17},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:84,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:49,columnNumber:7},void 0),v.jsxDEV("div",{className:`flex flex-col items-center ${i?"md:items-stretch":""} gap-2 p-4 border-t border-gray-100`,children:[e&&v.jsxDEV("div",{className:`flex items-center gap-3 mb-2 ${i?"":"justify-center w-full"}`,children:[v.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-success-100 flex items-center justify-center text-success-600 font-bold text-lg",children:e.name.charAt(0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:108,columnNumber:13},void 0),v.jsxDEV("div",{className:`${i?"block":"hidden"}`,children:[v.jsxDEV("div",{className:"font-semibold text-gray-900 text-sm",children:e.name},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:112,columnNumber:15},void 0),v.jsxDEV("div",{className:"text-xs text-gray-400",children:e.email},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:113,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:111,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:107,columnNumber:11},void 0),v.jsxDEV("button",{onClick:t,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-gray-500 hover:bg-gray-50 hover:text-red-500 transition-colors text-sm w-full ${i?"justify-start":"justify-center"}`,children:[v.jsxDEV(z2,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:121,columnNumber:11},void 0),v.jsxDEV("span",{className:`${i?"inline":"hidden"}`,children:"Sair"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:122,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:117,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:105,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Sidebar.tsx",lineNumber:42,columnNumber:5},void 0)},tO=({children:r})=>{const{user:e,loading:t}=bs();return t?v.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:16,columnNumber:11},void 0),v.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Carregando..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:17,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:15,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:14,columnNumber:7},void 0):v.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex",children:[e&&v.jsxDEV("div",{className:"fixed inset-y-0 left-0 z-30",children:v.jsxDEV(eO,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:27,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:26,columnNumber:9},void 0),v.jsxDEV("main",{className:`flex-1 p-6 transition-all duration-300 overflow-y-auto min-h-screen ${e?"pl-20":""}`,children:r},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:30,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/Layout.tsx",lineNumber:24,columnNumber:5},void 0)},rO=({children:r,requiredRole:e="admin",fallbackPath:t="/"})=>{const{user:i,loading:n}=bs();return n?v.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:v.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-success-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:21,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:20,columnNumber:7},void 0):i?i.role===e||i.role==="admin"?v.jsxDEV(v.Fragment,{children:r},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:58,columnNumber:10},void 0):v.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:v.jsxDEV("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[v.jsxDEV("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsxDEV("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:39,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:38,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:37,columnNumber:11},void 0),v.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:42,columnNumber:11},void 0),v.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Você não tem permissão para acessar esta página. Entre em contato com o administrador se acredita que isso é um erro."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:43,columnNumber:11},void 0),v.jsxDEV("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Voltar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:47,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:36,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:35,columnNumber:7},void 0):v.jsxDEV(P2,{to:"/login",replace:!0},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/ProtectedRoute.tsx",lineNumber:27,columnNumber:12},void 0)},iO=()=>{const{user:r}=bs(),e=[{icon:sm,title:"Banco de Questões Comentadas",description:"Mais de 300 questões de provas reais com comentários didáticos detalhados"},{icon:dA,title:"Revisão Inteligente",description:"Sistema de repetição espaçada baseado no seu desempenho"},{icon:oA,title:"Dashboard de Desempenho",description:"Acompanhe sua evolução com gráficos e estatísticas detalhadas"},{icon:Z2,title:"Sistema de Ranking",description:"Compare seu desempenho com outros estudantes"}],t=[{label:"Questões Disponíveis",value:"300+"},{label:"Especialidades",value:"15"},{label:"Usuários Ativos",value:"2.5k+"},{label:"Taxa de Aprovação",value:"85%"}],i=[{name:"Dr. Ana Silva",specialty:"Cardiologia - USP",text:"O Prova Express foi fundamental na minha preparação. Os comentários são excelentes!",rating:5},{name:"Dr. Carlos Santos",specialty:"Neurologia - UNIFESP",text:"A revisão inteligente me ajudou a focar nos pontos que eu tinha mais dificuldade.",rating:5}];return v.jsxDEV("div",{className:"min-h-screen",children:[v.jsxDEV("section",{className:"bg-gradient-to-br from-success-600 to-success-800 text-white py-20",children:v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Prova Residência Express"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:70,columnNumber:13},void 0),v.jsxDEV("p",{className:"text-xl md:text-2xl mb-8 text-success-100",children:"Prepare-se para a Residência Médica com questões comentadas e revisão inteligente"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:73,columnNumber:13},void 0),v.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:r?v.jsxDEV(ma,{to:"/questions",className:"bg-white text-success-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors inline-flex items-center",children:["Começar a Estudar",v.jsxDEV(Bx,{className:"ml-2 h-5 w-5"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:83,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:78,columnNumber:17},void 0):v.jsxDEV(v.Fragment,{children:[v.jsxDEV(ma,{to:"/register",className:"bg-white text-success-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Começar Grátis"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:87,columnNumber:19},void 0),v.jsxDEV(ma,{to:"/login",className:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-success-600 transition-colors",children:"Já tenho conta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:93,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:86,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:76,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:69,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:68,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:67,columnNumber:7},void 0),v.jsxDEV("section",{className:"py-20 bg-white",children:v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxDEV("div",{className:"text-center mb-16",children:[v.jsxDEV("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Por que escolher o Prova Express?"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:110,columnNumber:13},void 0),v.jsxDEV("p",{className:"text-xl text-gray-600",children:"Ferramentas modernas para uma preparação eficiente"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:113,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:109,columnNumber:11},void 0),v.jsxDEV("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((n,s)=>{const a=n.icon;return v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("div",{className:"bg-success-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsxDEV(a,{className:"h-8 w-8 text-success-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:124,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:123,columnNumber:19},void 0),v.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:n.title},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:126,columnNumber:19},void 0),v.jsxDEV("p",{className:"text-gray-600",children:n.description},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:129,columnNumber:19},void 0)]},s,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:122,columnNumber:17},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:108,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:107,columnNumber:7},void 0),v.jsxDEV("section",{className:"py-20 bg-gray-50",children:v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:t.map((n,s)=>v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("div",{className:"text-3xl md:text-4xl font-bold text-success-600 mb-2",children:n.value},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:145,columnNumber:17},void 0),v.jsxDEV("div",{className:"text-gray-600",children:n.label},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:148,columnNumber:17},void 0)]},s,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:144,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:142,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:141,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:140,columnNumber:7},void 0),v.jsxDEV("section",{className:"py-20 bg-white",children:v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxDEV("div",{className:"text-center mb-16",children:v.jsxDEV("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"O que nossos usuários dizem"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:161,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:160,columnNumber:11},void 0),v.jsxDEV("div",{className:"grid md:grid-cols-2 gap-8",children:i.map((n,s)=>v.jsxDEV("div",{className:"bg-gray-50 p-6 rounded-lg",children:[v.jsxDEV("div",{className:"flex items-center mb-4",children:[...Array(n.rating)].map((a,o)=>v.jsxDEV(Q2,{className:"h-5 w-5 text-warning-500 fill-current"},o,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:171,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:169,columnNumber:17},void 0),v.jsxDEV("p",{className:"text-gray-700 mb-4 italic",children:['"',n.text,'"']},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:174,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("div",{className:"font-semibold text-gray-900",children:n.name},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:178,columnNumber:19},void 0),v.jsxDEV("div",{className:"text-sm text-gray-600",children:n.specialty},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:181,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:177,columnNumber:17},void 0)]},s,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:168,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:166,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:159,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:158,columnNumber:7},void 0),v.jsxDEV("section",{className:"py-20 bg-success-600 text-white",children:v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[v.jsxDEV("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Comece sua preparação hoje"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:194,columnNumber:11},void 0),v.jsxDEV("p",{className:"text-xl mb-8 text-success-100",children:"Junte-se a milhares de estudantes que já estão se preparando"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:197,columnNumber:11},void 0),!r&&v.jsxDEV(ma,{to:"/register",className:"bg-white text-success-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors inline-flex items-center",children:["Criar Conta Grátis",v.jsxDEV(Bx,{className:"ml-2 h-5 w-5"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:206,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:201,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:193,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:192,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Home.tsx",lineNumber:65,columnNumber:5},void 0)},nO=[{name:"Cirurgia",subtopics:["Cirurgia Geral","Cirurgia Plástica","Cirurgia Vascular"]},{name:"Clínica Médica",subtopics:["Cardiologia","Endocrinologia","Gastroenterologia"]},{name:"Ginecologia",subtopics:["Ginecologia Geral","Reprodução Humana"]},{name:"Medicina Preventiva",subtopics:["Saúde Pública","Epidemiologia"]},{name:"Obstetrícia",subtopics:["Pré-natal","Parto","Puerpério"]},{name:"Pediatria",subtopics:["Neonatologia","Pediatria Geral"]},{name:"Outros",subtopics:["Medicina do Trabalho","Medicina Legal"]}],Kx=["Certo/Errado","Múltipla escolha","Discursivas","Com solução por vídeo","Com solução em texto","Sem solução em texto","Sem solução por vídeo","Questões que você já resolveu","Questões que você não resolveu"],sO=()=>{const{questions:r,getFilteredQuestions:e,setFilters:t}=Rh(),[i,n]=A.useState(null),[s,a]=A.useState([]),[o,l]=A.useState([]),[c,u]=A.useState([]),[h,f]=A.useState([]),[m,p]=A.useState([]),[g,b]=A.useState([]),[y,N]=A.useState(""),[w,_]=A.useState(Kx),[P,O]=A.useState(!1),[T,C]=A.useState("especialidade"),D=["Hospital das Clínicas (USP)","Hospital Sírio-Libanês","Hospital Albert Einstein","Hospital Samaritano","Hospital do Coração (HCor)","Hospital Moinhos de Vento","Hospital de Clínicas de Porto Alegre","Hospital Universitário Pedro Ernesto (UERJ)","Hospital das Clínicas (UFMG)","Hospital das Clínicas (UNICAMP)","Hospital Universitário (UFSC)","Hospital Universitário (UFPR)","Hospital Universitário (UFBA)","Hospital Universitário (UFRJ)","Hospital Universitário (UNIFESP)","Hospital Universitário (UFPE)","Hospital Universitário (UFG)","Hospital Universitário (UFAM)","Hospital Universitário (UFPB)","Hospital Universitário (UFES)"],k=Xc(),M=Array.from({length:20},(R,I)=>new Date().getFullYear()-I),j=[{sigla:"NAC",nome:"Provas Nacionais"},{sigla:"AC",nome:"Acre"},{sigla:"AL",nome:"Alagoas"},{sigla:"AP",nome:"Amapá"},{sigla:"AM",nome:"Amazonas"},{sigla:"BA",nome:"Bahia"},{sigla:"CE",nome:"Ceará"},{sigla:"DF",nome:"Distrito Federal"},{sigla:"ES",nome:"Espírito Santo"},{sigla:"GO",nome:"Goiás"},{sigla:"MA",nome:"Maranhão"},{sigla:"MT",nome:"Mato Grosso"},{sigla:"MS",nome:"Mato Grosso do Sul"},{sigla:"MG",nome:"Minas Gerais"},{sigla:"PA",nome:"Pará"},{sigla:"PB",nome:"Paraíba"},{sigla:"PR",nome:"Paraná"},{sigla:"PE",nome:"Pernambuco"},{sigla:"PI",nome:"Piauí"},{sigla:"RJ",nome:"Rio de Janeiro"},{sigla:"RN",nome:"Rio Grande do Norte"},{sigla:"RS",nome:"Rio Grande do Sul"},{sigla:"RO",nome:"Rondônia"},{sigla:"RR",nome:"Roraima"},{sigla:"SC",nome:"Santa Catarina"},{sigla:"SP",nome:"São Paulo"},{sigla:"SE",nome:"Sergipe"},{sigla:"TO",nome:"Tocantins"}],V=["Exame Nacional de Desempenho dos Estudantes - ENADE","Residência (Acesso Direto)","Residência com pré-requisito - Clínica Médica (R+ CM)","Residência com pré-requisito - Ginecologia e Obstetrícia (R+ GO)","Residência com pré-requisito - Cirurgia (R+ CIR)","Residência com pré-requisito - Pediatria (R+ PED)","Residência com pré-requisito - R+ Cirurgia do Aparelho Digestivo","Residência com pré-requisito - R+ Cirurgia de Cabeça e Pescoço","Residência com pré-requisito - R+ Cirurgia Pediátrica","Residência com pré-requisito - R+ Cirurgia Plástica","Residência com pré-requisito - R+ Cirurgia Torácica","Residência com pré-requisito - R+ Cirurgia Vascular","Residência com pré-requisito - R+ Coloproctologia","Residência com pré-requisito - R+ Endoscopia","Residência com pré-requisito - R+ Hepatologia","Residência com pré-requisito - R+ Mastologia","Residência com pré-requisito - R+ Medicina Intensiva","Residência com pré-requisito - R+ Ortopedia","Residência com pré-requisito - R+ Urologia","Residência com pré-requisito - R+ Psiquiatria","Revalida"],B=nO.filter(R=>R.name.toLowerCase().includes(y.toLowerCase())),X=R=>{n(i===R?null:R)},$=R=>{a(I=>I.includes(R)?I.filter(W=>W!==R):[...I,R])},U=R=>{l(I=>I.includes(R)?I.filter(W=>W!==R):[...I,R])},oe=R=>{u(I=>I.includes(R)?I.filter(W=>W!==R):[...I,R])},Q=R=>{f(I=>I.includes(R)?I.filter(W=>W!==R):[...I,R])},ye=R=>{p(I=>I.includes(R)?I.filter(W=>W!==R):[...I,R])},te=R=>{b(I=>I.includes(R)?I.filter(W=>W!==R):[...I,R])},H=()=>{a([]),l([]),u([]),f([]),p([]),b([]),_(Kx)},z=R=>{_(I=>I.filter(W=>W!==R))},Ee=()=>{const R={specialties:s.length>0?s:void 0,subtopics:o.length>0?o:void 0,institutions:c.length>0?c:void 0,years:h.length>0?h:void 0,regions:m.length>0?m:void 0,purposes:g.length>0?g:void 0};t(R),localStorage.setItem("questionFilters",JSON.stringify(R)),k("/questions/list")},ue=e();ue.length;const fe=(()=>{const R={specialties:s.length>0?s:void 0,subtopics:o.length>0?o:void 0,institutions:c.length>0?c:void 0,years:h.length>0?h:void 0,regions:m.length>0?m:void 0,purposes:g.length>0?g:void 0};return Object.values(R).some(W=>W!==void 0&&(Array.isArray(W)?W.length>0:!0))?r.filter(W=>!(R.specialties&&R.specialties.length>0&&!R.specialties.includes(W.specialty)||R.subtopics&&R.subtopics.length>0&&!R.subtopics.includes(W.subtopic)||R.institutions&&R.institutions.length>0&&!R.institutions.includes(W.board)||R.years&&R.years.length>0&&!R.years.includes(W.year)||R.regions&&R.regions.length>0&&!({USP:["SP"],UNIFESP:["SP"],UNICAMP:["SP"],UNESP:["SP"],UFMG:["MG"],UFRJ:["RJ"],UFPR:["PR"],UFSC:["SC"],UFBA:["BA"],UFPE:["PE"],UFPB:["PB"],UFG:["GO"],UFAM:["AM"],UFES:["ES"],FIOCRUZ:["RJ"]}[W.board]||["NAC"]).some(re=>R.regions.includes(re))||R.purposes&&R.purposes.length>0&&!({USP:["Residência (Acesso Direto)"],UNIFESP:["Residência (Acesso Direto)"],UNICAMP:["Residência (Acesso Direto)"],UNESP:["Residência (Acesso Direto)"],UFMG:["Residência (Acesso Direto)"],UFRJ:["Residência (Acesso Direto)"],UFPR:["Residência (Acesso Direto)"],UFSC:["Residência (Acesso Direto)"],UFBA:["Residência (Acesso Direto)"],UFPE:["Residência (Acesso Direto)"],UFPB:["Residência (Acesso Direto)"],UFG:["Residência (Acesso Direto)"],UFAM:["Residência (Acesso Direto)"],UFES:["Residência (Acesso Direto)"],FIOCRUZ:["Residência (Acesso Direto)"]}[W.board]||["Residência (Acesso Direto)"]).some(re=>R.purposes.includes(re)))).length:0})();return v.jsxDEV("div",{className:"min-h-[calc(100vh-4rem)] flex flex-col bg-gray-50",children:[v.jsxDEV("div",{className:"bg-white border-b border-gray-100 px-6 py-4 flex flex-wrap gap-4 items-center sticky top-0 z-10",children:[v.jsxDEV("h1",{className:"text-lg md:text-xl font-semibold text-gray-900 mr-6",children:"Filtre questões de acordo com seu objetivo"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:310,columnNumber:9},void 0),v.jsxDEV("span",{className:"text-gray-400 hidden md:inline",children:"|"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:311,columnNumber:9},void 0),v.jsxDEV("div",{className:"flex flex-wrap gap-4 text-sm font-medium text-gray-600",children:[v.jsxDEV("span",{className:`pb-1 cursor-pointer ${T==="especialidade"?"border-b-2 border-success-500 text-success-600":""}`,onClick:()=>C("especialidade"),children:"Especialidade / Assunto"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:313,columnNumber:11},void 0),v.jsxDEV("span",{className:`pb-1 cursor-pointer ${T==="instituicao"?"border-b-2 border-success-500 text-success-600":""}`,onClick:()=>C("instituicao"),children:"Instituição"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:319,columnNumber:11},void 0),v.jsxDEV("span",{className:`pb-1 cursor-pointer ${T==="ano"?"border-b-2 border-success-500 text-success-600":""}`,onClick:()=>C("ano"),children:"Ano"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:325,columnNumber:11},void 0),v.jsxDEV("span",{className:`pb-1 cursor-pointer ${T==="regiao"?"border-b-2 border-success-500 text-success-600":""}`,onClick:()=>C("regiao"),children:"Região"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:331,columnNumber:11},void 0),v.jsxDEV("span",{className:`pb-1 cursor-pointer ${T==="finalidade"?"border-b-2 border-success-500 text-success-600":""}`,onClick:()=>C("finalidade"),children:"Finalidade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:337,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:312,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:309,columnNumber:7},void 0),v.jsxDEV("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-0 bg-gray-50",children:[T==="especialidade"?v.jsxDEV("div",{className:"bg-white border-r border-gray-100 flex flex-col h-full min-h-[60vh]",children:[v.jsxDEV("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:v.jsxDEV("span",{className:"text-sm text-gray-500 font-medium",children:[B.length," especialidades encontradas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:351,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:350,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 pb-4",children:v.jsxDEV("div",{className:"relative",children:[v.jsxDEV(Wx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:357,columnNumber:17},void 0),v.jsxDEV("input",{type:"text",placeholder:"Busque por um item",value:y,onChange:R=>N(R.target.value),className:"input-field pl-10"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:358,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:356,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:355,columnNumber:13},void 0),v.jsxDEV("div",{className:"flex-1 overflow-y-auto px-2 pb-4",children:v.jsxDEV("ul",{className:"divide-y divide-gray-50",children:B.map(R=>v.jsxDEV("li",{children:[v.jsxDEV("div",{className:"flex items-center px-4 py-2 hover:bg-gray-50 rounded-lg cursor-pointer",onClick:()=>X(R.name),children:[v.jsxDEV("span",{className:"mr-2",children:i===R.name?v.jsxDEV(bg,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:374,columnNumber:27},void 0):v.jsxDEV(uA,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:376,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:372,columnNumber:23},void 0),v.jsxDEV("input",{type:"checkbox",checked:s.includes(R.name),onChange:I=>{I.stopPropagation(),$(R.name)},className:"accent-success-500 mr-3",onClick:I=>I.stopPropagation()},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:379,columnNumber:23},void 0),v.jsxDEV("span",{className:"text-gray-800 text-sm flex-1",children:R.name},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:386,columnNumber:23},void 0),s.includes(R.name)&&v.jsxDEV(Hx,{className:"h-4 w-4 text-success-500"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:387,columnNumber:67},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:371,columnNumber:21},void 0),v.jsxDEV("ul",{className:`ml-12 mt-1 mb-2 transition-all duration-200 overflow-hidden ${i===R.name?"max-h-40 opacity-100":"max-h-0 opacity-0"}`,children:R.subtopics.map(I=>v.jsxDEV("li",{className:"flex items-center py-1",children:[v.jsxDEV("input",{type:"checkbox",checked:o.includes(I),onChange:()=>U(I),className:"accent-success-500 mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:394,columnNumber:27},void 0),v.jsxDEV("span",{className:"text-gray-700 text-xs",children:I},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:400,columnNumber:27},void 0),o.includes(I)&&v.jsxDEV(Hx,{className:"h-3 w-3 text-success-500 ml-1"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:401,columnNumber:63},void 0)]},I,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:393,columnNumber:25},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:389,columnNumber:21},void 0)]},R.name,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:370,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:368,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:367,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 py-4 border-t border-gray-100",children:v.jsxDEV("button",{onClick:H,className:"text-sm text-success-600 font-medium hover:underline",children:"Redefinir filtros"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:410,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:409,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:349,columnNumber:11},void 0):T==="instituicao"?v.jsxDEV("div",{className:"bg-white border-r border-gray-100 flex flex-col h-full min-h-[60vh]",children:[v.jsxDEV("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:v.jsxDEV("span",{className:"text-sm text-gray-500 font-medium",children:[D.filter(R=>R.toLowerCase().includes(y.toLowerCase())).length," instituições encontradas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:421,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:420,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 pb-4",children:v.jsxDEV("div",{className:"relative",children:[v.jsxDEV(Wx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:427,columnNumber:17},void 0),v.jsxDEV("input",{type:"text",placeholder:"Busque por uma instituição",value:y,onChange:R=>N(R.target.value),className:"input-field pl-10"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:428,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:426,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:425,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-2 pb-4",children:v.jsxDEV("ul",{className:"divide-y divide-gray-50 max-h-[60vh] overflow-y-auto rounded-md border border-gray-100 bg-white",children:D.filter(R=>R.toLowerCase().includes(y.toLowerCase())).map(R=>v.jsxDEV("li",{className:"flex items-center px-4 py-2.5 hover:bg-gray-50 rounded-lg cursor-pointer",children:[v.jsxDEV("input",{type:"checkbox",className:"accent-success-500 mr-3",checked:c.includes(R),onChange:()=>oe(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:441,columnNumber:21},void 0),v.jsxDEV("span",{className:"text-gray-800 text-sm flex-1",children:R},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:447,columnNumber:21},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:440,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:438,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:437,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 py-4 border-t border-gray-100",children:v.jsxDEV("button",{onClick:()=>{N(""),u([])},className:"text-sm text-success-600 font-medium hover:underline",children:"Redefinir filtros"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:453,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:452,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:419,columnNumber:11},void 0):T==="regiao"?v.jsxDEV("div",{className:"bg-white border-r border-gray-100 flex flex-col h-full min-h-[60vh]",children:[v.jsxDEV("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:v.jsxDEV("span",{className:"text-sm text-gray-500 font-medium",children:[j.length," regiões encontradas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:467,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:466,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-2 pb-4",children:v.jsxDEV("ul",{className:"divide-y divide-gray-50 max-h-[60vh] overflow-y-auto rounded-md border border-gray-100 bg-white",children:j.map(R=>v.jsxDEV("li",{className:"flex items-center px-4 py-2.5 hover:bg-gray-50 rounded-lg cursor-pointer",children:[v.jsxDEV("input",{type:"checkbox",className:"accent-success-500 mr-3",checked:m.includes(R.sigla),onChange:()=>ye(R.sigla)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:475,columnNumber:21},void 0),v.jsxDEV("span",{className:"text-gray-800 text-sm flex-1",children:R.nome},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:481,columnNumber:21},void 0)]},R.sigla,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:474,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:472,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:471,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 py-4 border-t border-gray-100",children:v.jsxDEV("button",{onClick:()=>p([]),className:"text-sm text-success-600 font-medium hover:underline",children:"Redefinir filtros"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:487,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:486,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:465,columnNumber:11},void 0):T==="finalidade"?v.jsxDEV("div",{className:"bg-white border-r border-gray-100 flex flex-col h-full min-h-[60vh]",children:[v.jsxDEV("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:v.jsxDEV("span",{className:"text-sm text-gray-500 font-medium",children:[V.length," finalidades encontradas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:498,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:497,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-2 pb-4",children:v.jsxDEV("ul",{className:"divide-y divide-gray-50 max-h-[60vh] overflow-y-auto rounded-md border border-gray-100 bg-white",children:V.map(R=>v.jsxDEV("li",{className:"flex items-center px-4 py-2.5 hover:bg-gray-50 rounded-lg cursor-pointer",children:[v.jsxDEV("input",{type:"checkbox",className:"accent-success-500 mr-3",checked:g.includes(R),onChange:()=>te(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:506,columnNumber:21},void 0),v.jsxDEV("span",{className:"text-gray-800 text-sm flex-1",children:R},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:512,columnNumber:21},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:505,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:503,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:502,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 py-4 border-t border-gray-100",children:v.jsxDEV("button",{onClick:()=>b([]),className:"text-sm text-success-600 font-medium hover:underline",children:"Redefinir filtros"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:518,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:517,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:496,columnNumber:11},void 0):v.jsxDEV("div",{className:"bg-white border-r border-gray-100 flex flex-col h-full min-h-[60vh]",children:[v.jsxDEV("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:v.jsxDEV("span",{className:"text-sm text-gray-500 font-medium",children:[M.length," anos encontrados"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:529,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:528,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-2 pb-4",children:v.jsxDEV("ul",{className:"divide-y divide-gray-50 max-h-[60vh] overflow-y-auto rounded-md border border-gray-100 bg-white",children:M.map(R=>v.jsxDEV("li",{className:"flex items-center px-4 py-2.5 hover:bg-gray-50 rounded-lg cursor-pointer",children:[v.jsxDEV("input",{type:"checkbox",className:"accent-success-500 mr-3",checked:h.includes(R),onChange:()=>Q(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:537,columnNumber:21},void 0),v.jsxDEV("span",{className:"text-gray-800 text-sm flex-1",children:R},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:543,columnNumber:21},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:536,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:534,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:533,columnNumber:13},void 0),v.jsxDEV("div",{className:"px-6 py-4 border-t border-gray-100",children:v.jsxDEV("button",{onClick:()=>f([]),className:"text-sm text-success-600 font-medium hover:underline",children:"Redefinir filtros"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:549,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:548,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:527,columnNumber:11},void 0),v.jsxDEV("div",{className:"flex flex-col h-full min-h-[60vh] bg-gray-50",children:[v.jsxDEV("div",{className:"px-6 pt-6 pb-2 flex items-center justify-between",children:[v.jsxDEV("span",{className:"text-sm text-teal-600 font-medium",children:[fe," ",fe===1?"questão encontrada":"questões encontradas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:562,columnNumber:13},void 0),v.jsxDEV("button",{className:"text-xs text-gray-400 hover:text-gray-600",children:[v.jsxDEV(bg,{className:"inline h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:566,columnNumber:15},void 0)," Expandir"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:565,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:561,columnNumber:11},void 0),v.jsxDEV("div",{className:"px-6 pb-2",children:[v.jsxDEV("span",{className:"text-sm text-gray-700 font-medium",children:"Incluir questões"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:570,columnNumber:13},void 0),v.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:w.map(R=>v.jsxDEV("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>z(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:574,columnNumber:25},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:573,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:571,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:569,columnNumber:11},void 0),v.jsxDEV("div",{className:"px-6 pb-4",children:fe>0?v.jsxDEV(v.Fragment,{children:[v.jsxDEV("span",{className:"text-sm text-gray-700 font-medium",children:[fe," ",fe===1?"questão em:":"questões em:"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:582,columnNumber:17},void 0),v.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.map(R=>v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>$(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:586,columnNumber:35},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:585,columnNumber:21},void 0)),o.map(R=>v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>U(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:591,columnNumber:34},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:590,columnNumber:21},void 0)),c.map(R=>v.jsxDEV("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>oe(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:596,columnNumber:37},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:595,columnNumber:21},void 0)),h.map(R=>v.jsxDEV("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>Q(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:601,columnNumber:30},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:600,columnNumber:21},void 0)),m.map(R=>{var I;return v.jsxDEV("span",{className:"bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[((I=j.find(W=>W.sigla===R))==null?void 0:I.nome)||R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>ye(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:606,columnNumber:79},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:605,columnNumber:21},void 0)}),g.map(R=>v.jsxDEV("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[R," ",v.jsxDEV(Ss,{className:"h-3 w-3 cursor-pointer",onClick:()=>te(R)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:611,columnNumber:33},void 0)]},R,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:610,columnNumber:21},void 0))]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:583,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:581,columnNumber:15},void 0):v.jsxDEV("div",{className:"text-center py-4",children:[v.jsxDEV("span",{className:"text-sm text-gray-500",children:"Nenhum filtro selecionado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:618,columnNumber:17},void 0),v.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:"Selecione filtros nas abas ao lado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:619,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:617,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:579,columnNumber:11},void 0),P?v.jsxDEV("div",{className:"flex-1 overflow-y-auto px-6 pb-4",children:v.jsxDEV("div",{className:"space-y-4",children:ue.length>0?ue.map(R=>v.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[v.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[v.jsxDEV("div",{className:"flex items-center gap-2",children:[v.jsxDEV("span",{className:"text-xs bg-success-100 text-success-700 px-2 py-1 rounded-full font-medium",children:R.specialty},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:633,columnNumber:27},void 0),v.jsxDEV("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:[R.board," ",R.year]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:636,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:632,columnNumber:25},void 0),v.jsxDEV("div",{className:"flex items-center gap-1",children:[v.jsxDEV($2,{className:"h-3 w-3 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:641,columnNumber:27},void 0),v.jsxDEV("span",{className:"text-xs text-gray-500",children:"2 min"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:642,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:640,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:631,columnNumber:23},void 0),v.jsxDEV("h3",{className:"text-sm font-medium text-gray-900 mb-3 line-clamp-3",children:R.statement},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:646,columnNumber:23},void 0),v.jsxDEV("div",{className:"space-y-2 mb-3",children:[R.alternatives.slice(0,3).map(I=>v.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[v.jsxDEV("span",{className:"w-4 h-4 border border-gray-300 rounded flex items-center justify-center text-xs font-medium",children:I.letter},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:653,columnNumber:29},void 0),v.jsxDEV("span",{className:"line-clamp-1",children:I.text},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:656,columnNumber:29},void 0)]},I.id,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:652,columnNumber:27},void 0)),R.alternatives.length>3&&v.jsxDEV("div",{className:"text-xs text-gray-500",children:["+",R.alternatives.length-3," alternativas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:660,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:650,columnNumber:23},void 0),v.jsxDEV("div",{className:"flex items-center justify-between",children:v.jsxDEV("div",{className:"flex items-center gap-2",children:[v.jsxDEV("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${R.difficulty==="easy"?"bg-green-100 text-green-700":R.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:R.difficulty==="easy"?"Fácil":R.difficulty==="medium"?"Médio":"Difícil"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:668,columnNumber:27},void 0),v.jsxDEV("span",{className:"text-xs text-gray-500",children:[R.topic," • ",R.subtopic]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:676,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:667,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:666,columnNumber:23},void 0)]},R.id,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:630,columnNumber:21},void 0)):v.jsxDEV("div",{className:"text-center py-8",children:[v.jsxDEV(sm,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:685,columnNumber:21},void 0),v.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma questão encontrada"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:686,columnNumber:21},void 0),v.jsxDEV("p",{className:"text-gray-500",children:"Tente ajustar os filtros para encontrar questões."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:687,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:684,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:627,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:626,columnNumber:13},void 0):v.jsxDEV("div",{className:"flex-1 flex items-center justify-center px-6 pb-4",children:v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV(sm,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:695,columnNumber:17},void 0),v.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Selecione filtros para ver questões"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:696,columnNumber:17},void 0),v.jsxDEV("p",{className:"text-gray-500",children:"Escolha pelo menos um filtro nas abas ao lado para começar a filtrar questões."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:697,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:694,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:693,columnNumber:13},void 0),v.jsxDEV("div",{className:"flex-1"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:702,columnNumber:11},void 0),v.jsxDEV("div",{className:"sticky bottom-0 bg-white border-t border-gray-100 px-6 py-4 flex flex-col md:flex-row gap-2 md:gap-4 justify-end",children:[v.jsxDEV("button",{className:"px-6 py-2 rounded-lg border border-gray-200 text-gray-700 font-medium bg-white hover:bg-gray-50 transition-colors",children:"Criar lista"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:705,columnNumber:13},void 0),v.jsxDEV("button",{className:"px-6 py-2 rounded-lg border border-gray-200 text-gray-700 font-medium bg-white hover:bg-gray-50 transition-colors",children:"Criar simulado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:706,columnNumber:13},void 0),v.jsxDEV("button",{onClick:Ee,disabled:s.length===0&&o.length===0&&c.length===0&&h.length===0&&m.length===0&&g.length===0,className:"px-6 py-2 rounded-lg bg-teal-600 text-white font-semibold hover:bg-teal-700 transition-colors flex items-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Ver questões",v.jsxDEV(bg,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:713,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:707,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:704,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:560,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:346,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Questions.tsx",lineNumber:307,columnNumber:5},void 0)};function hA(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=hA(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function Me(){for(var r,e,t=0,i="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=hA(r))&&(i&&(i+=" "),i+=e);return i}var mp={},fA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}r.isUnsafeProperty=e})(fA);var x0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}r.isDeepKey=e})(x0);var N0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){var i;return typeof t=="string"||typeof t=="symbol"?t:Object.is((i=t==null?void 0:t.valueOf)==null?void 0:i.call(t),-0)?"-0":String(t)}r.toKey=e})(N0);var pp={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){const i=[],n=t.length;if(n===0)return i;let s=0,a="",o="",l=!1;for(t.charCodeAt(0)===46&&(i.push(""),s++);s<n;){const c=t[s];o?c==="\\"&&s+1<n?(s++,a+=t[s]):c===o?o="":a+=c:l?c==='"'||c==="'"?o=c:c==="]"?(l=!1,i.push(a),a=""):a+=c:c==="["?(l=!0,a&&(i.push(a),a="")):c==="."?a&&(i.push(a),a=""):a+=c,s++}return a&&i.push(a),i}r.toPath=e})(pp);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=fA,t=x0,i=N0,n=pp;function s(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?t.isDeepKey(l)?s(o,n.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=i.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return a(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function a(o,l,c){if(l.length===0)return c;let u=o;for(let h=0;h<l.length;h++){if(u==null||e.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}r.get=s})(mp);var aO=mp.get;const va=wn(aO);var mA={exports:{}},$e={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0=Symbol.for("react.transitional.element"),A0=Symbol.for("react.portal"),gp=Symbol.for("react.fragment"),vp=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),yp=Symbol.for("react.consumer"),xp=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Ep=Symbol.for("react.memo"),Sp=Symbol.for("react.lazy"),oO=Symbol.for("react.view_transition"),lO=Symbol.for("react.client.reference");function Ai(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case w0:switch(r=r.type,r){case gp:case bp:case vp:case wp:case Ap:case oO:return r;default:switch(r=r&&r.$$typeof,r){case xp:case Np:case Sp:case Ep:return r;case yp:return r;default:return e}}case A0:return e}}}$e.ContextConsumer=yp;$e.ContextProvider=xp;$e.Element=w0;$e.ForwardRef=Np;$e.Fragment=gp;$e.Lazy=Sp;$e.Memo=Ep;$e.Portal=A0;$e.Profiler=bp;$e.StrictMode=vp;$e.Suspense=wp;$e.SuspenseList=Ap;$e.isContextConsumer=function(r){return Ai(r)===yp};$e.isContextProvider=function(r){return Ai(r)===xp};$e.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===w0};$e.isForwardRef=function(r){return Ai(r)===Np};$e.isFragment=function(r){return Ai(r)===gp};$e.isLazy=function(r){return Ai(r)===Sp};$e.isMemo=function(r){return Ai(r)===Ep};$e.isPortal=function(r){return Ai(r)===A0};$e.isProfiler=function(r){return Ai(r)===bp};$e.isStrictMode=function(r){return Ai(r)===vp};$e.isSuspense=function(r){return Ai(r)===wp};$e.isSuspenseList=function(r){return Ai(r)===Ap};$e.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===gp||r===bp||r===vp||r===wp||r===Ap||typeof r=="object"&&r!==null&&(r.$$typeof===Sp||r.$$typeof===Ep||r.$$typeof===xp||r.$$typeof===yp||r.$$typeof===Np||r.$$typeof===lO||r.getModuleId!==void 0)};$e.typeOf=Ai;mA.exports=$e;var cO=mA.exports,Gt=r=>r===0?0:r>0?1:-1,xi=r=>typeof r=="number"&&r!=+r,La=r=>typeof r=="string"&&r.indexOf("%")===r.length-1,ne=r=>(typeof r=="number"||r instanceof Number)&&!xi(r),bn=r=>ne(r)||typeof r=="string",uO=0,Fc=r=>{var e=++uO;return"".concat(r||"").concat(e)},gr=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(e)&&typeof e!="string")return i;var s;if(La(e)){if(t==null)return i;var a=e.indexOf("%");s=t*parseFloat(e.slice(0,a))/100}else s=+e;return xi(s)&&(s=i),n&&t!=null&&s>t&&(s=t),s},pA=r=>{if(!Array.isArray(r))return!1;for(var e=r.length,t={},i=0;i<e;i++)if(!t[r[i]])t[r[i]]=!0;else return!0;return!1},Ps=(r,e)=>ne(r)&&ne(e)?t=>r+t*(e-r):()=>e;function dO(r,e,t){if(!(!r||!r.length))return r.find(i=>i&&(typeof e=="function"?e(i):va(i,e))===t)}var pt=r=>r===null||typeof r>"u",jh=r=>pt(r)?r:"".concat(r.charAt(0).toUpperCase()).concat(r.slice(1)),hO=["viewBox","children"],fO=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Qx=["points","pathLength"],yg={svg:hO,polygon:Qx,polyline:Qx},E0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],mO=(r,e)=>{if(!r||typeof r=="function"||typeof r=="boolean")return null;var t=r;if(A.isValidElement(r)&&(t=r.props),typeof t!="object"&&typeof t!="function")return null;var i={};return Object.keys(t).forEach(n=>{E0.includes(n)&&(i[n]=s=>t[n](t,s))}),i},pO=(r,e,t)=>i=>(r(e,t,i),null),Ih=(r,e,t)=>{if(r===null||typeof r!="object"&&typeof r!="function")return null;var i=null;return Object.keys(r).forEach(n=>{var s=r[n];E0.includes(n)&&typeof s=="function"&&(i||(i={}),i[n]=pO(s,e,t))}),i},Yx=r=>typeof r=="string"?r:r?r.displayName||r.name||"Component":"",Xx=null,xg=null,gA=r=>{if(r===Xx&&Array.isArray(xg))return xg;var e=[];return A.Children.forEach(r,t=>{pt(t)||(cO.isFragment(t)?e=e.concat(gA(t.props.children)):e.push(t))}),xg=e,Xx=r,e};function Lh(r,e){var t=[],i=[];return Array.isArray(e)?i=e.map(n=>Yx(n)):i=[Yx(e)],gA(r).forEach(n=>{var s=va(n,"type.displayName")||va(n,"type.name");i.indexOf(s)!==-1&&t.push(n)}),t}var gO=(r,e,t,i)=>{var n,s=(n=i&&(yg==null?void 0:yg[i]))!==null&&n!==void 0?n:[];return e.startsWith("data-")||typeof r!="function"&&(i&&s.includes(e)||fO.includes(e))||t&&E0.includes(e)},Le=(r,e,t)=>{if(!r||typeof r=="function"||typeof r=="boolean")return null;var i=r;if(A.isValidElement(r)&&(i=r.props),typeof i!="object"&&typeof i!="function")return null;var n={};return Object.keys(i).forEach(s=>{var a;gO((a=i)===null||a===void 0?void 0:a[s],s,e,t)&&(n[s]=i[s])}),n},vO=["children","width","height","viewBox","className","style","title","desc"];function nv(){return nv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},nv.apply(null,arguments)}function bO(r,e){if(r==null)return{};var t,i,n=yO(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function yO(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var S0=A.forwardRef((r,e)=>{var{children:t,width:i,height:n,viewBox:s,className:a,style:o,title:l,desc:c}=r,u=bO(r,vO),h=s||{width:i,height:n,x:0,y:0},f=Me("recharts-surface",a);return A.createElement("svg",nv({},Le(u,!0,"svg"),{className:f,width:i,height:n,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,l),A.createElement("desc",null,c),t)}),xO=["children","className"];function sv(){return sv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},sv.apply(null,arguments)}function NO(r,e){if(r==null)return{};var t,i,n=wO(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function wO(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var br=A.forwardRef((r,e)=>{var{children:t,className:i}=r,n=NO(r,xO),s=Me("recharts-layer",i);return A.createElement("g",sv({className:s},Le(n,!0),{ref:e}),t)}),vA=A.createContext(null),AO=()=>A.useContext(vA);function He(r){return function(){return r}}const bA=Math.cos,am=Math.sin,qi=Math.sqrt,om=Math.PI,_p=2*om,av=Math.PI,ov=2*av,Da=1e-6,EO=ov-Da;function yA(r){this._+=r[0];for(let e=1,t=r.length;e<t;++e)this._+=arguments[e]+r[e]}function SO(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return yA;const t=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*t)/t+i[n]}}class _O{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yA:SO(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,n){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,t,i,n,s,a){this._append`C${+e},${+t},${+i},${+n},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,i,n,s){if(e=+e,t=+t,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=i-e,c=n-t,u=a-e,h=o-t,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(f>Da)if(!(Math.abs(h*l-c*u)>Da)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let m=i-a,p=n-o,g=l*l+c*c,b=m*m+p*p,y=Math.sqrt(g),N=Math.sqrt(f),w=s*Math.tan((av-Math.acos((g+f-b)/(2*y*N)))/2),_=w/N,P=w/y;Math.abs(_-1)>Da&&this._append`L${e+_*u},${t+_*h}`,this._append`A${s},${s},0,0,${+(h*m>u*p)},${this._x1=e+P*l},${this._y1=t+P*c}`}}arc(e,t,i,n,s,a){if(e=+e,t=+t,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(n),l=i*Math.sin(n),c=e+o,u=t+l,h=1^a,f=a?n-s:s-n;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Da||Math.abs(this._y1-u)>Da)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%ov+ov),f>EO?this._append`A${i},${i},0,1,${h},${e-o},${t-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=u}`:f>Da&&this._append`A${i},${i},0,${+(f>=av)},${h},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function _0(r){let e=3;return r.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return r},()=>new _O(e)}function P0(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function xA(r){this._context=r}xA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function Pp(r){return new xA(r)}function NA(r){return r[0]}function wA(r){return r[1]}function AA(r,e){var t=He(!0),i=null,n=Pp,s=null,a=_0(o);r=typeof r=="function"?r:r===void 0?NA:He(r),e=typeof e=="function"?e:e===void 0?wA:He(e);function o(l){var c,u=(l=P0(l)).length,h,f=!1,m;for(i==null&&(s=n(m=a())),c=0;c<=u;++c)!(c<u&&t(h=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+r(h,c,l),+e(h,c,l));if(m)return s=null,m+""||null}return o.x=function(l){return arguments.length?(r=typeof l=="function"?l:He(+l),o):r},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:He(+l),o):e},o.defined=function(l){return arguments.length?(t=typeof l=="function"?l:He(!!l),o):t},o.curve=function(l){return arguments.length?(n=l,i!=null&&(s=n(i)),o):n},o.context=function(l){return arguments.length?(l==null?i=s=null:s=n(i=l),o):i},o}function nf(r,e,t){var i=null,n=He(!0),s=null,a=Pp,o=null,l=_0(c);r=typeof r=="function"?r:r===void 0?NA:He(+r),e=typeof e=="function"?e:He(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?wA:He(+t);function c(h){var f,m,p,g=(h=P0(h)).length,b,y=!1,N,w=new Array(g),_=new Array(g);for(s==null&&(o=a(N=l())),f=0;f<=g;++f){if(!(f<g&&n(b=h[f],f,h))===y)if(y=!y)m=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=f-1;p>=m;--p)o.point(w[p],_[p]);o.lineEnd(),o.areaEnd()}y&&(w[f]=+r(b,f,h),_[f]=+e(b,f,h),o.point(i?+i(b,f,h):w[f],t?+t(b,f,h):_[f]))}if(N)return o=null,N+""||null}function u(){return AA().defined(n).curve(a).context(s)}return c.x=function(h){return arguments.length?(r=typeof h=="function"?h:He(+h),i=null,c):r},c.x0=function(h){return arguments.length?(r=typeof h=="function"?h:He(+h),c):r},c.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:He(+h),c):i},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:He(+h),t=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:He(+h),c):e},c.y1=function(h){return arguments.length?(t=h==null?null:typeof h=="function"?h:He(+h),c):t},c.lineX0=c.lineY0=function(){return u().x(r).y(e)},c.lineY1=function(){return u().x(r).y(t)},c.lineX1=function(){return u().x(i).y(e)},c.defined=function(h){return arguments.length?(n=typeof h=="function"?h:He(!!h),c):n},c.curve=function(h){return arguments.length?(a=h,s!=null&&(o=a(s)),c):a},c.context=function(h){return arguments.length?(h==null?s=o=null:o=a(s=h),c):s},c}class EA{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function PO(r){return new EA(r,!0)}function CO(r){return new EA(r,!1)}const C0={draw(r,e){const t=qi(e/om);r.moveTo(t,0),r.arc(0,0,t,0,_p)}},DO={draw(r,e){const t=qi(e/5)/2;r.moveTo(-3*t,-t),r.lineTo(-t,-t),r.lineTo(-t,-3*t),r.lineTo(t,-3*t),r.lineTo(t,-t),r.lineTo(3*t,-t),r.lineTo(3*t,t),r.lineTo(t,t),r.lineTo(t,3*t),r.lineTo(-t,3*t),r.lineTo(-t,t),r.lineTo(-3*t,t),r.closePath()}},SA=qi(1/3),OO=SA*2,TO={draw(r,e){const t=qi(e/OO),i=t*SA;r.moveTo(0,-t),r.lineTo(i,0),r.lineTo(0,t),r.lineTo(-i,0),r.closePath()}},kO={draw(r,e){const t=qi(e),i=-t/2;r.rect(i,i,t,t)}},MO=.8908130915292852,_A=am(om/10)/am(7*om/10),RO=am(_p/10)*_A,jO=-bA(_p/10)*_A,IO={draw(r,e){const t=qi(e*MO),i=RO*t,n=jO*t;r.moveTo(0,-t),r.lineTo(i,n);for(let s=1;s<5;++s){const a=_p*s/5,o=bA(a),l=am(a);r.lineTo(l*t,-o*t),r.lineTo(o*i-l*n,l*i+o*n)}r.closePath()}},Ng=qi(3),LO={draw(r,e){const t=-qi(e/(Ng*3));r.moveTo(0,t*2),r.lineTo(-Ng*t,-t),r.lineTo(Ng*t,-t),r.closePath()}},ri=-.5,ii=qi(3)/2,lv=1/qi(12),UO=(lv/2+1)*3,FO={draw(r,e){const t=qi(e/UO),i=t/2,n=t*lv,s=i,a=t*lv+t,o=-s,l=a;r.moveTo(i,n),r.lineTo(s,a),r.lineTo(o,l),r.lineTo(ri*i-ii*n,ii*i+ri*n),r.lineTo(ri*s-ii*a,ii*s+ri*a),r.lineTo(ri*o-ii*l,ii*o+ri*l),r.lineTo(ri*i+ii*n,ri*n-ii*i),r.lineTo(ri*s+ii*a,ri*a-ii*s),r.lineTo(ri*o+ii*l,ri*l-ii*o),r.closePath()}};function VO(r,e){let t=null,i=_0(n);r=typeof r=="function"?r:He(r||C0),e=typeof e=="function"?e:He(e===void 0?64:+e);function n(){let s;if(t||(t=s=i()),r.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return n.type=function(s){return arguments.length?(r=typeof s=="function"?s:He(s),n):r},n.size=function(s){return arguments.length?(e=typeof s=="function"?s:He(+s),n):e},n.context=function(s){return arguments.length?(t=s??null,n):t},n}function lm(){}function cm(r,e,t){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+t)/6)}function PA(r){this._context=r}PA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cm(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function $O(r){return new PA(r)}function CA(r){this._context=r}CA.prototype={areaStart:lm,areaEnd:lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:cm(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function BO(r){return new CA(r)}function DA(r){this._context=r}DA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+r)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:cm(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function HO(r){return new DA(r)}function OA(r){this._context=r}OA.prototype={areaStart:lm,areaEnd:lm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function zO(r){return new OA(r)}function Zx(r){return r<0?-1:1}function Jx(r,e,t){var i=r._x1-r._x0,n=e-r._x1,s=(r._y1-r._y0)/(i||n<0&&-0),a=(t-r._y1)/(n||i<0&&-0),o=(s*n+a*i)/(i+n);return(Zx(s)+Zx(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function e1(r,e){var t=r._x1-r._x0;return t?(3*(r._y1-r._y0)/t-e)/2:e}function wg(r,e,t){var i=r._x0,n=r._y0,s=r._x1,a=r._y1,o=(s-i)/3;r._context.bezierCurveTo(i+o,n+o*e,s-o,a-o*t,s,a)}function um(r){this._context=r}um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wg(this,this._t0,e1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var t=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,wg(this,e1(this,t=Jx(this,r,e)),t);break;default:wg(this,this._t0,t=Jx(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=t}}};function TA(r){this._context=new kA(r)}(TA.prototype=Object.create(um.prototype)).point=function(r,e){um.prototype.point.call(this,e,r)};function kA(r){this._context=r}kA.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,t,i,n,s){this._context.bezierCurveTo(e,r,i,t,s,n)}};function qO(r){return new um(r)}function WO(r){return new TA(r)}function MA(r){this._context=r}MA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,t=r.length;if(t)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),t===2)this._context.lineTo(r[1],e[1]);else for(var i=t1(r),n=t1(e),s=0,a=1;a<t;++s,++a)this._context.bezierCurveTo(i[0][s],n[0][s],i[1][s],n[1][s],r[a],e[a]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function t1(r){var e,t=r.length-1,i,n=new Array(t),s=new Array(t),a=new Array(t);for(n[0]=0,s[0]=2,a[0]=r[0]+2*r[1],e=1;e<t-1;++e)n[e]=1,s[e]=4,a[e]=4*r[e]+2*r[e+1];for(n[t-1]=2,s[t-1]=7,a[t-1]=8*r[t-1]+r[t],e=1;e<t;++e)i=n[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(n[t-1]=a[t-1]/s[t-1],e=t-2;e>=0;--e)n[e]=(a[e]-n[e+1])/s[e];for(s[t-1]=(r[t]+n[t-1])/2,e=0;e<t-1;++e)s[e]=2*r[e+1]-n[e+1];return[n,s]}function GO(r){return new MA(r)}function Cp(r,e){this._context=r,this._t=e}Cp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var t=this._x*(1-this._t)+r*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=r,this._y=e}};function KO(r){return new Cp(r,.5)}function QO(r){return new Cp(r,0)}function YO(r){return new Cp(r,1)}function Vc(r,e){if((a=r.length)>1)for(var t=1,i,n,s=r[e[0]],a,o=s.length;t<a;++t)for(n=s,s=r[e[t]],i=0;i<o;++i)s[i][1]+=s[i][0]=isNaN(n[i][1])?n[i][0]:n[i][1]}function cv(r){for(var e=r.length,t=new Array(e);--e>=0;)t[e]=e;return t}function XO(r,e){return r[e]}function ZO(r){const e=[];return e.key=r,e}function JO(){var r=He([]),e=cv,t=Vc,i=XO;function n(s){var a=Array.from(r.apply(this,arguments),ZO),o,l=a.length,c=-1,u;for(const h of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+i(h,a[o].key,c,s)]).data=h;for(o=0,u=P0(e(a));o<l;++o)a[u[o]].index=o;return t(a,u),a}return n.keys=function(s){return arguments.length?(r=typeof s=="function"?s:He(Array.from(s)),n):r},n.value=function(s){return arguments.length?(i=typeof s=="function"?s:He(+s),n):i},n.order=function(s){return arguments.length?(e=s==null?cv:typeof s=="function"?s:He(Array.from(s)),n):e},n.offset=function(s){return arguments.length?(t=s??Vc,n):t},n}function eT(r,e){if((i=r.length)>0){for(var t,i,n=0,s=r[0].length,a;n<s;++n){for(a=t=0;t<i;++t)a+=r[t][n][1]||0;if(a)for(t=0;t<i;++t)r[t][n][1]/=a}Vc(r,e)}}function tT(r,e){if((n=r.length)>0){for(var t=0,i=r[e[0]],n,s=i.length;t<s;++t){for(var a=0,o=0;a<n;++a)o+=r[a][t][1]||0;i[t][1]+=i[t][0]=-o/2}Vc(r,e)}}function rT(r,e){if(!(!((a=r.length)>0)||!((s=(n=r[e[0]]).length)>0))){for(var t=0,i=1,n,s,a;i<s;++i){for(var o=0,l=0,c=0;o<a;++o){for(var u=r[e[o]],h=u[i][1]||0,f=u[i-1][1]||0,m=(h-f)/2,p=0;p<o;++p){var g=r[e[p]],b=g[i][1]||0,y=g[i-1][1]||0;m+=b-y}l+=h,c+=m*h}n[i-1][1]+=n[i-1][0]=t,l&&(t-=c/l)}n[i-1][1]+=n[i-1][0]=t,Vc(r,e)}}var iT=["type","size","sizeType"];function uv(){return uv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},uv.apply(null,arguments)}function r1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function i1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r1(Object(t),!0).forEach(function(i){nT(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):r1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function nT(r,e,t){return(e=sT(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sT(r){var e=aT(r,"string");return typeof e=="symbol"?e:e+""}function aT(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function oT(r,e){if(r==null)return{};var t,i,n=lT(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function lT(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var RA={symbolCircle:C0,symbolCross:DO,symbolDiamond:TO,symbolSquare:kO,symbolStar:IO,symbolTriangle:LO,symbolWye:FO},cT=Math.PI/180,uT=r=>{var e="symbol".concat(jh(r));return RA[e]||C0},dT=(r,e,t)=>{if(e==="area")return r;switch(t){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var i=18*cT;return 1.25*r*r*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},hT=(r,e)=>{RA["symbol".concat(jh(r))]=e},D0=r=>{var{type:e="circle",size:t=64,sizeType:i="area"}=r,n=oT(r,iT),s=i1(i1({},n),{},{type:e,size:t,sizeType:i}),a=()=>{var h=uT(e),f=VO().type(h).size(dT(t,i,e));return f()},{className:o,cx:l,cy:c}=s,u=Le(s,!0);return l===+l&&c===+c&&t===+t?A.createElement("path",uv({},u,{className:Me("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(c,")"),d:a()})):null};D0.registerSymbol=hT;function dv(){return dv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},dv.apply(null,arguments)}function n1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function fT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n1(Object(t),!0).forEach(function(i){O0(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):n1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function O0(r,e,t){return(e=mT(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mT(r){var e=pT(r,"string");return typeof e=="symbol"?e:e+""}function pT(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var ni=32;class T0 extends A.PureComponent{renderIcon(e,t){var{inactiveColor:i}=this.props,n=ni/2,s=ni/6,a=ni/3,o=e.inactive?i:e.color,l=t??e.type;if(l==="none")return null;if(l==="plainline")return A.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:ni,y2:n,className:"recharts-legend-icon"});if(l==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(n,`
            H`).concat(ni,"M").concat(2*a,",").concat(n,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(n),className:"recharts-legend-icon"});if(l==="rect")return A.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(ni/8,"h").concat(ni,"v").concat(ni*3/4,"h").concat(-ni,"z"),className:"recharts-legend-icon"});if(A.isValidElement(e.legendIcon)){var c=fT({},e);return delete c.legendIcon,A.cloneElement(e.legendIcon,c)}return A.createElement(D0,{fill:o,cx:n,cy:n,size:ni,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:t,layout:i,formatter:n,inactiveColor:s,iconType:a}=this.props,o={x:0,y:0,width:ni,height:ni},l={display:i==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((u,h)=>{var f=u.formatter||n,m=Me({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var p=u.inactive?s:u.color,g=f?f(u.value,u,h):u.value;return A.createElement("li",dv({className:m,style:l,key:"legend-item-".concat(h)},Ih(this.props,u,h)),A.createElement(S0,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,a)),A.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},g))})}render(){var{payload:e,layout:t,align:i}=this.props;if(!e||!e.length)return null;var n={padding:0,margin:0,textAlign:t==="horizontal"?i:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}O0(T0,"displayName","Legend");O0(T0,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var jA={},IA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,i){const n=new Map;for(let s=0;s<t.length;s++){const a=t[s],o=i(a);n.has(o)||n.set(o,a)}return Array.from(n.values())}r.uniqBy=e})(IA);var k0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t}r.identity=e})(k0);var LA={},Dp={},UA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}r.isLength=e})(UA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=UA;function t(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}r.isArrayLike=t})(Dp);var FA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}r.isObjectLike=e})(FA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Dp,t=FA;function i(n){return t.isObjectLike(n)&&e.isArrayLike(n)}r.isArrayLikeObject=i})(LA);var VA={},$A={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=mp;function t(i){return function(n){return e.get(n,i)}}r.property=t})($A);var BA={},Ag={},Eg={},M0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}r.isObject=e})(M0);var R0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}r.isPrimitive=e})(R0);var Op={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,i){return t===i||Number.isNaN(t)&&Number.isNaN(i)}r.eq=e})(Op);var s1;function gT(){return s1||(s1=1,function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=j0(),t=M0,i=R0,n=Op;function s(h,f,m){return typeof m!="function"?e.isMatch(h,f):a(h,f,function p(g,b,y,N,w,_){const P=m(g,b,y,N,w,_);return P!==void 0?!!P:a(g,b,p,_)},new Map)}function a(h,f,m,p){if(f===h)return!0;switch(typeof f){case"object":return o(h,f,m,p);case"function":return Object.keys(f).length>0?a(h,{...f},m,p):n.eq(h,f);default:return t.isObject(h)?typeof f=="string"?f==="":!0:n.eq(h,f)}}function o(h,f,m,p){if(f==null)return!0;if(Array.isArray(f))return c(h,f,m,p);if(f instanceof Map)return l(h,f,m,p);if(f instanceof Set)return u(h,f,m,p);const g=Object.keys(f);if(h==null)return g.length===0;if(g.length===0)return!0;if(p&&p.has(f))return p.get(f)===h;p&&p.set(f,h);try{for(let b=0;b<g.length;b++){const y=g[b];if(!i.isPrimitive(h)&&!(y in h)||f[y]===void 0&&h[y]!==void 0||f[y]===null&&h[y]!==null||!m(h[y],f[y],y,h,f,p))return!1}return!0}finally{p&&p.delete(f)}}function l(h,f,m,p){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[g,b]of f.entries()){const y=h.get(g);if(m(y,b,g,h,f,p)===!1)return!1}return!0}function c(h,f,m,p){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const g=new Set;for(let b=0;b<f.length;b++){const y=f[b];let N=!1;for(let w=0;w<h.length;w++){if(g.has(w))continue;const _=h[w];let P=!1;if(m(_,y,b,h,f,p)&&(P=!0),P){g.add(w),N=!0;break}}if(!N)return!1}return!0}function u(h,f,m,p){return f.size===0?!0:h instanceof Set?c([...h],[...f],m,p):!1}r.isMatchWith=s,r.isSetMatch=u}(Eg)),Eg}var a1;function j0(){return a1||(a1=1,function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=gT();function t(i,n){return e.isMatchWith(i,n,()=>{})}r.isMatch=t}(Ag)),Ag}var HA={},I0={},L0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(i=>Object.prototype.propertyIsEnumerable.call(t,i))}r.getSymbols=e})(L0);var Tp={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}r.getTag=e})(Tp);var kp={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",i="[object Number]",n="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",p="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",N="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",P="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",C="[object BigInt64Array]",D="[object Float32Array]",k="[object Float64Array]";r.argumentsTag=s,r.arrayBufferTag=f,r.arrayTag=u,r.bigInt64ArrayTag=C,r.bigUint64ArrayTag=_,r.booleanTag=n,r.dataViewTag=g,r.dateTag=o,r.errorTag=p,r.float32ArrayTag=D,r.float64ArrayTag=k,r.functionTag=h,r.int16ArrayTag=O,r.int32ArrayTag=T,r.int8ArrayTag=P,r.mapTag=l,r.numberTag=i,r.objectTag=m,r.regexpTag=e,r.setTag=c,r.stringTag=t,r.symbolTag=a,r.uint16ArrayTag=N,r.uint32ArrayTag=w,r.uint8ArrayTag=b,r.uint8ClampedArrayTag=y})(kp);var zA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}r.isTypedArray=e})(zA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=L0,t=Tp,i=kp,n=R0,s=zA;function a(u,h){return o(u,void 0,u,new Map,h)}function o(u,h,f,m=new Map,p=void 0){const g=p==null?void 0:p(u,h,f,m);if(g!=null)return g;if(n.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const b=new Array(u.length);m.set(u,b);for(let y=0;y<u.length;y++)b[y]=o(u[y],y,f,m,p);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;m.set(u,b);for(const[y,N]of u)b.set(y,o(N,y,f,m,p));return b}if(u instanceof Set){const b=new Set;m.set(u,b);for(const y of u)b.add(o(y,void 0,f,m,p));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,b);for(let y=0;y<u.length;y++)b[y]=o(u[y],y,f,m,p);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,b),l(b,u,f,m,p),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return m.set(u,b),l(b,u,f,m,p),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return m.set(u,b),l(b,u,f,m,p),b}if(u instanceof Error){const b=new u.constructor;return m.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,f,m,p),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return m.set(u,b),l(b,u,f,m,p),b}return u}function l(u,h,f=u,m,p){const g=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<g.length;b++){const y=g[b],N=Object.getOwnPropertyDescriptor(u,y);(N==null||N.writable)&&(u[y]=o(h[y],y,f,m,p))}}function c(u){switch(t.getTag(u)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}r.cloneDeepWith=a,r.cloneDeepWithImpl=o,r.copyProperties=l})(I0);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=I0;function t(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}r.cloneDeep=t})(HA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=j0(),t=HA;function i(n){return n=t.cloneDeep(n),s=>e.isMatch(s,n)}r.matches=i})(BA);var qA={},WA={},GA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=I0,t=kp;function i(n,s){return e.cloneDeepWith(n,(a,o,l,c)=>{const u=s==null?void 0:s(a,o,l,c);if(u!=null)return u;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case t.numberTag:case t.stringTag:case t.booleanTag:{const h=new n.constructor(n==null?void 0:n.valueOf());return e.copyProperties(h,n),h}case t.argumentsTag:{const h={};return e.copyProperties(h,n),h.length=n.length,h[Symbol.iterator]=n[Symbol.iterator],h}default:return}})}r.cloneDeepWith=i})(GA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=GA;function t(i){return e.cloneDeepWith(i)}r.cloneDeep=t})(WA);var KA={},U0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(i,n=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<n;case"symbol":return!1;case"string":return e.test(i)}}r.isIndex=t})(U0);var QA={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=Tp;function t(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}r.isArguments=t})(QA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=x0,t=U0,i=QA,n=pp;function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=n.toPath(o):l=[o],l.length===0)return!1;let c=a;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||i.isArguments(c))&&t.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}r.has=s})(KA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=j0(),t=N0,i=WA,n=mp,s=KA;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return l=i.cloneDeep(l),function(c){const u=n.get(c,o);return u===void 0?s.has(c,o):l===void 0?u===void 0:e.isMatch(u,l)}}r.matchesProperty=a})(qA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=k0,t=$A,i=BA,n=qA;function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?n.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return t.property(a)}}r.iteratee=s})(VA);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=IA,t=k0,i=LA,n=VA;function s(a,o=t.identity){return i.isArrayLikeObject(a)?e.uniqBy(Array.from(a),n.iteratee(o)):[]}r.uniqBy=s})(jA);var vT=jA.uniqBy;const o1=wn(vT);function YA(r,e,t){return e===!0?o1(r,t):typeof e=="function"?o1(r,e):r}var XA={exports:{}},ZA={},JA={exports:{}},eE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c=A;function bT(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var yT=typeof Object.is=="function"?Object.is:bT,xT=$c.useState,NT=$c.useEffect,wT=$c.useLayoutEffect,AT=$c.useDebugValue;function ET(r,e){var t=e(),i=xT({inst:{value:t,getSnapshot:e}}),n=i[0].inst,s=i[1];return wT(function(){n.value=t,n.getSnapshot=e,Sg(n)&&s({inst:n})},[r,t,e]),NT(function(){return Sg(n)&&s({inst:n}),r(function(){Sg(n)&&s({inst:n})})},[r]),AT(t),t}function Sg(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!yT(r,t)}catch{return!0}}function ST(r,e){return e()}var _T=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ST:ET;eE.useSyncExternalStore=$c.useSyncExternalStore!==void 0?$c.useSyncExternalStore:_T;JA.exports=eE;var PT=JA.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=A,CT=PT;function DT(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var OT=typeof Object.is=="function"?Object.is:DT,TT=CT.useSyncExternalStore,kT=Mp.useRef,MT=Mp.useEffect,RT=Mp.useMemo,jT=Mp.useDebugValue;ZA.useSyncExternalStoreWithSelector=function(r,e,t,i,n){var s=kT(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=RT(function(){function l(m){if(!c){if(c=!0,u=m,m=i(m),n!==void 0&&a.hasValue){var p=a.value;if(n(p,m))return h=p}return h=m}if(p=h,OT(u,m))return p;var g=i(m);return n!==void 0&&n(p,g)?(u=m,p):(u=m,h=g)}var c=!1,u,h,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,i,n]);var o=TT(r,s[0],s[1]);return MT(function(){a.hasValue=!0,a.value=o},[o]),jT(o),o};XA.exports=ZA;var IT=XA.exports,F0=A.createContext(null),LT=r=>r,Xe=()=>{var r=A.useContext(F0);return r?r.store.dispatch:LT},Pf=()=>{},UT=()=>Pf,FT=(r,e)=>r===e;function ae(r){var e=A.useContext(F0);return IT.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:UT,e?e.store.getState:Pf,e?e.store.getState:Pf,e?r:Pf,FT)}function VT(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function $T(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function BT(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var l1=r=>Array.isArray(r)?r:[r];function HT(r){const e=Array.isArray(r[0])?r[0]:r;return BT(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function zT(r,e){const t=[],{length:i}=r;for(let n=0;n<i;n++)t.push(r[n].apply(null,e));return t}var qT=class{constructor(r){this.value=r}deref(){return this.value}},WT=typeof WeakRef<"u"?WeakRef:qT,GT=0,c1=1;function sf(){return{s:GT,v:void 0,o:null,p:null}}function tE(r,e={}){let t=sf();const{resultEqualityCheck:i}=e;let n,s=0;function a(){var h;let o=t;const{length:l}=arguments;for(let f=0,m=l;f<m;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const b=g.get(p);b===void 0?(o=sf(),g.set(p,o)):o=b}else{let g=o.p;g===null&&(o.p=g=new Map);const b=g.get(p);b===void 0?(o=sf(),g.set(p,o)):o=b}}const c=o;let u;if(o.s===c1)u=o.v;else if(u=r.apply(null,arguments),s++,i){const f=((h=n==null?void 0:n.deref)==null?void 0:h.call(n))??n;f!=null&&i(f,u)&&(u=f,s!==0&&s--),n=typeof u=="object"&&u!==null||typeof u=="function"?new WT(u):u}return c.s=c1,c.v=u,u}return a.clearCache=()=>{t=sf(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function KT(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,i=(...n)=>{let s=0,a=0,o,l={},c=n.pop();typeof c=="object"&&(l=c,c=n.pop()),VT(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...t,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:m=tE,argsMemoizeOptions:p=[]}=u,g=l1(f),b=l1(p),y=HT(n),N=h(function(){return s++,c.apply(null,arguments)},...g),w=m(function(){a++;const P=zT(y,arguments);return o=N.apply(null,P),o},...b);return Object.assign(w,{resultFunc:c,memoizedResultFunc:N,dependencies:y,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:m})};return Object.assign(i,{withTypes:()=>i}),i}var L=KT(tE),QT=Object.assign((r,e=L)=>{$T(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),i=t.map(s=>r[s]);return e(i,(...s)=>s.reduce((a,o,l)=>(a[t[l]]=o,a),{}))},{withTypes:()=>QT}),rE={},iE={},nE={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const t=(i,n,s)=>{if(i!==n){const a=e(i),o=e(n);if(a===o&&a===0){if(i<n)return s==="desc"?1:-1;if(i>n)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};r.compareValues=t})(nE);var sE={},V0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}r.isSymbol=e})(V0);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=V0,t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function n(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!t.test(s))||a!=null&&Object.hasOwn(a,s)}r.isKey=n})(sE);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=nE,t=sE,i=pp;function n(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const c=(m,p)=>{let g=m;for(let b=0;b<p.length&&g!=null;++b)g=g[p[b]];return g},u=(m,p)=>p==null||m==null?p:typeof m=="object"&&"key"in m?Object.hasOwn(p,m.key)?p[m.key]:c(p,m.path):typeof m=="function"?m(p):Array.isArray(m)?c(p,m):typeof p=="object"?p[m]:p,h=a.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||t.isKey(m)?m:{key:m,path:i.toPath(m)}));return s.map(m=>({original:m,criteria:h.map(p=>u(p,m))})).slice().sort((m,p)=>{for(let g=0;g<h.length;g++){const b=e.compareValues(m.criteria[g],p.criteria[g],o[g]);if(b!==0)return b}return 0}).map(m=>m.original)}r.orderBy=n})(iE);var aE={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,i=1){const n=[],s=Math.floor(i),a=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<s?a(u,l+1):n.push(u)}};return a(t,0),n}r.flatten=e})(aE);var $0={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=U0,t=Dp,i=M0,n=Op;function s(a,o,l){return i.isObject(l)&&(typeof o=="number"&&t.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?n.eq(l[o],a):!1}r.isIterateeCall=s})($0);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=iE,t=aE,i=$0;function n(s,...a){const o=a.length;return o>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,t.flatten(a),["asc"])}r.sortBy=n})(rE);var YT=rE.sortBy;const Rp=wn(YT);var oE=r=>r.legend.settings,XT=r=>r.legend.size,ZT=r=>r.legend.payload,JT=L([ZT,oE],(r,e)=>{var{itemSorter:t}=e,i=r.flat(1);return t?Rp(i,t):i});function ek(){return ae(JT)}var af=1;function lE(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=A.useState({height:0,left:0,top:0,width:0}),i=A.useCallback(n=>{if(n!=null){var s=n.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>af||Math.abs(a.left-e.left)>af||Math.abs(a.top-e.top)>af||Math.abs(a.width-e.width)>af)&&t({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...r]);return[e,i]}function Ht(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var tk=typeof Symbol=="function"&&Symbol.observable||"@@observable",u1=tk,_g=()=>Math.random().toString(36).substring(7).split("").join("."),rk={INIT:`@@redux/INIT${_g()}`,REPLACE:`@@redux/REPLACE${_g()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_g()}`},dm=rk;function B0(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function cE(r,e,t){if(typeof r!="function")throw new Error(Ht(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ht(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ht(1));return t(cE)(r,e)}let i=r,n=e,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((b,y)=>{a.set(y,b)}))}function u(){if(l)throw new Error(Ht(3));return n}function h(b){if(typeof b!="function")throw new Error(Ht(4));if(l)throw new Error(Ht(5));let y=!0;c();const N=o++;return a.set(N,b),function(){if(y){if(l)throw new Error(Ht(6));y=!1,c(),a.delete(N),s=null}}}function f(b){if(!B0(b))throw new Error(Ht(7));if(typeof b.type>"u")throw new Error(Ht(8));if(typeof b.type!="string")throw new Error(Ht(17));if(l)throw new Error(Ht(9));try{l=!0,n=i(n,b)}finally{l=!1}return(s=a).forEach(N=>{N()}),b}function m(b){if(typeof b!="function")throw new Error(Ht(10));i=b,f({type:dm.REPLACE})}function p(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ht(11));function N(){const _=y;_.next&&_.next(u())}return N(),{unsubscribe:b(N)}},[u1](){return this}}}return f({type:dm.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:m,[u1]:p}}function ik(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:dm.INIT})>"u")throw new Error(Ht(12));if(typeof t(void 0,{type:dm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ht(13))})}function uE(r){const e=Object.keys(r),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof r[a]=="function"&&(t[a]=r[a])}const i=Object.keys(t);let n;try{ik(t)}catch(s){n=s}return function(a={},o){if(n)throw n;let l=!1;const c={};for(let u=0;u<i.length;u++){const h=i[u],f=t[h],m=a[h],p=f(m,o);if(typeof p>"u")throw o&&o.type,new Error(Ht(14));c[h]=p,l=l||p!==m}return l=l||i.length!==Object.keys(a).length,l?c:a}}function hm(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...i)=>e(t(...i)))}function nk(...r){return e=>(t,i)=>{const n=e(t,i);let s=()=>{throw new Error(Ht(15))};const a={getState:n.getState,dispatch:(l,...c)=>s(l,...c)},o=r.map(l=>l(a));return s=hm(...o)(n.dispatch),{...n,dispatch:s}}}function dE(r){return B0(r)&&"type"in r&&typeof r.type=="string"}var hE=Symbol.for("immer-nothing"),d1=Symbol.for("immer-draftable"),Zr=Symbol.for("immer-state");function Vi(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Bc=Object.getPrototypeOf;function Jo(r){return!!r&&!!r[Zr]}function fs(r){var e;return r?fE(r)||Array.isArray(r)||!!r[d1]||!!((e=r.constructor)!=null&&e[d1])||Ip(r)||Lp(r):!1}var sk=Object.prototype.constructor.toString();function fE(r){if(!r||typeof r!="object")return!1;const e=Bc(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===sk}function fm(r,e){jp(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,i)=>e(i,t,r))}function jp(r){const e=r[Zr];return e?e.type_:Array.isArray(r)?1:Ip(r)?2:Lp(r)?3:0}function hv(r,e){return jp(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function mE(r,e,t){const i=jp(r);i===2?r.set(e,t):i===3?r.add(t):r[e]=t}function ak(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function Ip(r){return r instanceof Map}function Lp(r){return r instanceof Set}function Oa(r){return r.copy_||r.base_}function fv(r,e){if(Ip(r))return new Map(r);if(Lp(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=fE(r);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(r);delete i[Zr];let n=Reflect.ownKeys(i);for(let s=0;s<n.length;s++){const a=n[s],o=i[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[a]})}return Object.create(Bc(r),i)}else{const i=Bc(r);if(i!==null&&t)return{...r};const n=Object.create(i);return Object.assign(n,r)}}function H0(r,e=!1){return Up(r)||Jo(r)||!fs(r)||(jp(r)>1&&(r.set=r.add=r.clear=r.delete=ok),Object.freeze(r),e&&Object.entries(r).forEach(([t,i])=>H0(i,!0))),r}function ok(){Vi(2)}function Up(r){return Object.isFrozen(r)}var lk={};function el(r){const e=lk[r];return e||Vi(0,r),e}var Wu;function pE(){return Wu}function ck(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function h1(r,e){e&&(el("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function mv(r){pv(r),r.drafts_.forEach(uk),r.drafts_=null}function pv(r){r===Wu&&(Wu=r.parent_)}function f1(r){return Wu=ck(Wu,r)}function uk(r){const e=r[Zr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function m1(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[Zr].modified_&&(mv(e),Vi(4)),fs(r)&&(r=mm(e,r),e.parent_||pm(e,r)),e.patches_&&el("Patches").generateReplacementPatches_(t[Zr].base_,r,e.patches_,e.inversePatches_)):r=mm(e,t,[]),mv(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==hE?r:void 0}function mm(r,e,t){if(Up(e))return e;const i=e[Zr];if(!i)return fm(e,(n,s)=>p1(r,i,e,n,s,t)),e;if(i.scope_!==r)return e;if(!i.modified_)return pm(r,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const n=i.copy_;let s=n,a=!1;i.type_===3&&(s=new Set(n),n.clear(),a=!0),fm(s,(o,l)=>p1(r,i,n,o,l,t,a)),pm(r,n,!1),t&&r.patches_&&el("Patches").generatePatches_(i,t,r.patches_,r.inversePatches_)}return i.copy_}function p1(r,e,t,i,n,s,a){if(Jo(n)){const o=s&&e&&e.type_!==3&&!hv(e.assigned_,i)?s.concat(i):void 0,l=mm(r,n,o);if(mE(t,i,l),Jo(l))r.canAutoFreeze_=!1;else return}else a&&t.add(n);if(fs(n)&&!Up(n)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;mm(r,n),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&pm(r,n)}}function pm(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&H0(e,t)}function dk(r,e){const t=Array.isArray(r),i={type_:t?1:0,scope_:e?e.scope_:pE(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=i,s=z0;t&&(n=[i],s=Gu);const{revoke:a,proxy:o}=Proxy.revocable(n,s);return i.draft_=o,i.revoke_=a,o}var z0={get(r,e){if(e===Zr)return r;const t=Oa(r);if(!hv(t,e))return hk(r,t,e);const i=t[e];return r.finalized_||!fs(i)?i:i===Pg(r.base_,e)?(Cg(r),r.copy_[e]=vv(i,r)):i},has(r,e){return e in Oa(r)},ownKeys(r){return Reflect.ownKeys(Oa(r))},set(r,e,t){const i=gE(Oa(r),e);if(i!=null&&i.set)return i.set.call(r.draft_,t),!0;if(!r.modified_){const n=Pg(Oa(r),e),s=n==null?void 0:n[Zr];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(ak(t,n)&&(t!==void 0||hv(r.base_,e)))return!0;Cg(r),gv(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Pg(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,Cg(r),gv(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Oa(r),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Vi(11)},getPrototypeOf(r){return Bc(r.base_)},setPrototypeOf(){Vi(12)}},Gu={};fm(z0,(r,e)=>{Gu[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Gu.deleteProperty=function(r,e){return Gu.set.call(this,r,e,void 0)};Gu.set=function(r,e,t){return z0.set.call(this,r[0],e,t,r[0])};function Pg(r,e){const t=r[Zr];return(t?Oa(t):r)[e]}function hk(r,e,t){var n;const i=gE(e,t);return i?"value"in i?i.value:(n=i.get)==null?void 0:n.call(r.draft_):void 0}function gE(r,e){if(!(e in r))return;let t=Bc(r);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Bc(t)}}function gv(r){r.modified_||(r.modified_=!0,r.parent_&&gv(r.parent_))}function Cg(r){r.copy_||(r.copy_=fv(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var fk=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...c){return a.produce(l,u=>t.call(this,u,...c))}}typeof t!="function"&&Vi(6),i!==void 0&&typeof i!="function"&&Vi(7);let n;if(fs(e)){const s=f1(this),a=vv(e,void 0);let o=!0;try{n=t(a),o=!1}finally{o?mv(s):pv(s)}return h1(s,i),m1(n,s)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===hE&&(n=void 0),this.autoFreeze_&&H0(n,!0),i){const s=[],a=[];el("Patches").generateReplacementPatches_(e,n,s,a),i(s,a)}return n}else Vi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let i,n;return[this.produce(e,t,(a,o)=>{i=a,n=o}),i,n]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){fs(r)||Vi(8),Jo(r)&&(r=pa(r));const e=f1(this),t=vv(r,void 0);return t[Zr].isManual_=!0,pv(e),t}finishDraft(r,e){const t=r&&r[Zr];(!t||!t.isManual_)&&Vi(9);const{scope_:i}=t;return h1(i,e),m1(void 0,i)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const n=e[t];if(n.path.length===0&&n.op==="replace"){r=n.value;break}}t>-1&&(e=e.slice(t+1));const i=el("Patches").applyPatches_;return Jo(r)?i(r,e):this.produce(r,n=>i(n,e))}};function vv(r,e){const t=Ip(r)?el("MapSet").proxyMap_(r,e):Lp(r)?el("MapSet").proxySet_(r,e):dk(r,e);return(e?e.scope_:pE()).drafts_.push(t),t}function pa(r){return Jo(r)||Vi(10,r),vE(r)}function vE(r){if(!fs(r)||Up(r))return r;const e=r[Zr];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=fv(r,e.scope_.immer_.useStrictShallowCopy_)}else t=fv(r,!0);return fm(t,(i,n)=>{mE(t,i,vE(n))}),e&&(e.finalized_=!1),t}var Jr=new fk,bE=Jr.produce;Jr.produceWithPatches.bind(Jr);Jr.setAutoFreeze.bind(Jr);Jr.setUseStrictShallowCopy.bind(Jr);Jr.applyPatches.bind(Jr);Jr.createDraft.bind(Jr);Jr.finishDraft.bind(Jr);function yE(r){return({dispatch:t,getState:i})=>n=>s=>typeof s=="function"?s(t,i,r):n(s)}var mk=yE(),pk=yE,gk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hm:hm.apply(null,arguments)};function Ni(r,e){function t(...i){if(e){let n=e(...i);if(!n)throw new Error(Yr(0));return{type:r,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:r,payload:i[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=i=>dE(i)&&i.type===r,t}var xE=class Eu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Eu.prototype)}static get[Symbol.species](){return Eu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Eu(...e[0].concat(this)):new Eu(...e.concat(this))}};function g1(r){return fs(r)?bE(r,()=>{}):r}function of(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function vk(r){return typeof r=="boolean"}var bk=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let a=new xE;return t&&(vk(t)?a.push(mk):a.push(pk(t.extraArgument))),a},yk="RTK_autoBatch",v1=r=>e=>{setTimeout(e,r)},xk=(r={type:"raf"})=>e=>(...t)=>{const i=e(...t);let n=!0,s=!1,a=!1;const o=new Set,l=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:v1(10):r.type==="callback"?r.queueNotification:v1(r.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},i,{subscribe(u){const h=()=>n&&u(),f=i.subscribe(h);return o.add(u),()=>{f(),o.delete(u)}},dispatch(u){var h;try{return n=!((h=u==null?void 0:u.meta)!=null&&h[yk]),s=!n,s&&(a||(a=!0,l(c))),i.dispatch(u)}finally{n=!0}}})},Nk=r=>function(t){const{autoBatch:i=!0}=t??{};let n=new xE(r);return i&&n.push(xk(typeof i=="object"?i:void 0)),n};function wk(r){const e=bk(),{reducer:t=void 0,middleware:i,devTools:n=!0,preloadedState:s=void 0,enhancers:a=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(B0(t))o=uE(t);else throw new Error(Yr(1));let l;typeof i=="function"?l=i(e):l=e();let c=hm;n&&(c=gk({trace:!1,...typeof n=="object"&&n}));const u=nk(...l),h=Nk(u);let f=typeof a=="function"?a(h):h();const m=c(...f);return cE(o,s,m)}function NE(r){const e={},t=[];let i;const n={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Yr(28));if(o in e)throw new Error(Yr(29));return e[o]=a,n},addMatcher(s,a){return t.push({matcher:s,reducer:a}),n},addDefaultCase(s){return i=s,n}};return r(n),[e,t,i]}function Ak(r){return typeof r=="function"}function Ek(r,e){let[t,i,n]=NE(e),s;if(Ak(r))s=()=>g1(r());else{const o=g1(r);s=()=>o}function a(o=s(),l){let c=[t[l.type],...i.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[n]),c.reduce((u,h)=>{if(h)if(Jo(u)){const m=h(u,l);return m===void 0?u:m}else{if(fs(u))return bE(u,f=>h(f,l));{const f=h(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},o)}return a.getInitialState=s,a}var Sk="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_k=(r=21)=>{let e="",t=r;for(;t--;)e+=Sk[Math.random()*64|0];return e},Pk=Symbol.for("rtk-slice-createasyncthunk");function Ck(r,e){return`${r}/${e}`}function Dk({creators:r}={}){var t;const e=(t=r==null?void 0:r.asyncThunk)==null?void 0:t[Pk];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Yr(11));const o=(typeof n.reducers=="function"?n.reducers(Tk()):n.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(_,P){const O=typeof _=="string"?_:_.type;if(!O)throw new Error(Yr(12));if(O in c.sliceCaseReducersByType)throw new Error(Yr(13));return c.sliceCaseReducersByType[O]=P,u},addMatcher(_,P){return c.sliceMatchers.push({matcher:_,reducer:P}),u},exposeAction(_,P){return c.actionCreators[_]=P,u},exposeCaseReducer(_,P){return c.sliceCaseReducersByName[_]=P,u}};l.forEach(_=>{const P=o[_],O={reducerName:_,type:Ck(s,_),createNotation:typeof n.reducers=="function"};Mk(P)?jk(O,P,u,e):kk(O,P,u)});function h(){const[_={},P=[],O=void 0]=typeof n.extraReducers=="function"?NE(n.extraReducers):[n.extraReducers],T={..._,...c.sliceCaseReducersByType};return Ek(n.initialState,C=>{for(let D in T)C.addCase(D,T[D]);for(let D of c.sliceMatchers)C.addMatcher(D.matcher,D.reducer);for(let D of P)C.addMatcher(D.matcher,D.reducer);O&&C.addDefaultCase(O)})}const f=_=>_,m=new Map,p=new WeakMap;let g;function b(_,P){return g||(g=h()),g(_,P)}function y(){return g||(g=h()),g.getInitialState()}function N(_,P=!1){function O(C){let D=C[_];return typeof D>"u"&&P&&(D=of(p,O,y)),D}function T(C=f){const D=of(m,P,()=>new WeakMap);return of(D,C,()=>{const k={};for(const[M,j]of Object.entries(n.selectors??{}))k[M]=Ok(j,C,()=>of(p,C,y),P);return k})}return{reducerPath:_,getSelectors:T,get selectors(){return T(O)},selectSlice:O}}const w={name:s,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:y,...N(a),injectInto(_,{reducerPath:P,...O}={}){const T=P??a;return _.inject({reducerPath:T,reducer:b},O),{...w,...N(T,!0)}}};return w}}function Ok(r,e,t,i){function n(s,...a){let o=e(s);return typeof o>"u"&&i&&(o=t()),r(o,...a)}return n.unwrapped=r,n}var Ei=Dk();function Tk(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function kk({type:r,reducerName:e,createNotation:t},i,n){let s,a;if("reducer"in i){if(t&&!Rk(i))throw new Error(Yr(17));s=i.reducer,a=i.prepare}else s=i;n.addCase(r,s).exposeCaseReducer(e,s).exposeAction(e,a?Ni(r,a):Ni(r))}function Mk(r){return r._reducerDefinitionType==="asyncThunk"}function Rk(r){return r._reducerDefinitionType==="reducerWithPrepare"}function jk({type:r,reducerName:e},t,i,n){if(!n)throw new Error(Yr(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=t,h=n(r,s,u);i.exposeAction(e,h),a&&i.addCase(h.fulfilled,a),o&&i.addCase(h.pending,o),l&&i.addCase(h.rejected,l),c&&i.addMatcher(h.settled,c),i.exposeCaseReducer(e,{fulfilled:a||lf,pending:o||lf,rejected:l||lf,settled:c||lf})}function lf(){}var Ik="task",wE="listener",AE="completed",q0="cancelled",Lk=`task-${q0}`,Uk=`task-${AE}`,bv=`${wE}-${q0}`,Fk=`${wE}-${AE}`,Fp=class{constructor(r){q(this,"name","TaskAbortError");q(this,"message");this.code=r,this.message=`${Ik} ${q0} (reason: ${r})`}},W0=(r,e)=>{if(typeof r!="function")throw new TypeError(Yr(32))},gm=()=>{},EE=(r,e=gm)=>(r.catch(e),r),SE=(r,e)=>(r.addEventListener("abort",e,{once:!0}),()=>r.removeEventListener("abort",e)),Ko=(r,e)=>{const t=r.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),r.abort(e))},Qo=r=>{if(r.aborted){const{reason:e}=r;throw new Fp(e)}};function _E(r,e){let t=gm;return new Promise((i,n)=>{const s=()=>n(new Fp(r.reason));if(r.aborted){s();return}t=SE(r,s),e.finally(()=>t()).then(i,n)}).finally(()=>{t=gm})}var Vk=async(r,e)=>{try{return await Promise.resolve(),{status:"ok",value:await r()}}catch(t){return{status:t instanceof Fp?"cancelled":"rejected",error:t}}finally{e==null||e()}},vm=r=>e=>EE(_E(r,e).then(t=>(Qo(r),t))),PE=r=>{const e=vm(r);return t=>e(new Promise(i=>setTimeout(i,t)))},{assign:Ol}=Object,b1={},Vp="listenerMiddleware",$k=(r,e)=>{const t=i=>SE(r,()=>Ko(i,r.reason));return(i,n)=>{W0(i);const s=new AbortController;t(s);const a=Vk(async()=>{Qo(r),Qo(s.signal);const o=await i({pause:vm(s.signal),delay:PE(s.signal),signal:s.signal});return Qo(s.signal),o},()=>Ko(s,Uk));return n!=null&&n.autoJoin&&e.push(a.catch(gm)),{result:vm(r)(a),cancel(){Ko(s,Lk)}}}},Bk=(r,e)=>{const t=async(i,n)=>{Qo(e);let s=()=>{};const o=[new Promise((l,c)=>{let u=r({predicate:i,effect:(h,f)=>{f.unsubscribe(),l([h,f.getState(),f.getOriginalState()])}});s=()=>{u(),c()}})];n!=null&&o.push(new Promise(l=>setTimeout(l,n,null)));try{const l=await _E(e,Promise.race(o));return Qo(e),l}finally{s()}};return(i,n)=>EE(t(i,n))},CE=r=>{let{type:e,actionCreator:t,matcher:i,predicate:n,effect:s}=r;if(e)n=Ni(e).match;else if(t)e=t.type,n=t.match;else if(i)n=i;else if(!n)throw new Error(Yr(21));return W0(s),{predicate:n,type:e,effect:s}},DE=Ol(r=>{const{type:e,predicate:t,effect:i}=CE(r);return{id:_k(),effect:i,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(Yr(22))}}},{withTypes:()=>DE}),y1=(r,e)=>{const{type:t,effect:i,predicate:n}=CE(e);return Array.from(r.values()).find(s=>(typeof t=="string"?s.type===t:s.predicate===n)&&s.effect===i)},yv=r=>{r.pending.forEach(e=>{Ko(e,bv)})},Hk=r=>()=>{r.forEach(yv),r.clear()},x1=(r,e,t)=>{try{r(e,t)}catch(i){setTimeout(()=>{throw i},0)}},OE=Ol(Ni(`${Vp}/add`),{withTypes:()=>OE}),zk=Ni(`${Vp}/removeAll`),TE=Ol(Ni(`${Vp}/remove`),{withTypes:()=>TE}),qk=(...r)=>{console.error(`${Vp}/error`,...r)},Uh=(r={})=>{const e=new Map,{extra:t,onError:i=qk}=r;W0(i);const n=u=>(u.unsubscribe=()=>e.delete(u.id),e.set(u.id,u),h=>{u.unsubscribe(),h!=null&&h.cancelActive&&yv(u)}),s=u=>{const h=y1(e,u)??DE(u);return n(h)};Ol(s,{withTypes:()=>s});const a=u=>{const h=y1(e,u);return h&&(h.unsubscribe(),u.cancelActive&&yv(h)),!!h};Ol(a,{withTypes:()=>a});const o=async(u,h,f,m)=>{const p=new AbortController,g=Bk(s,p.signal),b=[];try{u.pending.add(p),await Promise.resolve(u.effect(h,Ol({},f,{getOriginalState:m,condition:(y,N)=>g(y,N).then(Boolean),take:g,delay:PE(p.signal),pause:vm(p.signal),extra:t,signal:p.signal,fork:$k(p.signal,b),unsubscribe:u.unsubscribe,subscribe:()=>{e.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,N,w)=>{y!==p&&(Ko(y,bv),w.delete(y))})},cancel:()=>{Ko(p,bv),u.pending.delete(p)},throwIfCancelled:()=>{Qo(p.signal)}})))}catch(y){y instanceof Fp||x1(i,y,{raisedBy:"effect"})}finally{await Promise.all(b),Ko(p,Fk),u.pending.delete(p)}},l=Hk(e);return{middleware:u=>h=>f=>{if(!dE(f))return h(f);if(OE.match(f))return s(f.payload);if(zk.match(f)){l();return}if(TE.match(f))return a(f.payload);let m=u.getState();const p=()=>{if(m===b1)throw new Error(Yr(23));return m};let g;try{if(g=h(f),e.size>0){const b=u.getState(),y=Array.from(e.values());for(const N of y){let w=!1;try{w=N.predicate(f,b,m)}catch(_){w=!1,x1(i,_,{raisedBy:"predicate"})}w&&o(N,f,u,p)}}}finally{m=b1}return g},startListening:s,stopListening:a,clearListeners:l}};function Yr(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var Wk={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},kE=Ei({name:"chartLayout",initialState:Wk,reducers:{setLayout(r,e){r.layoutType=e.payload},setChartSize(r,e){r.width=e.payload.width,r.height=e.payload.height},setMargin(r,e){r.margin.top=e.payload.top,r.margin.right=e.payload.right,r.margin.bottom=e.payload.bottom,r.margin.left=e.payload.left},setScale(r,e){r.scale=e.payload}}}),{setMargin:Gk,setLayout:Kk,setChartSize:Qk,setScale:Yk}=kE.actions,Xk=kE.reducer;function N1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function w1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N1(Object(t),!0).forEach(function(i){Zk(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):N1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Zk(r,e,t){return(e=Jk(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Jk(r){var e=eM(r,"string");return typeof e=="symbol"?e:e+""}function eM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var bm=Math.PI/180,tM=r=>r*180/Math.PI,mt=(r,e,t,i)=>({x:r+Math.cos(-bm*i)*t,y:e+Math.sin(-bm*i)*t}),ME=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(t-(i.top||0)-(i.bottom||0)))/2},rM=(r,e)=>{var{x:t,y:i}=r,{x:n,y:s}=e;return Math.sqrt((t-n)**2+(i-s)**2)},iM=(r,e)=>{var{x:t,y:i}=r,{cx:n,cy:s}=e,a=rM({x:t,y:i},{x:n,y:s});if(a<=0)return{radius:a,angle:0};var o=(t-n)/a,l=Math.acos(o);return i>s&&(l=2*Math.PI-l),{radius:a,angle:tM(l),angleInRadian:l}},nM=r=>{var{startAngle:e,endAngle:t}=r,i=Math.floor(e/360),n=Math.floor(t/360),s=Math.min(i,n);return{startAngle:e-s*360,endAngle:t-s*360}},sM=(r,e)=>{var{startAngle:t,endAngle:i}=e,n=Math.floor(t/360),s=Math.floor(i/360),a=Math.min(n,s);return r+a*360},aM=(r,e)=>{var{x:t,y:i}=r,{radius:n,angle:s}=iM({x:t,y:i},e),{innerRadius:a,outerRadius:o}=e;if(n<a||n>o||n===0)return null;var{startAngle:l,endAngle:c}=nM(e),u=s,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?w1(w1({},e),{},{radius:n,angle:sM(u,e)}):null};function A1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function pi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A1(Object(t),!0).forEach(function(i){oM(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):A1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function oM(r,e,t){return(e=lM(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lM(r){var e=cM(r,"string");return typeof e=="symbol"?e:e+""}function cM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function it(r,e,t){return pt(r)||pt(e)?t:bn(e)?va(r,e,t):typeof e=="function"?e(r):t}var uM=(r,e,t,i,n)=>{var s,a=-1,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||r==null)return 0;if(i==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?t[l-1].coordinate:t[o-1].coordinate,u=t[l].coordinate,h=l>=o-1?t[0].coordinate:t[l+1].coordinate,f=void 0;if(Gt(u-c)!==Gt(h-u)){var m=[];if(Gt(h-u)===Gt(n[1]-n[0])){f=h;var p=u+n[1]-n[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{f=c;var g=h+n[1]-n[0];m[0]=Math.min(u,(g+u)/2),m[1]=Math.max(u,(g+u)/2)}var b=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(r>b[0]&&r<=b[1]||r>=m[0]&&r<=m[1]){({index:a}=t[l]);break}}else{var y=Math.min(c,h),N=Math.max(c,h);if(r>(y+u)/2&&r<=(N+u)/2){({index:a}=t[l]);break}}}else if(e){for(var w=0;w<o;w++)if(w===0&&r<=(e[w].coordinate+e[w+1].coordinate)/2||w>0&&w<o-1&&r>(e[w].coordinate+e[w-1].coordinate)/2&&r<=(e[w].coordinate+e[w+1].coordinate)/2||w===o-1&&r>(e[w].coordinate+e[w-1].coordinate)/2){({index:a}=e[w]);break}}return a},dM=(r,e,t)=>{if(e&&t){var{width:i,height:n}=t,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&ne(r[s]))return pi(pi({},r),{},{[s]:r[s]+(i||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&ne(r[a]))return pi(pi({},r),{},{[a]:r[a]+(n||0)})}return r},ol=(r,e)=>r==="horizontal"&&e==="xAxis"||r==="vertical"&&e==="yAxis"||r==="centric"&&e==="angleAxis"||r==="radial"&&e==="radiusAxis",E1=1e-4,hM=r=>{var e=r.domain();if(!(!e||e.length<=2)){var t=e.length,i=r.range(),n=Math.min(i[0],i[1])-E1,s=Math.max(i[0],i[1])+E1,a=r(e[0]),o=r(e[t-1]);(a<n||a>s||o<n||o>s)&&r.domain([e[0],e[t-1]])}},fM=(r,e)=>{if(!e||e.length!==2||!ne(e[0])||!ne(e[1]))return r;var t=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]),n=[r[0],r[1]];return(!ne(r[0])||r[0]<t)&&(n[0]=t),(!ne(r[1])||r[1]>i)&&(n[1]=i),n[0]>i&&(n[0]=i),n[1]<t&&(n[1]=t),n},mM=r=>{var e=r.length;if(!(e<=0))for(var t=0,i=r[0].length;t<i;++t)for(var n=0,s=0,a=0;a<e;++a){var o=xi(r[a][t][1])?r[a][t][0]:r[a][t][1];o>=0?(r[a][t][0]=n,r[a][t][1]=n+o,n=r[a][t][1]):(r[a][t][0]=s,r[a][t][1]=s+o,s=r[a][t][1])}},pM=r=>{var e=r.length;if(!(e<=0))for(var t=0,i=r[0].length;t<i;++t)for(var n=0,s=0;s<e;++s){var a=xi(r[s][t][1])?r[s][t][0]:r[s][t][1];a>=0?(r[s][t][0]=n,r[s][t][1]=n+a,n=r[s][t][1]):(r[s][t][0]=0,r[s][t][1]=0)}},gM={sign:mM,expand:eT,none:Vc,silhouette:tT,wiggle:rT,positive:pM},vM=(r,e,t)=>{var i=gM[t],n=JO().keys(e).value((s,a)=>+it(s,a,0)).order(cv).offset(i);return n(r)};function RE(r){return r==null?void 0:String(r)}var S1=r=>{var{axis:e,ticks:t,offset:i,bandSize:n,entry:s,index:a}=r;if(e.type==="category")return t[a]?t[a].coordinate+i:null;var o=it(s,e.dataKey,e.scale.domain()[a]);return pt(o)?null:e.scale(o)-n/2+i},bM=r=>{var{numericAxis:e}=r,t=e.scale.domain();if(e.type==="number"){var i=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return i<=0&&n>=0?0:n<0?n:i}return t[0]},yM=r=>{var e=r.flat(2).filter(ne);return[Math.min(...e),Math.max(...e)]},xM=r=>[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]],NM=(r,e,t)=>{if(r!=null)return xM(Object.keys(r).reduce((i,n)=>{var s=r[n],{stackedData:a}=s,o=a.reduce((l,c)=>{var u=yM(c.slice(e,t+1));return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);return[Math.min(o[0],i[0]),Math.max(o[1],i[1])]},[1/0,-1/0]))},_1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,G0=(r,e,t)=>{if(r&&r.scale&&r.scale.bandwidth){var i=r.scale.bandwidth();if(!t||i>0)return i}if(r&&e&&e.length>=2){for(var n=Rp(e,u=>u.coordinate),s=1/0,a=1,o=n.length;a<o;a++){var l=n[a],c=n[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return t?void 0:0};function C1(r){var{tooltipEntrySettings:e,dataKey:t,payload:i,value:n,name:s}=r;return pi(pi({},e),{},{dataKey:t,payload:i,value:n,name:s})}function $p(r,e){if(r)return String(r);if(typeof e=="string")return e}function wM(r,e,t,i,n){if(t==="horizontal"||t==="vertical"){var s=r>=n.left&&r<=n.left+n.width&&e>=n.top&&e<=n.top+n.height;return s?{x:r,y:e}:null}return i?aM({x:r,y:e},i):null}var AM=(r,e,t,i)=>{var n=e.find(c=>c&&c.index===t);if(n){if(r==="horizontal")return{x:n.coordinate,y:i.y};if(r==="vertical")return{x:i.x,y:n.coordinate};if(r==="centric"){var s=n.coordinate,{radius:a}=i;return pi(pi(pi({},i),mt(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var o=n.coordinate,{angle:l}=i;return pi(pi(pi({},i),mt(i.cx,i.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},EM=(r,e)=>e==="horizontal"?r.x:e==="vertical"?r.y:e==="centric"?r.angle:r.radius,Ea=r=>r.layout.width,Sa=r=>r.layout.height,SM=r=>r.layout.scale,jE=r=>r.layout.margin,K0=L(r=>r.cartesianAxis.xAxis,r=>Object.values(r)),Q0=L(r=>r.cartesianAxis.yAxis,r=>Object.values(r)),IE="data-recharts-item-index",LE="data-recharts-item-data-key",Bp=60;function D1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function As(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?D1(Object(t),!0).forEach(function(i){_M(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):D1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function _M(r,e,t){return(e=PM(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function PM(r){var e=CM(r,"string");return typeof e=="symbol"?e:e+""}function CM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var DM=r=>r.brush.height,Rt=L([Ea,Sa,jE,DM,K0,Q0,oE,XT],(r,e,t,i,n,s,a,o)=>{var l=s.reduce((p,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:Bp;return As(As({},p),{},{[b]:p[b]+y})}return p},{left:t.left||0,right:t.right||0}),c=n.reduce((p,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?As(As({},p),{},{[b]:va(p,"".concat(b))+g.height}):p},{top:t.top||0,bottom:t.bottom||0}),u=As(As({},c),l),h=u.bottom;u.bottom+=i,u=dM(u,a,o);var f=r-u.left-u.right,m=e-u.top-u.bottom;return As(As({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(m,0)})}),OM=L(Rt,r=>({x:r.left,y:r.top,width:r.width,height:r.height})),UE=L(Ea,Sa,(r,e)=>({x:0,y:0,width:r,height:e})),TM=A.createContext(null),ti=()=>A.useContext(TM)!=null,Hp=r=>r.brush,zp=L([Hp,Rt,jE],(r,e,t)=>({height:r.height,x:ne(r.x)?r.x:e.left,y:ne(r.y)?r.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:ne(r.width)?r.width:e.width})),Y0=()=>{var r,e=ti(),t=ae(OM),i=ae(zp),n=(r=ae(Hp))===null||r===void 0?void 0:r.padding;return!e||!i||!n?t:{width:i.width-n.left-n.right,height:i.height-n.top-n.bottom,x:n.left,y:n.top}},kM={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},X0=()=>{var r;return(r=ae(Rt))!==null&&r!==void 0?r:kM},FE=()=>ae(Ea),VE=()=>ae(Sa),MM={top:0,right:0,bottom:0,left:0},RM=()=>{var r;return(r=ae(e=>e.layout.margin))!==null&&r!==void 0?r:MM},Re=r=>r.layout.layoutType,Z0=()=>ae(Re),jM={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},$E=Ei({name:"legend",initialState:jM,reducers:{setLegendSize(r,e){r.size.width=e.payload.width,r.size.height=e.payload.height},setLegendSettings(r,e){r.settings.align=e.payload.align,r.settings.layout=e.payload.layout,r.settings.verticalAlign=e.payload.verticalAlign,r.settings.itemSorter=e.payload.itemSorter},addLegendPayload(r,e){r.payload.push(e.payload)},removeLegendPayload(r,e){var t=pa(r).payload.indexOf(e.payload);t>-1&&r.payload.splice(t,1)}}}),{setLegendSize:O1,setLegendSettings:IM,addLegendPayload:BE,removeLegendPayload:HE}=$E.actions,LM=$E.reducer,UM=["contextPayload"];function xv(){return xv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},xv.apply(null,arguments)}function T1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Hc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T1(Object(t),!0).forEach(function(i){J0(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):T1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function J0(r,e,t){return(e=FM(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function FM(r){var e=VM(r,"string");return typeof e=="symbol"?e:e+""}function VM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $M(r,e){if(r==null)return{};var t,i,n=BM(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function BM(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function HM(r){return r.value}function zM(r){var{contextPayload:e}=r,t=$M(r,UM),i=YA(e,r.payloadUniqBy,HM),n=Hc(Hc({},t),{},{payload:i});return A.isValidElement(r.content)?A.cloneElement(r.content,n):typeof r.content=="function"?A.createElement(r.content,n):A.createElement(T0,n)}function qM(r,e,t,i,n,s){var{layout:a,align:o,verticalAlign:l}=e,c,u;return(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))&&(o==="center"&&a==="vertical"?c={left:((i||0)-s.width)/2}:c=o==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))&&(l==="middle"?u={top:((n||0)-s.height)/2}:u=l==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),Hc(Hc({},c),u)}function WM(r){var e=Xe();return A.useEffect(()=>{e(IM(r))},[e,r]),null}function GM(r){var e=Xe();return A.useEffect(()=>(e(O1(r)),()=>{e(O1({width:0,height:0}))}),[e,r]),null}function KM(r){var e=ek(),t=AO(),i=RM(),{width:n,height:s,wrapperStyle:a,portal:o}=r,[l,c]=lE([e]),u=FE(),h=VE(),f=u-(i.left||0)-(i.right||0),m=Ku.getWidthOrHeight(r.layout,s,n,f),p=o?a:Hc(Hc({position:"absolute",width:(m==null?void 0:m.width)||n||"auto",height:(m==null?void 0:m.height)||s||"auto"},qM(a,r,i,u,h,l)),a),g=o??t;if(g==null)return null;var b=A.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:c},A.createElement(WM,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),A.createElement(GM,{width:l.width,height:l.height}),A.createElement(zM,xv({},r,m,{margin:i,chartWidth:u,chartHeight:h,contextPayload:e})));return g0.createPortal(b,g)}class Ku extends A.PureComponent{static getWidthOrHeight(e,t,i,n){return e==="vertical"&&ne(t)?{height:t}:e==="horizontal"?{width:i||n}:null}render(){return A.createElement(KM,this.props)}}J0(Ku,"displayName","Legend");J0(Ku,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Nv(){return Nv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Nv.apply(null,arguments)}function k1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Dg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k1(Object(t),!0).forEach(function(i){QM(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):k1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function QM(r,e,t){return(e=YM(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function YM(r){var e=XM(r,"string");return typeof e=="symbol"?e:e+""}function XM(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ZM(r){return Array.isArray(r)&&bn(r[0])&&bn(r[1])?r.join(" ~ "):r}var JM=r=>{var{separator:e=" : ",contentStyle:t={},itemStyle:i={},labelStyle:n={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:f=!1}=r,m=()=>{if(s&&s.length){var P={padding:0,margin:0},O=(o?Rp(s,o):s).map((T,C)=>{if(T.type==="none")return null;var D=T.formatter||a||ZM,{value:k,name:M}=T,j=k,V=M;if(D){var B=D(k,M,T,C,s);if(Array.isArray(B))[j,V]=B;else if(B!=null)j=B;else return null}var X=Dg({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},i);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:X},bn(V)?A.createElement("span",{className:"recharts-tooltip-item-name"},V):null,bn(V)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},j),A.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:P},O)}return null},p=Dg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),g=Dg({margin:0},n),b=!pt(u),y=b?u:"",N=Me("recharts-default-tooltip",l),w=Me("recharts-tooltip-label",c);b&&h&&s!==void 0&&s!==null&&(y=h(u,s));var _=f?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",Nv({className:N,style:p},_),A.createElement("p",{className:w,style:g},A.isValidElement(y)?y:"".concat(y)),m())},hu="recharts-tooltip-wrapper",eR={visibility:"hidden"};function tR(r){var{coordinate:e,translateX:t,translateY:i}=r;return Me(hu,{["".concat(hu,"-right")]:ne(t)&&e&&ne(e.x)&&t>=e.x,["".concat(hu,"-left")]:ne(t)&&e&&ne(e.x)&&t<e.x,["".concat(hu,"-bottom")]:ne(i)&&e&&ne(e.y)&&i>=e.y,["".concat(hu,"-top")]:ne(i)&&e&&ne(e.y)&&i<e.y})}function M1(r){var{allowEscapeViewBox:e,coordinate:t,key:i,offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=r;if(s&&ne(s[i]))return s[i];var u=t[i]-o-(n>0?n:0),h=t[i]+n;if(e[i])return a[i]?u:h;var f=l[i];if(f==null)return 0;if(a[i]){var m=u,p=f;return m<p?Math.max(h,f):Math.max(u,f)}if(c==null)return 0;var g=h+o,b=f+c;return g>b?Math.max(u,f):Math.max(h,f)}function rR(r){var{translateX:e,translateY:t,useTranslate3d:i}=r;return{transform:i?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function iR(r){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:i,position:n,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=r,c,u,h;return a.height>0&&a.width>0&&t?(u=M1({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:i,position:n,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),h=M1({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:i,position:n,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=rR({translateX:u,translateY:h,useTranslate3d:o})):c=eR,{cssProperties:c,cssClasses:tR({translateX:u,translateY:h,coordinate:t})}}function R1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function cf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R1(Object(t),!0).forEach(function(i){wv(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):R1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function wv(r,e,t){return(e=nR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nR(r){var e=sR(r,"string");return typeof e=="symbol"?e:e+""}function sR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class aR extends A.PureComponent{constructor(){super(...arguments),wv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),wv(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,i,n,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&t!==void 0?t:0,y:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:i,animationEasing:n,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:p,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:N,cssProperties:w}=iR({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:g.height,width:g.width},useTranslate3d:f,viewBox:m}),_=y?{}:cf(cf({transition:l&&e?"transform ".concat(i,"ms ").concat(n):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),P=cf(cf({},_),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:P,ref:b},s)}}var oR=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Zc={isSsr:oR()},zE=()=>ae(r=>r.rootProps.accessibilityLayer);function ei(r){return Number.isFinite(r)}function zc(r){return typeof r=="number"&&r>0&&Number.isFinite(r)}function Av(){return Av=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Av.apply(null,arguments)}function j1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function I1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j1(Object(t),!0).forEach(function(i){lR(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):j1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function lR(r,e,t){return(e=cR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cR(r){var e=uR(r,"string");return typeof e=="symbol"?e:e+""}function uR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var L1={curveBasisClosed:BO,curveBasisOpen:HO,curveBasis:$O,curveBumpX:PO,curveBumpY:CO,curveLinearClosed:zO,curveLinear:Pp,curveMonotoneX:qO,curveMonotoneY:WO,curveNatural:GO,curveStep:KO,curveStepAfter:YO,curveStepBefore:QO},uf=r=>ei(r.x)&&ei(r.y),fu=r=>r.x,mu=r=>r.y,dR=(r,e)=>{if(typeof r=="function")return r;var t="curve".concat(jh(r));return(t==="curveMonotone"||t==="curveBump")&&e?L1["".concat(t).concat(e==="vertical"?"Y":"X")]:L1[t]||Pp},hR=r=>{var{type:e="linear",points:t=[],baseLine:i,layout:n,connectNulls:s=!1}=r,a=dR(e,n),o=s?t.filter(uf):t,l;if(Array.isArray(i)){var c=s?i.filter(h=>uf(h)):i,u=o.map((h,f)=>I1(I1({},h),{},{base:c[f]}));return n==="vertical"?l=nf().y(mu).x1(fu).x0(h=>h.base.x):l=nf().x(fu).y1(mu).y0(h=>h.base.y),l.defined(uf).curve(a),l(u)}return n==="vertical"&&ne(i)?l=nf().y(mu).x1(fu).x0(i):ne(i)?l=nf().x(fu).y1(mu).y0(i):l=AA().x(fu).y(mu),l.defined(uf).curve(a),l(o)},qE=r=>{var{className:e,points:t,path:i,pathRef:n}=r;if((!t||!t.length)&&!i)return null;var s=t&&t.length?hR(r):i;return A.createElement("path",Av({},Le(r,!1),mO(r),{className:Me("recharts-curve",e),d:s===null?void 0:s,ref:n}))},fR=["x","y","top","left","width","height","className"];function Ev(){return Ev=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ev.apply(null,arguments)}function U1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function mR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U1(Object(t),!0).forEach(function(i){pR(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):U1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function pR(r,e,t){return(e=gR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gR(r){var e=vR(r,"string");return typeof e=="symbol"?e:e+""}function vR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function bR(r,e){if(r==null)return{};var t,i,n=yR(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function yR(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var xR=(r,e,t,i,n,s)=>"M".concat(r,",").concat(n,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(t),NR=r=>{var{x:e=0,y:t=0,top:i=0,left:n=0,width:s=0,height:a=0,className:o}=r,l=bR(r,fR),c=mR({x:e,y:t,top:i,left:n,width:s,height:a},l);return!ne(e)||!ne(t)||!ne(s)||!ne(a)||!ne(i)||!ne(n)?null:A.createElement("path",Ev({},Le(c,!0),{className:Me("recharts-cross",o),d:xR(e,t,s,a,i,n)}))};function wR(r,e,t,i){var n=i/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-n:t.left+.5,y:r==="horizontal"?t.top+.5:e.y-n,width:r==="horizontal"?i:t.width-1,height:r==="horizontal"?t.height-1:i}}function F1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function AR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F1(Object(t),!0).forEach(function(i){ER(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):F1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function ER(r,e,t){return(e=SR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SR(r){var e=_R(r,"string");return typeof e=="symbol"?e:e+""}function _R(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function An(r,e){var t=AR({},r),i=e,n=Object.keys(e),s=n.reduce((a,o)=>(a[o]===void 0&&i[o]!==void 0&&(a[o]=i[o]),a),t);return s}var WE={},GE={},KE={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){if(!t||typeof t!="object")return!1;const i=Object.getPrototypeOf(t);return i===null||i===Object.prototype||Object.getPrototypeOf(i)===null?Object.prototype.toString.call(t)==="[object Object]":!1}r.isPlainObject=e})(KE);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=KE,t=L0,i=Tp,n=kp,s=Op;function a(c,u,h){return o(c,u,void 0,void 0,void 0,void 0,h)}function o(c,u,h,f,m,p,g){const b=g(c,u,h,f,m,p);if(b!==void 0)return b;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,p,g)}return l(c,u,p,g)}function l(c,u,h,f){if(Object.is(c,u))return!0;let m=i.getTag(c),p=i.getTag(u);if(m===n.argumentsTag&&(m=n.objectTag),p===n.argumentsTag&&(p=n.objectTag),m!==p)return!1;switch(m){case n.stringTag:return c.toString()===u.toString();case n.numberTag:{const y=c.valueOf(),N=u.valueOf();return s.eq(y,N)}case n.booleanTag:case n.dateTag:case n.symbolTag:return Object.is(c.valueOf(),u.valueOf());case n.regexpTag:return c.source===u.source&&c.flags===u.flags;case n.functionTag:return c===u}h=h??new Map;const g=h.get(c),b=h.get(u);if(g!=null&&b!=null)return g===u;h.set(c,u),h.set(u,c);try{switch(m){case n.mapTag:{if(c.size!==u.size)return!1;for(const[y,N]of c.entries())if(!u.has(y)||!o(N,u.get(y),y,c,u,h,f))return!1;return!0}case n.setTag:{if(c.size!==u.size)return!1;const y=Array.from(c.values()),N=Array.from(u.values());for(let w=0;w<y.length;w++){const _=y[w],P=N.findIndex(O=>o(_,O,void 0,c,u,h,f));if(P===-1)return!1;N.splice(P,1)}return!0}case n.arrayTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:case n.bigUint64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.bigInt64ArrayTag:case n.float32ArrayTag:case n.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let y=0;y<c.length;y++)if(!o(c[y],u[y],y,c,u,h,f))return!1;return!0}case n.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case n.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),h,f);case n.errorTag:return c.name===u.name&&c.message===u.message;case n.objectTag:{if(!(l(c.constructor,u.constructor,h,f)||e.isPlainObject(c)&&e.isPlainObject(u)))return!1;const N=[...Object.keys(c),...t.getSymbols(c)],w=[...Object.keys(u),...t.getSymbols(u)];if(N.length!==w.length)return!1;for(let _=0;_<N.length;_++){const P=N[_],O=c[P];if(!Object.hasOwn(u,P))return!1;const T=u[P];if(!o(O,T,P,c,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(c),h.delete(u)}}r.isEqualWith=a})(GE);var QE={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(){}r.noop=e})(QE);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=GE,t=QE;function i(n,s){return e.isEqualWith(n,s,t.noop)}r.isEqual=i})(WE);var PR=WE.isEqual;const CR=wn(PR);function DR(r){var e={},t=()=>null,i=!1,n=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...c]=o;if(typeof l=="number"){n=r.setTimeout(s.bind(null,c),l);return}s(l),n=r.setTimeout(s.bind(null,c));return}typeof a=="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,n&&(n(),n=null),s(a)},subscribe:a=>(t=a,()=>{t=()=>null}),getTimeoutController:()=>r}}var ym=1e-4,YE=(r,e)=>[0,3*r,3*e-6*r,3*r-3*e+1],XE=(r,e)=>r.map((t,i)=>t*e**i).reduce((t,i)=>t+i),V1=(r,e)=>t=>{var i=YE(r,e);return XE(i,t)},OR=(r,e)=>t=>{var i=YE(r,e),n=[...i.map((s,a)=>s*a).slice(1),0];return XE(n,t)},$1=function(){for(var e,t,i,n,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[e,i,t,n]=[0,0,1,1];break;case"ease":[e,i,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,i,t,n]=[.42,0,1,1];break;case"ease-out":[e,i,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,i,t,n]=[0,0,.58,1];break;default:{var l=a[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,i,t,n]=l[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else a.length===4&&([e,i,t,n]=a);var c=V1(e,t),u=V1(i,n),h=OR(e,t),f=p=>p>1?1:p<0?0:p,m=p=>{for(var g=p>1?1:p,b=g,y=0;y<8;++y){var N=c(b)-g,w=h(b);if(Math.abs(N-g)<ym||w<ym)return u(b);b=f(b-N/w)}return u(b)};return m.isStepper=!1,m},TR=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:i=8,dt:n=17}=e,s=(a,o,l)=>{var c=-(a-o)*t,u=l*i,h=l+(c-u)*n/1e3,f=l*n/1e3+a;return Math.abs(f-o)<ym&&Math.abs(h)<ym?[o,0]:[f,h]};return s.isStepper=!0,s.dt=n,s},kR=r=>{if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $1(r);case"spring":return TR();default:if(r.split("(")[0]==="cubic-bezier")return $1(r)}return typeof r=="function"?r:null};function B1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function H1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(t),!0).forEach(function(i){MR(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):B1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function MR(r,e,t){return(e=RR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function RR(r){var e=jR(r,"string");return typeof e=="symbol"?e:e+""}function jR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var IR=r=>r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),LR=(r,e,t)=>r.map(i=>"".concat(IR(i)," ").concat(e,"ms ").concat(t)).join(","),UR=(r,e)=>[Object.keys(r),Object.keys(e)].reduce((t,i)=>t.filter(n=>i.includes(n))),Qu=(r,e)=>Object.keys(e).reduce((t,i)=>H1(H1({},t),{},{[i]:r(i,e[i])}),{});function z1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function zt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z1(Object(t),!0).forEach(function(i){FR(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):z1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function FR(r,e,t){return(e=VR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VR(r){var e=$R(r,"string");return typeof e=="symbol"?e:e+""}function $R(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var xm=(r,e,t)=>r+(e-r)*t,Sv=r=>{var{from:e,to:t}=r;return e!==t},ZE=(r,e,t)=>{var i=Qu((n,s)=>{if(Sv(s)){var[a,o]=r(s.from,s.to,s.velocity);return zt(zt({},s),{},{from:a,velocity:o})}return s},e);return t<1?Qu((n,s)=>Sv(s)?zt(zt({},s),{},{velocity:xm(s.velocity,i[n].velocity,t),from:xm(s.from,i[n].from,t)}):s,e):ZE(r,i,t-1)};function BR(r,e,t,i,n,s){var a,o=i.reduce((f,m)=>zt(zt({},f),{},{[m]:{from:r[m],velocity:0,to:e[m]}}),{}),l=()=>Qu((f,m)=>m.from,o),c=()=>!Object.values(o).filter(Sv).length,u=null,h=f=>{a||(a=f);var m=f-a,p=m/t.dt;o=ZE(t,o,p),n(zt(zt(zt({},r),e),l())),a=f,c()||(u=s.setTimeout(h))};return()=>(u=s.setTimeout(h),()=>{u()})}function HR(r,e,t,i,n,s,a){var o=null,l=n.reduce((h,f)=>zt(zt({},h),{},{[f]:[r[f],e[f]]}),{}),c,u=h=>{c||(c=h);var f=(h-c)/i,m=Qu((g,b)=>xm(...b,t(f)),l);if(s(zt(zt(zt({},r),e),m)),f<1)o=a.setTimeout(u);else{var p=Qu((g,b)=>xm(...b,t(1)),l);s(zt(zt(zt({},r),e),p))}};return()=>(o=a.setTimeout(u),()=>{o()})}const zR=(r,e,t,i,n,s)=>{var a=UR(r,e);return t.isStepper===!0?BR(r,e,t,a,n,s):HR(r,e,t,i,a,n,s)};class qR{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),n=null,s=a=>{a-i>=t?e(a):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(s))};return n=requestAnimationFrame(s),()=>{cancelAnimationFrame(n)}}}var WR=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function _v(){return _v=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},_v.apply(null,arguments)}function GR(r,e){if(r==null)return{};var t,i,n=KR(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function KR(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function q1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Es(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q1(Object(t),!0).forEach(function(i){Ua(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):q1(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function Ua(r,e,t){return(e=QR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function QR(r){var e=YR(r,"string");return typeof e=="symbol"?e:e+""}function YR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function XR(){return DR(new qR)}class ey extends A.PureComponent{constructor(e,t){super(e,t),Ua(this,"mounted",!1),Ua(this,"manager",null),Ua(this,"stopJSAnimation",null),Ua(this,"unSubscribe",null);var{isActive:i,attributeName:n,from:s,to:a,children:o,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!i||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:a});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:n?{[n]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,!(!e||!t)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:i,attributeName:n,shouldReAnimate:s,to:a,from:o}=this.props,{style:l}=this.state;if(i){if(!t){var c={style:n?{[n]:a}:a};this.state&&l&&(n&&l[n]!==a||!n&&l!==a)&&this.setState(c);return}if(!(CR(e.to,a)&&e.canBegin&&e.isActive)){var u=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||s?o:e.to;if(this.state&&l){var f={style:n?{[n]:h}:h};(n&&l[n]!==h||!n&&l!==h)&&this.setState(f)}this.runAnimation(Es(Es({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:i,duration:n,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l}=e,c=zR(t,i,kR(s),n,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,a,u,n,o])}runAnimation(e){var{begin:t,duration:i,attributeName:n,to:s,easing:a,onAnimationStart:o,onAnimationEnd:l,children:c}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof a=="function"||typeof c=="function"||a==="spring"){this.runJSAnimation(e);return}var u=n?{[n]:s}:s,h=LR(Object.keys(u),i,a);this.manager.start([o,t,Es(Es({},u),{},{transition:h}),i,l])}render(){var e=this.props,{children:t,begin:i,duration:n,attributeName:s,easing:a,isActive:o,from:l,to:c,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:m,animationManager:p}=e,g=GR(e,WR),b=A.Children.count(t),y=this.state.style;if(typeof t=="function")return t(y);if(!o||b===0||n<=0)return t;var N=w=>{var{style:_={},className:P}=w.props,O=A.cloneElement(w,Es(Es({},g),{},{style:Es(Es({},_),y),className:P}));return O};return b===1?N(A.Children.only(t)):A.createElement("div",null,A.Children.map(t,w=>N(w)))}}Ua(ey,"displayName","Animate");Ua(ey,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var ZR=A.createContext(null);function tl(r){var e,t,i=A.useContext(ZR);return A.createElement(ey,_v({},r,{animationManager:(e=(t=r.animationManager)!==null&&t!==void 0?t:i)!==null&&e!==void 0?e:XR()}))}function Nm(){return Nm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Nm.apply(null,arguments)}var W1=(r,e,t,i,n)=>{var s=Math.min(Math.abs(t)/2,Math.abs(i)/2),a=i>=0?1:-1,o=t>=0?1:-1,l=i>=0&&t>=0||i<0&&t<0?1:0,c;if(s>0&&n instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=n[h]>s?s:n[h];c="M".concat(r,",").concat(e+a*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(r+o*u[0],",").concat(e)),c+="L ".concat(r+t-o*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(r+t,",").concat(e+a*u[1])),c+="L ".concat(r+t,",").concat(e+i-a*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(r+t-o*u[2],",").concat(e+i)),c+="L ".concat(r+o*u[3],",").concat(e+i),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(r,",").concat(e+i-a*u[3])),c+="Z"}else if(s>0&&n===+n&&n>0){var m=Math.min(s,n);c="M ".concat(r,",").concat(e+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(r+o*m,",").concat(e,`
            L `).concat(r+t-o*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(r+t,",").concat(e+a*m,`
            L `).concat(r+t,",").concat(e+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(r+t-o*m,",").concat(e+i,`
            L `).concat(r+o*m,",").concat(e+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(l,",").concat(r,",").concat(e+i-a*m," Z")}else c="M ".concat(r,",").concat(e," h ").concat(t," v ").concat(i," h ").concat(-t," Z");return c},JR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JE=r=>{var e=An(r,JR),t=A.useRef(null),[i,n]=A.useState(-1);A.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var y=t.current.getTotalLength();y&&n(y)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:c,className:u}=e,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:p,isUpdateAnimationActive:g}=e;if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var b=Me("recharts-rectangle",u);return g?A.createElement(tl,{canBegin:i>0,from:{width:o,height:l,x:s,y:a},to:{width:o,height:l,x:s,y:a},duration:f,animationEasing:h,isActive:g},y=>{var{width:N,height:w,x:_,y:P}=y;return A.createElement(tl,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:p,easing:h},A.createElement("path",Nm({},Le(e,!0),{className:b,d:W1(_,P,N,w,c),ref:t})))}):A.createElement("path",Nm({},Le(e,!0),{className:b,d:W1(s,a,o,l,c)}))};function eS(r){var{cx:e,cy:t,radius:i,startAngle:n,endAngle:s}=r,a=mt(e,t,i,n),o=mt(e,t,i,s);return{points:[a,o],cx:e,cy:t,radius:i,startAngle:n,endAngle:s}}function Pv(){return Pv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Pv.apply(null,arguments)}var ej=(r,e)=>{var t=Gt(e-r),i=Math.min(Math.abs(e-r),359.999);return t*i},df=r=>{var{cx:e,cy:t,radius:i,angle:n,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=r,c=o*(a?1:-1)+i,u=Math.asin(o/c)/bm,h=l?n:n+s*u,f=mt(e,t,c,h),m=mt(e,t,i,h),p=l?n-s*u:n,g=mt(e,t,c*Math.cos(u*bm),p);return{center:f,circleTangency:m,lineTangency:g,theta:u}},tS=r=>{var{cx:e,cy:t,innerRadius:i,outerRadius:n,startAngle:s,endAngle:a}=r,o=ej(s,a),l=s+o,c=mt(e,t,n,s),u=mt(e,t,n,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(i>0){var f=mt(e,t,i,s),m=mt(e,t,i,l);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(e,",").concat(t," Z");return h},tj=r=>{var{cx:e,cy:t,innerRadius:i,outerRadius:n,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=r,u=Gt(c-l),{circleTangency:h,lineTangency:f,theta:m}=df({cx:e,cy:t,radius:n,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),{circleTangency:p,lineTangency:g,theta:b}=df({cx:e,cy:t,radius:n,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-c):Math.abs(l-c)-m-b;if(y<0)return a?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):tS({cx:e,cy:t,innerRadius:i,outerRadius:n,startAngle:l,endAngle:c});var N="M ".concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(i>0){var{circleTangency:w,lineTangency:_,theta:P}=df({cx:e,cy:t,radius:i,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:O,lineTangency:T,theta:C}=df({cx:e,cy:t,radius:i,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),D=o?Math.abs(l-c):Math.abs(l-c)-P-C;if(D<0&&s===0)return"".concat(N,"L").concat(e,",").concat(t,"Z");N+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,"Z")}else N+="L".concat(e,",").concat(t,"Z");return N},rj={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rS=r=>{var e=An(r,rj),{cx:t,cy:i,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=e;if(s<n||c===u)return null;var f=Me("recharts-sector",h),m=s-n,p=gr(a,m,0,!0),g;return p>0&&Math.abs(c-u)<360?g=tj({cx:t,cy:i,innerRadius:n,outerRadius:s,cornerRadius:Math.min(p,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):g=tS({cx:t,cy:i,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u}),A.createElement("path",Pv({},Le(e,!0),{className:f,d:g}))};function ij(r,e,t){var i,n,s,a;if(r==="horizontal")i=e.x,s=i,n=t.top,a=t.top+t.height;else if(r==="vertical")n=e.y,a=n,i=t.left,s=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(r==="centric"){var{cx:o,cy:l,innerRadius:c,outerRadius:u,angle:h}=e,f=mt(o,l,c,h),m=mt(o,l,u,h);i=f.x,n=f.y,s=m.x,a=m.y}else return eS(e);return[{x:i,y:n},{x:s,y:a}]}var iS={},nS={},sS={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=V0;function t(i){return e.isSymbol(i)?NaN:Number(i)}r.toNumber=t})(sS);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=sS;function t(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}r.toFinite=t})(nS);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=$0,t=nS;function i(n,s,a){a&&typeof a!="number"&&e.isIterateeCall(n,s,a)&&(s=a=void 0),n=t.toFinite(n),s===void 0?(s=n,n=0):s=t.toFinite(s),a=a===void 0?n<s?1:-1:t.toFinite(a);const o=Math.max(Math.ceil((s-n)/(a||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=n,n+=a;return l}r.range=i})(iS);var nj=iS.range;const aS=wn(nj);function ga(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function sj(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function ty(r){let e,t,i;r.length!==2?(e=ga,t=(o,l)=>ga(r(o),l),i=(o,l)=>r(o)-l):(e=r===ga||r===sj?r:aj,t=r,i=r);function n(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(o[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(o[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function a(o,l,c=0,u=o.length){const h=n(o,l,c,u-1);return h>c&&i(o[h-1],l)>-i(o[h],l)?h-1:h}return{left:n,center:a,right:s}}function aj(){return 0}function oS(r){return r===null?NaN:+r}function*oj(r,e){for(let t of r)t!=null&&(t=+t)>=t&&(yield t)}const lj=ty(ga),Fh=lj.right;ty(oS).center;class G1 extends Map{constructor(e,t=dj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,n]of e)this.set(i,n)}get(e){return super.get(K1(this,e))}has(e){return super.has(K1(this,e))}set(e,t){return super.set(cj(this,e),t)}delete(e){return super.delete(uj(this,e))}}function K1({_intern:r,_key:e},t){const i=e(t);return r.has(i)?r.get(i):t}function cj({_intern:r,_key:e},t){const i=e(t);return r.has(i)?r.get(i):(r.set(i,t),t)}function uj({_intern:r,_key:e},t){const i=e(t);return r.has(i)&&(t=r.get(i),r.delete(i)),t}function dj(r){return r!==null&&typeof r=="object"?r.valueOf():r}function hj(r=ga){if(r===ga)return lS;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=r(e,t);return i||i===0?i:(r(t,t)===0)-(r(e,e)===0)}}function lS(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}const fj=Math.sqrt(50),mj=Math.sqrt(10),pj=Math.sqrt(2);function wm(r,e,t){const i=(e-r)/Math.max(0,t),n=Math.floor(Math.log10(i)),s=i/Math.pow(10,n),a=s>=fj?10:s>=mj?5:s>=pj?2:1;let o,l,c;return n<0?(c=Math.pow(10,-n)/a,o=Math.round(r*c),l=Math.round(e*c),o/c<r&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,n)*a,o=Math.round(r/c),l=Math.round(e/c),o*c<r&&++o,l*c>e&&--l),l<o&&.5<=t&&t<2?wm(r,e,t*2):[o,l,c]}function Cv(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const i=e<r,[n,s,a]=i?wm(e,r,t):wm(r,e,t);if(!(s>=n))return[];const o=s-n+1,l=new Array(o);if(i)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(n+c)/-a;else for(let c=0;c<o;++c)l[c]=(n+c)*a;return l}function Dv(r,e,t){return e=+e,r=+r,t=+t,wm(r,e,t)[2]}function Ov(r,e,t){e=+e,r=+r,t=+t;const i=e<r,n=i?Dv(e,r,t):Dv(r,e,t);return(i?-1:1)*(n<0?1/-n:n)}function Q1(r,e){let t;for(const i of r)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);return t}function Y1(r,e){let t;for(const i of r)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);return t}function cS(r,e,t=0,i=1/0,n){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(r.length-1,i)),!(t<=e&&e<=i))return r;for(n=n===void 0?lS:hj(n);i>t;){if(i-t>600){const l=i-t+1,c=e-t+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),m=Math.max(t,Math.floor(e-c*h/l+f)),p=Math.min(i,Math.floor(e+(l-c)*h/l+f));cS(r,e,m,p,n)}const s=r[e];let a=t,o=i;for(pu(r,t,e),n(r[i],s)>0&&pu(r,t,i);a<o;){for(pu(r,a,o),++a,--o;n(r[a],s)<0;)++a;for(;n(r[o],s)>0;)--o}n(r[t],s)===0?pu(r,t,o):(++o,pu(r,o,i)),o<=e&&(t=o+1),e<=o&&(i=o-1)}return r}function pu(r,e,t){const i=r[e];r[e]=r[t],r[t]=i}function gj(r,e,t){if(r=Float64Array.from(oj(r)),!(!(i=r.length)||isNaN(e=+e))){if(e<=0||i<2)return Y1(r);if(e>=1)return Q1(r);var i,n=(i-1)*e,s=Math.floor(n),a=Q1(cS(r,s).subarray(0,s+1)),o=Y1(r.subarray(s+1));return a+(o-a)*(n-s)}}function vj(r,e,t=oS){if(!(!(i=r.length)||isNaN(e=+e))){if(e<=0||i<2)return+t(r[0],0,r);if(e>=1)return+t(r[i-1],i-1,r);var i,n=(i-1)*e,s=Math.floor(n),a=+t(r[s],s,r),o=+t(r[s+1],s+1,r);return a+(o-a)*(n-s)}}function bj(r,e,t){r=+r,e=+e,t=(n=arguments.length)<2?(e=r,r=0,1):n<3?1:+t;for(var i=-1,n=Math.max(0,Math.ceil((e-r)/t))|0,s=new Array(n);++i<n;)s[i]=r+i*t;return s}function Si(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function ys(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Tv=Symbol("implicit");function ry(){var r=new G1,e=[],t=[],i=Tv;function n(s){let a=r.get(s);if(a===void 0){if(i!==Tv)return i;r.set(s,a=e.push(s)-1)}return t[a%t.length]}return n.domain=function(s){if(!arguments.length)return e.slice();e=[],r=new G1;for(const a of s)r.has(a)||r.set(a,e.push(a)-1);return n},n.range=function(s){return arguments.length?(t=Array.from(s),n):t.slice()},n.unknown=function(s){return arguments.length?(i=s,n):i},n.copy=function(){return ry(e,t).unknown(i)},Si.apply(n,arguments),n}function iy(){var r=ry().unknown(void 0),e=r.domain,t=r.range,i=0,n=1,s,a,o=!1,l=0,c=0,u=.5;delete r.unknown;function h(){var f=e().length,m=n<i,p=m?n:i,g=m?i:n;s=(g-p)/Math.max(1,f-l+c*2),o&&(s=Math.floor(s)),p+=(g-p-s*(f-l))*u,a=s*(1-l),o&&(p=Math.round(p),a=Math.round(a));var b=bj(f).map(function(y){return p+s*y});return t(m?b.reverse():b)}return r.domain=function(f){return arguments.length?(e(f),h()):e()},r.range=function(f){return arguments.length?([i,n]=f,i=+i,n=+n,h()):[i,n]},r.rangeRound=function(f){return[i,n]=f,i=+i,n=+n,o=!0,h()},r.bandwidth=function(){return a},r.step=function(){return s},r.round=function(f){return arguments.length?(o=!!f,h()):o},r.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},r.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},r.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},r.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},r.copy=function(){return iy(e(),[i,n]).round(o).paddingInner(l).paddingOuter(c).align(u)},Si.apply(h(),arguments)}function uS(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return uS(e())},r}function yj(){return uS(iy.apply(null,arguments).paddingInner(1))}function ny(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function dS(r,e){var t=Object.create(r.prototype);for(var i in e)t[i]=e[i];return t}function Vh(){}var Yu=.7,Am=1/Yu,Tl="\\s*([+-]?\\d+)\\s*",Xu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xj=/^#([0-9a-f]{3,8})$/,Nj=new RegExp(`^rgb\\(${Tl},${Tl},${Tl}\\)$`),wj=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),Aj=new RegExp(`^rgba\\(${Tl},${Tl},${Tl},${Xu}\\)$`),Ej=new RegExp(`^rgba\\(${vn},${vn},${vn},${Xu}\\)$`),Sj=new RegExp(`^hsl\\(${Xu},${vn},${vn}\\)$`),_j=new RegExp(`^hsla\\(${Xu},${vn},${vn},${Xu}\\)$`),X1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ny(Vh,Zu,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Z1,formatHex:Z1,formatHex8:Pj,formatHsl:Cj,formatRgb:J1,toString:J1});function Z1(){return this.rgb().formatHex()}function Pj(){return this.rgb().formatHex8()}function Cj(){return hS(this).formatHsl()}function J1(){return this.rgb().formatRgb()}function Zu(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=xj.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?eN(e):t===3?new Pr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?hf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?hf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Nj.exec(r))?new Pr(e[1],e[2],e[3],1):(e=wj.exec(r))?new Pr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Aj.exec(r))?hf(e[1],e[2],e[3],e[4]):(e=Ej.exec(r))?hf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sj.exec(r))?iN(e[1],e[2]/100,e[3]/100,1):(e=_j.exec(r))?iN(e[1],e[2]/100,e[3]/100,e[4]):X1.hasOwnProperty(r)?eN(X1[r]):r==="transparent"?new Pr(NaN,NaN,NaN,0):null}function eN(r){return new Pr(r>>16&255,r>>8&255,r&255,1)}function hf(r,e,t,i){return i<=0&&(r=e=t=NaN),new Pr(r,e,t,i)}function Dj(r){return r instanceof Vh||(r=Zu(r)),r?(r=r.rgb(),new Pr(r.r,r.g,r.b,r.opacity)):new Pr}function kv(r,e,t,i){return arguments.length===1?Dj(r):new Pr(r,e,t,i??1)}function Pr(r,e,t,i){this.r=+r,this.g=+e,this.b=+t,this.opacity=+i}ny(Pr,kv,dS(Vh,{brighter(r){return r=r==null?Am:Math.pow(Am,r),new Pr(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Yu:Math.pow(Yu,r),new Pr(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Pr(Yo(this.r),Yo(this.g),Yo(this.b),Em(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tN,formatHex:tN,formatHex8:Oj,formatRgb:rN,toString:rN}));function tN(){return`#${Fa(this.r)}${Fa(this.g)}${Fa(this.b)}`}function Oj(){return`#${Fa(this.r)}${Fa(this.g)}${Fa(this.b)}${Fa((isNaN(this.opacity)?1:this.opacity)*255)}`}function rN(){const r=Em(this.opacity);return`${r===1?"rgb(":"rgba("}${Yo(this.r)}, ${Yo(this.g)}, ${Yo(this.b)}${r===1?")":`, ${r})`}`}function Em(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Yo(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Fa(r){return r=Yo(r),(r<16?"0":"")+r.toString(16)}function iN(r,e,t,i){return i<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new $i(r,e,t,i)}function hS(r){if(r instanceof $i)return new $i(r.h,r.s,r.l,r.opacity);if(r instanceof Vh||(r=Zu(r)),!r)return new $i;if(r instanceof $i)return r;r=r.rgb();var e=r.r/255,t=r.g/255,i=r.b/255,n=Math.min(e,t,i),s=Math.max(e,t,i),a=NaN,o=s-n,l=(s+n)/2;return o?(e===s?a=(t-i)/o+(t<i)*6:t===s?a=(i-e)/o+2:a=(e-t)/o+4,o/=l<.5?s+n:2-s-n,a*=60):o=l>0&&l<1?0:a,new $i(a,o,l,r.opacity)}function Tj(r,e,t,i){return arguments.length===1?hS(r):new $i(r,e,t,i??1)}function $i(r,e,t,i){this.h=+r,this.s=+e,this.l=+t,this.opacity=+i}ny($i,Tj,dS(Vh,{brighter(r){return r=r==null?Am:Math.pow(Am,r),new $i(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Yu:Math.pow(Yu,r),new $i(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,n=2*t-i;return new Pr(Og(r>=240?r-240:r+120,n,i),Og(r,n,i),Og(r<120?r+240:r-120,n,i),this.opacity)},clamp(){return new $i(nN(this.h),ff(this.s),ff(this.l),Em(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Em(this.opacity);return`${r===1?"hsl(":"hsla("}${nN(this.h)}, ${ff(this.s)*100}%, ${ff(this.l)*100}%${r===1?")":`, ${r})`}`}}));function nN(r){return r=(r||0)%360,r<0?r+360:r}function ff(r){return Math.max(0,Math.min(1,r||0))}function Og(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const sy=r=>()=>r;function kj(r,e){return function(t){return r+t*e}}function Mj(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(i){return Math.pow(r+i*e,t)}}function Rj(r){return(r=+r)==1?fS:function(e,t){return t-e?Mj(e,t,r):sy(isNaN(e)?t:e)}}function fS(r,e){var t=e-r;return t?kj(r,t):sy(isNaN(r)?e:r)}const sN=function r(e){var t=Rj(e);function i(n,s){var a=t((n=kv(n)).r,(s=kv(s)).r),o=t(n.g,s.g),l=t(n.b,s.b),c=fS(n.opacity,s.opacity);return function(u){return n.r=a(u),n.g=o(u),n.b=l(u),n.opacity=c(u),n+""}}return i.gamma=r,i}(1);function jj(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,i=e.slice(),n;return function(s){for(n=0;n<t;++n)i[n]=r[n]*(1-s)+e[n]*s;return i}}function Ij(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Lj(r,e){var t=e?e.length:0,i=r?Math.min(t,r.length):0,n=new Array(i),s=new Array(t),a;for(a=0;a<i;++a)n[a]=Jc(r[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<i;++a)s[a]=n[a](o);return s}}function Uj(r,e){var t=new Date;return r=+r,e=+e,function(i){return t.setTime(r*(1-i)+e*i),t}}function Sm(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function Fj(r,e){var t={},i={},n;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in r?t[n]=Jc(r[n],e[n]):i[n]=e[n];return function(s){for(n in t)i[n]=t[n](s);return i}}var Mv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tg=new RegExp(Mv.source,"g");function Vj(r){return function(){return r}}function $j(r){return function(e){return r(e)+""}}function Bj(r,e){var t=Mv.lastIndex=Tg.lastIndex=0,i,n,s,a=-1,o=[],l=[];for(r=r+"",e=e+"";(i=Mv.exec(r))&&(n=Tg.exec(e));)(s=n.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:Sm(i,n)})),t=Tg.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?$j(l[0].x):Vj(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}function Jc(r,e){var t=typeof e,i;return e==null||t==="boolean"?sy(e):(t==="number"?Sm:t==="string"?(i=Zu(e))?(e=i,sN):Bj:e instanceof Zu?sN:e instanceof Date?Uj:Ij(e)?jj:Array.isArray(e)?Lj:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Fj:Sm)(r,e)}function ay(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function Hj(r,e){e===void 0&&(e=r,r=Jc);for(var t=0,i=e.length-1,n=e[0],s=new Array(i<0?0:i);t<i;)s[t]=r(n,n=e[++t]);return function(a){var o=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[o](a-o)}}function zj(r){return function(){return r}}function _m(r){return+r}var aN=[0,1];function mr(r){return r}function Rv(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:zj(isNaN(e)?NaN:.5)}function qj(r,e){var t;return r>e&&(t=r,r=e,e=t),function(i){return Math.max(r,Math.min(e,i))}}function Wj(r,e,t){var i=r[0],n=r[1],s=e[0],a=e[1];return n<i?(i=Rv(n,i),s=t(a,s)):(i=Rv(i,n),s=t(s,a)),function(o){return s(i(o))}}function Gj(r,e,t){var i=Math.min(r.length,e.length)-1,n=new Array(i),s=new Array(i),a=-1;for(r[i]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++a<i;)n[a]=Rv(r[a],r[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var l=Fh(r,o,1,i)-1;return s[l](n[l](o))}}function $h(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function qp(){var r=aN,e=aN,t=Jc,i,n,s,a=mr,o,l,c;function u(){var f=Math.min(r.length,e.length);return a!==mr&&(a=qj(r[0],r[f-1])),o=f>2?Gj:Wj,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=o(r.map(i),e,t)))(i(a(f)))}return h.invert=function(f){return a(n((c||(c=o(e,r.map(i),Sm)))(f)))},h.domain=function(f){return arguments.length?(r=Array.from(f,_m),u()):r.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),t=ay,u()},h.clamp=function(f){return arguments.length?(a=f?!0:mr,u()):a!==mr},h.interpolate=function(f){return arguments.length?(t=f,u()):t},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,m){return i=f,n=m,u()}}function oy(){return qp()(mr,mr)}function Kj(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Pm(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,i=r.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+r.slice(t+1)]}function qc(r){return r=Pm(Math.abs(r)),r?r[1]:NaN}function Qj(r,e){return function(t,i){for(var n=t.length,s=[],a=0,o=r[0],l=0;n>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(t.substring(n-=o,n+o)),!((l+=o+1)>i));)o=r[a=(a+1)%r.length];return s.reverse().join(e)}}function Yj(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var Xj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ju(r){if(!(e=Xj.exec(r)))throw new Error("invalid format: "+r);var e;return new ly({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ju.prototype=ly.prototype;function ly(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}ly.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zj(r){e:for(var e=r.length,t=1,i=-1,n;t<e;++t)switch(r[t]){case".":i=n=t;break;case"0":i===0&&(i=t),n=t;break;default:if(!+r[t])break e;i>0&&(i=0);break}return i>0?r.slice(0,i)+r.slice(n+1):r}var mS;function Jj(r,e){var t=Pm(r,e);if(!t)return r+"";var i=t[0],n=t[1],s=n-(mS=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Pm(r,Math.max(0,e+s-1))[0]}function oN(r,e){var t=Pm(r,e);if(!t)return r+"";var i=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}const lN={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:Kj,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>oN(r*100,e),r:oN,s:Jj,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function cN(r){return r}var uN=Array.prototype.map,dN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function eI(r){var e=r.grouping===void 0||r.thousands===void 0?cN:Qj(uN.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",i=r.currency===void 0?"":r.currency[1]+"",n=r.decimal===void 0?".":r.decimal+"",s=r.numerals===void 0?cN:Yj(uN.call(r.numerals,String)),a=r.percent===void 0?"%":r.percent+"",o=r.minus===void 0?"−":r.minus+"",l=r.nan===void 0?"NaN":r.nan+"";function c(h){h=Ju(h);var f=h.fill,m=h.align,p=h.sign,g=h.symbol,b=h.zero,y=h.width,N=h.comma,w=h.precision,_=h.trim,P=h.type;P==="n"?(N=!0,P="g"):lN[P]||(w===void 0&&(w=12),_=!0,P="g"),(b||f==="0"&&m==="=")&&(b=!0,f="0",m="=");var O=g==="$"?t:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",T=g==="$"?i:/[%p]/.test(P)?a:"",C=lN[P],D=/[defgprs%]/.test(P);w=w===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(M){var j=O,V=T,B,X,$;if(P==="c")V=C(M)+V,M="";else{M=+M;var U=M<0||1/M<0;if(M=isNaN(M)?l:C(Math.abs(M),w),_&&(M=Zj(M)),U&&+M==0&&p!=="+"&&(U=!1),j=(U?p==="("?p:o:p==="-"||p==="("?"":p)+j,V=(P==="s"?dN[8+mS/3]:"")+V+(U&&p==="("?")":""),D){for(B=-1,X=M.length;++B<X;)if($=M.charCodeAt(B),48>$||$>57){V=($===46?n+M.slice(B+1):M.slice(B))+V,M=M.slice(0,B);break}}}N&&!b&&(M=e(M,1/0));var oe=j.length+M.length+V.length,Q=oe<y?new Array(y-oe+1).join(f):"";switch(N&&b&&(M=e(Q+M,Q.length?y-V.length:1/0),Q=""),m){case"<":M=j+M+V+Q;break;case"=":M=j+Q+M+V;break;case"^":M=Q.slice(0,oe=Q.length>>1)+j+M+V+Q.slice(oe);break;default:M=Q+j+M+V;break}return s(M)}return k.toString=function(){return h+""},k}function u(h,f){var m=c((h=Ju(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(qc(f)/3)))*3,g=Math.pow(10,-p),b=dN[8+p/3];return function(y){return m(g*y)+b}}return{format:c,formatPrefix:u}}var mf,cy,pS;tI({thousands:",",grouping:[3],currency:["$",""]});function tI(r){return mf=eI(r),cy=mf.format,pS=mf.formatPrefix,mf}function rI(r){return Math.max(0,-qc(Math.abs(r)))}function iI(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qc(e)/3)))*3-qc(Math.abs(r)))}function nI(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,qc(e)-qc(r))+1}function gS(r,e,t,i){var n=Ov(r,e,t),s;switch(i=Ju(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(r),Math.abs(e));return i.precision==null&&!isNaN(s=iI(n,a))&&(i.precision=s),pS(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=nI(n,Math.max(Math.abs(r),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=rI(n))&&(i.precision=s-(i.type==="%")*2);break}}return cy(i)}function _a(r){var e=r.domain;return r.ticks=function(t){var i=e();return Cv(i[0],i[i.length-1],t??10)},r.tickFormat=function(t,i){var n=e();return gS(n[0],n[n.length-1],t??10,i)},r.nice=function(t){t==null&&(t=10);var i=e(),n=0,s=i.length-1,a=i[n],o=i[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=n,n=s,s=c);u-- >0;){if(c=Dv(a,o,t),c===l)return i[n]=a,i[s]=o,e(i);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return r},r}function vS(){var r=oy();return r.copy=function(){return $h(r,vS())},Si.apply(r,arguments),_a(r)}function bS(r){var e;function t(i){return i==null||isNaN(i=+i)?e:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(r=Array.from(i,_m),t):r.slice()},t.unknown=function(i){return arguments.length?(e=i,t):e},t.copy=function(){return bS(r).unknown(e)},r=arguments.length?Array.from(r,_m):[0,1],_a(t)}function yS(r,e){r=r.slice();var t=0,i=r.length-1,n=r[t],s=r[i],a;return s<n&&(a=t,t=i,i=a,a=n,n=s,s=a),r[t]=e.floor(n),r[i]=e.ceil(s),r}function hN(r){return Math.log(r)}function fN(r){return Math.exp(r)}function sI(r){return-Math.log(-r)}function aI(r){return-Math.exp(-r)}function oI(r){return isFinite(r)?+("1e"+r):r<0?0:r}function lI(r){return r===10?oI:r===Math.E?Math.exp:e=>Math.pow(r,e)}function cI(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function mN(r){return(e,t)=>-r(-e,t)}function uy(r){const e=r(hN,fN),t=e.domain;let i=10,n,s;function a(){return n=cI(i),s=lI(i),t()[0]<0?(n=mN(n),s=mN(s),r(sI,aI)):r(hN,fN),e}return e.base=function(o){return arguments.length?(i=+o,a()):i},e.domain=function(o){return arguments.length?(t(o),a()):t()},e.ticks=o=>{const l=t();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=n(c),m=n(u),p,g;const b=o==null?10:+o;let y=[];if(!(i%1)&&m-f<b){if(f=Math.floor(f),m=Math.ceil(m),c>0){for(;f<=m;++f)for(p=1;p<i;++p)if(g=f<0?p/s(-f):p*s(f),!(g<c)){if(g>u)break;y.push(g)}}else for(;f<=m;++f)for(p=i-1;p>=1;--p)if(g=f>0?p/s(-f):p*s(f),!(g<c)){if(g>u)break;y.push(g)}y.length*2<b&&(y=Cv(c,u,b))}else y=Cv(f,m,Math.min(m-f,b)).map(s);return h?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Ju(l)).precision==null&&(l.trim=!0),l=cy(l)),o===1/0)return l;const c=Math.max(1,i*o/e.ticks().length);return u=>{let h=u/s(Math.round(n(u)));return h*i<i-.5&&(h*=i),h<=c?l(u):""}},e.nice=()=>t(yS(t(),{floor:o=>s(Math.floor(n(o))),ceil:o=>s(Math.ceil(n(o)))})),e}function xS(){const r=uy(qp()).domain([1,10]);return r.copy=()=>$h(r,xS()).base(r.base()),Si.apply(r,arguments),r}function pN(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function gN(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function dy(r){var e=1,t=r(pN(e),gN(e));return t.constant=function(i){return arguments.length?r(pN(e=+i),gN(e)):e},_a(t)}function NS(){var r=dy(qp());return r.copy=function(){return $h(r,NS()).constant(r.constant())},Si.apply(r,arguments)}function vN(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function uI(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function dI(r){return r<0?-r*r:r*r}function hy(r){var e=r(mr,mr),t=1;function i(){return t===1?r(mr,mr):t===.5?r(uI,dI):r(vN(t),vN(1/t))}return e.exponent=function(n){return arguments.length?(t=+n,i()):t},_a(e)}function fy(){var r=hy(qp());return r.copy=function(){return $h(r,fy()).exponent(r.exponent())},Si.apply(r,arguments),r}function hI(){return fy.apply(null,arguments).exponent(.5)}function bN(r){return Math.sign(r)*r*r}function fI(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function wS(){var r=oy(),e=[0,1],t=!1,i;function n(s){var a=fI(r(s));return isNaN(a)?i:t?Math.round(a):a}return n.invert=function(s){return r.invert(bN(s))},n.domain=function(s){return arguments.length?(r.domain(s),n):r.domain()},n.range=function(s){return arguments.length?(r.range((e=Array.from(s,_m)).map(bN)),n):e.slice()},n.rangeRound=function(s){return n.range(s).round(!0)},n.round=function(s){return arguments.length?(t=!!s,n):t},n.clamp=function(s){return arguments.length?(r.clamp(s),n):r.clamp()},n.unknown=function(s){return arguments.length?(i=s,n):i},n.copy=function(){return wS(r.domain(),e).round(t).clamp(r.clamp()).unknown(i)},Si.apply(n,arguments),_a(n)}function AS(){var r=[],e=[],t=[],i;function n(){var a=0,o=Math.max(1,e.length);for(t=new Array(o-1);++a<o;)t[a-1]=vj(r,a/o);return s}function s(a){return a==null||isNaN(a=+a)?i:e[Fh(t,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?t[o-1]:r[0],o<t.length?t[o]:r[r.length-1]]},s.domain=function(a){if(!arguments.length)return r.slice();r=[];for(let o of a)o!=null&&!isNaN(o=+o)&&r.push(o);return r.sort(ga),n()},s.range=function(a){return arguments.length?(e=Array.from(a),n()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return t.slice()},s.copy=function(){return AS().domain(r).range(e).unknown(i)},Si.apply(s,arguments)}function ES(){var r=0,e=1,t=1,i=[.5],n=[0,1],s;function a(l){return l!=null&&l<=l?n[Fh(i,l,0,t)]:s}function o(){var l=-1;for(i=new Array(t);++l<t;)i[l]=((l+1)*e-(l-t)*r)/(t+1);return a}return a.domain=function(l){return arguments.length?([r,e]=l,r=+r,e=+e,o()):[r,e]},a.range=function(l){return arguments.length?(t=(n=Array.from(l)).length-1,o()):n.slice()},a.invertExtent=function(l){var c=n.indexOf(l);return c<0?[NaN,NaN]:c<1?[r,i[0]]:c>=t?[i[t-1],e]:[i[c-1],i[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return i.slice()},a.copy=function(){return ES().domain([r,e]).range(n).unknown(s)},Si.apply(_a(a),arguments)}function SS(){var r=[.5],e=[0,1],t,i=1;function n(s){return s!=null&&s<=s?e[Fh(r,s,0,i)]:t}return n.domain=function(s){return arguments.length?(r=Array.from(s),i=Math.min(r.length,e.length-1),n):r.slice()},n.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(r.length,e.length-1),n):e.slice()},n.invertExtent=function(s){var a=e.indexOf(s);return[r[a-1],r[a]]},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return SS().domain(r).range(e).unknown(t)},Si.apply(n,arguments)}const kg=new Date,Mg=new Date;function St(r,e,t,i){function n(s){return r(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=s=>(r(s=new Date(+s)),s),n.ceil=s=>(r(s=new Date(s-1)),e(s,1),r(s),s),n.round=s=>{const a=n(s),o=n.ceil(s);return s-a<o-s?a:o},n.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),n.range=(s,a,o)=>{const l=[];if(s=n.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),r(s);while(c<s&&s<a);return l},n.filter=s=>St(a=>{if(a>=a)for(;r(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),t&&(n.count=(s,a)=>(kg.setTime(+s),Mg.setTime(+a),r(kg),r(Mg),Math.floor(t(kg,Mg))),n.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(i?a=>i(a)%s===0:a=>n.count(0,a)%s===0):n)),n}const Cm=St(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);Cm.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?St(e=>{e.setTime(Math.floor(e/r)*r)},(e,t)=>{e.setTime(+e+t*r)},(e,t)=>(t-e)/r):Cm);Cm.range;const ls=1e3,bi=ls*60,cs=bi*60,ms=cs*24,my=ms*7,yN=ms*30,Rg=ms*365,Va=St(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*ls)},(r,e)=>(e-r)/ls,r=>r.getUTCSeconds());Va.range;const py=St(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*ls)},(r,e)=>{r.setTime(+r+e*bi)},(r,e)=>(e-r)/bi,r=>r.getMinutes());py.range;const gy=St(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*bi)},(r,e)=>(e-r)/bi,r=>r.getUTCMinutes());gy.range;const vy=St(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*ls-r.getMinutes()*bi)},(r,e)=>{r.setTime(+r+e*cs)},(r,e)=>(e-r)/cs,r=>r.getHours());vy.range;const by=St(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*cs)},(r,e)=>(e-r)/cs,r=>r.getUTCHours());by.range;const Bh=St(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*bi)/ms,r=>r.getDate()-1);Bh.range;const Wp=St(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/ms,r=>r.getUTCDate()-1);Wp.range;const _S=St(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/ms,r=>Math.floor(r/ms));_S.range;function ll(r){return St(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bi)/my)}const Gp=ll(0),Dm=ll(1),mI=ll(2),pI=ll(3),Wc=ll(4),gI=ll(5),vI=ll(6);Gp.range;Dm.range;mI.range;pI.range;Wc.range;gI.range;vI.range;function cl(r){return St(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/my)}const Kp=cl(0),Om=cl(1),bI=cl(2),yI=cl(3),Gc=cl(4),xI=cl(5),NI=cl(6);Kp.range;Om.range;bI.range;yI.range;Gc.range;xI.range;NI.range;const yy=St(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());yy.range;const xy=St(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());xy.range;const ps=St(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());ps.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:St(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*r)});ps.range;const gs=St(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());gs.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:St(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*r)});gs.range;function PS(r,e,t,i,n,s){const a=[[Va,1,ls],[Va,5,5*ls],[Va,15,15*ls],[Va,30,30*ls],[s,1,bi],[s,5,5*bi],[s,15,15*bi],[s,30,30*bi],[n,1,cs],[n,3,3*cs],[n,6,6*cs],[n,12,12*cs],[i,1,ms],[i,2,2*ms],[t,1,my],[e,1,yN],[e,3,3*yN],[r,1,Rg]];function o(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const m=h&&typeof h.range=="function"?h:l(c,u,h),p=m?m.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,h){const f=Math.abs(u-c)/h,m=ty(([,,b])=>b).right(a,f);if(m===a.length)return r.every(Ov(c/Rg,u/Rg,h));if(m===0)return Cm.every(Math.max(Ov(c,u,h),1));const[p,g]=a[f/a[m-1][2]<a[m][2]/f?m-1:m];return p.every(g)}return[o,l]}const[wI,AI]=PS(gs,xy,Kp,_S,by,gy),[EI,SI]=PS(ps,yy,Gp,Bh,vy,py);function jg(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function Ig(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function gu(r,e,t){return{y:r,m:e,d:t,H:0,M:0,S:0,L:0}}function _I(r){var e=r.dateTime,t=r.date,i=r.time,n=r.periods,s=r.days,a=r.shortDays,o=r.months,l=r.shortMonths,c=vu(n),u=bu(n),h=vu(s),f=bu(s),m=vu(a),p=bu(a),g=vu(o),b=bu(o),y=vu(l),N=bu(l),w={a:U,A:oe,b:Q,B:ye,c:null,d:SN,e:SN,f:QI,g:sL,G:oL,H:WI,I:GI,j:KI,L:CS,m:YI,M:XI,p:te,q:H,Q:CN,s:DN,S:ZI,u:JI,U:eL,V:tL,w:rL,W:iL,x:null,X:null,y:nL,Y:aL,Z:lL,"%":PN},_={a:z,A:Ee,b:ue,B:Te,c:null,d:_N,e:_N,f:hL,g:wL,G:EL,H:cL,I:uL,j:dL,L:OS,m:fL,M:mL,p:fe,q:R,Q:CN,s:DN,S:pL,u:gL,U:vL,V:bL,w:yL,W:xL,x:null,X:null,y:NL,Y:AL,Z:SL,"%":PN},P={a:k,A:M,b:j,B:V,c:B,d:AN,e:AN,f:BI,g:wN,G:NN,H:EN,I:EN,j:UI,L:$I,m:LI,M:FI,p:D,q:II,Q:zI,s:qI,S:VI,u:TI,U:kI,V:MI,w:OI,W:RI,x:X,X:$,y:wN,Y:NN,Z:jI,"%":HI};w.x=O(t,w),w.X=O(i,w),w.c=O(e,w),_.x=O(t,_),_.X=O(i,_),_.c=O(e,_);function O(I,W){return function(G){var F=[],be=-1,re=0,ge=I.length,ce,bt,me;for(G instanceof Date||(G=new Date(+G));++be<ge;)I.charCodeAt(be)===37&&(F.push(I.slice(re,be)),(bt=xN[ce=I.charAt(++be)])!=null?ce=I.charAt(++be):bt=ce==="e"?" ":"0",(me=W[ce])&&(ce=me(G,bt)),F.push(ce),re=be+1);return F.push(I.slice(re,be)),F.join("")}}function T(I,W){return function(G){var F=gu(1900,void 0,1),be=C(F,I,G+="",0),re,ge;if(be!=G.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(W&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(re=Ig(gu(F.y,0,1)),ge=re.getUTCDay(),re=ge>4||ge===0?Om.ceil(re):Om(re),re=Wp.offset(re,(F.V-1)*7),F.y=re.getUTCFullYear(),F.m=re.getUTCMonth(),F.d=re.getUTCDate()+(F.w+6)%7):(re=jg(gu(F.y,0,1)),ge=re.getDay(),re=ge>4||ge===0?Dm.ceil(re):Dm(re),re=Bh.offset(re,(F.V-1)*7),F.y=re.getFullYear(),F.m=re.getMonth(),F.d=re.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),ge="Z"in F?Ig(gu(F.y,0,1)).getUTCDay():jg(gu(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(ge+5)%7:F.w+F.U*7-(ge+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Ig(F)):jg(F)}}function C(I,W,G,F){for(var be=0,re=W.length,ge=G.length,ce,bt;be<re;){if(F>=ge)return-1;if(ce=W.charCodeAt(be++),ce===37){if(ce=W.charAt(be++),bt=P[ce in xN?W.charAt(be++):ce],!bt||(F=bt(I,G,F))<0)return-1}else if(ce!=G.charCodeAt(F++))return-1}return F}function D(I,W,G){var F=c.exec(W.slice(G));return F?(I.p=u.get(F[0].toLowerCase()),G+F[0].length):-1}function k(I,W,G){var F=m.exec(W.slice(G));return F?(I.w=p.get(F[0].toLowerCase()),G+F[0].length):-1}function M(I,W,G){var F=h.exec(W.slice(G));return F?(I.w=f.get(F[0].toLowerCase()),G+F[0].length):-1}function j(I,W,G){var F=y.exec(W.slice(G));return F?(I.m=N.get(F[0].toLowerCase()),G+F[0].length):-1}function V(I,W,G){var F=g.exec(W.slice(G));return F?(I.m=b.get(F[0].toLowerCase()),G+F[0].length):-1}function B(I,W,G){return C(I,e,W,G)}function X(I,W,G){return C(I,t,W,G)}function $(I,W,G){return C(I,i,W,G)}function U(I){return a[I.getDay()]}function oe(I){return s[I.getDay()]}function Q(I){return l[I.getMonth()]}function ye(I){return o[I.getMonth()]}function te(I){return n[+(I.getHours()>=12)]}function H(I){return 1+~~(I.getMonth()/3)}function z(I){return a[I.getUTCDay()]}function Ee(I){return s[I.getUTCDay()]}function ue(I){return l[I.getUTCMonth()]}function Te(I){return o[I.getUTCMonth()]}function fe(I){return n[+(I.getUTCHours()>=12)]}function R(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var W=O(I+="",w);return W.toString=function(){return I},W},parse:function(I){var W=T(I+="",!1);return W.toString=function(){return I},W},utcFormat:function(I){var W=O(I+="",_);return W.toString=function(){return I},W},utcParse:function(I){var W=T(I+="",!0);return W.toString=function(){return I},W}}}var xN={"-":"",_:" ",0:"0"},jt=/^\s*\d+/,PI=/^%/,CI=/[\\^$*+?|[\]().{}]/g;function Pe(r,e,t){var i=r<0?"-":"",n=(i?-r:r)+"",s=n.length;return i+(s<t?new Array(t-s+1).join(e)+n:n)}function DI(r){return r.replace(CI,"\\$&")}function vu(r){return new RegExp("^(?:"+r.map(DI).join("|")+")","i")}function bu(r){return new Map(r.map((e,t)=>[e.toLowerCase(),t]))}function OI(r,e,t){var i=jt.exec(e.slice(t,t+1));return i?(r.w=+i[0],t+i[0].length):-1}function TI(r,e,t){var i=jt.exec(e.slice(t,t+1));return i?(r.u=+i[0],t+i[0].length):-1}function kI(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.U=+i[0],t+i[0].length):-1}function MI(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.V=+i[0],t+i[0].length):-1}function RI(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.W=+i[0],t+i[0].length):-1}function NN(r,e,t){var i=jt.exec(e.slice(t,t+4));return i?(r.y=+i[0],t+i[0].length):-1}function wN(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function jI(r,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(r.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function II(r,e,t){var i=jt.exec(e.slice(t,t+1));return i?(r.q=i[0]*3-3,t+i[0].length):-1}function LI(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.m=i[0]-1,t+i[0].length):-1}function AN(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.d=+i[0],t+i[0].length):-1}function UI(r,e,t){var i=jt.exec(e.slice(t,t+3));return i?(r.m=0,r.d=+i[0],t+i[0].length):-1}function EN(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.H=+i[0],t+i[0].length):-1}function FI(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.M=+i[0],t+i[0].length):-1}function VI(r,e,t){var i=jt.exec(e.slice(t,t+2));return i?(r.S=+i[0],t+i[0].length):-1}function $I(r,e,t){var i=jt.exec(e.slice(t,t+3));return i?(r.L=+i[0],t+i[0].length):-1}function BI(r,e,t){var i=jt.exec(e.slice(t,t+6));return i?(r.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function HI(r,e,t){var i=PI.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function zI(r,e,t){var i=jt.exec(e.slice(t));return i?(r.Q=+i[0],t+i[0].length):-1}function qI(r,e,t){var i=jt.exec(e.slice(t));return i?(r.s=+i[0],t+i[0].length):-1}function SN(r,e){return Pe(r.getDate(),e,2)}function WI(r,e){return Pe(r.getHours(),e,2)}function GI(r,e){return Pe(r.getHours()%12||12,e,2)}function KI(r,e){return Pe(1+Bh.count(ps(r),r),e,3)}function CS(r,e){return Pe(r.getMilliseconds(),e,3)}function QI(r,e){return CS(r,e)+"000"}function YI(r,e){return Pe(r.getMonth()+1,e,2)}function XI(r,e){return Pe(r.getMinutes(),e,2)}function ZI(r,e){return Pe(r.getSeconds(),e,2)}function JI(r){var e=r.getDay();return e===0?7:e}function eL(r,e){return Pe(Gp.count(ps(r)-1,r),e,2)}function DS(r){var e=r.getDay();return e>=4||e===0?Wc(r):Wc.ceil(r)}function tL(r,e){return r=DS(r),Pe(Wc.count(ps(r),r)+(ps(r).getDay()===4),e,2)}function rL(r){return r.getDay()}function iL(r,e){return Pe(Dm.count(ps(r)-1,r),e,2)}function nL(r,e){return Pe(r.getFullYear()%100,e,2)}function sL(r,e){return r=DS(r),Pe(r.getFullYear()%100,e,2)}function aL(r,e){return Pe(r.getFullYear()%1e4,e,4)}function oL(r,e){var t=r.getDay();return r=t>=4||t===0?Wc(r):Wc.ceil(r),Pe(r.getFullYear()%1e4,e,4)}function lL(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pe(e/60|0,"0",2)+Pe(e%60,"0",2)}function _N(r,e){return Pe(r.getUTCDate(),e,2)}function cL(r,e){return Pe(r.getUTCHours(),e,2)}function uL(r,e){return Pe(r.getUTCHours()%12||12,e,2)}function dL(r,e){return Pe(1+Wp.count(gs(r),r),e,3)}function OS(r,e){return Pe(r.getUTCMilliseconds(),e,3)}function hL(r,e){return OS(r,e)+"000"}function fL(r,e){return Pe(r.getUTCMonth()+1,e,2)}function mL(r,e){return Pe(r.getUTCMinutes(),e,2)}function pL(r,e){return Pe(r.getUTCSeconds(),e,2)}function gL(r){var e=r.getUTCDay();return e===0?7:e}function vL(r,e){return Pe(Kp.count(gs(r)-1,r),e,2)}function TS(r){var e=r.getUTCDay();return e>=4||e===0?Gc(r):Gc.ceil(r)}function bL(r,e){return r=TS(r),Pe(Gc.count(gs(r),r)+(gs(r).getUTCDay()===4),e,2)}function yL(r){return r.getUTCDay()}function xL(r,e){return Pe(Om.count(gs(r)-1,r),e,2)}function NL(r,e){return Pe(r.getUTCFullYear()%100,e,2)}function wL(r,e){return r=TS(r),Pe(r.getUTCFullYear()%100,e,2)}function AL(r,e){return Pe(r.getUTCFullYear()%1e4,e,4)}function EL(r,e){var t=r.getUTCDay();return r=t>=4||t===0?Gc(r):Gc.ceil(r),Pe(r.getUTCFullYear()%1e4,e,4)}function SL(){return"+0000"}function PN(){return"%"}function CN(r){return+r}function DN(r){return Math.floor(+r/1e3)}var gl,kS,MS;_L({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _L(r){return gl=_I(r),kS=gl.format,gl.parse,MS=gl.utcFormat,gl.utcParse,gl}function PL(r){return new Date(r)}function CL(r){return r instanceof Date?+r:+new Date(+r)}function Ny(r,e,t,i,n,s,a,o,l,c){var u=oy(),h=u.invert,f=u.domain,m=c(".%L"),p=c(":%S"),g=c("%I:%M"),b=c("%I %p"),y=c("%a %d"),N=c("%b %d"),w=c("%B"),_=c("%Y");function P(O){return(l(O)<O?m:o(O)<O?p:a(O)<O?g:s(O)<O?b:i(O)<O?n(O)<O?y:N:t(O)<O?w:_)(O)}return u.invert=function(O){return new Date(h(O))},u.domain=function(O){return arguments.length?f(Array.from(O,CL)):f().map(PL)},u.ticks=function(O){var T=f();return r(T[0],T[T.length-1],O??10)},u.tickFormat=function(O,T){return T==null?P:c(T)},u.nice=function(O){var T=f();return(!O||typeof O.range!="function")&&(O=e(T[0],T[T.length-1],O??10)),O?f(yS(T,O)):u},u.copy=function(){return $h(u,Ny(r,e,t,i,n,s,a,o,l,c))},u}function DL(){return Si.apply(Ny(EI,SI,ps,yy,Gp,Bh,vy,py,Va,kS).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function OL(){return Si.apply(Ny(wI,AI,gs,xy,Kp,Wp,by,gy,Va,MS).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qp(){var r=0,e=1,t,i,n,s,a=mr,o=!1,l;function c(h){return h==null||isNaN(h=+h)?l:a(n===0?.5:(h=(s(h)-t)*n,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([r,e]=h,t=s(r=+r),i=s(e=+e),n=t===i?0:1/(i-t),c):[r,e]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(a=h,c):a};function u(h){return function(f){var m,p;return arguments.length?([m,p]=f,a=h(m,p),c):[a(0),a(1)]}}return c.range=u(Jc),c.rangeRound=u(ay),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,t=h(r),i=h(e),n=t===i?0:1/(i-t),c}}function Pa(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function RS(){var r=_a(Qp()(mr));return r.copy=function(){return Pa(r,RS())},ys.apply(r,arguments)}function jS(){var r=uy(Qp()).domain([1,10]);return r.copy=function(){return Pa(r,jS()).base(r.base())},ys.apply(r,arguments)}function IS(){var r=dy(Qp());return r.copy=function(){return Pa(r,IS()).constant(r.constant())},ys.apply(r,arguments)}function wy(){var r=hy(Qp());return r.copy=function(){return Pa(r,wy()).exponent(r.exponent())},ys.apply(r,arguments)}function TL(){return wy.apply(null,arguments).exponent(.5)}function LS(){var r=[],e=mr;function t(i){if(i!=null&&!isNaN(i=+i))return e((Fh(r,i,1)-1)/(r.length-1))}return t.domain=function(i){if(!arguments.length)return r.slice();r=[];for(let n of i)n!=null&&!isNaN(n=+n)&&r.push(n);return r.sort(ga),t},t.interpolator=function(i){return arguments.length?(e=i,t):e},t.range=function(){return r.map((i,n)=>e(n/(r.length-1)))},t.quantiles=function(i){return Array.from({length:i+1},(n,s)=>gj(r,s/i))},t.copy=function(){return LS(e).domain(r)},ys.apply(t,arguments)}function Yp(){var r=0,e=.5,t=1,i=1,n,s,a,o,l,c=mr,u,h=!1,f;function m(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-s)*(i*g<i*s?o:l),c(h?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([r,e,t]=g,n=u(r=+r),s=u(e=+e),a=u(t=+t),o=n===s?0:.5/(s-n),l=s===a?0:.5/(a-s),i=s<n?-1:1,m):[r,e,t]},m.clamp=function(g){return arguments.length?(h=!!g,m):h},m.interpolator=function(g){return arguments.length?(c=g,m):c};function p(g){return function(b){var y,N,w;return arguments.length?([y,N,w]=b,c=Hj(g,[y,N,w]),m):[c(0),c(.5),c(1)]}}return m.range=p(Jc),m.rangeRound=p(ay),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return u=g,n=g(r),s=g(e),a=g(t),o=n===s?0:.5/(s-n),l=s===a?0:.5/(a-s),i=s<n?-1:1,m}}function US(){var r=_a(Yp()(mr));return r.copy=function(){return Pa(r,US())},ys.apply(r,arguments)}function FS(){var r=uy(Yp()).domain([.1,1,10]);return r.copy=function(){return Pa(r,FS()).base(r.base())},ys.apply(r,arguments)}function VS(){var r=dy(Yp());return r.copy=function(){return Pa(r,VS()).constant(r.constant())},ys.apply(r,arguments)}function Ay(){var r=hy(Yp());return r.copy=function(){return Pa(r,Ay()).exponent(r.exponent())},ys.apply(r,arguments)}function kL(){return Ay.apply(null,arguments).exponent(.5)}const Su=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iy,scaleDiverging:US,scaleDivergingLog:FS,scaleDivergingPow:Ay,scaleDivergingSqrt:kL,scaleDivergingSymlog:VS,scaleIdentity:bS,scaleImplicit:Tv,scaleLinear:vS,scaleLog:xS,scaleOrdinal:ry,scalePoint:yj,scalePow:fy,scaleQuantile:AS,scaleQuantize:ES,scaleRadial:wS,scaleSequential:RS,scaleSequentialLog:jS,scaleSequentialPow:wy,scaleSequentialQuantile:LS,scaleSequentialSqrt:TL,scaleSequentialSymlog:IS,scaleSqrt:hI,scaleSymlog:NS,scaleThreshold:SS,scaleTime:DL,scaleUtc:OL,tickFormat:gS},Symbol.toStringTag,{value:"Module"}));var eu=r=>r.chartData,Ey=L([eu],r=>{var e=r.chartData!=null?r.chartData.length-1:0;return{chartData:r.chartData,computedData:r.computedData,dataEndIndex:e,dataStartIndex:0}}),$S=(r,e,t,i)=>i?Ey(r):eu(r);function Kc(r){if(Array.isArray(r)&&r.length===2){var[e,t]=r;if(ei(e)&&ei(t))return!0}return!1}function ON(r,e,t){return t?r:[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}function ML(r,e){if(e&&typeof r!="function"&&Array.isArray(r)&&r.length===2){var[t,i]=r,n,s;if(ei(t))n=t;else if(typeof t=="function")return;if(ei(i))s=i;else if(typeof i=="function")return;var a=[n,s];if(Kc(a))return a}}function RL(r,e,t){if(!(!t&&e==null)){if(typeof r=="function"&&e!=null)try{var i=r(e,t);if(Kc(i))return ON(i,e,t)}catch{}if(Array.isArray(r)&&r.length===2){var[n,s]=r,a,o;if(n==="auto")e!=null&&(a=Math.min(...e));else if(ne(n))a=n;else if(typeof n=="function")try{e!=null&&(a=n(e==null?void 0:e[0]))}catch{}else if(typeof n=="string"&&_1.test(n)){var l=_1.exec(n);if(l==null||e==null)a=void 0;else{var c=+l[1];a=e[0]-c}}else a=e==null?void 0:e[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(ne(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&P1.test(s)){var u=P1.exec(s);if(u==null||e==null)o=void 0;else{var h=+u[1];o=e[1]+h}}else o=e==null?void 0:e[1];var f=[a,o];if(Kc(f))return e==null?f:ON(f,e,t)}}}var tu=1e9,jL={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_y,Ye=!0,wi="[DecimalError] ",Xo=wi+"Invalid argument: ",Sy=wi+"Exponent out of range: ",ru=Math.floor,Ta=Math.pow,IL=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qr,Mt=1e7,We=7,BS=9007199254740991,Tm=ru(BS/We),J={};J.absoluteValue=J.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};J.comparedTo=J.cmp=function(r){var e,t,i,n,s=this;if(r=new s.constructor(r),s.s!==r.s)return s.s||-r.s;if(s.e!==r.e)return s.e>r.e^s.s<0?1:-1;for(i=s.d.length,n=r.d.length,e=0,t=i<n?i:n;e<t;++e)if(s.d[e]!==r.d[e])return s.d[e]>r.d[e]^s.s<0?1:-1;return i===n?0:i>n^s.s<0?1:-1};J.decimalPlaces=J.dp=function(){var r=this,e=r.d.length-1,t=(e-r.e)*We;if(e=r.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};J.dividedBy=J.div=function(r){return us(this,new this.constructor(r))};J.dividedToIntegerBy=J.idiv=function(r){var e=this,t=e.constructor;return Ve(us(e,new t(r),0,1),t.precision)};J.equals=J.eq=function(r){return!this.cmp(r)};J.exponent=function(){return gt(this)};J.greaterThan=J.gt=function(r){return this.cmp(r)>0};J.greaterThanOrEqualTo=J.gte=function(r){return this.cmp(r)>=0};J.isInteger=J.isint=function(){return this.e>this.d.length-2};J.isNegative=J.isneg=function(){return this.s<0};J.isPositive=J.ispos=function(){return this.s>0};J.isZero=function(){return this.s===0};J.lessThan=J.lt=function(r){return this.cmp(r)<0};J.lessThanOrEqualTo=J.lte=function(r){return this.cmp(r)<1};J.logarithm=J.log=function(r){var e,t=this,i=t.constructor,n=i.precision,s=n+5;if(r===void 0)r=new i(10);else if(r=new i(r),r.s<1||r.eq(Qr))throw Error(wi+"NaN");if(t.s<1)throw Error(wi+(t.s?"NaN":"-Infinity"));return t.eq(Qr)?new i(0):(Ye=!1,e=us(ed(t,s),ed(r,s),s),Ye=!0,Ve(e,n))};J.minus=J.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?qS(e,r):HS(e,(r.s=-r.s,r))};J.modulo=J.mod=function(r){var e,t=this,i=t.constructor,n=i.precision;if(r=new i(r),!r.s)throw Error(wi+"NaN");return t.s?(Ye=!1,e=us(t,r,0,1).times(r),Ye=!0,t.minus(e)):Ve(new i(t),n)};J.naturalExponential=J.exp=function(){return zS(this)};J.naturalLogarithm=J.ln=function(){return ed(this)};J.negated=J.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};J.plus=J.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?HS(e,r):qS(e,(r.s=-r.s,r))};J.precision=J.sd=function(r){var e,t,i,n=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Xo+r);if(e=gt(n)+1,i=n.d.length-1,t=i*We+1,i=n.d[i],i){for(;i%10==0;i/=10)t--;for(i=n.d[0];i>=10;i/=10)t++}return r&&e>t?e:t};J.squareRoot=J.sqrt=function(){var r,e,t,i,n,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(wi+"NaN")}for(r=gt(o),Ye=!1,n=Math.sqrt(+o),n==0||n==1/0?(e=gn(o.d),(e.length+r)%2==0&&(e+="0"),n=Math.sqrt(e),r=ru((r+1)/2)-(r<0||r%2),n==1/0?e="5e"+r:(e=n.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),i=new l(e)):i=new l(n.toString()),t=l.precision,n=a=t+3;;)if(s=i,i=s.plus(us(o,s,a+2)).times(.5),gn(s.d).slice(0,a)===(e=gn(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),n==a&&e=="4999"){if(Ve(s,t+1,0),s.times(s).eq(o)){i=s;break}}else if(e!="9999")break;a+=4}return Ye=!0,Ve(i,t)};J.times=J.mul=function(r){var e,t,i,n,s,a,o,l,c,u=this,h=u.constructor,f=u.d,m=(r=new h(r)).d;if(!u.s||!r.s)return new h(0);for(r.s*=u.s,t=u.e+r.e,l=f.length,c=m.length,l<c&&(s=f,f=m,m=s,a=l,l=c,c=a),s=[],a=l+c,i=a;i--;)s.push(0);for(i=c;--i>=0;){for(e=0,n=l+i;n>i;)o=s[n]+m[i]*f[n-i-1]+e,s[n--]=o%Mt|0,e=o/Mt|0;s[n]=(s[n]+e)%Mt|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=t,Ye?Ve(r,h.precision):r};J.toDecimalPlaces=J.todp=function(r,e){var t=this,i=t.constructor;return t=new i(t),r===void 0?t:(yn(r,0,tu),e===void 0?e=i.rounding:yn(e,0,8),Ve(t,r+gt(t)+1,e))};J.toExponential=function(r,e){var t,i=this,n=i.constructor;return r===void 0?t=rl(i,!0):(yn(r,0,tu),e===void 0?e=n.rounding:yn(e,0,8),i=Ve(new n(i),r+1,e),t=rl(i,!0,r+1)),t};J.toFixed=function(r,e){var t,i,n=this,s=n.constructor;return r===void 0?rl(n):(yn(r,0,tu),e===void 0?e=s.rounding:yn(e,0,8),i=Ve(new s(n),r+gt(n)+1,e),t=rl(i.abs(),!1,r+gt(i)+1),n.isneg()&&!n.isZero()?"-"+t:t)};J.toInteger=J.toint=function(){var r=this,e=r.constructor;return Ve(new e(r),gt(r)+1,e.rounding)};J.toNumber=function(){return+this};J.toPower=J.pow=function(r){var e,t,i,n,s,a,o=this,l=o.constructor,c=12,u=+(r=new l(r));if(!r.s)return new l(Qr);if(o=new l(o),!o.s){if(r.s<1)throw Error(wi+"Infinity");return o}if(o.eq(Qr))return o;if(i=l.precision,r.eq(Qr))return Ve(o,i);if(e=r.e,t=r.d.length-1,a=e>=t,s=o.s,a){if((t=u<0?-u:u)<=BS){for(n=new l(Qr),e=Math.ceil(i/We+4),Ye=!1;t%2&&(n=n.times(o),kN(n.d,e)),t=ru(t/2),t!==0;)o=o.times(o),kN(o.d,e);return Ye=!0,r.s<0?new l(Qr).div(n):Ve(n,i)}}else if(s<0)throw Error(wi+"NaN");return s=s<0&&r.d[Math.max(e,t)]&1?-1:1,o.s=1,Ye=!1,n=r.times(ed(o,i+c)),Ye=!0,n=zS(n),n.s=s,n};J.toPrecision=function(r,e){var t,i,n=this,s=n.constructor;return r===void 0?(t=gt(n),i=rl(n,t<=s.toExpNeg||t>=s.toExpPos)):(yn(r,1,tu),e===void 0?e=s.rounding:yn(e,0,8),n=Ve(new s(n),r,e),t=gt(n),i=rl(n,r<=t||t<=s.toExpNeg,r)),i};J.toSignificantDigits=J.tosd=function(r,e){var t=this,i=t.constructor;return r===void 0?(r=i.precision,e=i.rounding):(yn(r,1,tu),e===void 0?e=i.rounding:yn(e,0,8)),Ve(new i(t),r,e)};J.toString=J.valueOf=J.val=J.toJSON=J[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=gt(r),t=r.constructor;return rl(r,e<=t.toExpNeg||e>=t.toExpPos)};function HS(r,e){var t,i,n,s,a,o,l,c,u=r.constructor,h=u.precision;if(!r.s||!e.s)return e.s||(e=new u(r)),Ye?Ve(e,h):e;if(l=r.d,c=e.d,a=r.e,n=e.e,l=l.slice(),s=a-n,s){for(s<0?(i=l,s=-s,o=c.length):(i=c,n=a,o=l.length),a=Math.ceil(h/We),o=a>o?a+1:o+1,s>o&&(s=o,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,i=c,c=l,l=i),t=0;s;)t=(l[--s]=l[s]+c[s]+t)/Mt|0,l[s]%=Mt;for(t&&(l.unshift(t),++n),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=n,Ye?Ve(e,h):e}function yn(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Xo+r)}function gn(r){var e,t,i,n=r.length-1,s="",a=r[0];if(n>0){for(s+=a,e=1;e<n;e++)i=r[e]+"",t=We-i.length,t&&(s+=Cs(t)),s+=i;a=r[e],i=a+"",t=We-i.length,t&&(s+=Cs(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var us=function(){function r(i,n){var s,a=0,o=i.length;for(i=i.slice();o--;)s=i[o]*n+a,i[o]=s%Mt|0,a=s/Mt|0;return a&&i.unshift(a),i}function e(i,n,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=n[o]){l=i[o]>n[o]?1:-1;break}return l}function t(i,n,s){for(var a=0;s--;)i[s]-=a,a=i[s]<n[s]?1:0,i[s]=a*Mt+i[s]-n[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,s,a){var o,l,c,u,h,f,m,p,g,b,y,N,w,_,P,O,T,C,D=i.constructor,k=i.s==n.s?1:-1,M=i.d,j=n.d;if(!i.s)return new D(i);if(!n.s)throw Error(wi+"Division by zero");for(l=i.e-n.e,T=j.length,P=M.length,m=new D(k),p=m.d=[],c=0;j[c]==(M[c]||0);)++c;if(j[c]>(M[c]||0)&&--l,s==null?N=s=D.precision:a?N=s+(gt(i)-gt(n))+1:N=s,N<0)return new D(0);if(N=N/We+2|0,c=0,T==1)for(u=0,j=j[0],N++;(c<P||u)&&N--;c++)w=u*Mt+(M[c]||0),p[c]=w/j|0,u=w%j|0;else{for(u=Mt/(j[0]+1)|0,u>1&&(j=r(j,u),M=r(M,u),T=j.length,P=M.length),_=T,g=M.slice(0,T),b=g.length;b<T;)g[b++]=0;C=j.slice(),C.unshift(0),O=j[0],j[1]>=Mt/2&&++O;do u=0,o=e(j,g,T,b),o<0?(y=g[0],T!=b&&(y=y*Mt+(g[1]||0)),u=y/O|0,u>1?(u>=Mt&&(u=Mt-1),h=r(j,u),f=h.length,b=g.length,o=e(h,g,f,b),o==1&&(u--,t(h,T<f?C:j,f))):(u==0&&(o=u=1),h=j.slice()),f=h.length,f<b&&h.unshift(0),t(g,h,b),o==-1&&(b=g.length,o=e(j,g,T,b),o<1&&(u++,t(g,T<b?C:j,b))),b=g.length):o===0&&(u++,g=[0]),p[c++]=u,o&&g[0]?g[b++]=M[_]||0:(g=[M[_]],b=1);while((_++<P||g[0]!==void 0)&&N--)}return p[0]||p.shift(),m.e=l,Ve(m,a?s+gt(m)+1:s)}}();function zS(r,e){var t,i,n,s,a,o,l=0,c=0,u=r.constructor,h=u.precision;if(gt(r)>16)throw Error(Sy+gt(r));if(!r.s)return new u(Qr);for(Ye=!1,o=h,a=new u(.03125);r.abs().gte(.1);)r=r.times(a),c+=5;for(i=Math.log(Ta(2,c))/Math.LN10*2+5|0,o+=i,t=n=s=new u(Qr),u.precision=o;;){if(n=Ve(n.times(r),o),t=t.times(++l),a=s.plus(us(n,t,o)),gn(a.d).slice(0,o)===gn(s.d).slice(0,o)){for(;c--;)s=Ve(s.times(s),o);return u.precision=h,e==null?(Ye=!0,Ve(s,h)):s}s=a}}function gt(r){for(var e=r.e*We,t=r.d[0];t>=10;t/=10)e++;return e}function Lg(r,e,t){if(e>r.LN10.sd())throw Ye=!0,t&&(r.precision=t),Error(wi+"LN10 precision limit exceeded");return Ve(new r(r.LN10),e)}function Cs(r){for(var e="";r--;)e+="0";return e}function ed(r,e){var t,i,n,s,a,o,l,c,u,h=1,f=10,m=r,p=m.d,g=m.constructor,b=g.precision;if(m.s<1)throw Error(wi+(m.s?"NaN":"-Infinity"));if(m.eq(Qr))return new g(0);if(e==null?(Ye=!1,c=b):c=e,m.eq(10))return e==null&&(Ye=!0),Lg(g,c);if(c+=f,g.precision=c,t=gn(p),i=t.charAt(0),s=gt(m),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)m=m.times(r),t=gn(m.d),i=t.charAt(0),h++;s=gt(m),i>1?(m=new g("0."+t),s++):m=new g(i+"."+t.slice(1))}else return l=Lg(g,c+2,b).times(s+""),m=ed(new g(i+"."+t.slice(1)),c-f).plus(l),g.precision=b,e==null?(Ye=!0,Ve(m,b)):m;for(o=a=m=us(m.minus(Qr),m.plus(Qr),c),u=Ve(m.times(m),c),n=3;;){if(a=Ve(a.times(u),c),l=o.plus(us(a,new g(n),c)),gn(l.d).slice(0,c)===gn(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(Lg(g,c+2,b).times(s+""))),o=us(o,new g(h),c),g.precision=b,e==null?(Ye=!0,Ve(o,b)):o;o=l,n+=2}}function TN(r,e){var t,i,n;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;)++i;for(n=e.length;e.charCodeAt(n-1)===48;)--n;if(e=e.slice(i,n),e){if(n-=i,t=t-i-1,r.e=ru(t/We),r.d=[],i=(t+1)%We,t<0&&(i+=We),i<n){for(i&&r.d.push(+e.slice(0,i)),n-=We;i<n;)r.d.push(+e.slice(i,i+=We));e=e.slice(i),i=We-e.length}else i-=n;for(;i--;)e+="0";if(r.d.push(+e),Ye&&(r.e>Tm||r.e<-Tm))throw Error(Sy+t)}else r.s=0,r.e=0,r.d=[0];return r}function Ve(r,e,t){var i,n,s,a,o,l,c,u,h=r.d;for(a=1,s=h[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=We,n=e,c=h[u=0];else{if(u=Math.ceil((i+1)/We),s=h.length,u>=s)return r;for(c=s=h[u],a=1;s>=10;s/=10)a++;i%=We,n=i-We+a}if(t!==void 0&&(s=Ta(10,a-n-1),o=c/s%10|0,l=e<0||h[u+1]!==void 0||c%s,l=t<4?(o||l)&&(t==0||t==(r.s<0?3:2)):o>5||o==5&&(t==4||l||t==6&&(i>0?n>0?c/Ta(10,a-n):0:h[u-1])%10&1||t==(r.s<0?8:7))),e<1||!h[0])return l?(s=gt(r),h.length=1,e=e-s-1,h[0]=Ta(10,(We-e%We)%We),r.e=ru(-e/We)||0):(h.length=1,h[0]=r.e=r.s=0),r;if(i==0?(h.length=u,s=1,u--):(h.length=u+1,s=Ta(10,We-i),h[u]=n>0?(c/Ta(10,a-n)%Ta(10,n)|0)*s:0),l)for(;;)if(u==0){(h[0]+=s)==Mt&&(h[0]=1,++r.e);break}else{if(h[u]+=s,h[u]!=Mt)break;h[u--]=0,s=1}for(i=h.length;h[--i]===0;)h.pop();if(Ye&&(r.e>Tm||r.e<-Tm))throw Error(Sy+gt(r));return r}function qS(r,e){var t,i,n,s,a,o,l,c,u,h,f=r.constructor,m=f.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new f(r),Ye?Ve(e,m):e;if(l=r.d,h=e.d,i=e.e,c=r.e,l=l.slice(),a=c-i,a){for(u=a<0,u?(t=l,a=-a,o=h.length):(t=h,i=c,o=l.length),n=Math.max(Math.ceil(m/We),o)+2,a>n&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for(n=l.length,o=h.length,u=n<o,u&&(o=n),n=0;n<o;n++)if(l[n]!=h[n]){u=l[n]<h[n];break}a=0}for(u&&(t=l,l=h,h=t,e.s=-e.s),o=l.length,n=h.length-o;n>0;--n)l[o++]=0;for(n=h.length;n>a;){if(l[--n]<h[n]){for(s=n;s&&l[--s]===0;)l[s]=Mt-1;--l[s],l[n]+=Mt}l[n]-=h[n]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(e.d=l,e.e=i,Ye?Ve(e,m):e):new f(0)}function rl(r,e,t){var i,n=gt(r),s=gn(r.d),a=s.length;return e?(t&&(i=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Cs(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n<0?"e":"e+")+n):n<0?(s="0."+Cs(-n-1)+s,t&&(i=t-a)>0&&(s+=Cs(i))):n>=a?(s+=Cs(n+1-a),t&&(i=t-n-1)>0&&(s=s+"."+Cs(i))):((i=n+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),t&&(i=t-a)>0&&(n+1===a&&(s+="."),s+=Cs(i))),r.s<0?"-"+s:s}function kN(r,e){if(r.length>e)return r.length=e,!0}function WS(r){var e,t,i;function n(s){var a=this;if(!(a instanceof n))return new n(s);if(a.constructor=n,s instanceof n){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Xo+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return TN(a,s.toString())}else if(typeof s!="string")throw Error(Xo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,IL.test(s))TN(a,s);else throw Error(Xo+s)}if(n.prototype=J,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=WS,n.config=n.set=LL,r===void 0&&(r={}),r)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)r.hasOwnProperty(t=i[e++])||(r[t]=this[t]);return n.config(r),n}function LL(r){if(!r||typeof r!="object")throw Error(wi+"Object expected");var e,t,i,n=["precision",1,tu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<n.length;e+=3)if((i=r[t=n[e]])!==void 0)if(ru(i)===i&&i>=n[e+1]&&i<=n[e+2])this[t]=i;else throw Error(Xo+t+": "+i);if((i=r[t="LN10"])!==void 0)if(i==Math.LN10)this[t]=new this(i);else throw Error(Xo+t+": "+i);return this}var _y=WS(jL);Qr=new _y(1);const De=_y;var UL=r=>r,GS={},KS=r=>r===GS,MN=r=>function e(){return arguments.length===0||arguments.length===1&&KS(arguments.length<=0?void 0:arguments[0])?e:r(...arguments)},QS=(r,e)=>r===1?e:MN(function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var s=i.filter(a=>a!==GS).length;return s>=r?e(...i):QS(r-s,MN(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=i.map(u=>KS(u)?o.shift():u);return e(...c,...o)}))}),Xp=r=>QS(r.length,r),jv=(r,e)=>{for(var t=[],i=r;i<e;++i)t[i-r]=i;return t},FL=Xp((r,e)=>Array.isArray(e)?e.map(r):Object.keys(e).map(t=>e[t]).map(r)),VL=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!t.length)return UL;var n=t.reverse(),s=n[0],a=n.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},Iv=r=>Array.isArray(r)?r.reverse():r.split("").reverse().join(""),YS=r=>{var e=null,t=null;return function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e&&n.every((a,o)=>{var l;return a===((l=e)===null||l===void 0?void 0:l[o])})||(e=n,t=r(...n)),t}};function XS(r){var e;return r===0?e=1:e=Math.floor(new De(r).abs().log(10).toNumber())+1,e}function ZS(r,e,t){for(var i=new De(r),n=0,s=[];i.lt(e)&&n<1e5;)s.push(i.toNumber()),i=i.add(t),n++;return s}Xp((r,e,t)=>{var i=+r,n=+e;return i+t*(n-i)});Xp((r,e,t)=>{var i=e-+r;return i=i||1/0,(t-r)/i});Xp((r,e,t)=>{var i=e-+r;return i=i||1/0,Math.max(0,Math.min(1,(t-r)/i))});var JS=r=>{var[e,t]=r,[i,n]=[e,t];return e>t&&([i,n]=[t,e]),[i,n]},e_=(r,e,t)=>{if(r.lte(0))return new De(0);var i=XS(r.toNumber()),n=new De(10).pow(i),s=r.div(n),a=i!==1?.05:.1,o=new De(Math.ceil(s.div(a).toNumber())).add(t).mul(a),l=o.mul(n);return e?new De(l.toNumber()):new De(Math.ceil(l.toNumber()))},$L=(r,e,t)=>{var i=new De(1),n=new De(r);if(!n.isint()&&t){var s=Math.abs(r);s<1?(i=new De(10).pow(XS(r)-1),n=new De(Math.floor(n.div(i).toNumber())).mul(i)):s>1&&(n=new De(Math.floor(r)))}else r===0?n=new De(Math.floor((e-1)/2)):t||(n=new De(Math.floor(r)));var a=Math.floor((e-1)/2),o=VL(FL(l=>n.add(new De(l-a).mul(i)).toNumber()),jv);return o(0,e)},t_=function(e,t,i,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(i-1)))return{step:new De(0),tickMin:new De(0),tickMax:new De(0)};var a=e_(new De(t).sub(e).div(i-1),n,s),o;e<=0&&t>=0?o=new De(0):(o=new De(e).add(t).div(2),o=o.sub(new De(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new De(t).sub(o).div(a).toNumber()),u=l+c+1;return u>i?t_(e,t,i,n,s+1):(u<i&&(c=t>0?c+(i-u):c,l=t>0?l:l+(i-u)),{step:a,tickMin:o.sub(new De(l).mul(a)),tickMax:o.add(new De(c).mul(a))})};function BL(r){var[e,t]=r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[a,o]=JS([e,t]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...jv(0,i-1).map(()=>1/0)]:[...jv(0,i-1).map(()=>-1/0),o];return e>t?Iv(l):l}if(a===o)return $L(a,i,n);var{step:c,tickMin:u,tickMax:h}=t_(a,o,s,n,0),f=ZS(u,h.add(new De(.1).mul(c)),c);return e>t?Iv(f):f}function HL(r,e){var[t,i]=r,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=JS([t,i]);if(s===-1/0||a===1/0)return[t,i];if(s===a)return[s];var o=Math.max(e,2),l=e_(new De(a).sub(s).div(o-1),n,0),c=[...ZS(new De(s),new De(a).sub(new De(.99).mul(l)),l),a];return t>i?Iv(c):c}var zL=YS(BL),qL=YS(HL),r_=r=>r.rootProps.maxBarSize,WL=r=>r.rootProps.barGap,i_=r=>r.rootProps.barCategoryGap,GL=r=>r.rootProps.barSize,Hh=r=>r.rootProps.stackOffset,Py=r=>r.options.chartName,Cy=r=>r.rootProps.syncId,n_=r=>r.rootProps.syncMethod,Dy=r=>r.options.eventEmitter,ss={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},qr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Zp=(r,e)=>{if(!(!r||!e))return r!=null&&r.reversed?[e[1],e[0]]:e},KL={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ss.angleAxisId,includeHidden:!1,name:void 0,reversed:ss.reversed,scale:ss.scale,tick:ss.tick,tickCount:void 0,ticks:void 0,type:ss.type,unit:void 0},QL={allowDataOverflow:qr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:qr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:qr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:qr.scale,tick:qr.tick,tickCount:qr.tickCount,ticks:void 0,type:qr.type,unit:void 0},YL={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ss.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ss.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ss.scale,tick:ss.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},XL={allowDataOverflow:qr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:qr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:qr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:qr.scale,tick:qr.tick,tickCount:qr.tickCount,ticks:void 0,type:"category",unit:void 0},Oy=(r,e)=>r.polarAxis.angleAxis[e]!=null?r.polarAxis.angleAxis[e]:r.layout.layoutType==="radial"?YL:KL,Ty=(r,e)=>r.polarAxis.radiusAxis[e]!=null?r.polarAxis.radiusAxis[e]:r.layout.layoutType==="radial"?XL:QL,Jp=r=>r.polarOptions,ky=L([Ea,Sa,Rt],ME),s_=L([Jp,ky],(r,e)=>{if(r!=null)return gr(r.innerRadius,e,0)}),a_=L([Jp,ky],(r,e)=>{if(r!=null)return gr(r.outerRadius,e,e*.8)}),ZL=r=>{if(r==null)return[0,0];var{startAngle:e,endAngle:t}=r;return[e,t]},o_=L([Jp],ZL);L([Oy,o_],Zp);var l_=L([ky,s_,a_],(r,e,t)=>{if(!(r==null||e==null||t==null))return[e,t]});L([Ty,l_],Zp);var JL=L([Re,Jp,s_,a_,Ea,Sa],(r,e,t,i,n,s)=>{if(!(r!=="centric"&&r!=="radial"||e==null||t==null||i==null)){var{cx:a,cy:o,startAngle:l,endAngle:c}=e;return{cx:gr(a,n,n/2),cy:gr(o,s,s/2),innerRadius:t,outerRadius:i,startAngle:l,endAngle:c,clockWise:!1}}}),ot=(r,e)=>e,zh=(r,e,t)=>t;function RN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function km(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RN(Object(t),!0).forEach(function(i){eU(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):RN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function eU(r,e,t){return(e=tU(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tU(r){var e=rU(r,"string");return typeof e=="symbol"?e:e+""}function rU(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Lv=[0,"auto"],Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xs=(r,e)=>{var t=r.cartesianAxis.xAxis[e];return t??Cr},Dr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Lv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Bp},Ca=(r,e)=>{var t=r.cartesianAxis.yAxis[e];return t??Dr},iU={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},My=(r,e)=>{var t=r.cartesianAxis.zAxis[e];return t??iU},lt=(r,e,t)=>{switch(e){case"xAxis":return xs(r,t);case"yAxis":return Ca(r,t);case"zAxis":return My(r,t);case"angleAxis":return Oy(r,t);case"radiusAxis":return Ty(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},nU=(r,e,t)=>{switch(e){case"xAxis":return xs(r,t);case"yAxis":return Ca(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},qh=(r,e,t)=>{switch(e){case"xAxis":return xs(r,t);case"yAxis":return Ca(r,t);case"angleAxis":return Oy(r,t);case"radiusAxis":return Ty(r,t);default:throw new Error("Unexpected axis type: ".concat(e))}},c_=r=>r.graphicalItems.countOfBars>0;function Ry(r,e){return t=>{switch(r){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var jy=r=>r.graphicalItems.cartesianItems,sU=L([ot,zh],Ry),Iy=(r,e,t)=>r.filter(t).filter(i=>(e==null?void 0:e.includeHidden)===!0?!0:!i.hide),Wh=L([jy,lt,sU],Iy),u_=r=>r.filter(e=>e.stackId===void 0),aU=L([Wh],u_),Ly=r=>r.map(e=>e.data).filter(Boolean).flat(1),oU=L([Wh],Ly),Uy=(r,e)=>{var{chartData:t=[],dataStartIndex:i,dataEndIndex:n}=e;return r.length>0?r:t.slice(i,n+1)},eg=L([oU,$S],Uy),Fy=(r,e,t)=>(e==null?void 0:e.dataKey)!=null?r.map(i=>({value:it(i,e.dataKey)})):t.length>0?t.map(i=>i.dataKey).flatMap(i=>r.map(n=>({value:it(n,i)}))):r.map(i=>({value:i})),tg=L([eg,lt,Wh],Fy);function d_(r,e){switch(r){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function ul(r){return r.filter(e=>bn(e)||e instanceof Date).map(Number).filter(e=>xi(e)===!1)}function lU(r,e,t){return!t||typeof e!="number"||xi(e)?[]:t.length?ul(t.flatMap(i=>{var n=it(r,i.dataKey),s,a;if(Array.isArray(n)?[s,a]=n:s=a=n,!(!ei(s)||!ei(a)))return[e-s,e+a]})):[]}var h_=(r,e,t)=>{var i={},n=e.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),i);return Object.fromEntries(Object.entries(n).map(s=>{var[a,o]=s,l=o.map(c=>c.dataKey);return[a,{stackedData:vM(r,l,t),graphicalItems:o}]}))},Uv=L([eg,Wh,Hh],h_),f_=(r,e,t)=>{var{dataStartIndex:i,dataEndIndex:n}=e;if(t!=="zAxis"){var s=NM(r,i,n);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},cU=L([Uv,eu,ot],f_),m_=(r,e,t,i)=>t.length>0?r.flatMap(n=>t.flatMap(s=>{var a,o,l=(a=s.errorBars)===null||a===void 0?void 0:a.filter(u=>d_(i,u)),c=it(n,(o=e.dataKey)!==null&&o!==void 0?o:s.dataKey);return{value:c,errorDomain:lU(n,c,l)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?r.map(n=>({value:it(n,e.dataKey),errorDomain:[]})):r.map(n=>({value:n,errorDomain:[]})),uU=L(eg,lt,aU,ot,m_);function dU(r){var{value:e}=r;if(bn(e)||e instanceof Date)return e}var hU=r=>{var e=r.flatMap(i=>[i.value,i.errorDomain]).flat(1),t=ul(e);if(t.length!==0)return[Math.min(...t),Math.max(...t)]},fU=(r,e,t)=>{var i=r.map(dU).filter(n=>n!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&pA(i))?aS(0,r.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},Vy=r=>{var e;if(r==null||!("domain"in r))return Lv;if(r.domain!=null)return r.domain;if(r.ticks!=null){if(r.type==="number"){var t=ul(r.ticks);return[Math.min(...t),Math.max(...t)]}if(r.type==="category")return r.ticks.map(String)}return(e=r==null?void 0:r.domain)!==null&&e!==void 0?e:Lv},$y=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.filter(Boolean);if(n.length!==0){var s=n.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},p_=r=>r.referenceElements.dots,iu=(r,e,t)=>r.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===t:i.yAxisId===t),mU=L([p_,ot,zh],iu),g_=r=>r.referenceElements.areas,pU=L([g_,ot,zh],iu),v_=r=>r.referenceElements.lines,gU=L([v_,ot,zh],iu),b_=(r,e)=>{var t=ul(r.map(i=>e==="xAxis"?i.x:i.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},vU=L(mU,ot,b_),y_=(r,e)=>{var t=ul(r.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},bU=L([pU,ot],y_),x_=(r,e)=>{var t=ul(r.map(i=>e==="xAxis"?i.x:i.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},yU=L(gU,ot,x_),xU=L(vU,yU,bU,(r,e,t)=>$y(r,t,e)),N_=L([lt],Vy),By=(r,e,t,i,n)=>{var s=ML(e,r.allowDataOverflow);return s??RL(e,$y(t,n,hU(i)),r.allowDataOverflow)},NU=L([lt,N_,cU,uU,xU],By),wU=[0,1],Hy=(r,e,t,i,n,s,a)=>{if(!(r==null||t==null||t.length===0)){var{dataKey:o,type:l}=r,c=ol(e,s);return c&&o==null?aS(0,t.length):l==="category"?fU(i,r,c):n==="expand"?wU:a}},zy=L([lt,Re,eg,tg,Hh,ot,NU],Hy),w_=(r,e,t,i,n)=>{if(r!=null){var{scale:s,type:a}=r;if(s==="auto")return e==="radial"&&n==="radiusAxis"?"band":e==="radial"&&n==="angleAxis"?"linear":a==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(jh(s));return o in Su?o:"point"}}},nu=L([lt,Re,c_,Py,ot],w_);function AU(r){if(r!=null){if(r in Su)return Su[r]();var e="scale".concat(jh(r));if(e in Su)return Su[e]()}}function qy(r,e,t,i){if(!(t==null||i==null)){if(typeof r.scale=="function")return r.scale.copy().domain(t).range(i);var n=AU(e);if(n!=null){var s=n.domain(t).range(i);return hM(s),s}}}var Wy=(r,e,t)=>{var i=Vy(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Kc(r))return zL(r,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Kc(r))return qL(r,e.tickCount,e.allowDecimals)}},Gy=L([zy,qh,nu],Wy),Ky=(r,e,t,i)=>{if(i!=="angleAxis"&&(r==null?void 0:r.type)==="number"&&Kc(e)&&Array.isArray(t)&&t.length>0){var n=e[0],s=t[0],a=e[1],o=t[t.length-1];return[Math.min(n,s),Math.max(a,o)]}return e},EU=L([lt,zy,Gy,ot],Ky),SU=L(tg,lt,(r,e)=>{if(!(!e||e.type!=="number")){var t=1/0,i=Array.from(ul(r.map(o=>o.value))).sort((o,l)=>o-l);if(i.length<2)return 1/0;var n=i[i.length-1]-i[0];if(n===0)return 1/0;for(var s=0;s<i.length-1;s++){var a=i[s+1]-i[s];t=Math.min(t,a)}return t/n}}),A_=L(SU,Re,i_,Rt,(r,e,t,i)=>i,(r,e,t,i,n)=>{if(!ei(r))return 0;var s=e==="vertical"?i.height:i.width;if(n==="gap")return r*s/2;if(n==="no-gap"){var a=gr(t,r*s),o=r*s/2;return o-a-(o-a)/s*a}return 0}),_U=(r,e)=>{var t=xs(r,e);return t==null||typeof t.padding!="string"?0:A_(r,"xAxis",e,t.padding)},PU=(r,e)=>{var t=Ca(r,e);return t==null||typeof t.padding!="string"?0:A_(r,"yAxis",e,t.padding)},CU=L(xs,_U,(r,e)=>{var t,i;if(r==null)return{left:0,right:0};var{padding:n}=r;return typeof n=="string"?{left:e,right:e}:{left:((t=n.left)!==null&&t!==void 0?t:0)+e,right:((i=n.right)!==null&&i!==void 0?i:0)+e}}),DU=L(Ca,PU,(r,e)=>{var t,i;if(r==null)return{top:0,bottom:0};var{padding:n}=r;return typeof n=="string"?{top:e,bottom:e}:{top:((t=n.top)!==null&&t!==void 0?t:0)+e,bottom:((i=n.bottom)!==null&&i!==void 0?i:0)+e}}),OU=L([Rt,CU,zp,Hp,(r,e,t)=>t],(r,e,t,i,n)=>{var{padding:s}=i;return n?[s.left,t.width-s.right]:[r.left+e.left,r.left+r.width-e.right]}),TU=L([Rt,Re,DU,zp,Hp,(r,e,t)=>t],(r,e,t,i,n,s)=>{var{padding:a}=n;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[r.top+r.height-t.bottom,r.top+t.top]:[r.top+t.top,r.top+r.height-t.bottom]}),Gh=(r,e,t,i)=>{var n;switch(e){case"xAxis":return OU(r,t,i);case"yAxis":return TU(r,t,i);case"zAxis":return(n=My(r,t))===null||n===void 0?void 0:n.range;case"angleAxis":return o_(r);case"radiusAxis":return l_(r,t);default:return}},E_=L([lt,Gh],Zp),su=L([lt,nu,EU,E_],qy);L(Wh,ot,(r,e)=>r.flatMap(t=>{var i;return(i=t.errorBars)!==null&&i!==void 0?i:[]}).filter(t=>d_(e,t)));function S_(r,e){return r.id<e.id?-1:r.id>e.id?1:0}var rg=(r,e)=>e,ig=(r,e,t)=>t,kU=L(K0,rg,ig,(r,e,t)=>r.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(S_)),MU=L(Q0,rg,ig,(r,e,t)=>r.filter(i=>i.orientation===e).filter(i=>i.mirror===t).sort(S_)),__=(r,e)=>({width:r.width,height:e.height}),RU=(r,e)=>{var t=typeof e.width=="number"?e.width:Bp;return{width:t,height:r.height}},P_=L(Rt,xs,__),jU=(r,e,t)=>{switch(e){case"top":return r.top;case"bottom":return t-r.bottom;default:return 0}},IU=(r,e,t)=>{switch(e){case"left":return r.left;case"right":return t-r.right;default:return 0}},LU=L(Sa,Rt,kU,rg,ig,(r,e,t,i,n)=>{var s={},a;return t.forEach(o=>{var l=__(e,o);a==null&&(a=jU(e,i,r));var c=i==="top"&&!n||i==="bottom"&&n;s[o.id]=a-Number(c)*l.height,a+=(c?-1:1)*l.height}),s}),UU=L(Ea,Rt,MU,rg,ig,(r,e,t,i,n)=>{var s={},a;return t.forEach(o=>{var l=RU(e,o);a==null&&(a=IU(e,i,r));var c=i==="left"&&!n||i==="right"&&n;s[o.id]=a-Number(c)*l.width,a+=(c?-1:1)*l.width}),s}),FU=(r,e)=>{var t=Rt(r),i=xs(r,e);if(i!=null){var n=LU(r,i.orientation,i.mirror),s=n[e];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}},VU=(r,e)=>{var t=Rt(r),i=Ca(r,e);if(i!=null){var n=UU(r,i.orientation,i.mirror),s=n[e];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}},C_=L(Rt,Ca,(r,e)=>{var t=typeof e.width=="number"?e.width:Bp;return{width:t,height:r.height}}),jN=(r,e,t)=>{switch(e){case"xAxis":return P_(r,t).width;case"yAxis":return C_(r,t).height;default:return}},D_=(r,e,t,i)=>{if(t!=null){var{allowDuplicatedCategory:n,type:s,dataKey:a}=t,o=ol(r,i),l=e.map(c=>c.value);if(a&&o&&s==="category"&&n&&pA(l))return l}},Qy=L([Re,tg,lt,ot],D_),O_=(r,e,t,i)=>{if(!(t==null||t.dataKey==null)){var{type:n,scale:s}=t,a=ol(r,i);if(a&&(n==="number"||s!=="auto"))return e.map(o=>o.value)}},Yy=L([Re,tg,qh,ot],O_);L([Re,nU,nu,su,Qy,Yy,Gh,Gy,ot],(r,e,t,i,n,s,a,o,l)=>{if(e==null)return null;var c=ol(r,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:n,isCategorical:c,niceTicks:o,range:a,realScaleType:t,scale:i}});var $U=(r,e,t,i,n,s,a,o,l)=>{if(!(e==null||i==null)){var c=ol(r,l),{type:u,ticks:h,tickCount:f}=e,m=t==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,p=u==="category"&&i.bandwidth?i.bandwidth()/m:0;p=l==="angleAxis"&&s!=null&&s.length>=2?Gt(s[0]-s[1])*2*p:p;var g=h||n;if(g){var b=g.map((y,N)=>{var w=a?a.indexOf(y):y;return{index:N,coordinate:i(w)+p,value:y,offset:p}});return b.filter(y=>!xi(y.coordinate))}return c&&o?o.map((y,N)=>({coordinate:i(y)+p,value:y,index:N,offset:p})):i.ticks?i.ticks(f).map(y=>({coordinate:i(y)+p,value:y,offset:p})):i.domain().map((y,N)=>({coordinate:i(y)+p,value:a?a[y]:y,index:N,offset:p}))}},T_=L([Re,qh,nu,su,Gy,Gh,Qy,Yy,ot],$U),BU=(r,e,t,i,n,s,a)=>{if(!(e==null||t==null||i==null||i[0]===i[1])){var o=ol(r,a),{tickCount:l}=e,c=0;return c=a==="angleAxis"&&(i==null?void 0:i.length)>=2?Gt(i[0]-i[1])*2*c:c,o&&s?s.map((u,h)=>({coordinate:t(u)+c,value:u,index:h,offset:c})):t.ticks?t.ticks(l).map(u=>({coordinate:t(u)+c,value:u,offset:c})):t.domain().map((u,h)=>({coordinate:t(u)+c,value:n?n[u]:u,index:h,offset:c}))}},Qc=L([Re,qh,su,Gh,Qy,Yy,ot],BU),ba=L(lt,su,(r,e)=>{if(!(r==null||e==null))return km(km({},r),{},{scale:e})}),HU=L([lt,nu,zy,E_],qy);L((r,e,t)=>My(r,t),HU,(r,e)=>{if(!(r==null||e==null))return km(km({},r),{},{scale:e})});var zU=L([Re,K0,Q0],(r,e,t)=>{switch(r){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),k_=r=>r.options.defaultTooltipEventType,M_=r=>r.options.validateTooltipEventTypes;function R_(r,e,t){if(r==null)return e;var i=r?"axis":"item";return t==null?e:t.includes(i)?i:e}function Xy(r,e){var t=k_(r),i=M_(r);return R_(e,t,i)}function qU(r){return ae(e=>Xy(e,r))}var j_=(r,e)=>{var t,i=Number(e);if(!(xi(i)||e==null))return i>=0?r==null||(t=r[i])===null||t===void 0?void 0:t.value:void 0},WU=r=>r.tooltip.settings,Ds={active:!1,index:null,dataKey:void 0,coordinate:void 0},GU={itemInteraction:{click:Ds,hover:Ds},axisInteraction:{click:Ds,hover:Ds},keyboardInteraction:Ds,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},I_=Ei({name:"tooltip",initialState:GU,reducers:{addTooltipEntrySettings(r,e){r.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(r,e){var t=pa(r).tooltipItemPayloads.indexOf(e.payload);t>-1&&r.tooltipItemPayloads.splice(t,1)},setTooltipSettingsState(r,e){r.settings=e.payload},setActiveMouseOverItemIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.itemInteraction.hover.active=!0,r.itemInteraction.hover.index=e.payload.activeIndex,r.itemInteraction.hover.dataKey=e.payload.activeDataKey,r.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(r){r.itemInteraction.hover.active=!1,r.axisInteraction.hover.active=!1},mouseLeaveItem(r){r.itemInteraction.hover.active=!1},setActiveClickItemIndex(r,e){r.syncInteraction.active=!1,r.itemInteraction.click.active=!0,r.keyboardInteraction.active=!1,r.itemInteraction.click.index=e.payload.activeIndex,r.itemInteraction.click.dataKey=e.payload.activeDataKey,r.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(r,e){r.syncInteraction.active=!1,r.axisInteraction.hover.active=!0,r.keyboardInteraction.active=!1,r.axisInteraction.hover.index=e.payload.activeIndex,r.axisInteraction.hover.dataKey=e.payload.activeDataKey,r.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(r,e){r.syncInteraction.active=!1,r.keyboardInteraction.active=!1,r.axisInteraction.click.active=!0,r.axisInteraction.click.index=e.payload.activeIndex,r.axisInteraction.click.dataKey=e.payload.activeDataKey,r.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(r,e){r.syncInteraction=e.payload},setKeyboardInteraction(r,e){r.keyboardInteraction.active=e.payload.active,r.keyboardInteraction.index=e.payload.activeIndex,r.keyboardInteraction.coordinate=e.payload.activeCoordinate,r.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:KU,removeTooltipEntrySettings:QU,setTooltipSettingsState:YU,setActiveMouseOverItemIndex:L_,mouseLeaveItem:XU,mouseLeaveChart:U_,setActiveClickItemIndex:ZU,setMouseOverAxisIndex:F_,setMouseClickAxisIndex:JU,setSyncInteraction:Fv,setKeyboardInteraction:Vv}=I_.actions,eF=I_.reducer;function IN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function pf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IN(Object(t),!0).forEach(function(i){tF(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):IN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function tF(r,e,t){return(e=rF(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rF(r){var e=iF(r,"string");return typeof e=="symbol"?e:e+""}function iF(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function nF(r,e,t){return e==="axis"?t==="click"?r.axisInteraction.click:r.axisInteraction.hover:t==="click"?r.itemInteraction.click:r.itemInteraction.hover}function sF(r){return r.index!=null}var V_=(r,e,t,i)=>{if(e==null)return Ds;var n=nF(r,e,t);if(n==null)return Ds;if(n.active)return n;if(r.keyboardInteraction.active)return r.keyboardInteraction;if(r.syncInteraction.active&&r.syncInteraction.index!=null)return r.syncInteraction;var s=r.settings.active===!0;if(sF(n)){if(s)return pf(pf({},n),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return pf(pf({},Ds),{},{coordinate:n.coordinate})},Zy=(r,e)=>{var t=r==null?void 0:r.index;if(t==null)return null;var i=Number(t);if(!ei(i))return t;var n=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(n,Math.min(i,s)))},$_=(r,e,t,i,n,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],c=l==null?void 0:o(l.positions,s);if(c!=null)return c;var u=n==null?void 0:n[Number(s)];if(u)switch(t){case"horizontal":return{x:u.coordinate,y:(i.top+e)/2};default:return{x:(i.left+r)/2,y:u.coordinate}}}},B_=(r,e,t,i)=>{if(e==="axis")return r.tooltipItemPayloads;if(r.tooltipItemPayloads.length===0)return[];var n;return t==="hover"?n=r.itemInteraction.hover.dataKey:n=r.itemInteraction.click.dataKey,n==null&&i!=null?[r.tooltipItemPayloads[0]]:r.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===n})},ng=r=>r.options.tooltipPayloadSearcher,au=r=>r.tooltip,It=r=>{var e=Re(r);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ou=r=>r.tooltip.settings.axisId,sr=r=>{var e=It(r),t=ou(r);return qh(r,e,t)},Jy=L([sr,Re,c_,Py,It],w_),aF=L([r=>r.graphicalItems.cartesianItems,r=>r.graphicalItems.polarItems],(r,e)=>[...r,...e]),oF=L([It,ou],Ry),sg=L([aF,sr,oF],Iy),lF=L([sg],Ly),dl=L([lF,eu],Uy),ex=L([dl,sr,sg],Fy),cF=L([sr],Vy),uF=L([dl,sg,Hh],h_),dF=L([uF,eu,It],f_),hF=L([sg],u_),fF=L([dl,sr,hF,It],m_),mF=L([p_,It,ou],iu),pF=L([mF,It],b_),gF=L([g_,It,ou],iu),vF=L([gF,It],y_),bF=L([v_,It,ou],iu),yF=L([bF,It],x_),xF=L([pF,yF,vF],$y),NF=L([sr,cF,dF,fF,xF],By),H_=L([sr,Re,dl,ex,Hh,It,NF],Hy),wF=L([H_,sr,Jy],Wy),AF=L([sr,H_,wF,It],Ky),z_=r=>{var e=It(r),t=ou(r),i=!1;return Gh(r,e,t,i)},q_=L([sr,z_],Zp),W_=L([sr,Jy,AF,q_],qy),EF=L([Re,ex,sr,It],D_),SF=L([Re,ex,sr,It],O_),_F=(r,e,t,i,n,s,a,o)=>{if(e){var{type:l}=e,c=ol(r,o);if(i){var u=t==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,h=l==="category"&&i.bandwidth?i.bandwidth()/u:0;return h=o==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?Gt(n[0]-n[1])*2*h:h,c&&a?a.map((f,m)=>({coordinate:i(f)+h,value:f,index:m,offset:h})):i.domain().map((f,m)=>({coordinate:i(f)+h,value:s?s[f]:f,index:m,offset:h}))}}},Ns=L([Re,sr,Jy,W_,z_,EF,SF,It],_F),G_=L([k_,M_,WU],(r,e,t)=>R_(t.shared,r,e)),K_=r=>r.tooltip.settings.trigger,tx=r=>r.tooltip.settings.defaultIndex,ag=L([au,G_,K_,tx],V_),Yc=L([ag,dl],Zy),PF=L([Ns,Yc],j_),Q_=L([ag],r=>{if(r)return r.dataKey}),CF=L([au,G_,K_,tx],B_),DF=L([Ea,Sa,Re,Rt,Ns,tx,CF,ng],$_),OF=L([ag,DF],(r,e)=>r!=null&&r.coordinate?r.coordinate:e),TF=L([ag],r=>r.active);function LN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function UN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(t),!0).forEach(function(i){kF(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):LN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function kF(r,e,t){return(e=MF(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function MF(r){var e=RF(r,"string");return typeof e=="symbol"?e:e+""}function RF(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var jF=()=>ae(sr),IF=()=>{var r=jF(),e=ae(Ns),t=ae(W_);return G0(UN(UN({},r),{},{scale:t}),e)};function FN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function VN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(t),!0).forEach(function(i){LF(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):FN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function LF(r,e,t){return(e=UF(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function UF(r){var e=FF(r,"string");return typeof e=="symbol"?e:e+""}function FF(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var VF=()=>ae(Py),rx=(r,e)=>e,Y_=(r,e,t)=>t,ix=(r,e,t,i)=>i;function $F(r,e,t){return Array.isArray(r)&&r&&e+t!==0?r.slice(e,t+1):r}var BF=L(Ns,r=>Rp(r,e=>e.coordinate)),nx=L([au,rx,Y_,ix],V_),X_=L([nx,dl],Zy),HF=(r,e,t)=>{if(e!=null){var i=au(r);return e==="axis"?t==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:t==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},Z_=L([au,rx,Y_,ix],B_),Mm=L([Ea,Sa,Re,Rt,Ns,ix,Z_,ng],$_),zF=L([nx,Mm],(r,e)=>{var t;return(t=r.coordinate)!==null&&t!==void 0?t:e}),J_=L(Ns,X_,j_);function qF(r,e){return r??e}var WF=(r,e,t,i,n,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=t,h=[];return r.reduce((f,m)=>{var p,{dataDefinedOnItem:g,settings:b}=m,y=qF(g,o),N=$F(y,c,u),w=(p=b==null?void 0:b.dataKey)!==null&&p!==void 0?p:i==null?void 0:i.dataKey,_=b==null?void 0:b.nameKey,P;if(i!=null&&i.dataKey&&!(i!=null&&i.allowDuplicatedCategory)&&Array.isArray(N)&&a==="axis"?P=dO(N,i.dataKey,n):P=s(N,e,l,_),Array.isArray(P))P.forEach(T=>{var C=VN(VN({},b),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});f.push(C1({tooltipEntrySettings:C,dataKey:T.dataKey,payload:T.payload,value:it(T.payload,T.dataKey),name:T.name}))});else{var O;f.push(C1({tooltipEntrySettings:b,dataKey:w,payload:P,value:it(P,w),name:(O=it(P,_))!==null&&O!==void 0?O:b==null?void 0:b.name}))}return f},h)}},GF=L([Z_,X_,eu,sr,J_,ng,rx],WF),KF=L([nx],r=>({isActive:r.active,activeIndex:r.index})),QF=(r,e,t,i,n,s,a,o)=>{if(!(!r||!e||!i||!n||!s)){var l=wM(r.chartX,r.chartY,e,t,o);if(l){var c=EM(l,e),u=uM(c,a,s,i,n),h=AM(e,s,u,l);return{activeIndex:String(u),activeCoordinate:h}}}};function $v(){return $v=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$v.apply(null,arguments)}function $N(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function gf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$N(Object(t),!0).forEach(function(i){YF(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$N(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function YF(r,e,t){return(e=XF(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function XF(r){var e=ZF(r,"string");return typeof e=="symbol"?e:e+""}function ZF(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function JF(r){var{coordinate:e,payload:t,index:i,offset:n,tooltipAxisBandSize:s,layout:a,cursor:o,tooltipEventType:l,chartName:c}=r,u=e,h=t,f=i;if(!o||!u||c!=="ScatterChart"&&l!=="axis")return null;var m,p;if(c==="ScatterChart")m=u,p=NR;else if(c==="BarChart")m=wR(a,u,n,s),p=JE;else if(a==="radial"){var{cx:g,cy:b,radius:y,startAngle:N,endAngle:w}=eS(u);m={cx:g,cy:b,startAngle:N,endAngle:w,innerRadius:y,outerRadius:y},p=rS}else m={points:ij(a,u,n)},p=qE;var _=typeof o=="object"&&"className"in o?o.className:void 0,P=gf(gf(gf(gf({stroke:"#ccc",pointerEvents:"none"},n),m),Le(o,!1)),{},{payload:h,payloadIndex:f,className:Me("recharts-tooltip-cursor",_)});return A.isValidElement(o)?A.cloneElement(o,P):A.createElement(p,P)}function e3(r){var e=IF(),t=X0(),i=Z0(),n=VF();return A.createElement(JF,$v({},r,{coordinate:r.coordinate,index:r.index,payload:r.payload,offset:t,layout:i,tooltipAxisBandSize:e,chartName:n}))}var eP=A.createContext(null),t3=()=>A.useContext(eP),tP={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new n(u,h||l,f),p=t?t+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],m]:l._events[p].push(m):(l._events[p]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,p=new Array(m);f<m;f++)p[f]=h[f].fn;return p},o.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,u,h,f,m,p){var g=t?t+c:c;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,N,w;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,f),!0;case 5:return b.fn.call(b.context,u,h,f,m),!0;case 6:return b.fn.call(b.context,u,h,f,m,p),!0}for(w=1,N=new Array(y-1);w<y;w++)N[w-1]=arguments[w];b.fn.apply(b.context,N)}else{var _=b.length,P;for(w=0;w<_;w++)switch(b[w].once&&this.removeListener(c,b[w].fn,void 0,!0),y){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,u);break;case 3:b[w].fn.call(b[w].context,u,h);break;case 4:b[w].fn.call(b[w].context,u,h,f);break;default:if(!N)for(P=1,N=new Array(y-1);P<y;P++)N[P-1]=arguments[P];b[w].fn.apply(b[w].context,N)}}return!0},o.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},o.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},o.prototype.removeListener=function(c,u,h,f){var m=t?t+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var p=this._events[m];if(p.fn)p.fn===u&&(!f||p.once)&&(!h||p.context===h)&&a(this,m);else{for(var g=0,b=[],y=p.length;g<y;g++)(p[g].fn!==u||f&&!p[g].once||h&&p[g].context!==h)&&b.push(p[g]);b.length?this._events[m]=b.length===1?b[0]:b:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(tP);var r3=tP.exports;const i3=wn(r3);var td=new i3,Bv="recharts.syncEvent.tooltip",BN="recharts.syncEvent.brush";function rP(r,e){if(e){var t=Number.parseInt(e,10);if(!xi(t))return r==null?void 0:r[t]}}var n3={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iP=Ei({name:"options",initialState:n3,reducers:{createEventEmitter:r=>{r.eventEmitter==null&&(r.eventEmitter=Symbol("rechartsEventEmitter"))}}}),s3=iP.reducer,{createEventEmitter:a3}=iP.actions;function o3(r){return r.tooltip.syncInteraction}var l3={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},nP=Ei({name:"chartData",initialState:l3,reducers:{setChartData(r,e){if(r.chartData=e.payload,e.payload==null){r.dataStartIndex=0,r.dataEndIndex=0;return}e.payload.length>0&&r.dataEndIndex!==e.payload.length-1&&(r.dataEndIndex=e.payload.length-1)},setComputedData(r,e){r.computedData=e.payload},setDataStartEndIndexes(r,e){var{startIndex:t,endIndex:i}=e.payload;t!=null&&(r.dataStartIndex=t),i!=null&&(r.dataEndIndex=i)}}}),{setChartData:HN,setDataStartEndIndexes:c3,setComputedData:uH}=nP.actions,u3=nP.reducer,sP=()=>{};function d3(){var r=ae(Cy),e=ae(Dy),t=Xe(),i=ae(n_),n=ae(Ns),s=Z0(),a=Y0(),o=ae(l=>l.rootProps.className);A.useEffect(()=>{if(r==null)return sP;var l=(c,u,h)=>{if(e!==h&&r===c){if(i==="index"){t(u);return}if(n!=null){var f;if(typeof i=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},p=i(n,m);f=n[p]}else i==="value"&&(f=n.find(O=>String(O.value)===u.payload.label));var{coordinate:g}=u.payload;if(f==null||u.payload.active===!1||g==null||a==null){t(Fv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,N=Math.min(b,a.x+a.width),w=Math.min(y,a.y+a.height),_={x:s==="horizontal"?f.coordinate:N,y:s==="horizontal"?w:f.coordinate},P=Fv({active:u.payload.active,coordinate:_,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});t(P)}}};return td.on(Bv,l),()=>{td.off(Bv,l)}},[o,t,e,r,i,n,s,a])}function h3(){var r=ae(Cy),e=ae(Dy),t=Xe();A.useEffect(()=>{if(r==null)return sP;var i=(n,s,a)=>{e!==a&&r===n&&t(c3(s))};return td.on(BN,i),()=>{td.off(BN,i)}},[t,e,r])}function f3(){var r=Xe();A.useEffect(()=>{r(a3())},[r]),d3(),h3()}function m3(r,e,t,i,n,s){var a=ae(f=>HF(f,r,e)),o=ae(Dy),l=ae(Cy),c=ae(n_),u=ae(o3),h=u==null?void 0:u.active;A.useEffect(()=>{if(!h&&l!=null&&o!=null){var f=Fv({active:s,coordinate:t,dataKey:a,index:n,label:typeof i=="number"?String(i):i});td.emit(Bv,l,f,o)}},[h,t,a,n,i,o,l,c,s])}function zN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function qN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(t),!0).forEach(function(i){p3(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function p3(r,e,t){return(e=g3(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function g3(r){var e=v3(r,"string");return typeof e=="symbol"?e:e+""}function v3(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function b3(r){return r.dataKey}function y3(r,e){return A.isValidElement(r)?A.cloneElement(r,e):typeof r=="function"?A.createElement(r,e):A.createElement(JM,e)}var WN=[],x3={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Zc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function GN(r){var e=An(r,x3),{active:t,allowEscapeViewBox:i,animationDuration:n,animationEasing:s,content:a,filterNull:o,isAnimationActive:l,offset:c,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:m,wrapperStyle:p,cursor:g,shared:b,trigger:y,defaultIndex:N,portal:w,axisId:_}=e,P=Xe(),O=typeof N=="number"?String(N):N;A.useEffect(()=>{P(YU({shared:b,trigger:y,axisId:_,active:t,defaultIndex:O}))},[P,b,y,_,t,O]);var T=Y0(),C=zE(),D=qU(b),{activeIndex:k,isActive:M}=ae(ue=>KF(ue,D,y,O)),j=ae(ue=>GF(ue,D,y,O)),V=ae(ue=>J_(ue,D,y,O)),B=ae(ue=>zF(ue,D,y,O)),X=j,$=t3(),U=t??M,[oe,Q]=lE([X,U]),ye=D==="axis"?V:void 0;m3(D,y,B,ye,k,U);var te=w??$;if(te==null)return null;var H=X??WN;U||(H=WN),o&&H.length&&(H=YA(X.filter(ue=>ue.value!=null&&(ue.hide!==!0||e.includeHidden)),u,b3));var z=H.length>0,Ee=A.createElement(aR,{allowEscapeViewBox:i,animationDuration:n,animationEasing:s,isAnimationActive:l,active:U,coordinate:B,hasPayload:z,offset:c,position:h,reverseDirection:f,useTranslate3d:m,viewBox:T,wrapperStyle:p,lastBoundingBox:oe,innerRef:Q,hasPortalFromProps:!!w},y3(a,qN(qN({},e),{},{payload:H,label:ye,active:U,coordinate:B,accessibilityLayer:C})));return A.createElement(A.Fragment,null,g0.createPortal(Ee,te),U&&A.createElement(e3,{cursor:g,tooltipEventType:D,coordinate:B,payload:X,index:k}))}var aP={},oP={},lP={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t,i,{signal:n,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{o!==null&&(t.apply(a,o),a=void 0,o=null)},h=()=>{c&&u(),g()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},i)},p=()=>{f!==null&&(clearTimeout(f),f=null)},g=()=>{p(),a=void 0,o=null},b=()=>{p(),u()},y=function(...N){if(n!=null&&n.aborted)return;a=this,o=N;const w=f==null;m(),l&&w&&u()};return y.schedule=m,y.cancel=g,y.flush=b,n==null||n.addEventListener("abort",g,{once:!0}),y}r.debounce=e})(lP);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=lP;function t(i,n=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let u,h=null;const f=e.debounce(function(...g){u=i.apply(this,g),h=null},n,{edges:c}),m=function(...g){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=i.apply(this,g),h=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,g),u)},p=()=>(f.flush(),u);return m.cancel=f.cancel,m.flush=p,m}r.debounce=t})(oP);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=oP;function t(i,n=0,s={}){typeof s!="object"&&(s={});const{leading:a=!0,trailing:o=!0}=s;return e.debounce(i,n,{leading:a,trailing:o,maxWait:n})}r.throttle=t})(aP);var N3=aP.throttle;const w3=wn(N3);var Ug=function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s]};function KN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Fg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KN(Object(t),!0).forEach(function(i){A3(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function A3(r,e,t){return(e=E3(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function E3(r){var e=S3(r,"string");return typeof e=="symbol"?e:e+""}function S3(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var QN=A.forwardRef((r,e)=>{var{aspect:t,initialDimension:i={width:-1,height:-1},width:n="100%",height:s="100%",minWidth:a=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:h,className:f,onResize:m,style:p={}}=r,g=A.useRef(null),b=A.useRef();b.current=m,A.useImperativeHandle(e,()=>g.current);var[y,N]=A.useState({containerWidth:i.width,containerHeight:i.height}),w=A.useCallback((P,O)=>{N(T=>{var C=Math.round(P),D=Math.round(O);return T.containerWidth===C&&T.containerHeight===D?T:{containerWidth:C,containerHeight:D}})},[]);A.useEffect(()=>{var P=D=>{var k,{width:M,height:j}=D[0].contentRect;w(M,j),(k=b.current)===null||k===void 0||k.call(b,M,j)};u>0&&(P=w3(P,u,{trailing:!0,leading:!1}));var O=new ResizeObserver(P),{width:T,height:C}=g.current.getBoundingClientRect();return w(T,C),O.observe(g.current),()=>{O.disconnect()}},[w,u]);var _=A.useMemo(()=>{var{containerWidth:P,containerHeight:O}=y;if(P<0||O<0)return null;Ug(La(n)||La(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,s),Ug(!t||t>0,"The aspect(%s) must be greater than zero.",t);var T=La(n)?P:n,C=La(s)?O:s;return t&&t>0&&(T?C=T/t:C&&(T=C*t),l&&C>l&&(C=l)),Ug(T>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,C,n,s,a,o,t),A.Children.map(c,D=>A.cloneElement(D,{width:T,height:C,style:Fg({height:"100%",width:"100%",maxHeight:C,maxWidth:T},D.props.style)}))},[t,c,s,l,o,a,y,n]);return A.createElement("div",{id:h?"".concat(h):void 0,className:Me("recharts-responsive-container",f),style:Fg(Fg({},p),{},{width:n,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:g},_)}),Kh=r=>null;Kh.displayName="Cell";function YN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Hv(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YN(Object(t),!0).forEach(function(i){_3(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):YN(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function _3(r,e,t){return(e=P3(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function P3(r){var e=C3(r,"string");return typeof e=="symbol"?e:e+""}function C3(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var vl={widthCache:{},cacheCount:0},D3=2e3,O3={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XN="recharts_measurement_span";function T3(r){var e=Hv({},r);return Object.keys(e).forEach(t=>{e[t]||delete e[t]}),e}var qu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Zc.isSsr)return{width:0,height:0};var i=T3(t),n=JSON.stringify({text:e,copyStyle:i});if(vl.widthCache[n])return vl.widthCache[n];try{var s=document.getElementById(XN);s||(s=document.createElement("span"),s.setAttribute("id",XN),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=Hv(Hv({},O3),i);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return vl.widthCache[n]=l,++vl.cacheCount>D3&&(vl.cacheCount=0,vl.widthCache={}),l}catch{return{width:0,height:0}}},ZN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,k3=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,M3=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},R3=Object.keys(cP),Sl="NaN";function j3(r,e){return r*cP[e]}class Sr{static parse(e){var t,[,i,n]=(t=M3.exec(e))!==null&&t!==void 0?t:[];return new Sr(parseFloat(i),n??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,xi(e)&&(this.unit=""),t!==""&&!k3.test(t)&&(this.num=NaN,this.unit=""),R3.includes(t)&&(this.num=j3(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Sr(NaN,""):new Sr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Sr(NaN,""):new Sr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Sr(NaN,""):new Sr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Sr(NaN,""):new Sr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return xi(this.num)}}function uP(r){if(r.includes(Sl))return Sl;for(var e=r;e.includes("*")||e.includes("/");){var t,[,i,n,s]=(t=ZN.exec(e))!==null&&t!==void 0?t:[],a=Sr.parse(i??""),o=Sr.parse(s??""),l=n==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return Sl;e=e.replace(ZN,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,h,f]=(c=JN.exec(e))!==null&&c!==void 0?c:[],m=Sr.parse(u??""),p=Sr.parse(f??""),g=h==="+"?m.add(p):m.subtract(p);if(g.isNaN())return Sl;e=e.replace(JN,g.toString())}return e}var ew=/\(([^()]*)\)/;function I3(r){for(var e=r,t;(t=ew.exec(e))!=null;){var[,i]=t;e=e.replace(ew,uP(i))}return e}function L3(r){var e=r.replace(/\s+/g,"");return e=I3(e),e=uP(e),e}function U3(r){try{return L3(r)}catch{return Sl}}function Vg(r){var e=U3(r.slice(5,-1));return e===Sl?"":e}var F3=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],V3=["dx","dy","angle","className","breakAll"];function zv(){return zv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zv.apply(null,arguments)}function tw(r,e){if(r==null)return{};var t,i,n=$3(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function $3(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var dP=/[ \f\n\r\t\v\u2028\u2029]+/,hP=r=>{var{children:e,breakAll:t,style:i}=r;try{var n=[];pt(e)||(t?n=e.toString().split(""):n=e.toString().split(dP));var s=n.map(o=>({word:o,width:qu(o,i).width})),a=t?0:qu(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},B3=(r,e,t,i,n)=>{var{maxLines:s,children:a,style:o,breakAll:l}=r,c=ne(s),u=a,h=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce((j,V)=>{var{word:B,width:X}=V,$=j[j.length-1];if($&&(i==null||n||$.width+X+t<Number(i)))$.words.push(B),$.width+=X+t;else{var U={words:[B],width:X};j.push(U)}return j},[])},f=h(e),m=k=>k.reduce((M,j)=>M.width>j.width?M:j);if(!c||n)return f;var p=f.length>s||m(f).width>Number(i);if(!p)return f;for(var g="…",b=k=>{var M=u.slice(0,k),j=hP({breakAll:l,style:o,children:M+g}).wordsWithComputedWidth,V=h(j),B=V.length>s||m(V).width>Number(i);return[B,V]},y=0,N=u.length-1,w=0,_;y<=N&&w<=u.length-1;){var P=Math.floor((y+N)/2),O=P-1,[T,C]=b(O),[D]=b(P);if(!T&&!D&&(y=P+1),T&&D&&(N=P-1),!T&&D){_=C;break}w++}return _||f},rw=r=>{var e=pt(r)?[]:r.toString().split(dP);return[{words:e}]},H3=r=>{var{width:e,scaleToFit:t,children:i,style:n,breakAll:s,maxLines:a}=r;if((e||t)&&!Zc.isSsr){var o,l,c=hP({breakAll:s,children:i,style:n});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;o=u,l=h}else return rw(i);return B3({breakAll:s,children:i,maxLines:a,style:n},o,l,e,t)}return rw(i)},iw="#808080",og=A.forwardRef((r,e)=>{var{x:t=0,y:i=0,lineHeight:n="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:c=iw}=r,u=tw(r,F3),h=A.useMemo(()=>H3({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:a,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,a,u.style,u.width]),{dx:f,dy:m,angle:p,className:g,breakAll:b}=u,y=tw(u,V3);if(!bn(t)||!bn(i))return null;var N=t+(ne(f)?f:0),w=i+(ne(m)?m:0),_;switch(l){case"start":_=Vg("calc(".concat(s,")"));break;case"middle":_=Vg("calc(".concat((h.length-1)/2," * -").concat(n," + (").concat(s," / 2))"));break;default:_=Vg("calc(".concat(h.length-1," * -").concat(n,")"));break}var P=[];if(a){var O=h[0].width,{width:T}=u;P.push("scale(".concat(ne(T)?T/O:1,")"))}return p&&P.push("rotate(".concat(p,", ").concat(N,", ").concat(w,")")),P.length&&(y.transform=P.join(" ")),A.createElement("text",zv({},Le(y,!0),{ref:e,x:N,y:w,className:Me("recharts-text",g),textAnchor:o,fill:c.includes("url")?iw:c}),h.map((C,D)=>{var k=C.words.join(b?"":" ");return A.createElement("tspan",{x:N,dy:D===0?_:n,key:"".concat(k,"-").concat(D)},k)}))});og.displayName="Text";var z3=["offset"],q3=["labelRef"];function nw(r,e){if(r==null)return{};var t,i,n=W3(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function W3(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function sw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function ut(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sw(Object(t),!0).forEach(function(i){G3(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function G3(r,e,t){return(e=K3(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function K3(r){var e=Q3(r,"string");return typeof e=="symbol"?e:e+""}function Q3(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function as(){return as=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},as.apply(null,arguments)}var Y3=r=>{var{value:e,formatter:t}=r,i=pt(r.children)?e:r.children;return typeof t=="function"?t(i):i},sx=r=>r!=null&&typeof r=="function",X3=(r,e)=>{var t=Gt(e-r),i=Math.min(Math.abs(e-r),360);return t*i},Z3=(r,e,t)=>{var{position:i,viewBox:n,offset:s,className:a}=r,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:f,clockWise:m}=n,p=(c+u)/2,g=X3(h,f),b=g>=0?1:-1,y,N;i==="insideStart"?(y=h+b*s,N=m):i==="insideEnd"?(y=f-b*s,N=!m):i==="end"&&(y=f+b*s,N=m),N=g<=0?N:!N;var w=mt(o,l,p,y),_=mt(o,l,p,y+(N?1:-1)*359),P="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(N?0:1,`,
    `).concat(_.x,",").concat(_.y),O=pt(r.id)?Fc("recharts-radial-line-"):r.id;return A.createElement("text",as({},t,{dominantBaseline:"central",className:Me("recharts-radial-bar-label",a)}),A.createElement("defs",null,A.createElement("path",{id:O,d:P})),A.createElement("textPath",{xlinkHref:"#".concat(O)},e))},J3=r=>{var{viewBox:e,offset:t,position:i}=r,{cx:n,cy:s,innerRadius:a,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(i==="outside"){var{x:h,y:f}=mt(n,s,o+t,u);return{x:h,y:f,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var m=(a+o)/2,{x:p,y:g}=mt(n,s,m,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},eV=(r,e)=>{var{parentViewBox:t,offset:i,position:n}=r,{x:s,y:a,width:o,height:l}=e,c=l>=0?1:-1,u=c*i,h=c>0?"end":"start",f=c>0?"start":"end",m=o>=0?1:-1,p=m*i,g=m>0?"end":"start",b=m>0?"start":"end";if(n==="top"){var y={x:s+o/2,y:a-c*i,textAnchor:"middle",verticalAnchor:h};return ut(ut({},y),t?{height:Math.max(a-t.y,0),width:o}:{})}if(n==="bottom"){var N={x:s+o/2,y:a+l+u,textAnchor:"middle",verticalAnchor:f};return ut(ut({},N),t?{height:Math.max(t.y+t.height-(a+l),0),width:o}:{})}if(n==="left"){var w={x:s-p,y:a+l/2,textAnchor:g,verticalAnchor:"middle"};return ut(ut({},w),t?{width:Math.max(w.x-t.x,0),height:l}:{})}if(n==="right"){var _={x:s+o+p,y:a+l/2,textAnchor:b,verticalAnchor:"middle"};return ut(ut({},_),t?{width:Math.max(t.x+t.width-_.x,0),height:l}:{})}var P=t?{width:o,height:l}:{};return n==="insideLeft"?ut({x:s+p,y:a+l/2,textAnchor:b,verticalAnchor:"middle"},P):n==="insideRight"?ut({x:s+o-p,y:a+l/2,textAnchor:g,verticalAnchor:"middle"},P):n==="insideTop"?ut({x:s+o/2,y:a+u,textAnchor:"middle",verticalAnchor:f},P):n==="insideBottom"?ut({x:s+o/2,y:a+l-u,textAnchor:"middle",verticalAnchor:h},P):n==="insideTopLeft"?ut({x:s+p,y:a+u,textAnchor:b,verticalAnchor:f},P):n==="insideTopRight"?ut({x:s+o-p,y:a+u,textAnchor:g,verticalAnchor:f},P):n==="insideBottomLeft"?ut({x:s+p,y:a+l-u,textAnchor:b,verticalAnchor:h},P):n==="insideBottomRight"?ut({x:s+o-p,y:a+l-u,textAnchor:g,verticalAnchor:h},P):n&&typeof n=="object"&&(ne(n.x)||La(n.x))&&(ne(n.y)||La(n.y))?ut({x:s+gr(n.x,o),y:a+gr(n.y,l),textAnchor:"end",verticalAnchor:"end"},P):ut({x:s+o/2,y:a+l/2,textAnchor:"middle",verticalAnchor:"middle"},P)},tV=r=>"cx"in r&&ne(r.cx);function Gr(r){var{offset:e=5}=r,t=nw(r,z3),i=ut({offset:e},t),{viewBox:n,position:s,value:a,children:o,content:l,className:c="",textBreakAll:u,labelRef:h}=i,f=Y0(),m=n||f;if(!m||pt(a)&&pt(o)&&!A.isValidElement(l)&&typeof l!="function")return null;if(A.isValidElement(l)){var{labelRef:p}=i,g=nw(i,q3);return A.cloneElement(l,g)}var b;if(typeof l=="function"){if(b=A.createElement(l,i),A.isValidElement(b))return b}else b=Y3(i);var y=tV(m),N=Le(i,!0);if(y&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Z3(i,b,N);var w=y?J3(i):eV(i,m);return A.createElement(og,as({ref:h,className:Me("recharts-label",c)},N,w,{breakAll:u}),b)}Gr.displayName="Label";var fP=r=>{var{cx:e,cy:t,angle:i,startAngle:n,endAngle:s,r:a,radius:o,innerRadius:l,outerRadius:c,x:u,y:h,top:f,left:m,width:p,height:g,clockWise:b,labelViewBox:y}=r;if(y)return y;if(ne(p)&&ne(g)){if(ne(u)&&ne(h))return{x:u,y:h,width:p,height:g};if(ne(f)&&ne(m))return{x:f,y:m,width:p,height:g}}if(ne(u)&&ne(h))return{x:u,y:h,width:0,height:0};if(ne(e)&&ne(t))return{cx:e,cy:t,startAngle:n||i||0,endAngle:s||i||0,innerRadius:l||0,outerRadius:c||o||a||0,clockWise:b};if(r.viewBox)return r.viewBox},rV=(r,e,t)=>{if(!r)return null;var i={viewBox:e,labelRef:t};return r===!0?A.createElement(Gr,as({key:"label-implicit"},i)):bn(r)?A.createElement(Gr,as({key:"label-implicit",value:r},i)):A.isValidElement(r)?r.type===Gr?A.cloneElement(r,ut({key:"label-implicit"},i)):A.createElement(Gr,as({key:"label-implicit",content:r},i)):sx(r)?A.createElement(Gr,as({key:"label-implicit",content:r},i)):r&&typeof r=="object"?A.createElement(Gr,as({},r,{key:"label-implicit"},i)):null},iV=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var{children:n,labelRef:s}=e,a=fP(e),o=Lh(n,Gr).map((c,u)=>A.cloneElement(c,{viewBox:t||a,key:"label-".concat(u)}));if(!i)return o;var l=rV(e.label,t||a,s);return[l,...o]};Gr.parseViewBox=fP;Gr.renderCallByParent=iV;var mP={},pP={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}r.last=e})(pP);var gP={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}r.toArray=e})(gP);(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});const e=pP,t=gP,i=Dp;function n(s){if(i.isArrayLike(s))return e.last(t.toArray(s))}r.last=n})(mP);var nV=mP.last;const sV=wn(nV);var aV=["valueAccessor"],oV=["data","dataKey","clockWise","id","textBreakAll"];function Rm(){return Rm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Rm.apply(null,arguments)}function aw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function ow(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aw(Object(t),!0).forEach(function(i){lV(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function lV(r,e,t){return(e=cV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cV(r){var e=uV(r,"string");return typeof e=="symbol"?e:e+""}function uV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function lw(r,e){if(r==null)return{};var t,i,n=dV(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function dV(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var hV=r=>Array.isArray(r.value)?sV(r.value):r.value;function Zo(r){var{valueAccessor:e=hV}=r,t=lw(r,aV),{data:i,dataKey:n,clockWise:s,id:a,textBreakAll:o}=t,l=lw(t,oV);return!i||!i.length?null:A.createElement(br,{className:"recharts-label-list"},i.map((c,u)=>{var h=pt(n)?e(c,u):it(c&&c.payload,n),f=pt(a)?{}:{id:"".concat(a,"-").concat(u)};return A.createElement(Gr,Rm({},Le(c,!0),l,f,{parentViewBox:c.parentViewBox,value:h,textBreakAll:o,viewBox:Gr.parseViewBox(pt(s)?c:ow(ow({},c),{},{clockWise:s})),key:"label-".concat(u),index:u}))}))}Zo.displayName="LabelList";function fV(r,e){return r?r===!0?A.createElement(Zo,{key:"labelList-implicit",data:e}):A.isValidElement(r)||sx(r)?A.createElement(Zo,{key:"labelList-implicit",data:e,content:r}):typeof r=="object"?A.createElement(Zo,Rm({data:e},r,{key:"labelList-implicit"})):null:null}function mV(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&t&&!r.label)return null;var{children:i}=r,n=Lh(i,Zo).map((a,o)=>A.cloneElement(a,{data:e,key:"labelList-".concat(o)}));if(!t)return n;var s=fV(r.label,e);return[s,...n]}Zo.renderCallByParent=mV;var vP=r=>r.graphicalItems.polarItems,pV=L([ot,zh],Ry),ax=L([vP,lt,pV],Iy),gV=L([ax],Ly),ox=L([gV,Ey],Uy),vV=L([ox,lt,ax],Fy),bV=L([ox,lt,ax],(r,e,t)=>t.length>0?r.flatMap(i=>t.flatMap(n=>{var s,a=it(i,(s=e.dataKey)!==null&&s!==void 0?s:n.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?r.map(i=>({value:it(i,e.dataKey),errorDomain:[]})):r.map(i=>({value:i,errorDomain:[]}))),cw=()=>{},yV=L([lt,N_,cw,bV,cw],By),bP=L([lt,Re,ox,vV,Hh,ot,yV],Hy),xV=L([bP,lt,nu],Wy);L([lt,bP,xV,ot],Ky);var NV={radiusAxis:{},angleAxis:{}},yP=Ei({name:"polarAxis",initialState:NV,reducers:{addRadiusAxis(r,e){r.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(r,e){delete r.radiusAxis[e.payload.id]},addAngleAxis(r,e){r.angleAxis[e.payload.id]=e.payload},removeAngleAxis(r,e){delete r.angleAxis[e.payload.id]}}}),{addRadiusAxis:dH,removeRadiusAxis:hH,addAngleAxis:fH,removeAngleAxis:mH}=yP.actions,wV=yP.reducer;function uw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function dw(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uw(Object(t),!0).forEach(function(i){AV(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function AV(r,e,t){return(e=EV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function EV(r){var e=SV(r,"string");return typeof e=="symbol"?e:e+""}function SV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var lx=(r,e)=>e,_V=[],cx=(r,e,t)=>(t==null?void 0:t.length)===0?_V:t,xP=L([Ey,lx,cx],(r,e,t)=>{var{chartData:i}=r,n;if((e==null?void 0:e.data)!=null&&e.data.length>0?n=e.data:n=i,(!n||!n.length)&&t!=null&&(n=t.map(s=>dw(dw({},e.presentationProps),s.props))),n!=null)return n}),PV=L([xP,lx,cx],(r,e,t)=>{if(r!=null)return r.map((i,n)=>{var s,a=it(i,e.nameKey,e.name),o;return t!=null&&(s=t[n])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=t[n].props.fill:typeof i=="object"&&i!=null&&"fill"in i?o=i.fill:o=e.fill,{value:$p(a,e.dataKey),color:o,payload:i,type:e.legendType}})}),CV=L([vP,lx],(r,e)=>{if(r.some(t=>t.type==="pie"&&e.dataKey===t.dataKey&&e.data===t.data))return e}),DV=L([xP,CV,cx,Rt],(r,e,t,i)=>{if(!(e==null||r==null))return b5({offset:i,pieSettings:e,displayedData:r,cells:t})}),OV={countOfBars:0,cartesianItems:[],polarItems:[]},NP=Ei({name:"graphicalItems",initialState:OV,reducers:{addBar(r){r.countOfBars+=1},removeBar(r){r.countOfBars-=1},addCartesianGraphicalItem(r,e){r.cartesianItems.push(e.payload)},removeCartesianGraphicalItem(r,e){var t=pa(r).cartesianItems.indexOf(e.payload);t>-1&&r.cartesianItems.splice(t,1)},addPolarGraphicalItem(r,e){r.polarItems.push(e.payload)},removePolarGraphicalItem(r,e){var t=pa(r).polarItems.indexOf(e.payload);t>-1&&r.polarItems.splice(t,1)}}}),{addBar:TV,removeBar:kV,addCartesianGraphicalItem:MV,removeCartesianGraphicalItem:RV,addPolarGraphicalItem:jV,removePolarGraphicalItem:IV}=NP.actions,LV=NP.reducer;function hw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function fw(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hw(Object(t),!0).forEach(function(i){UV(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function UV(r,e,t){return(e=FV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function FV(r){var e=VV(r,"string");return typeof e=="symbol"?e:e+""}function VV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $V(r){var e=Xe();return A.useEffect(()=>{var t=fw(fw({},r),{},{stackId:RE(r.stackId)});return e(MV(t)),()=>{e(RV(t))}},[e,r]),null}function BV(r){var e=Xe();return A.useEffect(()=>(e(jV(r)),()=>{e(IV(r))}),[e,r]),null}var wP={};(function(r){Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});function e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const s=t[Symbol.toStringTag];return s==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${s}]`}let i=t;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(t)===i}r.isPlainObject=e})(wP);var HV=wP.isPlainObject;const zV=wn(HV);function jm(){return jm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},jm.apply(null,arguments)}var mw=(r,e,t,i,n)=>{var s=t-i,a;return a="M ".concat(r,",").concat(e),a+="L ".concat(r+t,",").concat(e),a+="L ".concat(r+t-s/2,",").concat(e+n),a+="L ".concat(r+t-s/2-i,",").concat(e+n),a+="L ".concat(r,",").concat(e," Z"),a},qV={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WV=r=>{var e=An(r,qV),t=A.useRef(),[i,n]=A.useState(-1);A.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var b=t.current.getTotalLength();b&&n(b)}catch{}},[]);var{x:s,y:a,upperWidth:o,lowerWidth:l,height:c,className:u}=e,{animationEasing:h,animationDuration:f,animationBegin:m,isUpdateAnimationActive:p}=e;if(s!==+s||a!==+a||o!==+o||l!==+l||c!==+c||o===0&&l===0||c===0)return null;var g=Me("recharts-trapezoid",u);return p?A.createElement(tl,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:c,x:s,y:a},to:{upperWidth:o,lowerWidth:l,height:c,x:s,y:a},duration:f,animationEasing:h,isActive:p},b=>{var{upperWidth:y,lowerWidth:N,height:w,x:_,y:P}=b;return A.createElement(tl,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:h},A.createElement("path",jm({},Le(e,!0),{className:g,d:mw(_,P,y,N,w),ref:t})))}):A.createElement("g",null,A.createElement("path",jm({},Le(e,!0),{className:g,d:mw(s,a,o,l,c)})))},GV=["option","shapeType","propTransformer","activeClassName","isActive"];function KV(r,e){if(r==null)return{};var t,i,n=QV(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function QV(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function pw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Im(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pw(Object(t),!0).forEach(function(i){YV(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function YV(r,e,t){return(e=XV(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function XV(r){var e=ZV(r,"string");return typeof e=="symbol"?e:e+""}function ZV(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function JV(r,e){return Im(Im({},e),r)}function e5(r,e){return r==="symbols"}function gw(r){var{shapeType:e,elementProps:t}=r;switch(e){case"rectangle":return A.createElement(JE,t);case"trapezoid":return A.createElement(WV,t);case"sector":return A.createElement(rS,t);case"symbols":if(e5(e))return A.createElement(D0,t);break;default:return null}}function t5(r){return A.isValidElement(r)?r.props:r}function AP(r){var{option:e,shapeType:t,propTransformer:i=JV,activeClassName:n="recharts-active-shape",isActive:s}=r,a=KV(r,GV),o;if(A.isValidElement(e))o=A.cloneElement(e,Im(Im({},a),t5(e)));else if(typeof e=="function")o=e(a);else if(zV(e)&&typeof e!="boolean"){var l=i(e,a);o=A.createElement(gw,{shapeType:t,elementProps:l})}else{var c=a;o=A.createElement(gw,{shapeType:t,elementProps:c})}return s?A.createElement(br,{className:n},o):o}var ux=(r,e)=>{var t=Xe();return(i,n)=>s=>{r==null||r(i,n,s),t(L_({activeIndex:String(n),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}},dx=r=>{var e=Xe();return(t,i)=>n=>{r==null||r(t,i,n),e(XU())}},hx=(r,e)=>{var t=Xe();return(i,n)=>s=>{r==null||r(i,n,s),t(ZU({activeIndex:String(n),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}};function EP(r){var{fn:e,args:t}=r,i=Xe(),n=ti();return A.useEffect(()=>{if(!n){var s=e(t);return i(KU(s)),()=>{i(QU(s))}}},[e,t,i,n]),null}var SP=()=>{};function r5(r){var{legendPayload:e}=r,t=Xe(),i=ti();return A.useEffect(()=>i?SP:(t(BE(e)),()=>{t(HE(e))}),[t,i,e]),null}function i5(r){var{legendPayload:e}=r,t=Xe(),i=ae(Re);return A.useEffect(()=>i!=="centric"&&i!=="radial"?SP:(t(BE(e)),()=>{t(HE(e))}),[t,i,e]),null}function _P(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=A.useRef(Fc(e)),i=A.useRef(r);return i.current!==r&&(t.current=Fc(e),i.current=r),t.current}var n5=["onMouseEnter","onClick","onMouseLeave"];function s5(r,e){if(r==null)return{};var t,i,n=a5(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function a5(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function vw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function rt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vw(Object(t),!0).forEach(function(i){lg(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function lg(r,e,t){return(e=o5(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function o5(r){var e=l5(r,"string");return typeof e=="symbol"?e:e+""}function l5(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function il(){return il=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},il.apply(null,arguments)}function c5(r){var e=A.useMemo(()=>Le(r,!1),[r]),t=A.useMemo(()=>Lh(r.children,Kh),[r.children]),i=A.useMemo(()=>({name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,data:r.data,dataKey:r.dataKey,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,minAngle:r.minAngle,paddingAngle:r.paddingAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,legendType:r.legendType,fill:r.fill,presentationProps:e}),[r.cornerRadius,r.cx,r.cy,r.data,r.dataKey,r.endAngle,r.innerRadius,r.minAngle,r.name,r.nameKey,r.outerRadius,r.paddingAngle,r.startAngle,r.tooltipType,r.legendType,r.fill,e]),n=ae(s=>PV(s,i,t));return A.createElement(i5,{legendPayload:n})}function u5(r){var{dataKey:e,nameKey:t,sectors:i,stroke:n,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:c}=r;return{dataDefinedOnItem:i==null?void 0:i.map(u=>u.tooltipPayload),positions:i==null?void 0:i.map(u=>u.tooltipPosition),settings:{stroke:n,strokeWidth:s,fill:a,dataKey:e,nameKey:t,name:$p(o,e),hide:l,type:c,color:a,unit:""}}}var d5=(r,e)=>r>e?"start":r<e?"end":"middle",h5=(r,e,t)=>typeof e=="function"?e(r):gr(e,t,t*.8),f5=(r,e,t)=>{var{top:i,left:n,width:s,height:a}=e,o=ME(s,a),l=n+gr(r.cx,s,s/2),c=i+gr(r.cy,a,a/2),u=gr(r.innerRadius,o,0),h=h5(t,r.outerRadius,o),f=r.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:f}},m5=(r,e)=>{var t=Gt(e-r),i=Math.min(Math.abs(e-r),360);return t*i},p5=(r,e)=>{if(A.isValidElement(r))return A.cloneElement(r,e);if(typeof r=="function")return r(e);var t=Me("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return A.createElement(qE,il({},e,{type:"linear",className:t}))},g5=(r,e,t)=>{if(A.isValidElement(r))return A.cloneElement(r,e);var i=t;if(typeof r=="function"&&(i=r(e),A.isValidElement(i)))return i;var n=Me("recharts-pie-label-text",typeof r!="boolean"&&typeof r!="function"?r.className:"");return A.createElement(og,il({},e,{alignmentBaseline:"middle",className:n}),i)};function v5(r){var{sectors:e,props:t,showLabels:i}=r,{label:n,labelLine:s,dataKey:a}=t;if(!i||!n||!e)return null;var o=Le(t,!1),l=Le(n,!1),c=Le(s,!1),u=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,h=e.map((f,m)=>{var p=(f.startAngle+f.endAngle)/2,g=mt(f.cx,f.cy,f.outerRadius+u,p),b=rt(rt(rt(rt({},o),f),{},{stroke:"none"},l),{},{index:m,textAnchor:d5(g.x,f.cx)},g),y=rt(rt(rt(rt({},o),f),{},{fill:"none",stroke:f.fill},c),{},{index:m,points:[mt(f.cx,f.cy,f.outerRadius,p),g],key:"line"});return A.createElement(br,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(m)},s&&p5(s,y),g5(n,b,it(f,a)))});return A.createElement(br,{className:"recharts-pie-labels"},h)}function PP(r){var{sectors:e,activeShape:t,inactiveShape:i,allOtherPieProps:n,showLabels:s}=r,a=ae(Yc),{onMouseEnter:o,onClick:l,onMouseLeave:c}=n,u=s5(n,n5),h=ux(o,n.dataKey),f=dx(c),m=hx(l,n.dataKey);return e==null?null:A.createElement(A.Fragment,null,e.map((p,g)=>{if((p==null?void 0:p.startAngle)===0&&(p==null?void 0:p.endAngle)===0&&e.length!==1)return null;var b=t&&String(g)===a,y=a?i:null,N=b?t:y,w=rt(rt({},p),{},{stroke:p.stroke,tabIndex:-1,[IE]:g,[LE]:n.dataKey});return A.createElement(br,il({tabIndex:-1,className:"recharts-pie-sector"},Ih(u,p,g),{onMouseEnter:h(p,g),onMouseLeave:f(p,g),onClick:m(p,g),key:"sector-".concat(p==null?void 0:p.startAngle,"-").concat(p==null?void 0:p.endAngle,"-").concat(p.midAngle,"-").concat(g)}),A.createElement(AP,il({option:N,isActive:b,shapeType:"sector"},w)))}),A.createElement(v5,{sectors:e,props:n,showLabels:s}))}function b5(r){var e,{pieSettings:t,displayedData:i,cells:n,offset:s}=r,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=t,f=Math.abs(t.minAngle),m=m5(o,l),p=Math.abs(m),g=i.length<=1?0:(e=t.paddingAngle)!==null&&e!==void 0?e:0,b=i.filter(O=>it(O,c,0)!==0).length,y=(p>=360?b:b-1)*g,N=p-b*f-y,w=i.reduce((O,T)=>{var C=it(T,c,0);return O+(ne(C)?C:0)},0),_;if(w>0){var P;_=i.map((O,T)=>{var C=it(O,c,0),D=it(O,u,T),k=f5(t,s,O),M=(ne(C)?C:0)/w,j,V=rt(rt({},O),n&&n[T]&&n[T].props);T?j=P.endAngle+Gt(m)*g*(C!==0?1:0):j=o;var B=j+Gt(m)*((C!==0?f:0)+M*N),X=(j+B)/2,$=(k.innerRadius+k.outerRadius)/2,U=[{name:D,value:C,payload:V,dataKey:c,type:h}],oe=mt(k.cx,k.cy,$,X);return P=rt(rt(rt(rt({},t.presentationProps),{},{percent:M,cornerRadius:a,name:D,tooltipPayload:U,midAngle:X,middleRadius:$,tooltipPosition:oe},V),k),{},{value:it(O,c),startAngle:j,endAngle:B,payload:V,paddingAngle:Gt(m)*g}),P})}return _}function y5(r){var{props:e,previousSectorsRef:t}=r,{sectors:i,isAnimationActive:n,animationBegin:s,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:h}=e,f=_P(e,"recharts-pie-"),m=t.current,[p,g]=A.useState(!0),b=A.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=A.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return A.createElement(tl,{begin:s,duration:a,isActive:n,easing:o,from:{t:0},to:{t:1},onAnimationStart:y,onAnimationEnd:b,key:f},N=>{var{t:w}=N,_=[],P=i&&i[0],O=P.startAngle;return i.forEach((T,C)=>{var D=m&&m[C],k=C>0?va(T,"paddingAngle",0):0;if(D){var M=Ps(D.endAngle-D.startAngle,T.endAngle-T.startAngle),j=rt(rt({},T),{},{startAngle:O+k,endAngle:O+M(w)+k});_.push(j),O=j.endAngle}else{var{endAngle:V,startAngle:B}=T,X=Ps(0,V-B),$=X(w),U=rt(rt({},T),{},{startAngle:O+k,endAngle:O+$+k});_.push(U),O=U.endAngle}}),t.current=_,A.createElement(br,null,A.createElement(PP,{sectors:_,activeShape:l,inactiveShape:c,allOtherPieProps:e,showLabels:!p}))})}function x5(r){var{sectors:e,isAnimationActive:t,activeShape:i,inactiveShape:n}=r,s=A.useRef(null),a=s.current;return t&&e&&e.length&&(!a||a!==e)?A.createElement(y5,{props:r,previousSectorsRef:s}):A.createElement(PP,{sectors:e,activeShape:i,inactiveShape:n,allOtherPieProps:r,showLabels:!0})}function N5(r){var{hide:e,className:t,rootTabIndex:i}=r,n=Me("recharts-pie",t);return e?null:A.createElement(br,{tabIndex:i,className:n},A.createElement(x5,r))}var CP={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Zc.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function w5(r){var e=An(r,CP),t=A.useMemo(()=>Lh(r.children,Kh),[r.children]),i=Le(e,!1),n=A.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:i}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,i]),s=ae(a=>DV(a,n,t));return A.createElement(A.Fragment,null,A.createElement(EP,{fn:u5,args:rt(rt({},e),{},{sectors:s})}),A.createElement(N5,il({},e,{sectors:s})))}class fx extends A.PureComponent{constructor(){super(...arguments),lg(this,"id",Fc("recharts-pie-"))}render(){return A.createElement(A.Fragment,null,A.createElement(BV,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),A.createElement(c5,this.props),A.createElement(w5,this.props),this.props.children)}}lg(fx,"displayName","Pie");lg(fx,"defaultProps",CP);var A5=()=>{var r=Xe();return A.useEffect(()=>(r(TV()),()=>{r(kV())})),null},E5=["children"];function S5(r,e){if(r==null)return{};var t,i,n=_5(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function _5(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var bw=()=>{},DP=A.createContext({addErrorBar:bw,removeErrorBar:bw}),P5={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},OP=A.createContext(P5);function C5(r){var{children:e}=r,t=S5(r,E5);return A.createElement(OP.Provider,{value:t},e)}var D5=()=>A.useContext(OP),O5=r=>{var{children:e,xAxisId:t,yAxisId:i,zAxisId:n,dataKey:s,data:a,stackId:o,hide:l,type:c,barSize:u}=r,[h,f]=A.useState([]),m=A.useCallback(b=>{f(y=>[...y,b])},[f]),p=A.useCallback(b=>{f(y=>y.filter(N=>N!==b))},[f]),g=ti();return A.createElement(DP.Provider,{value:{addErrorBar:m,removeErrorBar:p}},A.createElement($V,{type:c,data:a,xAxisId:t,yAxisId:i,zAxisId:n,dataKey:s,errorBars:h,stackId:o,hide:l,barSize:u,isPanorama:g}),e)};function T5(r){var{addErrorBar:e,removeErrorBar:t}=A.useContext(DP);return A.useEffect(()=>(e(r),()=>{t(r)}),[e,t,r]),null}var k5=r=>{var e=ti();return ae(t=>ba(t,"xAxis",r,e))},M5=r=>{var e=ti();return ae(t=>ba(t,"yAxis",r,e))},R5=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function TP(r,e,t){return(e=j5(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function j5(r){var e=I5(r,"string");return typeof e=="symbol"?e:e+""}function I5(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rd(){return rd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},rd.apply(null,arguments)}function L5(r,e){if(r==null)return{};var t,i,n=U5(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function U5(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function F5(r){var{direction:e,width:t,dataKey:i,isAnimationActive:n,animationBegin:s,animationDuration:a,animationEasing:o}=r,l=L5(r,R5),c=Le(l,!1),{data:u,dataPointFormatter:h,xAxisId:f,yAxisId:m,errorBarOffset:p}=D5(),g=k5(f),b=M5(m);if((g==null?void 0:g.scale)==null||(b==null?void 0:b.scale)==null||u==null||e==="x"&&g.type!=="number")return null;var y=u.map(N=>{var{x:w,y:_,value:P,errorVal:O}=h(N,i,e);if(!O)return null;var T=[],C,D;if(Array.isArray(O)?[C,D]=O:C=D=O,e==="x"){var{scale:k}=g,M=_+p,j=M+t,V=M-t,B=k(P-C),X=k(P+D);T.push({x1:X,y1:j,x2:X,y2:V}),T.push({x1:B,y1:M,x2:X,y2:M}),T.push({x1:B,y1:j,x2:B,y2:V})}else if(e==="y"){var{scale:$}=b,U=w+p,oe=U-t,Q=U+t,ye=$(P-C),te=$(P+D);T.push({x1:oe,y1:te,x2:Q,y2:te}),T.push({x1:U,y1:ye,x2:U,y2:te}),T.push({x1:oe,y1:ye,x2:Q,y2:ye})}var H="".concat(w+p,"px ").concat(_+p,"px");return A.createElement(br,rd({className:"recharts-errorBar",key:"bar-".concat(T.map(z=>"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)))},c),T.map(z=>{var Ee=n?{transformOrigin:"".concat(z.x1-5,"px")}:void 0;return A.createElement(tl,{from:{transform:"scaleY(0)",transformOrigin:H},to:{transform:"scaleY(1)",transformOrigin:H},begin:s,easing:o,isActive:n,duration:a,key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2),style:{transformOrigin:H}},A.createElement("line",rd({},z,{style:Ee})))}))});return A.createElement(br,{className:"recharts-errorBars"},y)}var kP=A.createContext(void 0);function V5(r){var e=A.useContext(kP);return r??e??"x"}function $5(r){var{direction:e,children:t}=r;return A.createElement(kP.Provider,{value:e},t)}var MP={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function B5(r){var e=V5(r.direction),{width:t,isAnimationActive:i,animationBegin:n,animationDuration:s,animationEasing:a}=An(r,MP);return A.createElement(A.Fragment,null,A.createElement(T5,{dataKey:r.dataKey,direction:e}),A.createElement(F5,rd({},r,{direction:e,width:t,isAnimationActive:i,animationBegin:n,animationDuration:s,animationEasing:a})))}class RP extends A.Component{render(){return A.createElement(B5,this.props)}}TP(RP,"defaultProps",MP);TP(RP,"displayName","ErrorBar");var H5="Invariant failed";function z5(r,e){throw new Error(H5)}var q5=["x","y"];function qv(){return qv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},qv.apply(null,arguments)}function yw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function yu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yw(Object(t),!0).forEach(function(i){W5(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function W5(r,e,t){return(e=G5(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function G5(r){var e=K5(r,"string");return typeof e=="symbol"?e:e+""}function K5(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Q5(r,e){if(r==null)return{};var t,i,n=Y5(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Y5(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function X5(r,e){var{x:t,y:i}=r,n=Q5(r,q5),s="".concat(t),a=parseInt(s,10),o="".concat(i),l=parseInt(o,10),c="".concat(e.height||n.height),u=parseInt(c,10),h="".concat(e.width||n.width),f=parseInt(h,10);return yu(yu(yu(yu(yu({},e),n),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function jP(r){return A.createElement(AP,qv({shapeType:"rectangle",propTransformer:X5,activeClassName:"recharts-active-bar"},r))}var Z5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,n)=>{if(ne(e))return e;var s=ne(i)||pt(i);return s?e(i,n):(s||z5(),t)}};function IP(r,e){var t,i,n=ae(c=>xs(c,r)),s=ae(c=>Ca(c,e)),a=(t=n==null?void 0:n.allowDataOverflow)!==null&&t!==void 0?t:Cr.allowDataOverflow,o=(i=s==null?void 0:s.allowDataOverflow)!==null&&i!==void 0?i:Dr.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function J5(r){var{xAxisId:e,yAxisId:t,clipPathId:i}=r,n=X0(),{needClipX:s,needClipY:a,needClip:o}=IP(e,t);if(!o)return null;var{left:l,top:c,width:u,height:h}=n;return A.createElement("clipPath",{id:"clipPath-".concat(i)},A.createElement("rect",{x:s?l:l-u/2,y:a?c:c-h/2,width:s?u:u*2,height:a?h:h*2}))}var e$=["onMouseEnter","onMouseLeave","onClick"],t$=["value","background","tooltipPosition"],r$=["onMouseEnter","onClick","onMouseLeave"];function id(){return id=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},id.apply(null,arguments)}function xw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function nr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xw(Object(t),!0).forEach(function(i){cg(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function cg(r,e,t){return(e=i$(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function i$(r){var e=n$(r,"string");return typeof e=="symbol"?e:e+""}function n$(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Wv(r,e){if(r==null)return{};var t,i,n=s$(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function s$(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var a$=r=>{var{dataKey:e,name:t,fill:i,legendType:n,hide:s}=r;return[{inactive:s,dataKey:e,type:n,color:i,value:$p(t,e),payload:r}]};function o$(r){var{dataKey:e,stroke:t,strokeWidth:i,fill:n,name:s,hide:a,unit:o}=r;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:t,strokeWidth:i,fill:n,dataKey:e,nameKey:void 0,name:$p(s,e),hide:a,type:r.tooltipType,color:r.fill,unit:o}}}function l$(r){var e=ae(Yc),{data:t,dataKey:i,background:n,allOtherBarProps:s}=r,{onMouseEnter:a,onMouseLeave:o,onClick:l}=s,c=Wv(s,e$),u=ux(a,i),h=dx(o),f=hx(l,i);if(!n||t==null)return null;var m=Le(n,!1);return A.createElement(A.Fragment,null,t.map((p,g)=>{var{value:b,background:y,tooltipPosition:N}=p,w=Wv(p,t$);if(!y)return null;var _=u(p,g),P=h(p,g),O=f(p,g),T=nr(nr(nr(nr(nr({option:n,isActive:String(g)===e},w),{},{fill:"#eee"},y),m),Ih(c,p,g)),{},{onMouseEnter:_,onMouseLeave:P,onClick:O,dataKey:i,index:g,className:"recharts-bar-background-rectangle"});return A.createElement(jP,id({key:"background-bar-".concat(g)},T))}))}function LP(r){var{data:e,props:t,showLabels:i}=r,n=Le(t,!1),{shape:s,dataKey:a,activeBar:o}=t,l=ae(Yc),c=ae(Q_),{onMouseEnter:u,onClick:h,onMouseLeave:f}=t,m=Wv(t,r$),p=ux(u,a),g=dx(f),b=hx(h,a);return e?A.createElement(A.Fragment,null,e.map((y,N)=>{var w=o&&String(N)===l&&(c==null||a===c),_=w?o:s,P=nr(nr(nr({},n),y),{},{isActive:w,option:_,index:N,dataKey:a});return A.createElement(br,id({className:"recharts-bar-rectangle"},Ih(m,y,N),{onMouseEnter:p(y,N),onMouseLeave:g(y,N),onClick:b(y,N),key:"rectangle-".concat(y==null?void 0:y.x,"-").concat(y==null?void 0:y.y,"-").concat(y==null?void 0:y.value,"-").concat(N)}),A.createElement(jP,P))}),i&&Zo.renderCallByParent(t,e)):null}function c$(r){var{props:e,previousRectanglesRef:t}=r,{data:i,layout:n,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,h=t.current,f=_P(e,"recharts-bar-"),[m,p]=A.useState(!1),g=A.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),b=A.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return A.createElement(tl,{begin:a,duration:o,isActive:s,easing:l,from:{t:0},to:{t:1},onAnimationEnd:g,onAnimationStart:b,key:f},y=>{var{t:N}=y,w=N===1?i:i.map((_,P)=>{var O=h&&h[P];if(O){var T=Ps(O.x,_.x),C=Ps(O.y,_.y),D=Ps(O.width,_.width),k=Ps(O.height,_.height);return nr(nr({},_),{},{x:T(N),y:C(N),width:D(N),height:k(N)})}if(n==="horizontal"){var M=Ps(0,_.height),j=M(N);return nr(nr({},_),{},{y:_.y+_.height-j,height:j})}var V=Ps(0,_.width),B=V(N);return nr(nr({},_),{},{width:B})});return N>0&&(t.current=w),A.createElement(br,null,A.createElement(LP,{props:e,data:w,showLabels:!m}))})}function u$(r){var{data:e,isAnimationActive:t}=r,i=A.useRef(null);return t&&e&&e.length&&(i.current==null||i.current!==e)?A.createElement(c$,{previousRectanglesRef:i,props:r}):A.createElement(LP,{props:r,data:e,showLabels:!0})}var UP=0,d$=(r,e)=>{var t=Array.isArray(r.value)?r.value[1]:r.value;return{x:r.x,y:r.y,value:t,errorVal:it(r,e)}};class h$ extends A.PureComponent{constructor(){super(...arguments),cg(this,"id",Fc("recharts-bar-"))}render(){var{hide:e,data:t,dataKey:i,className:n,xAxisId:s,yAxisId:a,needClip:o,background:l,id:c,layout:u}=this.props;if(e)return null;var h=Me("recharts-bar",n),f=pt(c)?this.id:c;return A.createElement(br,{className:h},o&&A.createElement("defs",null,A.createElement(J5,{clipPathId:f,xAxisId:s,yAxisId:a})),A.createElement(br,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):null},A.createElement(l$,{data:t,dataKey:i,background:l,allOtherBarProps:this.props}),A.createElement(u$,this.props)),A.createElement($5,{direction:u==="horizontal"?"y":"x"},this.props.children))}}var FP={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Zc.isSsr,legendType:"rect",minPointSize:UP,xAxisId:0,yAxisId:0};function f$(r){var{xAxisId:e,yAxisId:t,hide:i,legendType:n,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u}=An(r,FP),{needClip:h}=IP(e,t),f=Z0(),m=ti(),p=A.useMemo(()=>({barSize:r.barSize,data:void 0,dataKey:r.dataKey,maxBarSize:r.maxBarSize,minPointSize:s,stackId:RE(r.stackId)}),[r.barSize,r.dataKey,r.maxBarSize,s,r.stackId]),g=Lh(r.children,Kh),b=ae(w=>$$(w,e,t,m,p,g));if(f!=="vertical"&&f!=="horizontal")return null;var y,N=b==null?void 0:b[0];return N==null||N.height==null||N.width==null?y=0:y=f==="vertical"?N.height/2:N.width/2,A.createElement(C5,{xAxisId:e,yAxisId:t,data:b,dataPointFormatter:d$,errorBarOffset:y},A.createElement(h$,id({},r,{layout:f,needClip:h,data:b,xAxisId:e,yAxisId:t,hide:i,legendType:n,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function m$(r){var{layout:e,barSettings:{dataKey:t,minPointSize:i},pos:n,bandSize:s,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:h,offset:f,cells:m}=r,p=e==="horizontal"?o:a,g=u?p.scale.domain():null,b=bM({numericAxis:p});return h.map((y,N)=>{var w,_,P,O,T,C;u?w=fM(u[N],g):(w=it(y,t),Array.isArray(w)||(w=[b,w]));var D=Z5(i,UP)(w[1],N);if(e==="horizontal"){var k,[M,j]=[o.scale(w[0]),o.scale(w[1])];_=S1({axis:a,ticks:l,bandSize:s,offset:n.offset,entry:y,index:N}),P=(k=j??M)!==null&&k!==void 0?k:void 0,O=n.size;var V=M-j;if(T=xi(V)?0:V,C={x:_,y:f.top,width:O,height:f.height},Math.abs(D)>0&&Math.abs(T)<Math.abs(D)){var B=Gt(T||D)*(Math.abs(D)-Math.abs(T));P-=B,T+=B}}else{var[X,$]=[a.scale(w[0]),a.scale(w[1])];if(_=X,P=S1({axis:o,ticks:c,bandSize:s,offset:n.offset,entry:y,index:N}),O=$-X,T=n.size,C={x:f.left,y:P,width:f.width,height:T},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var U=Gt(O||D)*(Math.abs(D)-Math.abs(O));O+=U}}return nr(nr({},y),{},{x:_,y:P,width:O,height:T,value:u?w:w[1],payload:y,background:C,tooltipPosition:{x:_+O/2,y:P+T/2}},m&&m[N]&&m[N].props)})}class Lm extends A.PureComponent{render(){return A.createElement(O5,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},A.createElement(A5,null),A.createElement(r5,{legendPayload:a$(this.props)}),A.createElement(EP,{fn:o$,args:this.props}),A.createElement(f$,this.props))}}cg(Lm,"displayName","Bar");cg(Lm,"defaultProps",FP);function Nw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function vf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nw(Object(t),!0).forEach(function(i){p$(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Nw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function p$(r,e,t){return(e=g$(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function g$(r){var e=v$(r,"string");return typeof e=="symbol"?e:e+""}function v$(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var b$=(r,e)=>e,y$=(r,e,t)=>t,x$=(r,e,t,i)=>i,mx=(r,e,t,i,n)=>n,N$=(r,e,t,i,n)=>n.maxBarSize,w$=(r,e,t,i,n,s)=>s,ww=(r,e,t)=>{var i=t??r;if(!pt(i))return gr(i,e,0)},A$=L([Re,jy,b$,y$,x$],(r,e,t,i,n)=>e.filter(s=>r==="horizontal"?s.xAxisId===t:s.yAxisId===i).filter(s=>s.isPanorama===n).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),E$=(r,e,t,i)=>{var n=Re(r);return n==="horizontal"?Uv(r,"yAxis",t,i):Uv(r,"xAxis",e,i)},S$=(r,e,t)=>{var i=Re(r);return i==="horizontal"?jN(r,"xAxis",e):jN(r,"yAxis",t)};function _$(r){return r.stackId!=null&&r.dataKey!=null}var P$=(r,e,t)=>{var i={},n=r.filter(_$),s=r.filter(c=>c.stackId==null),a=n.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),i),o=Object.entries(a).map(c=>{var[u,h]=c,f=h.map(p=>p.dataKey),m=ww(e,t,h[0].barSize);return{stackId:u,dataKeys:f,barSize:m}}),l=s.map(c=>{var u=[c.dataKey].filter(f=>f!=null),h=ww(e,t,c.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...o,...l]},C$=L([A$,GL,S$],P$),D$=(r,e,t,i,n)=>{var s,a,o=Re(r),l=r_(r),{maxBarSize:c}=n,u=pt(c)?l:c,h,f;return o==="horizontal"?(h=ba(r,"xAxis",e,i),f=Qc(r,"xAxis",e,i)):(h=ba(r,"yAxis",t,i),f=Qc(r,"yAxis",t,i)),(s=(a=G0(h,f,!0))!==null&&a!==void 0?a:u)!==null&&s!==void 0?s:0},VP=(r,e,t,i)=>{var n=Re(r),s,a;return n==="horizontal"?(s=ba(r,"xAxis",e,i),a=Qc(r,"xAxis",e,i)):(s=ba(r,"yAxis",t,i),a=Qc(r,"yAxis",t,i)),G0(s,a)};function O$(r,e,t,i,n){var s=i.length;if(!(s<1)){var a=gr(r,t,0,!0),o,l=[];if(ei(i[0].barSize)){var c=!1,u=t/s,h=i.reduce((y,N)=>y+(N.barSize||0),0);h+=(s-1)*a,h>=t&&(h-=(s-1)*a,a=0),h>=t&&u>0&&(c=!0,u*=.9,h=s*u);var f=(t-h)/2>>0,m={offset:f-a,size:0};o=i.reduce((y,N)=>{var w,_={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:m.offset+m.size+a,size:c?u:(w=N.barSize)!==null&&w!==void 0?w:0}},P=[...y,_];return m=P[P.length-1].position,P},l)}else{var p=gr(e,t,0,!0);t-2*p-(s-1)*a<=0&&(a=0);var g=(t-2*p-(s-1)*a)/s;g>1&&(g>>=0);var b=ei(n)?Math.min(g,n):g;o=i.reduce((y,N,w)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:p+(g+a)*w+(g-b)/2,size:b}}],l)}return o}}var T$=(r,e,t,i,n,s,a)=>{var o=pt(a)?e:a,l=O$(t,i,n!==s?n:s,r,o);return n!==s&&l!=null&&(l=l.map(c=>vf(vf({},c),{},{position:vf(vf({},c.position),{},{offset:c.position.offset-n/2})}))),l},k$=L([C$,r_,WL,i_,D$,VP,N$],T$),M$=(r,e,t,i)=>ba(r,"xAxis",e,i),R$=(r,e,t,i)=>ba(r,"yAxis",t,i),j$=(r,e,t,i)=>Qc(r,"xAxis",e,i),I$=(r,e,t,i)=>Qc(r,"yAxis",t,i),L$=L([k$,mx],(r,e)=>{if(r!=null){var t=r.find(i=>i.stackId===e.stackId&&i.dataKeys.includes(e.dataKey));if(t!=null)return t.position}}),U$=(r,e)=>{if(!(!r||(e==null?void 0:e.dataKey)==null)){var{stackId:t}=e;if(t!=null){var i=r[t];if(i){var{stackedData:n}=i;if(n){var s=n.find(a=>a.key===e.dataKey);return s}}}}},F$=L([jy,mx],(r,e)=>{if(r.some(t=>t.type==="bar"&&e.dataKey===t.dataKey&&e.stackId===t.stackId&&e.stackId===t.stackId))return e}),V$=L([E$,mx],U$),$$=L([Rt,M$,R$,j$,I$,L$,Re,$S,VP,V$,F$,w$],(r,e,t,i,n,s,a,o,l,c,u,h)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:p}=o;if(!(u==null||s==null||a!=="horizontal"&&a!=="vertical"||e==null||t==null||i==null||n==null||l==null)){var{data:g}=u,b;if(g!=null&&g.length>0?b=g:b=f==null?void 0:f.slice(m,p+1),b!=null)return m$({layout:a,barSettings:u,pos:s,bandSize:l,xAxis:e,yAxis:t,xAxisTicks:i,yAxisTicks:n,stackedData:c,displayedData:b,offset:r,cells:h})}}),$P=r=>{var{chartData:e}=r,t=Xe(),i=ti();return A.useEffect(()=>i?()=>{}:(t(HN(e)),()=>{t(HN(void 0))}),[e,t,i]),null},Aw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BP=Ei({name:"brush",initialState:Aw,reducers:{setBrushSettings(r,e){return e.payload==null?Aw:e.payload}}}),{setBrushSettings:pH}=BP.actions,B$=BP.reducer;function H$(r,e,t){return(e=z$(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function z$(r){var e=q$(r,"string");return typeof e=="symbol"?e:e+""}function q$(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class px{static create(e){return new px(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),i=t[0],n=t[t.length-1];return i<=n?e>=i&&e<=n:e>=n&&e<=i}}H$(px,"EPS",1e-4);function W$(r){return(r%180+180)%180}var G$=function(e){var{width:t,height:i}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=W$(n),a=s*Math.PI/180,o=Math.atan(i/t),l=a>o&&a<Math.PI-o?i/Math.sin(a):t/Math.cos(a);return Math.abs(l)},K$={dots:[],areas:[],lines:[]},HP=Ei({name:"referenceElements",initialState:K$,reducers:{addDot:(r,e)=>{r.dots.push(e.payload)},removeDot:(r,e)=>{var t=pa(r).dots.findIndex(i=>i===e.payload);t!==-1&&r.dots.splice(t,1)},addArea:(r,e)=>{r.areas.push(e.payload)},removeArea:(r,e)=>{var t=pa(r).areas.findIndex(i=>i===e.payload);t!==-1&&r.areas.splice(t,1)},addLine:(r,e)=>{r.lines.push(e.payload)},removeLine:(r,e)=>{var t=pa(r).lines.findIndex(i=>i===e.payload);t!==-1&&r.lines.splice(t,1)}}}),{addDot:gH,removeDot:vH,addArea:bH,removeArea:yH,addLine:xH,removeLine:NH}=HP.actions,Q$=HP.reducer,Y$=A.createContext(void 0),X$=r=>{var{children:e}=r,[t]=A.useState("".concat(Fc("recharts"),"-clip")),i=X0();if(i==null)return null;var{left:n,top:s,height:a,width:o}=i;return A.createElement(Y$.Provider,{value:t},A.createElement("defs",null,A.createElement("clipPath",{id:t},A.createElement("rect",{x:n,y:s,height:a,width:o}))),e)};function $g(r,e){for(var t in r)if({}.hasOwnProperty.call(r,t)&&(!{}.hasOwnProperty.call(e,t)||r[t]!==e[t]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(r,i))return!1;return!0}function zP(r,e,t){if(e<1)return[];if(e===1&&t===void 0)return r;for(var i=[],n=0;n<r.length;n+=e)i.push(r[n]);return i}function Z$(r,e,t){var i={width:r.width+e.width,height:r.height+e.height};return G$(i,t)}function J$(r,e,t){var i=t==="width",{x:n,y:s,width:a,height:o}=r;return e===1?{start:i?n:s,end:i?n+a:s+o}:{start:i?n+a:s+o,end:i?n:s}}function Um(r,e,t,i,n){if(r*e<r*i||r*e>r*n)return!1;var s=t();return r*(e-r*s/2-i)>=0&&r*(e+r*s/2-n)<=0}function e4(r,e){return zP(r,e+1)}function t4(r,e,t,i,n){for(var s=(i||[]).slice(),{start:a,end:o}=e,l=0,c=1,u=a,h=function(){var p=i==null?void 0:i[l];if(p===void 0)return{v:zP(i,c)};var g=l,b,y=()=>(b===void 0&&(b=t(p,g)),b),N=p.coordinate,w=l===0||Um(r,N,y,u,o);w||(l=0,u=a,c+=1),w&&(u=N+r*(y()/2+n),l+=c)},f;c<=s.length;)if(f=h(),f)return f.v;return[]}function Ew(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function ir(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ew(Object(t),!0).forEach(function(i){r4(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ew(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function r4(r,e,t){return(e=i4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function i4(r){var e=n4(r,"string");return typeof e=="symbol"?e:e+""}function n4(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function s4(r,e,t,i,n){for(var s=(i||[]).slice(),a=s.length,{start:o}=e,{end:l}=e,c=function(f){var m=s[f],p,g=()=>(p===void 0&&(p=t(m,f)),p);if(f===a-1){var b=r*(m.coordinate+r*g()/2-l);s[f]=m=ir(ir({},m),{},{tickCoord:b>0?m.coordinate-b*r:m.coordinate})}else s[f]=m=ir(ir({},m),{},{tickCoord:m.coordinate});var y=Um(r,m.tickCoord,g,o,l);y&&(l=m.tickCoord-r*(g()/2+n),s[f]=ir(ir({},m),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return s}function a4(r,e,t,i,n,s){var a=(i||[]).slice(),o=a.length,{start:l,end:c}=e;if(s){var u=i[o-1],h=t(u,o-1),f=r*(u.coordinate+r*h/2-c);a[o-1]=u=ir(ir({},u),{},{tickCoord:f>0?u.coordinate-f*r:u.coordinate});var m=Um(r,u.tickCoord,()=>h,l,c);m&&(c=u.tickCoord-r*(h/2+n),a[o-1]=ir(ir({},u),{},{isShow:!0}))}for(var p=s?o-1:o,g=function(N){var w=a[N],_,P=()=>(_===void 0&&(_=t(w,N)),_);if(N===0){var O=r*(w.coordinate-r*P()/2-l);a[N]=w=ir(ir({},w),{},{tickCoord:O<0?w.coordinate-O*r:w.coordinate})}else a[N]=w=ir(ir({},w),{},{tickCoord:w.coordinate});var T=Um(r,w.tickCoord,P,l,c);T&&(l=w.tickCoord+r*(P()/2+n),a[N]=ir(ir({},w),{},{isShow:!0}))},b=0;b<p;b++)g(b);return a}function o4(r,e,t){var{tick:i,ticks:n,viewBox:s,minTickGap:a,orientation:o,interval:l,tickFormatter:c,unit:u,angle:h}=r;if(!n||!n.length||!i)return[];if(ne(l)||Zc.isSsr){var f;return(f=e4(n,ne(l)?l:0))!==null&&f!==void 0?f:[]}var m=[],p=o==="top"||o==="bottom"?"width":"height",g=u&&p==="width"?qu(u,{fontSize:e,letterSpacing:t}):{width:0,height:0},b=(w,_)=>{var P=typeof c=="function"?c(w.value,_):w.value;return p==="width"?Z$(qu(P,{fontSize:e,letterSpacing:t}),g,h):qu(P,{fontSize:e,letterSpacing:t})[p]},y=n.length>=2?Gt(n[1].coordinate-n[0].coordinate):1,N=J$(s,y,p);return l==="equidistantPreserveStart"?t4(y,N,b,n,a):(l==="preserveStart"||l==="preserveStartEnd"?m=a4(y,N,b,n,a,l==="preserveStartEnd"):m=s4(y,N,b,n,a),m.filter(w=>w.isShow))}var l4=["viewBox"],c4=["viewBox"];function _l(){return _l=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},_l.apply(null,arguments)}function Sw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function yt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sw(Object(t),!0).forEach(function(i){gx(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Sw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function _w(r,e){if(r==null)return{};var t,i,n=u4(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function u4(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function gx(r,e,t){return(e=d4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function d4(r){var e=h4(r,"string");return typeof e=="symbol"?e:e+""}function h4(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class lu extends A.Component{constructor(e){super(e),this.tickRefs=A.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:i}=e,n=_w(e,l4),s=this.props,{viewBox:a}=s,o=_w(s,c4);return!$g(i,a)||!$g(n,o)||!$g(t,this.state)}getTickLineCoord(e){var{x:t,y:i,width:n,height:s,orientation:a,tickSize:o,mirror:l,tickMargin:c}=this.props,u,h,f,m,p,g,b=l?-1:1,y=e.tickSize||o,N=ne(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=h=e.coordinate,m=i+ +!l*s,f=m-b*y,g=f-b*c,p=N;break;case"left":f=m=e.coordinate,h=t+ +!l*n,u=h-b*y,p=u-b*c,g=N;break;case"right":f=m=e.coordinate,h=t+ +l*n,u=h+b*y,p=u+b*c,g=N;break;default:u=h=e.coordinate,m=i+ +l*s,f=m+b*y,g=f+b*c,p=N;break}return{line:{x1:u,y1:f,x2:h,y2:m},tick:{x:p,y:g}}}getTickTextAnchor(){var{orientation:e,mirror:t}=this.props,i;switch(e){case"left":i=t?"start":"end";break;case"right":i=t?"end":"start";break;default:i="middle";break}return i}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:t,width:i,height:n,orientation:s,mirror:a,axisLine:o}=this.props,l=yt(yt(yt({},Le(this.props,!1)),Le(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var c=+(s==="top"&&!a||s==="bottom"&&a);l=yt(yt({},l),{},{x1:e,y1:t+c*n,x2:e+i,y2:t+c*n})}else{var u=+(s==="left"&&!a||s==="right"&&a);l=yt(yt({},l),{},{x1:e+u*i,y1:t,x2:e+u*i,y2:t+n})}return A.createElement("line",_l({},l,{className:Me("recharts-cartesian-axis-line",va(o,"className"))}))}static renderTickItem(e,t,i){var n,s=Me(t.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))n=A.cloneElement(e,yt(yt({},t),{},{className:s}));else if(typeof e=="function")n=e(yt(yt({},t),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Me(a,e.className)),n=A.createElement(og,_l({},t,{className:a}),i)}return n}renderTicks(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:s,tick:a,tickFormatter:o,unit:l}=this.props,c=o4(yt(yt({},this.props),{},{ticks:i}),e,t),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=Le(this.props,!1),m=Le(a,!1),p=yt(yt({},f),{},{fill:"none"},Le(n,!1)),g=c.map((b,y)=>{var{line:N,tick:w}=this.getTickLineCoord(b),_=yt(yt(yt(yt({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:s},m),w),{},{index:y,payload:b,visibleTicksCount:c.length,tickFormatter:o});return A.createElement(br,_l({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},Ih(this.props,b,y)),n&&A.createElement("line",_l({},p,N,{className:Me("recharts-cartesian-axis-tick-line",va(n,"className"))})),a&&lu.renderTickItem(a,_,"".concat(typeof o=="function"?o(b.value,y):b.value).concat(l||"")))});return g.length>0?A.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:e,width:t,height:i,className:n,hide:s}=this.props;if(s)return null;var{ticks:a}=this.props;return t!=null&&t<=0||i!=null&&i<=0?null:A.createElement(br,{className:Me("recharts-cartesian-axis",n),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,h=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,a),Gr.renderCallByParent(this.props))}}gx(lu,"displayName","CartesianAxis");gx(lu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function Pw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function Cw(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pw(Object(t),!0).forEach(function(i){f4(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function f4(r,e,t){return(e=m4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function m4(r){var e=p4(r,"string");return typeof e=="symbol"?e:e+""}function p4(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var g4={xAxis:{},yAxis:{},zAxis:{}},qP=Ei({name:"cartesianAxis",initialState:g4,reducers:{addXAxis(r,e){r.xAxis[e.payload.id]=e.payload},removeXAxis(r,e){delete r.xAxis[e.payload.id]},addYAxis(r,e){r.yAxis[e.payload.id]=e.payload},removeYAxis(r,e){delete r.yAxis[e.payload.id]},addZAxis(r,e){r.zAxis[e.payload.id]=e.payload},removeZAxis(r,e){delete r.zAxis[e.payload.id]},updateYAxisWidth(r,e){var{id:t,width:i}=e.payload;r.yAxis[t]&&(r.yAxis[t]=Cw(Cw({},r.yAxis[t]),{},{width:i}))}}}),{addXAxis:v4,removeXAxis:b4,addYAxis:y4,removeYAxis:x4,addZAxis:wH,removeZAxis:AH,updateYAxisWidth:N4}=qP.actions,w4=qP.reducer,A4=["children"],E4=["dangerouslySetInnerHTML","ticks"];function WP(r,e,t){return(e=S4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function S4(r){var e=_4(r,"string");return typeof e=="symbol"?e:e+""}function _4(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Gv.apply(null,arguments)}function GP(r,e){if(r==null)return{};var t,i,n=P4(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function P4(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function C4(r){var e=Xe(),t=A.useMemo(()=>{var{children:s}=r,a=GP(r,A4);return a},[r]),i=ae(s=>xs(s,t.id)),n=t===i;return A.useEffect(()=>(e(v4(t)),()=>{e(b4(t))}),[t,e]),n?r.children:null}var D4=r=>{var{xAxisId:e,className:t}=r,i=ae(UE),n=ti(),s="xAxis",a=ae(m=>su(m,s,e,n)),o=ae(m=>T_(m,s,e,n)),l=ae(m=>P_(m,e)),c=ae(m=>FU(m,e));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=r,f=GP(r,E4);return A.createElement(lu,Gv({},f,{scale:a,x:c.x,y:c.y,width:l.width,height:l.height,className:Me("recharts-".concat(s," ").concat(s),t),viewBox:i,ticks:o}))},O4=r=>{var e,t,i,n,s;return A.createElement(C4,{interval:(e=r.interval)!==null&&e!==void 0?e:"preserveEnd",id:r.xAxisId,scale:r.scale,type:r.type,padding:r.padding,allowDataOverflow:r.allowDataOverflow,domain:r.domain,dataKey:r.dataKey,allowDuplicatedCategory:r.allowDuplicatedCategory,allowDecimals:r.allowDecimals,tickCount:r.tickCount,includeHidden:(t=r.includeHidden)!==null&&t!==void 0?t:!1,reversed:r.reversed,ticks:r.ticks,height:r.height,orientation:r.orientation,mirror:r.mirror,hide:r.hide,unit:r.unit,name:r.name,angle:(i=r.angle)!==null&&i!==void 0?i:0,minTickGap:(n=r.minTickGap)!==null&&n!==void 0?n:5,tick:(s=r.tick)!==null&&s!==void 0?s:!0,tickFormatter:r.tickFormatter},A.createElement(D4,r))};class vx extends A.Component{render(){return A.createElement(O4,this.props)}}WP(vx,"displayName","XAxis");WP(vx,"defaultProps",{allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,height:Cr.height,hide:!1,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tickCount:Cr.tickCount,type:Cr.type,xAxisId:0});var T4=r=>{var{ticks:e,label:t,labelGapWithTick:i=5,tickSize:n=0,tickMargin:s=0}=r,a=0;if(e){e.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>a&&(a=h.width)}});var o=t?t.getBoundingClientRect().width:0,l=n+s,c=a+l+o+(t?i:0);return Math.round(c)}return 0},k4=["dangerouslySetInnerHTML","ticks"];function KP(r,e,t){return(e=M4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function M4(r){var e=R4(r,"string");return typeof e=="symbol"?e:e+""}function R4(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Kv(){return Kv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kv.apply(null,arguments)}function j4(r,e){if(r==null)return{};var t,i,n=I4(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function I4(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function L4(r){var e=Xe();return A.useEffect(()=>(e(y4(r)),()=>{e(x4(r))}),[r,e]),null}var U4=r=>{var e,{yAxisId:t,className:i,width:n,label:s}=r,a=A.useRef(null),o=A.useRef(null),l=ae(UE),c=ti(),u=Xe(),h="yAxis",f=ae(w=>su(w,h,t,c)),m=ae(w=>C_(w,t)),p=ae(w=>VU(w,t)),g=ae(w=>T_(w,h,t,c));if(A.useLayoutEffect(()=>{var w;if(!(n!=="auto"||!m||sx(s)||A.isValidElement(s))){var _=a.current,P=_==null||(w=_.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:O,tickMargin:T}=_.props,C=T4({ticks:P,label:o.current,labelGapWithTick:5,tickSize:O,tickMargin:T});Math.round(m.width)!==Math.round(C)&&u(N4({id:t,width:C}))}},[a,a==null||(e=a.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,m==null?void 0:m.width,m,u,s,t,n]),m==null||p==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=r,N=j4(r,k4);return A.createElement(lu,Kv({},N,{ref:a,labelRef:o,scale:f,x:p.x,y:p.y,width:m.width,height:m.height,className:Me("recharts-".concat(h," ").concat(h),i),viewBox:l,ticks:g}))},F4=r=>{var e,t,i,n,s;return A.createElement(A.Fragment,null,A.createElement(L4,{interval:(e=r.interval)!==null&&e!==void 0?e:"preserveEnd",id:r.yAxisId,scale:r.scale,type:r.type,domain:r.domain,allowDataOverflow:r.allowDataOverflow,dataKey:r.dataKey,allowDuplicatedCategory:r.allowDuplicatedCategory,allowDecimals:r.allowDecimals,tickCount:r.tickCount,padding:r.padding,includeHidden:(t=r.includeHidden)!==null&&t!==void 0?t:!1,reversed:r.reversed,ticks:r.ticks,width:r.width,orientation:r.orientation,mirror:r.mirror,hide:r.hide,unit:r.unit,name:r.name,angle:(i=r.angle)!==null&&i!==void 0?i:0,minTickGap:(n=r.minTickGap)!==null&&n!==void 0?n:5,tick:(s=r.tick)!==null&&s!==void 0?s:!0,tickFormatter:r.tickFormatter}),A.createElement(U4,r))},V4={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:Dr.allowDecimals,allowDuplicatedCategory:Dr.allowDuplicatedCategory,hide:!1,mirror:Dr.mirror,orientation:Dr.orientation,padding:Dr.padding,reversed:Dr.reversed,scale:Dr.scale,tickCount:Dr.tickCount,type:Dr.type,width:Dr.width,yAxisId:0};class bx extends A.Component{render(){return A.createElement(F4,this.props)}}KP(bx,"displayName","YAxis");KP(bx,"defaultProps",V4);var $4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=A;function B4(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var H4=typeof Object.is=="function"?Object.is:B4,z4=Qh.useSyncExternalStore,q4=Qh.useRef,W4=Qh.useEffect,G4=Qh.useMemo,K4=Qh.useDebugValue;$4.useSyncExternalStoreWithSelector=function(r,e,t,i,n){var s=q4(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=G4(function(){function l(m){if(!c){if(c=!0,u=m,m=i(m),n!==void 0&&a.hasValue){var p=a.value;if(n(p,m))return h=p}return h=m}if(p=h,H4(u,m))return p;var g=i(m);return n!==void 0&&n(p,g)?(u=m,p):(u=m,h=g)}var c=!1,u,h,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,i,n]);var o=z4(r,s[0],s[1]);return W4(function(){a.hasValue=!0,a.value=o},[o]),K4(o),o};function Q4(r){r()}function Y4(){let r=null,e=null;return{clear(){r=null,e=null},notify(){Q4(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=r;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const n=e={callback:t,next:null,prev:e};return n.prev?n.prev.next=n:r=n,function(){!i||r===null||(i=!1,n.next?n.next.prev=n.prev:e=n.prev,n.prev?n.prev.next=n.next:r=n.next)}}}}var Dw={notify(){},get:()=>[]};function X4(r,e){let t,i=Dw,n=0,s=!1;function a(g){u();const b=i.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),h())}}function o(){i.notify()}function l(){p.onStateChange&&p.onStateChange()}function c(){return s}function u(){n++,t||(t=r.subscribe(l),i=Y4())}function h(){n--,t&&n===0&&(t(),t=void 0,i.clear(),i=Dw)}function f(){s||(s=!0,u())}function m(){s&&(s=!1,h())}const p={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>i};return p}var Z4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J4=Z4(),eB=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tB=eB(),rB=()=>J4||tB?A.useLayoutEffect:A.useEffect,iB=rB(),Bg=Symbol.for("react-redux-context"),Hg=typeof globalThis<"u"?globalThis:{};function nB(){if(!A.createContext)return{};const r=Hg[Bg]??(Hg[Bg]=new Map);let e=r.get(A.createContext);return e||(e=A.createContext(null),r.set(A.createContext,e)),e}var sB=nB();function aB(r){const{children:e,context:t,serverState:i,store:n}=r,s=A.useMemo(()=>{const l=X4(n);return{store:n,subscription:l,getServerState:i?()=>i:void 0}},[n,i]),a=A.useMemo(()=>n.getState(),[n]);iB(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==n.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=t||sB;return A.createElement(o.Provider,{value:s},e)}var oB=aB,lB=(r,e)=>e,yx=L([lB,Re,JL,It,q_,Ns,BF,Rt],QF),xx=r=>{var e=r.currentTarget.getBoundingClientRect(),t=e.width/r.currentTarget.offsetWidth,i=e.height/r.currentTarget.offsetHeight;return{chartX:Math.round((r.clientX-e.left)/t),chartY:Math.round((r.clientY-e.top)/i)}},QP=Ni("mouseClick"),YP=Uh();YP.startListening({actionCreator:QP,effect:(r,e)=>{var t=r.payload,i=yx(e.getState(),xx(t));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(JU({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var Qv=Ni("mouseMove"),XP=Uh();XP.startListening({actionCreator:Qv,effect:(r,e)=>{var t=r.payload,i=e.getState(),n=Xy(i,i.tooltip.settings.shared),s=yx(i,xx(t));n==="axis"&&((s==null?void 0:s.activeIndex)!=null?e.dispatch(F_({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(U_()))}});function cB(r,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var Ow={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ZP=Ei({name:"rootProps",initialState:Ow,reducers:{updateOptions:(r,e)=>{var t;r.accessibilityLayer=e.payload.accessibilityLayer,r.barCategoryGap=e.payload.barCategoryGap,r.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:Ow.barGap,r.barSize=e.payload.barSize,r.maxBarSize=e.payload.maxBarSize,r.stackOffset=e.payload.stackOffset,r.syncId=e.payload.syncId,r.syncMethod=e.payload.syncMethod,r.className=e.payload.className}}}),uB=ZP.reducer,{updateOptions:dB}=ZP.actions,JP=Ei({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(r,e)=>e.payload}}),{updatePolarOptions:hB}=JP.actions,fB=JP.reducer,eC=Ni("keyDown"),tC=Ni("focus"),Nx=Uh();Nx.startListening({actionCreator:eC,effect:(r,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:n}=t.tooltip,s=r.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(Zy(n,dl(t))),o=Ns(t);if(s==="Enter"){var l=Mm(t,"axis","hover",String(n.index));e.dispatch(Vv({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:l}));return}var c=zU(t),u=c==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,f=a+h*u;if(!(o==null||f>=o.length||f<0)){var m=Mm(t,"axis","hover",String(f));e.dispatch(Vv({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});Nx.startListening({actionCreator:tC,effect:(r,e)=>{var t=e.getState(),i=t.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:n}=t.tooltip;if(!n.active&&n.index==null){var s="0",a=Mm(t,"axis","hover",String(s));e.dispatch(Vv({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var ai=Ni("externalEvent"),rC=Uh();rC.startListening({actionCreator:ai,effect:(r,e)=>{if(r.payload.handler!=null){var t=e.getState(),i={activeCoordinate:OF(t),activeDataKey:Q_(t),activeIndex:Yc(t),activeLabel:PF(t),activeTooltipIndex:Yc(t),isTooltipActive:TF(t)};r.payload.handler(i,r.payload.reactEvent)}}});var mB=L([au],r=>r.tooltipItemPayloads),pB=L([mB,ng,(r,e,t)=>e,(r,e,t)=>t],(r,e,t,i)=>{var n=r.find(o=>o.settings.dataKey===i);if(n!=null){var{positions:s}=n;if(s!=null){var a=e(s,t);return a}}}),iC=Ni("touchMove"),nC=Uh();nC.startListening({actionCreator:iC,effect:(r,e)=>{var t=r.payload,i=e.getState(),n=Xy(i,i.tooltip.settings.shared);if(n==="axis"){var s=yx(i,xx({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(F_({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(n==="item"){var a,o=t.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(IE),u=(a=l.getAttribute(LE))!==null&&a!==void 0?a:void 0,h=pB(e.getState(),c,u);e.dispatch(L_({activeDataKey:u,activeIndex:c,activeCoordinate:h}))}}});var gB=uE({brush:B$,cartesianAxis:w4,chartData:u3,graphicalItems:LV,layout:Xk,legend:LM,options:s3,polarAxis:wV,polarOptions:fB,referenceElements:Q$,rootProps:uB,tooltip:eF}),vB=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return wk({reducer:gB,preloadedState:e,middleware:i=>i({serializableCheck:!1}).concat([YP.middleware,XP.middleware,Nx.middleware,rC.middleware,nC.middleware]),devTools:{serialize:{replacer:cB},name:"recharts-".concat(t)}})};function sC(r){var{preloadedState:e,children:t,reduxStoreName:i}=r,n=ti(),s=A.useRef(null);if(n)return t;s.current==null&&(s.current=vB(e,i));var a=F0;return A.createElement(oB,{context:a,store:s.current},t)}function aC(r){var{layout:e,width:t,height:i,margin:n}=r,s=Xe(),a=ti();return A.useEffect(()=>{a||(s(Kk(e)),s(Qk({width:t,height:i})),s(Gk(n)))},[s,a,e,t,i,n]),null}function oC(r){var e=Xe();return A.useEffect(()=>{e(dB(r))},[e,r]),null}var bB=["children"];function yB(r,e){if(r==null)return{};var t,i,n=xB(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function xB(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function Fm(){return Fm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Fm.apply(null,arguments)}var NB={width:"100%",height:"100%"},wB=A.forwardRef((r,e)=>{var t=FE(),i=VE(),n=zE();if(!zc(t)||!zc(i))return null;var{children:s,otherAttributes:a,title:o,desc:l}=r,c,u;return typeof a.tabIndex=="number"?c=a.tabIndex:c=n?0:void 0,typeof a.role=="string"?u=a.role:u=n?"application":void 0,A.createElement(S0,Fm({},a,{title:o,desc:l,role:u,tabIndex:c,width:t,height:i,style:NB,ref:e}),s)}),AB=r=>{var{children:e}=r,t=ae(zp);if(!t)return null;var{width:i,height:n,y:s,x:a}=t;return A.createElement(S0,{width:i,height:n,x:a,y:s},e)},Tw=A.forwardRef((r,e)=>{var{children:t}=r,i=yB(r,bB),n=ti();return n?A.createElement(AB,null,t):A.createElement(wB,Fm({ref:e},i),t)});function EB(){var r=Xe(),[e,t]=A.useState(null),i=ae(SM);return A.useEffect(()=>{if(e!=null){var n=e.getBoundingClientRect(),s=n.width/e.offsetWidth;ei(s)&&s!==i&&r(Yk(s))}},[e,r,i]),t}function kw(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,i)}return t}function SB(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kw(Object(t),!0).forEach(function(i){_B(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kw(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function _B(r,e,t){return(e=PB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function PB(r){var e=CB(r,"string");return typeof e=="symbol"?e:e+""}function CB(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var DB=A.forwardRef((r,e)=>{var{children:t,className:i,height:n,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:p,onTouchStart:g,style:b,width:y}=r,N=Xe(),[w,_]=A.useState(null),[P,O]=A.useState(null);f3();var T=EB(),C=A.useCallback(H=>{T(H),typeof e=="function"&&e(H),_(H),O(H)},[T,e,_,O]),D=A.useCallback(H=>{N(QP(H)),N(ai({handler:s,reactEvent:H}))},[N,s]),k=A.useCallback(H=>{N(Qv(H)),N(ai({handler:c,reactEvent:H}))},[N,c]),M=A.useCallback(H=>{N(U_()),N(ai({handler:u,reactEvent:H}))},[N,u]),j=A.useCallback(H=>{N(Qv(H)),N(ai({handler:h,reactEvent:H}))},[N,h]),V=A.useCallback(()=>{N(tC())},[N]),B=A.useCallback(H=>{N(eC(H.key))},[N]),X=A.useCallback(H=>{N(ai({handler:a,reactEvent:H}))},[N,a]),$=A.useCallback(H=>{N(ai({handler:o,reactEvent:H}))},[N,o]),U=A.useCallback(H=>{N(ai({handler:l,reactEvent:H}))},[N,l]),oe=A.useCallback(H=>{N(ai({handler:f,reactEvent:H}))},[N,f]),Q=A.useCallback(H=>{N(ai({handler:g,reactEvent:H}))},[N,g]),ye=A.useCallback(H=>{N(iC(H)),N(ai({handler:p,reactEvent:H}))},[N,p]),te=A.useCallback(H=>{N(ai({handler:m,reactEvent:H}))},[N,m]);return A.createElement(eP.Provider,{value:w},A.createElement(vA.Provider,{value:P},A.createElement("div",{className:Me("recharts-wrapper",i),style:SB({position:"relative",cursor:"default",width:y,height:n},b),role:"application",onClick:D,onContextMenu:X,onDoubleClick:$,onFocus:V,onKeyDown:B,onMouseDown:U,onMouseEnter:k,onMouseLeave:M,onMouseMove:j,onMouseUp:oe,onTouchEnd:te,onTouchMove:ye,onTouchStart:Q,ref:C},t)))}),OB=["children","className","width","height","style","compact","title","desc"];function TB(r,e){if(r==null)return{};var t,i,n=kB(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function kB(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var lC=A.forwardRef((r,e)=>{var{children:t,className:i,width:n,height:s,style:a,compact:o,title:l,desc:c}=r,u=TB(r,OB),h=Le(u,!1);return o?A.createElement(Tw,{otherAttributes:h,title:l,desc:c},t):A.createElement(DB,{className:i,style:a,width:n,height:s,onClick:r.onClick,onMouseLeave:r.onMouseLeave,onMouseEnter:r.onMouseEnter,onMouseMove:r.onMouseMove,onMouseDown:r.onMouseDown,onMouseUp:r.onMouseUp,onContextMenu:r.onContextMenu,onDoubleClick:r.onDoubleClick,onTouchStart:r.onTouchStart,onTouchMove:r.onTouchMove,onTouchEnd:r.onTouchEnd},A.createElement(Tw,{otherAttributes:h,title:l,desc:c,ref:e},A.createElement(X$,null,t)))}),MB=["width","height"];function Yv(){return Yv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yv.apply(null,arguments)}function RB(r,e){if(r==null)return{};var t,i,n=jB(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function jB(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var IB={top:5,right:5,bottom:5,left:5},LB={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:IB,reverseStackOrder:!1,syncMethod:"index"},UB=A.forwardRef(function(e,t){var i,n=An(e.categoricalChartProps,LB),{width:s,height:a}=n,o=RB(n,MB);if(!zc(s)||!zc(a))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:f}=e,m={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return A.createElement(sC,{preloadedState:{options:m},reduxStoreName:(i=f.id)!==null&&i!==void 0?i:l},A.createElement($P,{chartData:f.data}),A.createElement(aC,{width:s,height:a,layout:n.layout,margin:n.margin}),A.createElement(oC,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),A.createElement(lC,Yv({},o,{width:s,height:a,ref:t})))}),FB=["axis","item"],VB=A.forwardRef((r,e)=>A.createElement(UB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:FB,tooltipPayloadSearcher:rP,categoricalChartProps:r,ref:e}));function $B(r){var e=Xe();return A.useEffect(()=>{e(hB(r))},[e,r]),null}var BB=["width","height","layout"];function Xv(){return Xv=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Xv.apply(null,arguments)}function HB(r,e){if(r==null)return{};var t,i,n=zB(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function zB(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}var qB={top:5,right:5,bottom:5,left:5},WB={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:qB,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},GB=A.forwardRef(function(e,t){var i,n=An(e.categoricalChartProps,WB),{width:s,height:a,layout:o}=n,l=HB(n,BB);if(!zc(s)||!zc(a))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f}=e,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(sC,{preloadedState:{options:m},reduxStoreName:(i=n.id)!==null&&i!==void 0?i:c},A.createElement($P,{chartData:n.data}),A.createElement(aC,{width:s,height:a,layout:o,margin:n.margin}),A.createElement(oC,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),A.createElement($B,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),A.createElement(lC,Xv({width:s,height:a},l,{ref:t})))}),KB=["item"],QB={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},YB=A.forwardRef((r,e)=>{var t=An(r,QB);return A.createElement(GB,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:KB,tooltipPayloadSearcher:rP,categoricalChartProps:t,ref:e})});const Mw=["#60a5fa","#34d399","#fbbf24","#a78bfa","#f472b6","#38bdf8","#f87171","#4ade80"],XB=()=>{const{userAnswers:r,questions:e}=Rh(),t=e.length,i=r.length,n=r.filter(u=>u.isCorrect).length,s=i>0?Math.round(n/i*100):0,o=Array.from(new Set(e.map(u=>u.specialty))).map(u=>{const h=e.filter(m=>m.specialty===u).length,f=r.filter(m=>{const p=e.find(g=>g.id===m.questionId);return(p==null?void 0:p.specialty)===u&&m.isCorrect}).length;return{name:u,Acertos:f,Total:h}}),l=[{name:"Acertos",value:n},{name:"Erros",value:i-n},{name:"Não respondidas",value:t-i}],c=[{label:"Questões Respondidas",value:i,total:t,icon:dA,color:"text-success-500",bg:"bg-success-50"},{label:"Taxa de Acerto",value:`${s}%`,icon:X2,color:"text-success-500",bg:"bg-success-50"},{label:"Acertos",value:n,icon:lA,color:"text-success-500",bg:"bg-success-50"},{label:"Erros",value:i-n,icon:J2,color:"text-red-500",bg:"bg-red-50"}];return v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[v.jsxDEV("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-8",children:"Dashboard"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:83,columnNumber:7},void 0),v.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:c.map((u,h)=>{const f=u.icon;return v.jsxDEV("div",{className:`rounded-2xl shadow-sm border border-gray-100 p-6 flex items-center gap-4 ${u.bg}`,children:[v.jsxDEV("div",{className:`rounded-xl p-3 ${u.bg} ${u.color} bg-opacity-30`,children:v.jsxDEV(f,{className:"h-6 w-6"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:92,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:91,columnNumber:15},void 0),v.jsxDEV("div",{children:[v.jsxDEV("div",{className:"text-2xl font-bold text-gray-900",children:u.value},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:95,columnNumber:17},void 0),v.jsxDEV("div",{className:"text-sm text-gray-500",children:u.label},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:96,columnNumber:17},void 0),u.total!==void 0&&v.jsxDEV("div",{className:"text-xs text-gray-400",children:["de ",u.total]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:98,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:94,columnNumber:15},void 0)]},h,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:90,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:86,columnNumber:7},void 0),v.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[v.jsxDEV("div",{className:"rounded-2xl shadow-sm border border-gray-100 bg-white p-6",children:[v.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Desempenho por Especialidade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:110,columnNumber:11},void 0),v.jsxDEV(QN,{width:"100%",height:260,children:v.jsxDEV(VB,{data:o,margin:{top:10,right:20,left:0,bottom:0},children:[v.jsxDEV(vx,{dataKey:"name",tick:{fontSize:12}},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:113,columnNumber:15},void 0),v.jsxDEV(bx,{allowDecimals:!1,tick:{fontSize:12}},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:114,columnNumber:15},void 0),v.jsxDEV(GN,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:115,columnNumber:15},void 0),v.jsxDEV(Ku,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:116,columnNumber:15},void 0),v.jsxDEV(Lm,{dataKey:"Total",fill:"#e5e7eb",radius:[6,6,0,0],barSize:28},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:117,columnNumber:15},void 0),v.jsxDEV(Lm,{dataKey:"Acertos",fill:"#60a5fa",radius:[6,6,0,0],barSize:18},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:118,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:112,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:111,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:109,columnNumber:9},void 0),v.jsxDEV("div",{className:"rounded-2xl shadow-sm border border-gray-100 bg-white p-6",children:[v.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuição de Respostas"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:125,columnNumber:11},void 0),v.jsxDEV(QN,{width:"100%",height:260,children:v.jsxDEV(YB,{children:[v.jsxDEV(fx,{data:l,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,innerRadius:48,label:({name:u,percent:h})=>`${u}: ${h?(h*100).toFixed(0):0}%`,children:l.map((u,h)=>v.jsxDEV(Kh,{fill:Mw[h%Mw.length]},`cell-${h}`,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:139,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:128,columnNumber:15},void 0),v.jsxDEV(Ku,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:142,columnNumber:15},void 0),v.jsxDEV(GN,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:143,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:127,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:126,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:124,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:107,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Dashboard.tsx",lineNumber:82,columnNumber:5},void 0)},ZB=()=>{const{user:r}=bs(),[e,t]=A.useState(!1),[i,n]=A.useState((r==null?void 0:r.name)||""),s=()=>{t(!1)};return r?v.jsxDEV("div",{className:"max-w-4xl mx-auto",children:[v.jsxDEV("div",{className:"mb-8",children:[v.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Meu Perfil"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:26,columnNumber:9},void 0),v.jsxDEV("p",{className:"text-gray-600",children:"Gerencie suas informações pessoais e configurações"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:27,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:25,columnNumber:7},void 0),v.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxDEV("div",{className:"lg:col-span-2",children:v.jsxDEV("div",{className:"card",children:[v.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[v.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900",children:"Informações Pessoais"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:37,columnNumber:15},void 0),v.jsxDEV("button",{onClick:()=>t(!e),className:"text-sm text-primary-600 hover:text-primary-700",children:e?"Cancelar":"Editar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:38,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:36,columnNumber:13},void 0),v.jsxDEV("div",{className:"space-y-4",children:[v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome completo"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:48,columnNumber:17},void 0),e?v.jsxDEV("input",{type:"text",value:i,onChange:a=>n(a.target.value),className:"input-field"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:52,columnNumber:19},void 0):v.jsxDEV("div",{className:"flex items-center space-x-2 text-gray-900",children:[v.jsxDEV(y0,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:60,columnNumber:21},void 0),v.jsxDEV("span",{children:r.name},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:61,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:59,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:47,columnNumber:15},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:67,columnNumber:17},void 0),v.jsxDEV("div",{className:"flex items-center space-x-2 text-gray-900",children:[v.jsxDEV(b0,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:71,columnNumber:19},void 0),v.jsxDEV("span",{children:r.email},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:72,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:70,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:66,columnNumber:15},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Membro desde"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:77,columnNumber:17},void 0),v.jsxDEV("div",{className:"flex items-center space-x-2 text-gray-900",children:[v.jsxDEV(V2,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:81,columnNumber:19},void 0),v.jsxDEV("span",{children:r.createdAt.toLocaleDateString("pt-BR")},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:82,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:80,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:76,columnNumber:15},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:87,columnNumber:17},void 0),v.jsxDEV("div",{className:"flex items-center space-x-2",children:[v.jsxDEV(zx,{className:`h-4 w-4 ${r.subscription==="pro"?"text-warning-500":"text-gray-400"}`},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:91,columnNumber:19},void 0),v.jsxDEV("span",{className:`font-medium ${r.subscription==="pro"?"text-warning-600":"text-gray-600"}`,children:r.subscription==="pro"?"Plano Pro":"Plano Gratuito"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:94,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:90,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:86,columnNumber:15},void 0),e&&v.jsxDEV("div",{className:"pt-4",children:v.jsxDEV("button",{onClick:s,className:"btn-primary",children:"Salvar Alterações"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:104,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:103,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:46,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:35,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:34,columnNumber:9},void 0),v.jsxDEV("div",{className:"space-y-6",children:[v.jsxDEV("div",{className:"card",children:[v.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plano Atual"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:120,columnNumber:13},void 0),v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("div",{className:`w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center ${r.subscription==="pro"?"bg-warning-100":"bg-gray-100"}`,children:v.jsxDEV(zx,{className:`h-8 w-8 ${r.subscription==="pro"?"text-warning-600":"text-gray-600"}`},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:125,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:122,columnNumber:15},void 0),v.jsxDEV("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.subscription==="pro"?"Plano Pro":"Plano Gratuito"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:129,columnNumber:15},void 0),v.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:r.subscription==="pro"?"Acesso completo a todas as funcionalidades":"Acesso limitado a questões básicas"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:132,columnNumber:15},void 0),r.subscription==="free"&&v.jsxDEV("button",{className:"btn-primary w-full",children:"Upgrade para Pro"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:139,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:119,columnNumber:11},void 0),v.jsxDEV("div",{className:"card",children:[v.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configurações"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:148,columnNumber:13},void 0),v.jsxDEV("div",{className:"space-y-3",children:[v.jsxDEV("button",{className:"w-full text-left flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[v.jsxDEV(Sf,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:151,columnNumber:17},void 0),v.jsxDEV("span",{className:"text-sm text-gray-700",children:"Preferências"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:152,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:150,columnNumber:15},void 0),v.jsxDEV("button",{className:"w-full text-left flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[v.jsxDEV(Sf,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:155,columnNumber:17},void 0),v.jsxDEV("span",{className:"text-sm text-gray-700",children:"Notificações"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:156,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:154,columnNumber:15},void 0),v.jsxDEV("button",{className:"w-full text-left flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[v.jsxDEV(Sf,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:159,columnNumber:17},void 0),v.jsxDEV("span",{className:"text-sm text-gray-700",children:"Privacidade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:160,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:158,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:149,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:147,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:117,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:32,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:24,columnNumber:5},void 0):v.jsxDEV("div",{className:"text-center py-12",children:v.jsxDEV("p",{className:"text-gray-600",children:"Faça login para ver seu perfil"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:18,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Profile.tsx",lineNumber:17,columnNumber:7},void 0)},JB=()=>{const[r,e]=A.useState(""),[t,i]=A.useState(""),[n,s]=A.useState(!1),[a,o]=A.useState(""),{login:l,loading:c,createAdminUser:u}=bs(),h=Xc(),f=async p=>{p.preventDefault(),o("");try{await l(r,t),h("/dashboard")}catch{o("Email ou senha incorretos")}},m=()=>{u(),h("/admin")};return v.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[v.jsxDEV("div",{children:[v.jsxDEV("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Entrar na sua conta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:35,columnNumber:11},void 0),v.jsxDEV("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",v.jsxDEV(ma,{to:"/register",className:"font-medium text-success-600 hover:text-success-500",children:"crie uma nova conta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:40,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:38,columnNumber:11},void 0),v.jsxDEV("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:v.jsxDEV("p",{className:"text-xs text-blue-700 text-center",children:[v.jsxDEV("strong",{children:"Dica:"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:49,columnNumber:15},void 0)," Use ",v.jsxDEV("code",{className:"bg-blue-100 px-1 rounded",children:"victorsilva43@gmail.com"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:49,columnNumber:42},void 0)," para acessar como administrador"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:48,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:47,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:34,columnNumber:9},void 0),v.jsxDEV("form",{className:"mt-8 space-y-6",onSubmit:f,children:[a&&v.jsxDEV("div",{className:"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-lg",children:a},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:56,columnNumber:13},void 0),v.jsxDEV("div",{className:"space-y-4",children:[v.jsxDEV("div",{children:[v.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:63,columnNumber:15},void 0),v.jsxDEV("div",{className:"mt-1 relative",children:[v.jsxDEV(b0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:67,columnNumber:17},void 0),v.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>e(p.target.value),className:"input-field pl-10",placeholder:"seu@email.com"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:68,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:66,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:62,columnNumber:13},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:83,columnNumber:15},void 0),v.jsxDEV("div",{className:"mt-1 relative",children:[v.jsxDEV(iv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:87,columnNumber:17},void 0),v.jsxDEV("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:t,onChange:p=>i(p.target.value),className:"input-field pl-10 pr-10",placeholder:"Sua senha"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:88,columnNumber:17},void 0),v.jsxDEV("button",{type:"button",onClick:()=>s(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?v.jsxDEV(tv,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:105,columnNumber:21},void 0):v.jsxDEV(rv,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:107,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:99,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:86,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:82,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:61,columnNumber:11},void 0),v.jsxDEV("div",{className:"flex items-center justify-between",children:[v.jsxDEV("div",{className:"flex items-center",children:[v.jsxDEV("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-success-600 focus:ring-success-500 border-gray-300 rounded"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:116,columnNumber:15},void 0),v.jsxDEV("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Lembrar de mim"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:122,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:115,columnNumber:13},void 0),v.jsxDEV("div",{className:"text-sm",children:v.jsxDEV("a",{href:"#",className:"font-medium text-success-600 hover:text-success-500",children:"Esqueceu sua senha?"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:128,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:127,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:114,columnNumber:11},void 0),v.jsxDEV("div",{children:v.jsxDEV("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-success-600 hover:bg-success-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-success-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Entrando...":"Entrar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:135,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:134,columnNumber:11},void 0),v.jsxDEV("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[v.jsxDEV("button",{type:"button",onClick:m,className:"w-full flex justify-center items-center gap-2 py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[v.jsxDEV(_f,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:151,columnNumber:15},void 0),"Entrar como Administrador (Teste)"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:146,columnNumber:13},void 0),v.jsxDEV("p",{className:"mt-2 text-xs text-gray-500 text-center",children:"Este botão é apenas para desenvolvimento e testes"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:154,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:145,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:54,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:33,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Login.tsx",lineNumber:32,columnNumber:5},void 0)},e6=()=>{const[r,e]=A.useState(""),[t,i]=A.useState(""),[n,s]=A.useState(""),[a,o]=A.useState(""),[l,c]=A.useState(!1),[u,h]=A.useState(!1),[f,m]=A.useState(""),{register:p,loading:g}=bs(),b=Xc(),y=async N=>{if(N.preventDefault(),m(""),n!==a){m("As senhas não coincidem");return}if(n.length<6){m("A senha deve ter pelo menos 6 caracteres");return}try{await p(t,n,r),b("/dashboard")}catch{m("Erro ao criar conta. Tente novamente.")}};return v.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[v.jsxDEV("div",{children:[v.jsxDEV("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Criar nova conta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:43,columnNumber:11},void 0),v.jsxDEV("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",v.jsxDEV(ma,{to:"/login",className:"font-medium text-success-600 hover:text-success-500",children:"entre na sua conta existente"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:48,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:46,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:42,columnNumber:9},void 0),v.jsxDEV("form",{className:"mt-8 space-y-6",onSubmit:y,children:[f&&v.jsxDEV("div",{className:"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-lg",children:f},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:59,columnNumber:13},void 0),v.jsxDEV("div",{className:"space-y-4",children:[v.jsxDEV("div",{children:[v.jsxDEV("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome completo"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:66,columnNumber:15},void 0),v.jsxDEV("div",{className:"mt-1 relative",children:[v.jsxDEV(y0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:70,columnNumber:17},void 0),v.jsxDEV("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:N=>e(N.target.value),className:"input-field pl-10",placeholder:"Seu nome completo"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:71,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:69,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:65,columnNumber:13},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:86,columnNumber:15},void 0),v.jsxDEV("div",{className:"mt-1 relative",children:[v.jsxDEV(b0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:90,columnNumber:17},void 0),v.jsxDEV("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:N=>i(N.target.value),className:"input-field pl-10",placeholder:"seu@email.com"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:91,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:85,columnNumber:13},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:106,columnNumber:15},void 0),v.jsxDEV("div",{className:"mt-1 relative",children:[v.jsxDEV(iv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:110,columnNumber:17},void 0),v.jsxDEV("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"new-password",required:!0,value:n,onChange:N=>s(N.target.value),className:"input-field pl-10 pr-10",placeholder:"Mínimo 6 caracteres"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:111,columnNumber:17},void 0),v.jsxDEV("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?v.jsxDEV(tv,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:128,columnNumber:21},void 0):v.jsxDEV(rv,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:130,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:122,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:109,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:105,columnNumber:13},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar senha"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:137,columnNumber:15},void 0),v.jsxDEV("div",{className:"mt-1 relative",children:[v.jsxDEV(iv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:141,columnNumber:17},void 0),v.jsxDEV("input",{id:"confirmPassword",name:"confirmPassword",type:u?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:N=>o(N.target.value),className:"input-field pl-10 pr-10",placeholder:"Confirme sua senha"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:142,columnNumber:17},void 0),v.jsxDEV("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?v.jsxDEV(tv,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:159,columnNumber:21},void 0):v.jsxDEV(rv,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:161,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:153,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:140,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:64,columnNumber:11},void 0),v.jsxDEV("div",{className:"flex items-center",children:[v.jsxDEV("input",{id:"agree-terms",name:"agree-terms",type:"checkbox",required:!0,className:"h-4 w-4 text-success-600 focus:ring-success-500 border-gray-300 rounded"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:169,columnNumber:13},void 0),v.jsxDEV("label",{htmlFor:"agree-terms",className:"ml-2 block text-sm text-gray-900",children:["Concordo com os"," ",v.jsxDEV("a",{href:"#",className:"text-success-600 hover:text-success-500",children:"termos de uso"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:178,columnNumber:15},void 0)," ","e"," ",v.jsxDEV("a",{href:"#",className:"text-success-600 hover:text-success-500",children:"política de privacidade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:176,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:168,columnNumber:11},void 0),v.jsxDEV("div",{children:v.jsxDEV("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-success-600 hover:bg-success-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-success-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Criando conta...":"Criar conta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:189,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:188,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:41,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Register.tsx",lineNumber:40,columnNumber:5},void 0)},t6=()=>{const{id:r}=C2(),{questions:e}=Rh(),t=Xc(),[i,n]=A.useState(!1),[s,a]=A.useState(null),[o,l]=A.useState(!1),[c,u]=A.useState(!1),h=e.find(f=>f.id===r);return h?v.jsxDEV("div",{className:"flex flex-col items-center py-10 px-2 min-h-[calc(100vh-4rem)] bg-gray-50",children:v.jsxDEV("div",{className:"w-full max-w-2xl bg-white rounded-xl shadow-md border border-gray-100 p-8",children:[v.jsxDEV("div",{className:"flex items-center gap-2 mb-4",children:[v.jsxDEV("button",{onClick:()=>t(-1),className:"text-gray-400 hover:text-success-600 mr-2",children:v.jsxDEV(cA,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:30,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:29,columnNumber:11},void 0),v.jsxDEV("span",{className:"text-teal-600 font-semibold text-lg",children:["Questão ",h.id]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:32,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:28,columnNumber:9},void 0),v.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:[v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:h.board},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:35,columnNumber:11},void 0),v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:h.year},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:36,columnNumber:11},void 0),v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:h.specialty},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:37,columnNumber:11},void 0),v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:h.topic},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:38,columnNumber:11},void 0),v.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium",children:h.subtopic},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:39,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:34,columnNumber:9},void 0),v.jsxDEV("div",{className:"mb-6 mt-2",children:[v.jsxDEV("span",{className:"text-xs text-gray-400 block mb-1",children:h.id.padStart(10,"0")},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:42,columnNumber:11},void 0),v.jsxDEV("p",{className:"text-gray-900 text-base leading-relaxed",children:h.statement},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:43,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:41,columnNumber:9},void 0),v.jsxDEV("div",{className:"space-y-4 mb-8",children:h.alternatives.map(f=>{let m="flex items-center gap-3 cursor-pointer border-2 rounded-lg px-3 py-2 transition select-none ";return o?f.id===s&&s===h.correctAnswer?m+=" bg-green-100 border-green-500 text-green-800":f.id===s&&s!==h.correctAnswer?m+=" bg-red-100 border-red-500 text-red-800":f.id===h.correctAnswer?m+=" bg-green-50 border-green-400 text-green-700":m+=" bg-gray-50 border-gray-200 text-gray-700":f.id===s?m+=" border-teal-500 bg-teal-50 text-teal-800":m+=" border-gray-200 bg-gray-50 text-gray-700",v.jsxDEV("div",{className:m,onClick:()=>{o||a(f.id)},children:[v.jsxDEV("span",{className:"w-10 h-10 border-2 border-gray-300 rounded flex items-center justify-center text-base font-semibold mr-2",children:f.letter},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:73,columnNumber:17},void 0),v.jsxDEV("span",{className:"text-base",children:f.text},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:76,columnNumber:17},void 0)]},f.id,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:64,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:45,columnNumber:9},void 0),i&&v.jsxDEV("div",{className:"space-y-4 mb-8 border-t pt-6",children:[h.explanation&&v.jsxDEV("div",{children:[v.jsxDEV("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Explicação"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:87,columnNumber:17},void 0),v.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:v.jsxDEV("p",{className:"text-gray-700 leading-relaxed",children:h.explanation},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:89,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:88,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:86,columnNumber:15},void 0),h.comment&&v.jsxDEV("div",{children:[v.jsxDEV("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Comentário"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:96,columnNumber:17},void 0),v.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:v.jsxDEV("p",{className:"text-gray-700 leading-relaxed",children:h.comment},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:98,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:97,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:95,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:84,columnNumber:11},void 0),v.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center border-t pt-6",children:[v.jsxDEV("button",{className:`w-full md:w-auto px-8 py-3 rounded-lg font-semibold transition-colors text-base ${s&&!o?"bg-teal-600 text-white hover:bg-teal-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:()=>{console.log("Botão Responder clicado:",{selectedAnswer:s,answered:o,correctAnswer:h.correctAnswer}),s&&!o&&(l(!0),u(s===h.correctAnswer),console.log("Resposta enviada:",{selectedAnswer:s,isCorrect:s===h.correctAnswer}))},children:["Responder ",s?`(${s})`:""]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:106,columnNumber:11},void 0),v.jsxDEV("button",{onClick:()=>n(!i),className:"w-full md:w-auto px-8 py-3 rounded-lg border border-teal-600 text-teal-600 font-semibold bg-white hover:bg-teal-50 transition-colors text-base",children:i?"Ocultar solução e comentários":"Ver solução e comentários"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:123,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:105,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:27,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:26,columnNumber:5},void 0):v.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[v.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Questão não encontrada"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:19,columnNumber:9},void 0),v.jsxDEV("button",{onClick:()=>t(-1),className:"text-success-600 hover:underline",children:"Voltar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:20,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionDetail.tsx",lineNumber:18,columnNumber:7},void 0)},Lt=[];for(let r=0;r<256;++r)Lt.push((r+256).toString(16).slice(1));function r6(r,e=0){return(Lt[r[e+0]]+Lt[r[e+1]]+Lt[r[e+2]]+Lt[r[e+3]]+"-"+Lt[r[e+4]]+Lt[r[e+5]]+"-"+Lt[r[e+6]]+Lt[r[e+7]]+"-"+Lt[r[e+8]]+Lt[r[e+9]]+"-"+Lt[r[e+10]]+Lt[r[e+11]]+Lt[r[e+12]]+Lt[r[e+13]]+Lt[r[e+14]]+Lt[r[e+15]]).toLowerCase()}let zg;const i6=new Uint8Array(16);function n6(){if(!zg){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");zg=crypto.getRandomValues.bind(crypto)}return zg(i6)}const s6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rw={randomUUID:s6};function a6(r,e,t){var n;if(Rw.randomUUID&&!r)return Rw.randomUUID();r=r||{};const i=r.random??((n=r.rng)==null?void 0:n.call(r))??n6();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,r6(i)}const o6=({question:r,selectedAnswer:e,onAnswer:t,onNext:i,number:n})=>{const[s,a]=A.useState(e||null),[o,l]=A.useState(!!e),[c,u]=A.useState(!1),h=m=>{o||a(m)},f=()=>{s&&!o&&(l(!0),t(s))};return v.jsxDEV("div",{className:"relative flex flex-col w-full py-8 bg-white rounded-xl shadow-lg max-w-[950px] min-w-[600px] w-full mx-auto my-8",children:[v.jsxDEV("div",{className:"flex flex-col px-10",children:v.jsxDEV("div",{className:"flex items-center justify-between",children:[v.jsxDEV("span",{className:"mr-2 text-base font-semibold text-gray-400",children:["Questão ",n!==void 0?n:""]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:34,columnNumber:11},void 0),v.jsxDEV("div",{className:"flex items-center gap-4",children:[v.jsxDEV("div",{className:"flex gap-2",children:[v.jsxDEV("span",{className:"uppercase truncate text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:r.board},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:38,columnNumber:15},void 0),v.jsxDEV("span",{className:"uppercase truncate text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:r.year},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:39,columnNumber:15},void 0),v.jsxDEV("span",{className:"uppercase truncate text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:r.specialty},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:40,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:37,columnNumber:13},void 0),v.jsxDEV("button",{className:"ml-4 text-gray-400 hover:text-teal-600",title:"Adicionar à lista",children:v.jsxDEV(q2,{size:22},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:44,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:43,columnNumber:13},void 0),v.jsxDEV("button",{className:"ml-2 text-gray-400 hover:text-teal-600",title:"Compartilhar",children:v.jsxDEV(K2,{size:22},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:47,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:46,columnNumber:13},void 0),v.jsxDEV("button",{className:"ml-2 text-gray-400 hover:text-teal-600",title:"Exibir tópicos",children:v.jsxDEV(Y2,{size:22},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:50,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:49,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:35,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:33,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:32,columnNumber:7},void 0),v.jsxDEV("div",{className:"w-full my-6 opacity-40 border-t"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:57,columnNumber:7},void 0),v.jsxDEV("div",{className:"px-10 mb-6",children:[v.jsxDEV("span",{className:"text-xs text-gray-300 font-bold",children:r.id.padStart(10,"0")},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:61,columnNumber:9},void 0),v.jsxDEV("p",{className:"mt-2 font-normal",style:{fontFamily:"Circular, Arial, sans-serif",fontWeight:400,fontSize:"15px",lineHeight:"26.25px",color:"#444444"},children:r.statement},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:62,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:60,columnNumber:7},void 0),v.jsxDEV("div",{className:"px-10",children:r.alternatives.map(m=>{let p="flex items-center mt-4 cursor-pointer group ",g="w-10 h-10 flex items-center justify-center rounded-full border-2 text-base font-bold mr-4 transition ",b="text-sm transition ";return o?m.id===s&&s===r.correctAnswer?(g+=" border-green-500 text-green-800 bg-green-100",b+=" text-green-800"):m.id===s&&s!==r.correctAnswer?(g+=" border-red-500 text-red-800 bg-red-100",b+=" text-red-800"):m.id===r.correctAnswer?(g+=" border-green-400 text-green-700 bg-green-50",b+=" text-green-700"):(g+=" border-gray-200 text-gray-400 bg-gray-50",b+=" text-gray-400"):m.id===s?(g+=" border-teal-500 text-teal-800 bg-teal-50",b+=" text-teal-800"):(g+=" border-gray-300 text-gray-500 bg-white",b+=" text-gray-800"),v.jsxDEV("div",{className:p,onClick:()=>h(m.id),children:[v.jsxDEV("div",{className:g,children:m.letter},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:109,columnNumber:15},void 0),v.jsxDEV("div",{className:b,style:{fontFamily:"Circular, Arial, sans-serif",fontWeight:400,fontSize:"15px",lineHeight:"26.25px",color:"#444444"},children:m.text},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:110,columnNumber:15},void 0)]},m.id,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:104,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:77,columnNumber:7},void 0),v.jsxDEV("div",{className:"w-full my-6 opacity-40 border-t"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:128,columnNumber:7},void 0),v.jsxDEV("div",{className:"flex justify-between px-10",children:[v.jsxDEV("button",{className:`w-56 py-3 rounded-lg font-semibold transition-colors text-base ${s&&!o?"bg-teal-600 text-white hover:bg-teal-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:f,children:"Responder"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:132,columnNumber:9},void 0),v.jsxDEV("button",{className:"w-56 py-3 rounded-lg border border-teal-600 text-teal-600 font-semibold bg-white hover:bg-teal-50 transition text-base",onClick:()=>u(m=>!m),children:c?"Ocultar solução e comentários":"Ver solução e comentários"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:142,columnNumber:9},void 0),i&&v.jsxDEV("button",{className:"absolute right-0 top-1/2 -translate-y-1/2 bg-white rounded-full shadow-lg p-2",onClick:i,title:"Próxima questão",children:v.jsxDEV(uA,{size:28,className:"text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:154,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:149,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:131,columnNumber:7},void 0),c&&v.jsxDEV("div",{className:"space-y-4 mb-8 border-t pt-6 px-10 mt-8",children:[r.explanation&&v.jsxDEV("div",{children:[v.jsxDEV("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Explicação"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:164,columnNumber:15},void 0),v.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:v.jsxDEV("p",{className:"text-gray-700 leading-relaxed",children:r.explanation},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:166,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:165,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:163,columnNumber:13},void 0),r.comment&&v.jsxDEV("div",{children:[v.jsxDEV("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Comentário"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:172,columnNumber:15},void 0),v.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:v.jsxDEV("p",{className:"text-gray-700 leading-relaxed",children:r.comment},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:174,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:173,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:171,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:161,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/components/QuestionCardRespondable.tsx",lineNumber:30,columnNumber:5},void 0)},l6=()=>{const{questions:r,getFilteredQuestions:e}=Rh(),[t,i]=A.useState(!0),[n,s]=A.useState([]),[a]=A.useState(()=>a6()),[o,l]=A.useState({}),c=Xc();A.useEffect(()=>{const h=e();s(h),i(!1)},[e]);const u=(h,f)=>{l(m=>({...m,[h]:f}))};return t?v.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[v.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:30,columnNumber:9},void 0),v.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Carregando questões..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:31,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:29,columnNumber:7},void 0):v.jsxDEV("div",{className:"flex flex-col items-center py-10 px-2 min-h-[calc(100vh-4rem)] bg-gray-50",children:[v.jsxDEV("div",{className:"w-full max-w-2xl mb-8",children:[v.jsxDEV("button",{onClick:()=>c(-1),className:"text-gray-400 hover:text-success-600 flex items-center mb-6",children:[v.jsxDEV(cA,{className:"h-5 w-5 mr-1"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:40,columnNumber:11},void 0)," Voltar"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:39,columnNumber:9},void 0),v.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[n.length," questões encontradas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:42,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:38,columnNumber:7},void 0),v.jsxDEV("div",{className:"w-full max-w-none space-y-10",children:[n.length===0&&v.jsxDEV("div",{className:"text-center py-8",children:[v.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma questão encontrada"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:47,columnNumber:13},void 0),v.jsxDEV("p",{className:"text-gray-500",children:"Tente ajustar os filtros para encontrar questões."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:48,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:46,columnNumber:11},void 0),n.map((h,f)=>v.jsxDEV(o6,{question:h,selectedAnswer:o[h.id],onAnswer:m=>u(h.id,m),number:f+1},h.id,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:52,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:44,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/QuestionsList.tsx",lineNumber:37,columnNumber:5},void 0)},c6=()=>{const{user:r}=bs(),e=(r==null?void 0:r.role)==="admin",t=(r==null?void 0:r.role)==="moderator"||(r==null?void 0:r.role)==="admin",i=(r==null?void 0:r.role)==="user"||(r==null?void 0:r.role)==="moderator"||(r==null?void 0:r.role)==="admin",n=c=>{if(!r)return!1;switch(c){case"admin":return r.role==="admin";case"moderator":return r.role==="moderator"||r.role==="admin";case"user":return!0;default:return!1}};return{isAdmin:e,isModerator:t,isUser:i,hasRole:n,canAccessAdmin:()=>n("admin"),canModerate:()=>n("moderator"),canImportQuestions:()=>n("admin"),canEditQuestions:()=>n("moderator")}},hr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Zv=[.001,0,0,.001,0,0],qg=1.35,zr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Os={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},u6="pdfjs_internal_editor_",de={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ae={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},d6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},dt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},bl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ug={ERRORS:0,WARNINGS:1,INFOS:5},Vm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},bf={moveTo:0,lineTo:1,curveTo:2,closePath:3},h6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let dg=ug.WARNINGS;function f6(r){Number.isInteger(r)&&(dg=r)}function m6(){return dg}function hg(r){dg>=ug.INFOS&&console.log(`Info: ${r}`)}function he(r){dg>=ug.WARNINGS&&console.log(`Warning: ${r}`)}function Ue(r){throw new Error(r)}function ft(r,e){r||Ue(e)}function p6(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function cC(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const n=r.match(/\./g);(n==null?void 0:n.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=x6(r)}catch{}}const i=e?URL.parse(r,e):URL.parse(r);return p6(i)?i:null}function uC(r,e,t=!1){const i=URL.parse(r);return i?(i.hash=e,i.href):t&&cC(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function we(r,e,t,i=!1){return Object.defineProperty(r,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const hl=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class jw extends hl{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Wg extends hl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Jv extends hl{constructor(e){super(e,"InvalidPDFException")}}class $m extends hl{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class g6 extends hl{constructor(e){super(e,"FormatError")}}class ya extends hl{constructor(e){super(e,"AbortException")}}function dC(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Ue("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const i=[];for(let n=0;n<e;n+=t){const s=Math.min(n+t,e),a=r.subarray(n,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Yh(r){typeof r!="string"&&Ue("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=r.charCodeAt(i)&255;return t}function v6(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function b6(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function y6(){try{return new Function(""),!0}catch{return!1}}class Qt{static get isLittleEndian(){return we(this,"isLittleEndian",b6())}static get isEvalSupported(){return we(this,"isEvalSupported",y6())}static get isOffscreenCanvasSupported(){return we(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return we(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return we(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return we(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Gg=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var ds,Df,eb;class se{static makeHexColor(e,t,i){return`#${Gg[e]}${Gg[t]}${Gg[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,i=0){const n=e[i],s=e[i+1];e[i]=n*t[0]+s*t[2]+t[4],e[i+1]=n*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const n=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const h=e[i+u],f=e[i+u+1];e[i+u]=h*n+f*a+l,e[i+u+1]=h*s+f*o+c}}static applyInverseTransform(e,t){const i=e[0],n=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-n*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-i*t[1]+n*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,i){const n=t[0],s=t[1],a=t[2],o=t[3],l=t[4],c=t[5],u=e[0],h=e[1],f=e[2],m=e[3];let p=n*u+l,g=p,b=n*f+l,y=b,N=o*h+c,w=N,_=o*m+c,P=_;if(s!==0||a!==0){const O=s*u,T=s*f,C=a*h,D=a*m;p+=C,y+=C,b+=D,g+=D,N+=O,P+=O,_+=T,w+=T}i[0]=Math.min(i[0],p,b,g,y),i[1]=Math.min(i[1],N,_,w,P),i[2]=Math.max(i[2],p,b,g,y),i[3]=Math.max(i[3],N,_,w,P)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],n=e[1],s=e[2],a=e[3],o=i**2+n**2,l=i*s+n*a,c=s**2+a**2,u=(o+c)/2,h=Math.sqrt(u**2-(o*c-l**2));t[0]=Math.sqrt(u+h||1),t[1]=Math.sqrt(u-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[i,s,n,a]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,n,s){s[0]=Math.min(s[0],e,i),s[1]=Math.min(s[1],t,n),s[2]=Math.max(s[2],e,i),s[3]=Math.max(s[3],t,n)}static bezierBoundingBox(e,t,i,n,s,a,o,l,c){c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l),S(this,ds,eb).call(this,e,i,s,o,t,n,a,l,3*(-e+3*(i-s)+o),6*(e-2*i+s),3*(i-e),c),S(this,ds,eb).call(this,e,i,s,o,t,n,a,l,3*(-t+3*(n-a)+l),6*(t-2*n+a),3*(n-t),c)}}ds=new WeakSet,Df=function(e,t,i,n,s,a,o,l,c,u){if(c<=0||c>=1)return;const h=1-c,f=c*c,m=f*c,p=h*(h*(h*e+3*c*t)+3*f*i)+m*n,g=h*(h*(h*s+3*c*a)+3*f*o)+m*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)},eb=function(e,t,i,n,s,a,o,l,c,u,h,f){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&S(this,ds,Df).call(this,e,t,i,n,s,a,o,l,-h/u,f);return}const m=u**2-4*h*c;if(m<0)return;const p=Math.sqrt(m),g=2*c;S(this,ds,Df).call(this,e,t,i,n,s,a,o,l,(-u+p)/g,f),S(this,ds,Df).call(this,e,t,i,n,s,a,o,l,(-u-p)/g,f)},E(se,ds);function x6(r){return decodeURIComponent(escape(r))}let Kg=null,Iw=null;function N6(r){return Kg||(Kg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Iw=new Map([["ﬅ","ſt"]])),r.replaceAll(Kg,(e,t,i)=>t?t.normalize("NFKC"):Iw.get(i))}function hC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),dC(r)}const wx="pdfjs_internal_id_";function w6(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,n,...s]=t;if(!r(i)&&!Number.isInteger(i)||!e(n))return!1;const a=s.length;let o=!0;switch(n.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function fr(r,e,t){return Math.min(Math.max(r,e),t)}function fC(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(dC(r))}function A6(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Yh(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});const Sn="http://www.w3.org/2000/svg",ja=class ja{};q(ja,"CSS",96),q(ja,"PDF",72),q(ja,"PDF_TO_CSS_UNITS",ja.CSS/ja.PDF);let xa=ja;async function Xh(r,e="text"){if(_u(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(n.response);return}t(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}class Zh{constructor({viewBox:e,userUnit:t,scale:i,rotation:n,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=n,this.offsetX=s,this.offsetY=a,i*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,f,m;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,h=0,f=0,m=1;break;case 90:u=0,h=1,f=1,m=0;break;case 270:u=0,h=-1,f=-1,m=0;break;case 0:u=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,m=-m);let p,g,b,y;u===0?(p=Math.abs(c-e[1])*i+s,g=Math.abs(l-e[0])*i+a,b=(e[3]-e[1])*i,y=(e[2]-e[0])*i):(p=Math.abs(l-e[0])*i+s,g=Math.abs(c-e[1])*i+a,b=(e[2]-e[0])*i,y=(e[3]-e[1])*i),this.transform=[u*i,h*i,f*i,m*i,p-u*i*l-f*i*c,g-h*i*l-m*i*c],this.width=b,this.height=y}get rawDims(){const e=this.viewBox;return we(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new Zh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(e,t){const i=[e,t];return se.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];se.applyTransform(t,this.transform);const i=[e[2],e[3]];return se.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return se.applyInverseTransform(i,this.transform),i}}class Ax extends hl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function fg(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function Ex(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function E6(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function S6(r,e="document.pdf"){if(typeof r!="string")return e;if(fg(r))return he('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=t.exec(r);let s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class Lw{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&he(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||he(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:n,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-n}ms
`);return e.join("")}}function _u(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Hi(r){r.preventDefault()}function ht(r){r.preventDefault(),r.stopPropagation()}function _6(r){console.log("Deprecated API usage: "+r)}var od;class Sx{static toDateObject(e){if(!e||typeof e!="string")return null;d(this,od)||x(this,od,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,od).exec(e);if(!t)return null;const i=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(a+=u,o+=h):c==="+"&&(a-=u,o-=h),new Date(Date.UTC(i,n,s,a,o,l))}}od=new WeakMap,E(Sx,od);function P6(r,{scale:e=1,rotation:t=0}){const{width:i,height:n}=r.attributes.style,s=[0,0,parseInt(i),parseInt(n)];return new Zh({viewBox:s,userUnit:1,scale:e,rotation:t})}function _x(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(he(`Not a valid color format: "${r}"`),[0,0,0])}function C6(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;r.set(t,_x(i))}e.remove()}function et(r){const{a:e,b:t,c:i,d:n,e:s,f:a}=r.getTransform();return[e,t,i,n,s,a]}function Yi(r){const{a:e,b:t,c:i,d:n,e:s,f:a}=r.getTransform().invertSelf();return[e,t,i,n,s,a]}function nl(r,e,t=!1,i=!0){if(e instanceof Zh){const{pageWidth:n,pageHeight:s}=e.rawDims,{style:a}=r,o=Qt.isCSSRoundSupported,l=`var(--total-scale-factor) * ${n}px`,c=`var(--total-scale-factor) * ${s}px`,u=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(a.width=u,a.height=h):(a.width=h,a.height=u)}i&&r.setAttribute("data-main-rotation",e.rotation)}class xn{constructor(){const{pixelRatio:e}=xn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,n,s=-1){let a=1/0,o=1/0,l=1/0;i=xn.capPixels(i,s),i>0&&(a=Math.sqrt(i/(e*t))),n!==-1&&(o=n/e,l=n/t);const c=Math.min(a,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const tb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ts,$a,oi,ks,ld,Ml,cd,Qm,mC,Kt,pC,gC,Pu,vC,Of;const Cn=class Cn{constructor(e){E(this,Kt);E(this,Ts,null);E(this,$a,null);E(this,oi);E(this,ks,null);E(this,ld,null);E(this,Ml,null);x(this,oi,e),d(Cn,cd)||x(Cn,cd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=x(this,Ts,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,oi)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.addEventListener("pointerdown",S(Cn,Qm,mC),{signal:t});const i=x(this,ks,document.createElement("div"));i.className="buttons",e.append(i);const n=d(this,oi).toolbarPosition;if(n){const{style:s}=e,a=d(this,oi)._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,Kt,vC).call(this),e}get div(){return d(this,Ts)}hide(){var e;d(this,Ts).classList.add("hidden"),(e=d(this,$a))==null||e.hideDropdown()}show(){var e;d(this,Ts).classList.remove("hidden"),(e=d(this,ld))==null||e.shown()}async addAltText(e){const t=await e.render();S(this,Kt,Pu).call(this,t),d(this,ks).prepend(t,d(this,Kt,Of)),x(this,ld,e)}addColorPicker(e){x(this,$a,e);const t=e.renderButton();S(this,Kt,Pu).call(this,t),d(this,ks).prepend(t,d(this,Kt,Of))}async addEditSignatureButton(e){const t=x(this,Ml,await e.renderEditButton(d(this,oi)));S(this,Kt,Pu).call(this,t),d(this,ks).prepend(t,d(this,Kt,Of))}updateEditSignatureButton(e){d(this,Ml)&&(d(this,Ml).title=e)}remove(){var e;d(this,Ts).remove(),(e=d(this,$a))==null||e.destroy(),x(this,$a,null)}};Ts=new WeakMap,$a=new WeakMap,oi=new WeakMap,ks=new WeakMap,ld=new WeakMap,Ml=new WeakMap,cd=new WeakMap,Qm=new WeakSet,mC=function(e){e.stopPropagation()},Kt=new WeakSet,pC=function(e){d(this,oi)._focusEventsAllowed=!1,ht(e)},gC=function(e){d(this,oi)._focusEventsAllowed=!0,ht(e)},Pu=function(e){const t=d(this,oi)._uiManager._signal;e.addEventListener("focusin",S(this,Kt,pC).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",S(this,Kt,gC).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hi,{signal:t})},vC=function(){const{editorType:e,_uiManager:t}=d(this,oi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",d(Cn,cd)[e]),S(this,Kt,Pu).call(this,i),i.addEventListener("click",n=>{t.delete()},{signal:t._signal}),d(this,ks).append(i)},Of=function(){const e=document.createElement("div");return e.className="divider",e},E(Cn,Qm),E(Cn,cd,null);let rb=Cn;var ud,Ba,Ha,Na,bC,yC,xC;class D6{constructor(e){E(this,Na);E(this,ud,null);E(this,Ba,null);E(this,Ha);x(this,Ha,e)}show(e,t,i){const[n,s]=S(this,Na,yC).call(this,t,i),{style:a}=d(this,Ba)||x(this,Ba,S(this,Na,bC).call(this));e.append(d(this,Ba)),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Ba).remove()}}ud=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Na=new WeakSet,bC=function(){const e=x(this,Ba,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hi,{signal:d(this,Ha)._signal});const t=x(this,ud,document.createElement("div"));return t.className="buttons",e.append(t),S(this,Na,xC).call(this),e},yC=function(e,t){let i=0,n=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const o=s.x+(t?s.width:0);if(a>i){n=o,i=a;continue}t?o>n&&(n=o):o<n&&(n=o)}return[t?1-n:n,i]},xC=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=d(this,Ha)._signal;e.addEventListener("contextmenu",Hi,{signal:i}),e.addEventListener("click",()=>{d(this,Ha).highlightSelection("floating_button")},{signal:i}),d(this,ud).append(e)};function NC(r,e,t){for(const i of t)e.addEventListener(i,r[i].bind(r))}var Ym;class O6{constructor(){E(this,Ym,0)}get id(){return`${u6}${ar(this,Ym)._++}`}}Ym=new WeakMap;var Rl,dd,Jt,jl,Tf;const Mx=class Mx{constructor(){E(this,jl);E(this,Rl,hC());E(this,dd,0);E(this,Jt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=e;const s=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return we(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:n,type:s}=e;return S(this,jl,Tf).call(this,`${t}_${i}_${n}_${s}`,e)}async getFromUrl(e){return S(this,jl,Tf).call(this,e,e)}async getFromBlob(e,t){const i=await t;return S(this,jl,Tf).call(this,e,i)}async getFromId(e){d(this,Jt)||x(this,Jt,new Map);const t=d(this,Jt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,Jt)||x(this,Jt,new Map);let i=d(this,Jt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${d(this,Rl)}_${ar(this,dd)._++}`,refCounter:1,isSvg:!1},d(this,Jt).set(e,i),d(this,Jt).set(i.id,i),i}getSvgUrl(e){const t=d(this,Jt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var n;d(this,Jt)||x(this,Jt,new Map);const t=d(this,Jt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}(n=i.close)==null||n.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,Rl)}_`)}};Rl=new WeakMap,dd=new WeakMap,Jt=new WeakMap,jl=new WeakSet,Tf=async function(e,t){d(this,Jt)||x(this,Jt,new Map);let i=d(this,Jt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${d(this,Rl)}_${ar(this,dd)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(i.url=t,n=await Xh(t,"blob")):t instanceof File?n=i.file=t:t instanceof Blob&&(n=t),n.type==="image/svg+xml"){const s=Mx._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,c()},a.onload=async()=>{const h=i.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=u});a.readAsDataURL(n),await l}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){he(n),i=null}return d(this,Jt).set(e,i),i&&d(this,Jt).set(i.id,i),i};let ib=Mx;var nt,Ms,hd,Je;class T6{constructor(e=128){E(this,nt,[]);E(this,Ms,!1);E(this,hd);E(this,Je,-1);x(this,hd,e)}add({cmd:e,undo:t,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&e(),d(this,Ms))return;const l={cmd:e,undo:t,post:i,type:s};if(d(this,Je)===-1){d(this,nt).length>0&&(d(this,nt).length=0),x(this,Je,0),d(this,nt).push(l);return}if(a&&d(this,nt)[d(this,Je)].type===s){o&&(l.undo=d(this,nt)[d(this,Je)].undo),d(this,nt)[d(this,Je)]=l;return}const c=d(this,Je)+1;c===d(this,hd)?d(this,nt).splice(0,1):(x(this,Je,c),c<d(this,nt).length&&d(this,nt).splice(c)),d(this,nt).push(l)}undo(){if(d(this,Je)===-1)return;x(this,Ms,!0);const{undo:e,post:t}=d(this,nt)[d(this,Je)];e(),t==null||t(),x(this,Ms,!1),x(this,Je,d(this,Je)-1)}redo(){if(d(this,Je)<d(this,nt).length-1){x(this,Je,d(this,Je)+1),x(this,Ms,!0);const{cmd:e,post:t}=d(this,nt)[d(this,Je)];e(),t==null||t(),x(this,Ms,!1)}}hasSomethingToUndo(){return d(this,Je)!==-1}hasSomethingToRedo(){return d(this,Je)<d(this,nt).length-1}cleanType(e){if(d(this,Je)!==-1){for(let t=d(this,Je);t>=0;t--)if(d(this,nt)[t].type!==e){d(this,nt).splice(t+1,d(this,Je)-t),x(this,Je,t);return}d(this,nt).length=0,x(this,Je,-1)}}destroy(){x(this,nt,null)}}nt=new WeakMap,Ms=new WeakMap,hd=new WeakMap,Je=new WeakMap;var Xm,wC;class Jh{constructor(e){E(this,Xm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Qt.platform;for(const[i,n,s={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:n,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:n,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(S(this,Xm,wC).call(this,t));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(n.bind(e,...a,t)(),s||ht(t))}}Xm=new WeakSet,wC=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Zm=class Zm{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return C6(e),we(this,"_colors",e)}convert(e){const t=_x(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,n]of this._colors)if(n.every((s,a)=>s===t[a]))return Zm._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?se.makeHexColor(...t):e}};q(Zm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let nb=Zm;var Il,Tr,wt,Ut,Ll,On,Ul,li,Rs,js,Fl,za,Ji,Pi,qa,fd,md,Vl,pd,en,Is,$l,Ls,tn,Jm,Us,gd,Fs,Wa,Ga,Vs,vd,Pt,ke,Tn,$s,Ka,bd,yd,Bs,rn,kn,xd,ci,K,kf,sb,AC,EC,Mf,SC,_C,PC,ab,CC,ob,lb,DC,or,_n,OC,TC,cb,kC,Cu,ub;const Cl=class Cl{constructor(e,t,i,n,s,a,o,l,c,u,h,f,m,p){E(this,K);E(this,Il,new AbortController);E(this,Tr,null);E(this,wt,new Map);E(this,Ut,new Map);E(this,Ll,null);E(this,On,null);E(this,Ul,null);E(this,li,new T6);E(this,Rs,null);E(this,js,null);E(this,Fl,0);E(this,za,new Set);E(this,Ji,null);E(this,Pi,null);E(this,qa,new Set);q(this,"_editorUndoBar",null);E(this,fd,!1);E(this,md,!1);E(this,Vl,!1);E(this,pd,null);E(this,en,null);E(this,Is,null);E(this,$l,null);E(this,Ls,!1);E(this,tn,null);E(this,Jm,new O6);E(this,Us,!1);E(this,gd,!1);E(this,Fs,null);E(this,Wa,null);E(this,Ga,null);E(this,Vs,null);E(this,vd,null);E(this,Pt,de.NONE);E(this,ke,new Set);E(this,Tn,null);E(this,$s,null);E(this,Ka,null);E(this,bd,null);E(this,yd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Bs,[0,0]);E(this,rn,null);E(this,kn,null);E(this,xd,null);E(this,ci,null);const g=this._signal=d(this,Il).signal;x(this,kn,e),x(this,xd,t),x(this,Ll,i),x(this,$s,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:g}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),s._on("setpreference",this.onSetPreference.bind(this),{signal:g}),s._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:g}),S(this,K,SC).call(this),S(this,K,DC).call(this),S(this,K,ab).call(this),x(this,On,a.annotationStorage),x(this,pd,a.filterFactory),x(this,Ka,o),x(this,$l,l||null),x(this,fd,c),x(this,md,u),x(this,Vl,h),x(this,vd,f||null),this.viewParameters={realScale:xa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=Cl.prototype,t=a=>d(a,kn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return we(this,"_keyboardManager",new Jh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,kn).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,kn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i,n,s,a,o,l;(e=d(this,ci))==null||e.resolve(),x(this,ci,null),(t=d(this,Il))==null||t.abort(),x(this,Il,null),this._signal=null;for(const c of d(this,Ut).values())c.destroy();d(this,Ut).clear(),d(this,wt).clear(),d(this,qa).clear(),(i=d(this,Vs))==null||i.clear(),x(this,Tr,null),d(this,ke).clear(),d(this,li).destroy(),(n=d(this,Ll))==null||n.destroy(),(s=d(this,$s))==null||s.destroy(),(a=d(this,tn))==null||a.hide(),x(this,tn,null),(o=d(this,Ga))==null||o.destroy(),x(this,Ga,null),d(this,en)&&(clearTimeout(d(this,en)),x(this,en,null)),d(this,rn)&&(clearTimeout(d(this,rn)),x(this,rn,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,vd)}get useNewAltTextFlow(){return d(this,md)}get useNewAltTextWhenAddingImage(){return d(this,Vl)}get hcmFilter(){return we(this,"hcmFilter",d(this,Ka)?d(this,pd).addHCMFilter(d(this,Ka).foreground,d(this,Ka).background):"none")}get direction(){return we(this,"direction",getComputedStyle(d(this,kn)).direction)}get highlightColors(){return we(this,"highlightColors",d(this,$l)?new Map(d(this,$l).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return we(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,js,e)}setMainHighlightColorPicker(e){x(this,Ga,e)}editAltText(e,t=!1){var i;(i=d(this,Ll))==null||i.editAltText(this,e,t)}getSignature(e){var t;(t=d(this,$s))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,$s)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":x(this,Vl,t);break}}onPageChanging({pageNumber:e}){x(this,Fl,e-1)}focusMainContainer(){d(this,kn).focus()}findParent(e,t){for(const i of d(this,Ut).values()){const{x:n,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=s&&t<=s+o)return i}return null}disableUserSelect(e=!1){d(this,xd).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,qa).add(e)}removeShouldRescale(e){d(this,qa).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*xa.PDF_TO_CSS_UNITS;for(const i of d(this,qa))i.onScaleChanging();(t=d(this,js))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:a}=t,o=t.toString(),c=S(this,K,kf).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;t.empty();const h=S(this,K,sb).call(this,c),f=d(this,Pt)===de.NONE,m=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(de.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,On)&&!d(this,On).has(e.id)&&d(this,On).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,d(this,Ls)&&(x(this,Ls,!1),S(this,K,Mf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,ke))if(t.div.contains(e)){x(this,Wa,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,Wa))return;const[e,t]=d(this,Wa);x(this,Wa,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){S(this,K,ab).call(this),S(this,K,ob).call(this)}removeEditListeners(){S(this,K,CC).call(this),S(this,K,lb).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of d(this,Pi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of d(this,Pi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=d(this,Tr))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of d(this,ke)){const s=n.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of d(this,Pi))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){he(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const s=[];for(const l of i){const c=await n.deserialize(l);if(!c)return;s.push(c)}const a=()=>{for(const l of s)S(this,K,cb).call(this,l);S(this,K,ub).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){he(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Pt)!==de.NONE&&!this.isEditorHandlingKeyboard&&Cl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,Ls)&&(x(this,Ls,!1),S(this,K,Mf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(S(this,K,_C).call(this),S(this,K,ob).call(this),S(this,K,or).call(this,{isEditing:d(this,Pt)!==de.NONE,isEmpty:S(this,K,Cu).call(this),hasSomethingToUndo:d(this,li).hasSomethingToUndo(),hasSomethingToRedo:d(this,li).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,K,PC).call(this),S(this,K,lb).call(this),S(this,K,or).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,Pi)){x(this,Pi,e);for(const t of d(this,Pi))S(this,K,_n).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,Jm).id}get currentLayer(){return d(this,Ut).get(d(this,Fl))}getLayer(e){return d(this,Ut).get(e)}get currentPageIndex(){return d(this,Fl)}addLayer(e){d(this,Ut).set(e.pageIndex,e),d(this,Us)?e.enable():e.disable()}removeLayer(e){d(this,Ut).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){var n,s,a;if(d(this,Pt)!==e&&!(d(this,ci)&&(await d(this,ci).promise,!d(this,ci)))){if(x(this,ci,Promise.withResolvers()),(n=d(this,js))==null||n.commitOrRemove(),x(this,Pt,e),e===de.NONE){this.setEditingState(!1),S(this,K,TC).call(this),(s=this._editorUndoBar)==null||s.hide(),d(this,ci).resolve();return}e===de.SIGNATURE&&await((a=d(this,$s))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await S(this,K,OC).call(this),this.unselectAll();for(const o of d(this,Ut).values())o.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),d(this,ci).resolve();return}for(const o of d(this,wt).values())o.annotationElementId===t||o.id===t?(this.setSelected(o),o.enterInEditMode()):o.unselect();d(this,ci).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,Pt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var i;if(d(this,Pi)){switch(e){case Ae.CREATE:this.currentLayer.addNewEditor(t);return;case Ae.HIGHLIGHT_DEFAULT_COLOR:(i=d(this,Ga))==null||i.updateColor(t);break;case Ae.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,bd)||x(this,bd,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const n of d(this,ke))n.updateParams(e,t);for(const n of d(this,Pi))n.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const a of d(this,wt).values())a.editorType===e&&a.show(t);(((s=d(this,bd))==null?void 0:s.get(Ae.HIGHLIGHT_SHOW_ALL))??!0)!==t&&S(this,K,_n).call(this,[[Ae.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,gd)!==e){x(this,gd,e);for(const t of d(this,Ut).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of d(this,wt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return d(this,wt).get(e)}addEditor(e){d(this,wt).set(e.id,e)}removeEditor(e){var t,i;e.div.contains(document.activeElement)&&(d(this,en)&&clearTimeout(d(this,en)),x(this,en,setTimeout(()=>{this.focusMainContainer(),x(this,en,null)},0))),d(this,wt).delete(e.id),e.annotationElementId&&((t=d(this,Vs))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,za).has(e.annotationElementId))&&((i=d(this,On))==null||i.remove(e.id))}addDeletedAnnotationElement(e){d(this,za).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,za).has(e)}removeDeletedAnnotationElement(e){d(this,za).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,Tr)!==e&&(x(this,Tr,e),e&&S(this,K,_n).call(this,e.propertiesToUpdate))}updateUI(e){d(this,K,kC)===e&&S(this,K,_n).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){S(this,K,_n).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,ke).has(e)){d(this,ke).delete(e),e.unselect(),S(this,K,or).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,ke).add(e),e.select(),S(this,K,_n).call(this,e.propertiesToUpdate),S(this,K,or).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=d(this,js))==null||t.commitOrRemove();for(const i of d(this,ke))i!==e&&i.unselect();d(this,ke).clear(),d(this,ke).add(e),e.select(),S(this,K,_n).call(this,e.propertiesToUpdate),S(this,K,or).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,ke).has(e)}get firstSelectedEditor(){return d(this,ke).values().next().value}unselect(e){e.unselect(),d(this,ke).delete(e),S(this,K,or).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,ke).size!==0}get isEnterHandled(){return d(this,ke).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,li).undo(),S(this,K,or).call(this,{hasSomethingToUndo:d(this,li).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,K,Cu).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,li).redo(),S(this,K,or).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,li).hasSomethingToRedo(),isEmpty:S(this,K,Cu).call(this)})}addCommands(e){d(this,li).add(e),S(this,K,or).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,K,Cu).call(this)})}cleanUndoStack(e){d(this,li).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,ke)],i=()=>{var a;(a=this._editorUndoBar)==null||a.show(n,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},n=()=>{for(const a of t)S(this,K,cb).call(this,a)};this.addCommands({cmd:i,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=d(this,Tr))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,Tr)||this.hasSelection}selectAll(){for(const e of d(this,ke))e.commit();S(this,K,ub).call(this,d(this,wt).values())}unselectAll(){var e;if(!(d(this,Tr)&&(d(this,Tr).commitOrRemove(),d(this,Pt)!==de.NONE))&&!((e=d(this,js))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,ke))t.unselect();d(this,ke).clear(),S(this,K,or).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;d(this,Bs)[0]+=e,d(this,Bs)[1]+=t;const[n,s]=d(this,Bs),a=[...d(this,ke)],o=1e3;d(this,rn)&&clearTimeout(d(this,rn)),x(this,rn,setTimeout(()=>{x(this,rn,null),d(this,Bs)[0]=d(this,Bs)[1]=0,this.addCommands({cmd:()=>{for(const l of a)d(this,wt).has(l.id)&&(l.translateInPage(n,s),l.translationDone())},undo:()=>{for(const l of a)d(this,wt).has(l.id)&&(l.translateInPage(-n,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Ji,new Map);for(const e of d(this,ke))d(this,Ji).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,Ji))return!1;this.disableUserSelect(!1);const e=d(this,Ji);x(this,Ji,null);let t=!1;for(const[{x:n,y:s,pageIndex:a},o]of e)o.newX=n,o.newY=s,o.newPageIndex=a,t||(t=n!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(n,s,a,o)=>{if(d(this,wt).has(n.id)){const l=d(this,Ut).get(o);l?n._setParentAndPosition(l,s,a):(n.pageIndex=o,n.x=s,n.y=a)}};return this.addCommands({cmd:()=>{for(const[n,{newX:s,newY:a,newPageIndex:o}]of e)i(n,s,a,o)},undo:()=>{for(const[n,{savedX:s,savedY:a,savedPageIndex:o}]of e)i(n,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,Ji))for(const i of d(this,Ji).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,ke).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,Tr)===e}getActive(){return d(this,Tr)}getMode(){return d(this,Pt)}get imageManager(){return we(this,"imageManager",new ib)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,u,h,f)=>({x:(u-n)/a,y:1-(c+h-i)/s,width:f/a,height:h/s});break;case"180":o=(c,u,h,f)=>({x:1-(c+h-i)/s,y:1-(u+f-n)/a,width:h/s,height:f/a});break;case"270":o=(c,u,h,f)=>({x:1-(u+f-n)/a,y:(c-i)/s,width:f/a,height:h/s});break;default:o=(c,u,h,f)=>({x:(c-i)/s,y:(u-n)/a,width:h/s,height:f/a});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const h=t.getRangeAt(c);if(!h.collapsed)for(const{x:f,y:m,width:p,height:g}of h.getClientRects())p===0||g===0||l.push(o(f,m,p,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,Ul)||x(this,Ul,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,Ul))==null||t.delete(e)}renderAnnotationElement(e){var n;const t=(n=d(this,Ul))==null?void 0:n.get(e.data.id);if(!t)return;const i=d(this,On).getRawValue(t);i&&(d(this,Pt)===de.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){var s;const n=(s=d(this,Vs))==null?void 0:s.get(e);n&&(n.setCanvas(t,i),d(this,Vs).delete(e))}addMissingCanvas(e,t){(d(this,Vs)||x(this,Vs,new Map)).set(e,t)}};Il=new WeakMap,Tr=new WeakMap,wt=new WeakMap,Ut=new WeakMap,Ll=new WeakMap,On=new WeakMap,Ul=new WeakMap,li=new WeakMap,Rs=new WeakMap,js=new WeakMap,Fl=new WeakMap,za=new WeakMap,Ji=new WeakMap,Pi=new WeakMap,qa=new WeakMap,fd=new WeakMap,md=new WeakMap,Vl=new WeakMap,pd=new WeakMap,en=new WeakMap,Is=new WeakMap,$l=new WeakMap,Ls=new WeakMap,tn=new WeakMap,Jm=new WeakMap,Us=new WeakMap,gd=new WeakMap,Fs=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,Vs=new WeakMap,vd=new WeakMap,Pt=new WeakMap,ke=new WeakMap,Tn=new WeakMap,$s=new WeakMap,Ka=new WeakMap,bd=new WeakMap,yd=new WeakMap,Bs=new WeakMap,rn=new WeakMap,kn=new WeakMap,xd=new WeakMap,ci=new WeakMap,K=new WeakSet,kf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},sb=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of d(this,Ut).values())if(i.hasTextLayer(e))return i;return null},AC=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=S(this,K,kf).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(d(this,tn)||x(this,tn,new D6(this)),d(this,tn).show(i,n,this.direction==="ltr"))},EC=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){d(this,Tn)&&((s=d(this,tn))==null||s.hide(),x(this,Tn,null),S(this,K,or).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,Tn))return;const n=S(this,K,kf).call(this,e).closest(".textLayer");if(!n){d(this,Tn)&&((a=d(this,tn))==null||a.hide(),x(this,Tn,null),S(this,K,or).call(this,{hasSelectedText:!1}));return}if((o=d(this,tn))==null||o.hide(),x(this,Tn,t),S(this,K,or).call(this,{hasSelectedText:!0}),!(d(this,Pt)!==de.HIGHLIGHT&&d(this,Pt)!==de.NONE)&&(d(this,Pt)===de.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Ls,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,Pt)===de.HIGHLIGHT?S(this,K,sb).call(this,n):null;l==null||l.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&S(this,K,Mf).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}},Mf=function(e=""){d(this,Pt)===de.HIGHLIGHT?this.highlightSelection(e):d(this,fd)&&S(this,K,AC).call(this)},SC=function(){document.addEventListener("selectionchange",S(this,K,EC).bind(this),{signal:this._signal})},_C=function(){if(d(this,Is))return;x(this,Is,new AbortController);const e=this.combinedSignal(d(this,Is));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},PC=function(){var e;(e=d(this,Is))==null||e.abort(),x(this,Is,null)},ab=function(){if(d(this,Fs))return;x(this,Fs,new AbortController);const e=this.combinedSignal(d(this,Fs));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},CC=function(){var e;(e=d(this,Fs))==null||e.abort(),x(this,Fs,null)},ob=function(){if(d(this,Rs))return;x(this,Rs,new AbortController);const e=this.combinedSignal(d(this,Rs));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},lb=function(){var e;(e=d(this,Rs))==null||e.abort(),x(this,Rs,null)},DC=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},or=function(e){Object.entries(e).some(([i,n])=>d(this,yd)[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,yd),e)}),d(this,Pt)===de.HIGHLIGHT&&e.hasSelectedEditor===!1&&S(this,K,_n).call(this,[[Ae.HIGHLIGHT_FREE,!0]]))},_n=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},OC=async function(){if(!d(this,Us)){x(this,Us,!0);const e=[];for(const t of d(this,Ut).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,wt).values())t.enable()}},TC=function(){if(this.unselectAll(),d(this,Us)){x(this,Us,!1);for(const e of d(this,Ut).values())e.disable();for(const e of d(this,wt).values())e.disable()}},cb=function(e){const t=d(this,Ut).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},kC=function(){let e=null;for(e of d(this,ke));return e},Cu=function(){if(d(this,wt).size===0)return!0;if(d(this,wt).size===1)for(const e of d(this,wt).values())return e.isEmpty();return!1},ub=function(e){for(const t of d(this,ke))t.unselect();d(this,ke).clear();for(const t of e)t.isEmpty()||(d(this,ke).add(t),t.select());S(this,K,or).call(this,{hasSelectedEditor:this.hasSelection})},q(Cl,"TRANSLATE_SMALL",1),q(Cl,"TRANSLATE_BIG",10);let sl=Cl;var Ct,nn,Ci,Bl,sn,kr,Hl,an,wr,Mn,Qa,on,Hs,Bi,Du,Rf;const lr=class lr{constructor(e){E(this,Bi);E(this,Ct,null);E(this,nn,!1);E(this,Ci,null);E(this,Bl,null);E(this,sn,null);E(this,kr,null);E(this,Hl,!1);E(this,an,null);E(this,wr,null);E(this,Mn,null);E(this,Qa,null);E(this,on,!1);x(this,wr,e),x(this,on,e._uiManager.useNewAltTextFlow),d(lr,Hs)||x(lr,Hs,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){lr._l10n??(lr._l10n=e)}async render(){const e=x(this,Ci,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=x(this,Bl,document.createElement("span"));e.append(t),d(this,on)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(lr,Hs).missing),t.setAttribute("data-l10n-id",d(lr,Hs)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=d(this,wr)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const n=s=>{s.preventDefault(),d(this,wr)._uiManager.editAltText(d(this,wr)),d(this,on)&&d(this,wr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Bi,Du)}})};return e.addEventListener("click",n,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(x(this,Hl,!0),n(s))},{signal:i}),await S(this,Bi,Rf).call(this),e}finish(){d(this,Ci)&&(d(this,Ci).focus({focusVisible:d(this,Hl)}),x(this,Hl,!1))}isEmpty(){return d(this,on)?d(this,Ct)===null:!d(this,Ct)&&!d(this,nn)}hasData(){return d(this,on)?d(this,Ct)!==null||!!d(this,Mn):this.isEmpty()}get guessedText(){return d(this,Mn)}async setGuessedText(e){d(this,Ct)===null&&(x(this,Mn,e),x(this,Qa,await lr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),S(this,Bi,Rf).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,on)||d(this,Ct)){(t=d(this,an))==null||t.remove(),x(this,an,null);return}if(!d(this,an)){const i=x(this,an,document.createElement("div"));i.className="noAltTextBadge",d(this,wr).div.append(i)}d(this,an).classList.toggle("hidden",!e)}serialize(e){let t=d(this,Ct);return!e&&d(this,Mn)===t&&(t=d(this,Qa)),{altText:t,decorative:d(this,nn),guessedText:d(this,Mn),textWithDisclaimer:d(this,Qa)}}get data(){return{altText:d(this,Ct),decorative:d(this,nn)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:n,cancel:s=!1}){i&&(x(this,Mn,i),x(this,Qa,n)),!(d(this,Ct)===e&&d(this,nn)===t)&&(s||(x(this,Ct,e),x(this,nn,t)),S(this,Bi,Rf).call(this))}toggle(e=!1){d(this,Ci)&&(!e&&d(this,kr)&&(clearTimeout(d(this,kr)),x(this,kr,null)),d(this,Ci).disabled=!e)}shown(){d(this,wr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Bi,Du)}})}destroy(){var e,t;(e=d(this,Ci))==null||e.remove(),x(this,Ci,null),x(this,Bl,null),x(this,sn,null),(t=d(this,an))==null||t.remove(),x(this,an,null)}};Ct=new WeakMap,nn=new WeakMap,Ci=new WeakMap,Bl=new WeakMap,sn=new WeakMap,kr=new WeakMap,Hl=new WeakMap,an=new WeakMap,wr=new WeakMap,Mn=new WeakMap,Qa=new WeakMap,on=new WeakMap,Hs=new WeakMap,Bi=new WeakSet,Du=function(){return d(this,Ct)&&"added"||d(this,Ct)===null&&this.guessedText&&"review"||"missing"},Rf=async function(){var n,s,a;const e=d(this,Ci);if(!e)return;if(d(this,on)){if(e.classList.toggle("done",!!d(this,Ct)),e.setAttribute("data-l10n-id",d(lr,Hs)[d(this,Bi,Du)]),(n=d(this,Bl))==null||n.setAttribute("data-l10n-id",d(lr,Hs)[`${d(this,Bi,Du)}-label`]),!d(this,Ct)){(s=d(this,sn))==null||s.remove();return}}else{if(!d(this,Ct)&&!d(this,nn)){e.classList.remove("done"),(a=d(this,sn))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,sn);if(!t){x(this,sn,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,wr).id}`;const o=100,l=d(this,wr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,kr)),x(this,kr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,kr,setTimeout(()=>{x(this,kr,null),d(this,sn).classList.add("show"),d(this,wr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;d(this,kr)&&(clearTimeout(d(this,kr)),x(this,kr,null)),(c=d(this,sn))==null||c.classList.remove("show")},{signal:l})}d(this,nn)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,Ct)),t.parentNode||e.append(t);const i=d(this,wr).getElementForAltText();i==null||i.setAttribute("aria-describedby",t.id)},E(lr,Hs,null),q(lr,"_l10n",null);let Bm=lr;var zl,Ya,Nd,wd,Ad,Ed,Sd,Rn,Xa,jn,Za,In,wa,MC,RC,jC;const Rx=class Rx{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){E(this,wa);E(this,zl);E(this,Ya,!1);E(this,Nd,null);E(this,wd);E(this,Ad);E(this,Ed);E(this,Sd);E(this,Rn,null);E(this,Xa);E(this,jn,null);E(this,Za);E(this,In,null);x(this,zl,e),x(this,Nd,i),x(this,wd,t),x(this,Ad,n),x(this,Ed,s),x(this,Sd,a),x(this,Za,new AbortController),x(this,Xa,AbortSignal.any([o,d(this,Za).signal])),e.addEventListener("touchstart",S(this,wa,MC).bind(this),{passive:!1,signal:d(this,Xa)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/xn.pixelRatio}destroy(){var e,t;(e=d(this,Za))==null||e.abort(),x(this,Za,null),(t=d(this,Rn))==null||t.abort(),x(this,Rn,null)}};zl=new WeakMap,Ya=new WeakMap,Nd=new WeakMap,wd=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Sd=new WeakMap,Rn=new WeakMap,Xa=new WeakMap,jn=new WeakMap,Za=new WeakMap,In=new WeakMap,wa=new WeakSet,MC=function(e){var n,s,a;if((n=d(this,wd))!=null&&n.call(this))return;if(e.touches.length===1){if(d(this,Rn))return;const o=x(this,Rn,new AbortController),l=AbortSignal.any([d(this,Xa),o.signal]),c=d(this,zl),u={capture:!0,signal:l,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=d(this,Rn))==null||m.abort(),x(this,Rn,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ht(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!d(this,In)){x(this,In,new AbortController);const o=AbortSignal.any([d(this,Xa),d(this,In).signal]),l=d(this,zl),c={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",S(this,wa,RC).bind(this),c);const u=S(this,wa,jC).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",ht,c),l.addEventListener("pointermove",ht,c),l.addEventListener("pointercancel",ht,c),l.addEventListener("pointerup",ht,c),(s=d(this,Ad))==null||s.call(this)}if(ht(e),e.touches.length!==2||(a=d(this,Nd))!=null&&a.call(this)){x(this,jn,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),x(this,jn,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},RC=function(e){var _;if(!d(this,jn)||e.touches.length!==2)return;ht(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:n,screenY:s}=t,{screenX:a,screenY:o}=i,l=d(this,jn),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:f}=l,m=h-c,p=f-u,g=a-n,b=o-s,y=Math.hypot(g,b)||1,N=Math.hypot(m,p)||1;if(!d(this,Ya)&&Math.abs(N-y)<=Rx.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=n,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!d(this,Ya)){x(this,Ya,!0);return}const w=[(n+a)/2,(s+o)/2];(_=d(this,Ed))==null||_.call(this,w,N,y)},jC=function(e){var t;e.touches.length>=2||(d(this,In)&&(d(this,In).abort(),x(this,In,null),(t=d(this,Sd))==null||t.call(this)),d(this,jn)&&(ht(e),x(this,jn,null),x(this,Ya,!1)))};let Hm=Rx;var Ja,Di,qe,ql,zs,_d,eo,Ft,to,Ln,qs,Pd,ro,Mr,Cd,io,Un,ln,Wl,Gl,ui,no,Dd,ep,le,db,Od,hb,jf,IC,LC,fb,If,mb,UC,FC,VC,pb,$C,gb,BC,HC,zC,vb,Ou;const ve=class ve{constructor(e){E(this,le);E(this,Ja,null);E(this,Di,null);E(this,qe,null);E(this,ql,!1);E(this,zs,null);E(this,_d,"");E(this,eo,!1);E(this,Ft,null);E(this,to,null);E(this,Ln,null);E(this,qs,null);E(this,Pd,"");E(this,ro,!1);E(this,Mr,null);E(this,Cd,!1);E(this,io,!1);E(this,Un,!1);E(this,ln,null);E(this,Wl,0);E(this,Gl,0);E(this,ui,null);E(this,no,null);q(this,"isSelected",!1);q(this,"_isCopy",!1);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);E(this,Dd,!1);E(this,ep,ve._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ve.prototype._resizeWithKeyboard,t=sl.TRANSLATE_SMALL,i=sl.TRANSLATE_BIG;return we(this,"_resizerKeyboardManager",new Jh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],ve.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return we(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new k6({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ve._l10n??(ve._l10n=e),ve._l10nResizer||(ve._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ve._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ve._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,Dd)}set _isDraggable(e){var t;x(this,Dd,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,ep)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):S(this,le,Ou).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,ro)?x(this,ro,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,n){const[s,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(e+i)/s,this.y=(t+n)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,n]=this.parentDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n),this._onTranslated()}translate(e,t){S(this,le,db).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,Mr)||x(this,Mr,[this.x,this.y,this.width,this.height]),S(this,le,db).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,Mr)||x(this,Mr,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[n,s]}=this;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:u}=i;u.left=`${(100*a).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,Mr)&&(d(this,Mr)[0]!==this.x||d(this,Mr)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Mr)&&(d(this,Mr)[2]!==this.width||d(this,Mr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=ve,n=i/e,s=i/t;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,n]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=i,l*=n,s*=i,a*=n,this._mustFixPosition)switch(e){case 0:s=fr(s,0,i-o),a=fr(a,0,n-l);break;case 90:s=fr(s,0,i-l),a=fr(a,o,n);break;case 180:s=fr(s,o,i),a=fr(a,l,n);break;case 270:s=fr(s,l,i),a=fr(a,0,n-o);break}this.x=s/=i,this.y=a/=n;const[c,u]=this.getBaseTranslation();s+=c,a+=u,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return S(i=ve,Od,hb).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return S(i=ve,Od,hb).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,n]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/i).toFixed(2)}%`,d(this,eo)||(s.height=`${(100*t/n).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,n=i.endsWith("%"),s=!d(this,eo)&&t.endsWith("%");if(n&&s)return;const[a,o]=this.parentDimensions;n||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!d(this,eo)&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,qe))==null||e.finish()}async addEditToolbar(){return this._editToolbar||d(this,io)?this._editToolbar:(this._editToolbar=new rb(this),this.div.append(this._editToolbar.render()),d(this,qe)&&await this._editToolbar.addAltText(d(this,qe)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,qe))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){d(this,qe)||(Bm.initialize(ve._l10n),x(this,qe,new Bm(this)),d(this,Ja)&&(d(this,qe).data=d(this,Ja),x(this,Ja,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=d(this,qe))==null?void 0:e.data}set altTextData(e){d(this,qe)&&(d(this,qe).data=e)}get guessedAltText(){var e;return(e=d(this,qe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,qe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,qe))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,qe)&&!d(this,qe).isEmpty()}hasAltTextData(){var e;return((e=d(this,qe))==null?void 0:e.hasData())??!1}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,ql)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),S(this,le,gb).call(this);const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),NC(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,no)||x(this,no,new Hm({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,le,UC).bind(this),onPinching:S(this,le,FC).bind(this),onPinchEnd:S(this,le,VC).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,ro,!0),this._isDraggable){S(this,le,$C).call(this,e);return}S(this,le,pb).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,ln)&&clearTimeout(d(this,ln)),x(this,ln,setTimeout(()=>{var e;x(this,ln,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const n=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/n,u=t/n,h=this.x*s,f=this.y*a,m=this.width*s,p=this.height*a;switch(i){case 0:return[h+c+o,a-f-u-p+l,h+c+m+o,a-f-u+l];case 90:return[h+u+o,a-f+c+l,h+u+p+o,a-f+c+m+l];case 180:return[h-c-m+o,a-f+u+l,h-c+o,a-f+u+p+l];case 270:return[h-u-p+o,a-f-c-m+l,h-u+o,a-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,n,s,a]=e,o=s-i,l=a-n;switch(this.rotation){case 0:return[i,t-a,o,l];case 90:return[i,t-n,l,o];case 180:return[s,t-n,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),x(this,io,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),x(this,io,!1),!0):!1}isInEditMode(){return d(this,io)}shouldGetKeyboardEvents(){return d(this,Un)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&n>0&&e<s&&i>0}rebuild(){S(this,le,gb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ue("An editor must be serializable")}static async deserialize(e,t,i){const n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});n.rotation=e.rotation,x(n,Ja,e.accessibilityData),n._isCopy=e.isCopy||!1;const[s,a]=n.pageDimensions,[o,l,c,u]=n.getRectInCurrentCoords(e.rect,a);return n.x=o/s,n.y=l/a,n.width=c/s,n.height=u/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,qs))==null||e.abort(),x(this,qs,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,ln)&&(clearTimeout(d(this,ln)),x(this,ln,null)),S(this,le,Ou).call(this),this.removeEditToolbar(),d(this,ui)){for(const i of d(this,ui).values())clearTimeout(i);x(this,ui,null)}this.parent=null,(t=d(this,no))==null||t.destroy(),x(this,no,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,le,IC).call(this),d(this,Ft).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Ln,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,Ft).children;if(!d(this,Di)){x(this,Di,Array.from(t));const a=S(this,le,BC).bind(this),o=S(this,le,HC).bind(this),l=this._uiManager._signal;for(const c of d(this,Di)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",S(this,le,zC).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",ve._l10nResizer[u])}}const i=d(this,Di)[0];let n=0;for(const a of t){if(a===i)break;n++}const s=(360-this.rotation+this.parentRotation)%360/90*(d(this,Di).length/4);if(s!==n){if(s<n)for(let o=0;o<n-s;o++)d(this,Ft).append(d(this,Ft).firstChild);else if(s>n)for(let o=0;o<s-n;o++)d(this,Ft).firstChild.before(d(this,Ft).lastChild);let a=0;for(const o of t){const c=d(this,Di)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ve._l10nResizer[c])}}S(this,le,vb).call(this,0),x(this,Un,!0),d(this,Ft).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,Un)&&S(this,le,mb).call(this,d(this,Pd),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,le,Ou).call(this),this.div.focus()}select(){var e,t,i;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(i=d(this,qe))==null||i.toggleAltTextBadge(!1)}}unselect(){var e,t,i,n,s;this.isSelected&&(this.isSelected=!1,(e=d(this,Ft))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(s=d(this,qe))==null||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,Cd)}set isEditing(e){x(this,Cd,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,eo,!0);const i=e/t,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,ui)||x(this,ui,new Map);const{action:i}=e;let n=d(this,ui).get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),d(this,ui).delete(i),d(this,ui).size===0&&x(this,ui,null)},ve._telemetryTimeout),d(this,ui).set(i,n);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,ql,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,ql,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ja=new WeakMap,Di=new WeakMap,qe=new WeakMap,ql=new WeakMap,zs=new WeakMap,_d=new WeakMap,eo=new WeakMap,Ft=new WeakMap,to=new WeakMap,Ln=new WeakMap,qs=new WeakMap,Pd=new WeakMap,ro=new WeakMap,Mr=new WeakMap,Cd=new WeakMap,io=new WeakMap,Un=new WeakMap,ln=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,ui=new WeakMap,no=new WeakMap,Dd=new WeakMap,ep=new WeakMap,le=new WeakSet,db=function([e,t],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/e,this.y+=n/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Od=new WeakSet,hb=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},jf=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},IC=function(){if(d(this,Ft))return;x(this,Ft,document.createElement("div")),d(this,Ft).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const n=document.createElement("div");d(this,Ft).append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",S(this,le,LC).bind(this,i),{signal:t}),n.addEventListener("contextmenu",Hi,{signal:t}),n.tabIndex=-1}this.div.prepend(d(this,Ft))},LC=function(e,t){var u;t.preventDefault();const{isMac:i}=Qt.platform;if(t.button!==0||t.ctrlKey&&i)return;(u=d(this,qe))==null||u.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,x(this,to,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,le,mb).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",ht,{passive:!1,signal:a}),window.addEventListener("contextmenu",Hi,{signal:a}),x(this,Ln,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=d(this,qe))==null||h.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=o,this.div.style.cursor=l,S(this,le,If).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},fb=function(e,t,i,n){this.width=i,this.height=n,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*i,a*n),this.fixAndSetPosition(),this._onResized()},If=function(){if(!d(this,Ln))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:n}=d(this,Ln);x(this,Ln,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===i&&l===n||this.addCommands({cmd:S(this,le,fb).bind(this,s,a,o,l),undo:S(this,le,fb).bind(this,e,t,i,n),mustExec:!0})},mb=function(e,t){const[i,n]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=ve.MIN_SIZE/i,u=ve.MIN_SIZE/n,h=S(this,le,jf).call(this,this.rotation),f=($,U)=>[h[0]*$+h[2]*U,h[1]*$+h[3]*U],m=S(this,le,jf).call(this,360-this.rotation),p=($,U)=>[m[0]*$+m[2]*U,m[1]*$+m[3]*U];let g,b,y=!1,N=!1;switch(e){case"topLeft":y=!0,g=($,U)=>[0,0],b=($,U)=>[$,U];break;case"topMiddle":g=($,U)=>[$/2,0],b=($,U)=>[$/2,U];break;case"topRight":y=!0,g=($,U)=>[$,0],b=($,U)=>[0,U];break;case"middleRight":N=!0,g=($,U)=>[$,U/2],b=($,U)=>[0,U/2];break;case"bottomRight":y=!0,g=($,U)=>[$,U],b=($,U)=>[0,0];break;case"bottomMiddle":g=($,U)=>[$/2,U],b=($,U)=>[$/2,0];break;case"bottomLeft":y=!0,g=($,U)=>[0,U],b=($,U)=>[$,0];break;case"middleLeft":N=!0,g=($,U)=>[0,U/2],b=($,U)=>[$,U/2];break}const w=g(o,l),_=b(o,l);let P=f(..._);const O=ve._round(s+P[0]),T=ve._round(a+P[1]);let C=1,D=1,k,M;if(t.fromKeyboard)({deltaX:k,deltaY:M}=t);else{const{screenX:$,screenY:U}=t,[oe,Q]=d(this,to);[k,M]=this.screenToPageTranslation($-oe,U-Q),d(this,to)[0]=$,d(this,to)[1]=U}if([k,M]=p(k/i,M/n),y){const $=Math.hypot(o,l);C=D=Math.max(Math.min(Math.hypot(_[0]-w[0]-k,_[1]-w[1]-M)/$,1/o,1/l),c/o,u/l)}else N?C=fr(Math.abs(_[0]-w[0]-k),c,1)/o:D=fr(Math.abs(_[1]-w[1]-M),u,1)/l;const j=ve._round(o*C),V=ve._round(l*D);P=f(...b(j,V));const B=O-P[0],X=T-P[1];d(this,Mr)||x(this,Mr,[this.x,this.y,this.width,this.height]),this.width=j,this.height=V,this.x=B,this.y=X,this.setDims(i*j,n*V),this.fixAndSetPosition(),this._onResizing()},UC=function(){var e;x(this,Ln,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,qe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},FC=function(e,t,i){let s=.7*(i/t)+1-.7;if(s===1)return;const a=S(this,le,jf).call(this,this.rotation),o=(O,T)=>[a[0]*O+a[2]*T,a[1]*O+a[3]*T],[l,c]=this.parentDimensions,u=this.x,h=this.y,f=this.width,m=this.height,p=ve.MIN_SIZE/l,g=ve.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/m),p/f,g/m);const b=ve._round(f*s),y=ve._round(m*s);if(b===f&&y===m)return;d(this,Mr)||x(this,Mr,[u,h,f,m]);const N=o(f/2,m/2),w=ve._round(u+N[0]),_=ve._round(h+N[1]),P=o(b/2,y/2);this.x=w-P[0],this.y=_-P[1],this.width=b,this.height=y,this.setDims(l*b,c*y),this.fixAndSetPosition(),this._onResizing()},VC=function(){var e;(e=d(this,qe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),S(this,le,If).call(this)},pb=function(e){const{isMac:t}=Qt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},$C=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const n=new AbortController,s=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:s},o=c=>{n.abort(),x(this,zs,null),x(this,ro,!1),this._uiManager.endDragSession()||S(this,le,pb).call(this,c),i&&this._onStopDragging()};t&&(x(this,Wl,e.clientX),x(this,Gl,e.clientY),x(this,zs,e.pointerId),x(this,_d,e.pointerType),window.addEventListener("pointermove",c=>{i||(i=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:f}=c;if(f!==d(this,zs)){ht(c);return}const[m,p]=this.screenToPageTranslation(u-d(this,Wl),h-d(this,Gl));x(this,Wl,u),x(this,Gl,h),this._uiManager.dragSelectedEditors(m,p)},a),window.addEventListener("touchmove",ht,a),window.addEventListener("pointerdown",c=>{c.pointerType===d(this,_d)&&(d(this,no)||c.isPrimary)&&o(c),ht(c)},a));const l=c=>{if(!d(this,zs)||d(this,zs)===c.pointerId){o(c);return}ht(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},gb=function(){if(d(this,qs)||!this.div)return;x(this,qs,new AbortController);const e=this._uiManager.combinedSignal(d(this,qs));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},BC=function(e){ve._resizerKeyboardManager.exec(this,e)},HC=function(e){var t;d(this,Un)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,Ft)&&S(this,le,Ou).call(this)},zC=function(e){x(this,Pd,d(this,Un)?e:"")},vb=function(e){if(d(this,Di))for(const t of d(this,Di))t.tabIndex=e},Ou=function(){x(this,Un,!1),S(this,le,vb).call(this,-1),S(this,le,If).call(this)},E(ve,Od),q(ve,"_l10n",null),q(ve,"_l10nResizer",null),q(ve,"_borderLineWidth",-1),q(ve,"_colorManager",new nb),q(ve,"_zIndex",1),q(ve,"_telemetryTimeout",1e3);let ze=ve;class k6 extends ze{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Uw=3285377520,si=4294901760,Xi=65535;class qC{constructor(e){this.h1=e?e&4294967295:Uw,this.h2=e?e&4294967295:Uw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let g=0,b=e.length;g<b;g++){const y=e.charCodeAt(g);y<=255?t[i++]=y:(t[i++]=y>>>8,t[i++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,s=i-n*4,a=new Uint32Array(t.buffer,0,n);let o=0,l=0,c=this.h1,u=this.h2;const h=3432918353,f=461845907,m=h&Xi,p=f&Xi;for(let g=0;g<n;g++)g&1?(o=a[g],o=o*h&si|o*m&Xi,o=o<<15|o>>>17,o=o*f&si|o*p&Xi,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[g],l=l*h&si|l*m&Xi,l=l<<15|l>>>17,l=l*f&si|l*p&Xi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,s){case 3:o^=t[n*4+2]<<16;case 2:o^=t[n*4+1]<<8;case 1:o^=t[n*4],o=o*h&si|o*m&Xi,o=o<<15|o>>>17,o=o*f&si|o*p&Xi,n&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&si|e*36045&Xi,t=t*4283543511&si|((t<<16|e>>>16)*2950163797&si)>>>16,e^=t>>>1,e=e*444984403&si|e*60499&Xi,t=t*3301882366&si|((t<<16|e>>>16)*3120437893&si)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const bb=Object.freeze({map:null,hash:"",transfer:void 0});var so,ao,Vt,tp,WC;class Px{constructor(){E(this,tp);E(this,so,!1);E(this,ao,null);E(this,Vt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=d(this,Vt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return d(this,Vt).get(e)}remove(e){if(d(this,Vt).delete(e),d(this,Vt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,Vt).values())if(t instanceof ze)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=d(this,Vt).get(e);let n=!1;if(i!==void 0)for(const[s,a]of Object.entries(t))i[s]!==a&&(n=!0,i[s]=a);else n=!0,d(this,Vt).set(e,t);n&&S(this,tp,WC).call(this),t instanceof ze&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,Vt).has(e)}get size(){return d(this,Vt).size}resetModified(){d(this,so)&&(x(this,so,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new GC(this)}get serializable(){if(d(this,Vt).size===0)return bb;const e=new Map,t=new qC,i=[],n=Object.create(null);let s=!1;for(const[a,o]of d(this,Vt)){const l=o instanceof ze?o.serialize(!1,n):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:bb}get editorStats(){let e=null;const t=new Map;for(const i of d(this,Vt).values()){if(!(i instanceof ze))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:s}=n;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[o,l]of Object.entries(n)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[i,n]of t)e[i]=n.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){x(this,ao,null)}get modifiedIds(){if(d(this,ao))return d(this,ao);const e=[];for(const t of d(this,Vt).values())!(t instanceof ze)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return x(this,ao,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,Vt).entries()}}so=new WeakMap,ao=new WeakMap,Vt=new WeakMap,tp=new WeakSet,WC=function(){d(this,so)||(x(this,so,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Td;class GC extends Px{constructor(t){super();E(this,Td);const{map:i,hash:n,transfer:s}=t.serializable,a=structuredClone(i,s?{transfer:s}:null);x(this,Td,{map:a,hash:n,transfer:s})}get print(){Ue("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,Td)}get modifiedIds(){return we(this,"modifiedIds",{ids:new Set,hash:""})}}Td=new WeakMap;var Kl;class M6{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Kl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Kl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||d(this,Kl).has(e.loadedName))){if(ft(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:a}=e,o=new FontFace(n,s,a);this.addNativeFontFace(o);try{await o.load(),d(this,Kl).add(n),i==null||i(e)}catch{he(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw he(`Failed to load font '${i.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return we(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return we(this,"isSyncFontLoadingSupported",hr||Qt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ft(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:t,callback:e};return i.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return we(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(_,P){return _.charCodeAt(P)<<24|_.charCodeAt(P+1)<<16|_.charCodeAt(P+2)<<8|_.charCodeAt(P+3)&255}function n(_,P,O,T){const C=_.substring(0,P),D=_.substring(P+O);return C+T+D}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(_,P){if(++c>30){he("Load test font never loaded."),P();return}if(l.font="30px "+_,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(u.bind(null,_,P))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=n(f,976,h.length,h);const p=16,g=1482184792;let b=i(f,p);for(s=0,a=h.length-3;s<a;s+=4)b=b-g+i(h,s)|0;s<h.length&&(b=b-g+i(h+"XXX",s)|0),f=n(f,p,4,v6(b));const y=`url(data:font/opentype;base64,${btoa(f)});`,N=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(N);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const _ of[e.loadedName,h]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=_,w.append(P)}this._document.body.append(w),u(h,()=>{w.remove(),t.complete()})}}Kl=new WeakMap;class R6{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${fC(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let n;try{n=e.get(i)}catch(a){he(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(n||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=s}}function j6(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(hr)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function I6(r){if(hr&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Yh(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yf(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const yb=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,L6=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",U6=w6.bind(null,yb,L6);var Fn,rp;class F6{constructor(){E(this,Fn,new Map);E(this,rp,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};d(this,rp).then(()=>{for(const[n]of d(this,Fn))n.call(this,i)})}addEventListener(e,t,i=null){let n=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){he("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);n=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}d(this,Fn).set(t,n)}removeEventListener(e,t){const i=d(this,Fn).get(t);i==null||i(),d(this,Fn).delete(t)}terminate(){for(const[,e]of d(this,Fn))e==null||e();d(this,Fn).clear()}}Fn=new WeakMap,rp=new WeakMap;const xf={DATA:1,ERROR:2},ct={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fw(){}function xr(r){if(r instanceof ya||r instanceof Jv||r instanceof jw||r instanceof $m||r instanceof Wg)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new ya(r.message);case"InvalidPDFException":return new Jv(r.message);case"PasswordException":return new jw(r.message,r.code);case"ResponseException":return new $m(r.message,r.status,r.missing);case"UnknownErrorException":return new Wg(r.message,r.details)}return new Wg(r.message,r.toString())}var Ql,yi,KC,QC,YC,Lf;class Tu{constructor(e,t,i){E(this,yi);E(this,Ql,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",S(this,yi,KC).bind(this),{signal:d(this,Ql).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,i,n){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:c.desiredSize},n),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:ct.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{ft(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:ct.CANCEL,streamId:s,reason:xr(c)}),u.promise}},i)}destroy(){var e;(e=d(this,Ql))==null||e.abort(),x(this,Ql,null)}}Ql=new WeakMap,yi=new WeakSet,KC=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){S(this,yi,YC).call(this,e);return}if(e.callback){const i=e.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===xf.DATA)n.resolve(e.data);else if(e.callback===xf.ERROR)n.reject(xr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,n=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:i,targetName:n,callback:xf.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:n,callback:xf.ERROR,callbackId:e.callbackId,reason:xr(a)})});return}if(e.streamId){S(this,yi,QC).call(this,e);return}t(e.data)},QC=function(e){const t=e.streamId,i=this.sourceName,n=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,u=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:ct.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:ct.CLOSE,streamId:t}),delete a.streamSinks[t])},error(c){ft(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:ct.ERROR,streamId:t,reason:xr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:i,targetName:n,stream:ct.START_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:ct.START_COMPLETE,streamId:t,reason:xr(c)})})},YC=function(e){const t=e.streamId,i=this.sourceName,n=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case ct.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(xr(e.reason));break;case ct.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(xr(e.reason));break;case ct.PULL:if(!o){s.postMessage({sourceName:i,targetName:n,stream:ct.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Fw).then(function(){s.postMessage({sourceName:i,targetName:n,stream:ct.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:ct.PULL_COMPLETE,streamId:t,reason:xr(c)})});break;case ct.ENQUEUE:if(ft(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case ct.CLOSE:if(ft(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),S(this,yi,Lf).call(this,a,t);break;case ct.ERROR:ft(a,"error should have stream controller"),a.controller.error(xr(e.reason)),S(this,yi,Lf).call(this,a,t);break;case ct.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(xr(e.reason)),S(this,yi,Lf).call(this,a,t);break;case ct.CANCEL:if(!o)break;const l=xr(e.reason);Promise.try(o.onCancel||Fw,l).then(function(){s.postMessage({sourceName:i,targetName:n,stream:ct.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:ct.CANCEL_COMPLETE,streamId:t,reason:xr(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Lf=async function(e,t){var i,n,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(n=e.pullCall)==null?void 0:n.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var kd;class XC{constructor({enableHWA:e=!1}){E(this,kd,!1);x(this,kd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!d(this,kd)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ue("Abstract method `_createCanvas` called.")}}kd=new WeakMap;class V6 extends XC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class ZC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class Vw extends ZC{async _fetch(e){const t=await Xh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Yh(t)}}class JC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,n,s){return"none"}destroy(e=!1){}}var oo,Yl,Vn,$n,er,lo,co,Y,Zt,ku,yl,Uf,xl,eD,xb,Nl,Mu,Ru,Nb,ju;class $6 extends JC{constructor({docId:t,ownerDocument:i=globalThis.document}){super();E(this,Y);E(this,oo);E(this,Yl);E(this,Vn);E(this,$n);E(this,er);E(this,lo);E(this,co,0);x(this,$n,t),x(this,er,i)}addFilter(t){if(!t)return"none";let i=d(this,Y,Zt).get(t);if(i)return i;const[n,s,a]=S(this,Y,Uf).call(this,t),o=t.length===1?n:`${n}${s}${a}`;if(i=d(this,Y,Zt).get(o),i)return d(this,Y,Zt).set(t,i),i;const l=`g_${d(this,$n)}_transfer_map_${ar(this,co)._++}`,c=S(this,Y,xl).call(this,l);d(this,Y,Zt).set(t,c),d(this,Y,Zt).set(o,c);const u=S(this,Y,Nl).call(this,l);return S(this,Y,Ru).call(this,n,s,a,u),c}addHCMFilter(t,i){var p;const n=`${t}-${i}`,s="base";let a=d(this,Y,ku).get(s);if((a==null?void 0:a.key)===n||(a?((p=a.filter)==null||p.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},d(this,Y,ku).set(s,a)),!t||!i))return a.url;const o=S(this,Y,ju).call(this,t);t=se.makeHexColor(...o);const l=S(this,Y,ju).call(this,i);if(i=se.makeHexColor(...l),d(this,Y,yl).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const c=new Array(256);for(let g=0;g<=255;g++){const b=g/255;c[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const u=c.join(","),h=`g_${d(this,$n)}_hcm_filter`,f=a.filter=S(this,Y,Nl).call(this,h);S(this,Y,Ru).call(this,u,u,u,f),S(this,Y,xb).call(this,f);const m=(g,b)=>{const y=o[g]/255,N=l[g]/255,w=new Array(b+1);for(let _=0;_<=b;_++)w[_]=y+_/b*(N-y);return w.join(",")};return S(this,Y,Ru).call(this,m(0,5),m(1,5),m(2,5),f),a.url=S(this,Y,xl).call(this,h),a.url}addAlphaFilter(t){let i=d(this,Y,Zt).get(t);if(i)return i;const[n]=S(this,Y,Uf).call(this,[t]),s=`alpha_${n}`;if(i=d(this,Y,Zt).get(s),i)return d(this,Y,Zt).set(t,i),i;const a=`g_${d(this,$n)}_alpha_map_${ar(this,co)._++}`,o=S(this,Y,xl).call(this,a);d(this,Y,Zt).set(t,o),d(this,Y,Zt).set(s,o);const l=S(this,Y,Nl).call(this,a);return S(this,Y,Nb).call(this,n,l),o}addLuminosityFilter(t){let i=d(this,Y,Zt).get(t||"luminosity");if(i)return i;let n,s;if(t?([n]=S(this,Y,Uf).call(this,[t]),s=`luminosity_${n}`):s="luminosity",i=d(this,Y,Zt).get(s),i)return d(this,Y,Zt).set(t,i),i;const a=`g_${d(this,$n)}_luminosity_map_${ar(this,co)._++}`,o=S(this,Y,xl).call(this,a);d(this,Y,Zt).set(t,o),d(this,Y,Zt).set(s,o);const l=S(this,Y,Nl).call(this,a);return S(this,Y,eD).call(this,l),t&&S(this,Y,Nb).call(this,n,l),o}addHighlightHCMFilter(t,i,n,s,a){var N;const o=`${i}-${n}-${s}-${a}`;let l=d(this,Y,ku).get(t);if((l==null?void 0:l.key)===o||(l?((N=l.filter)==null||N.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},d(this,Y,ku).set(t,l)),!i||!n))return l.url;const[c,u]=[i,n].map(S(this,Y,ju).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,p]=[s,a].map(S(this,Y,ju).bind(this));f<h&&([h,f,m,p]=[f,h,p,m]),d(this,Y,yl).style.color="";const g=(w,_,P)=>{const O=new Array(256),T=(f-h)/P,C=w/255,D=(_-w)/(255*P);let k=0;for(let M=0;M<=P;M++){const j=Math.round(h+M*T),V=C+M*D;for(let B=k;B<=j;B++)O[B]=V;k=j+1}for(let M=k;M<256;M++)O[M]=O[k-1];return O.join(",")},b=`g_${d(this,$n)}_hcm_${t}_filter`,y=l.filter=S(this,Y,Nl).call(this,b);return S(this,Y,xb).call(this,y),S(this,Y,Ru).call(this,g(m[0],p[0],5),g(m[1],p[1],5),g(m[2],p[2],5),y),l.url=S(this,Y,xl).call(this,b),l.url}destroy(t=!1){var i,n,s,a;t&&((i=d(this,lo))!=null&&i.size)||((n=d(this,Vn))==null||n.parentNode.parentNode.remove(),x(this,Vn,null),(s=d(this,Yl))==null||s.clear(),x(this,Yl,null),(a=d(this,lo))==null||a.clear(),x(this,lo,null),x(this,co,0))}}oo=new WeakMap,Yl=new WeakMap,Vn=new WeakMap,$n=new WeakMap,er=new WeakMap,lo=new WeakMap,co=new WeakMap,Y=new WeakSet,Zt=function(){return d(this,Yl)||x(this,Yl,new Map)},ku=function(){return d(this,lo)||x(this,lo,new Map)},yl=function(){if(!d(this,Vn)){const t=d(this,er).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const n=d(this,er).createElementNS(Sn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),x(this,Vn,d(this,er).createElementNS(Sn,"defs")),t.append(n),n.append(d(this,Vn)),d(this,er).body.append(t)}return d(this,Vn)},Uf=function(t){if(t.length===1){const c=t[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=c[f]/255;const h=u.join(",");return[h,h,h]}const[i,n,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=i[c]/255,o[c]=n[c]/255,l[c]=s[c]/255;return[a.join(","),o.join(","),l.join(",")]},xl=function(t){if(d(this,oo)===void 0){x(this,oo,"");const i=d(this,er).URL;i!==d(this,er).baseURI&&(fg(i)?he('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,oo,uC(i,"")))}return`url(${d(this,oo)}#${t})`},eD=function(t){const i=d(this,er).createElementNS(Sn,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},xb=function(t){const i=d(this,er).createElementNS(Sn,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Nl=function(t){const i=d(this,er).createElementNS(Sn,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),d(this,Y,yl).append(i),i},Mu=function(t,i,n){const s=d(this,er).createElementNS(Sn,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)},Ru=function(t,i,n,s){const a=d(this,er).createElementNS(Sn,"feComponentTransfer");s.append(a),S(this,Y,Mu).call(this,a,"feFuncR",t),S(this,Y,Mu).call(this,a,"feFuncG",i),S(this,Y,Mu).call(this,a,"feFuncB",n)},Nb=function(t,i){const n=d(this,er).createElementNS(Sn,"feComponentTransfer");i.append(n),S(this,Y,Mu).call(this,n,"feFuncA",t)},ju=function(t){return d(this,Y,yl).style.color=t,_x(getComputedStyle(d(this,Y,yl)).getPropertyValue("color"))};class tD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class $w extends tD{async _fetch(e){const t=await Xh(e,"arraybuffer");return new Uint8Array(t)}}class rD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class Bw extends rD{async _fetch(e){const t=await Xh(e,"arraybuffer");return new Uint8Array(t)}}hr&&he("Please use the `legacy` build in Node.js environments.");async function Cx(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class B6 extends JC{}class H6 extends XC{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class z6 extends ZC{async _fetch(e){return Cx(e)}}class q6 extends tD{async _fetch(e){return Cx(e)}}class W6 extends rD{async _fetch(e){return Cx(e)}}const qt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function wb(r,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],t,i),r.clip(n)}class Dx{isModifyingCurrentTransform(){return!1}getPattern(){Ue("Abstract method `getPattern` called.")}}class G6 extends Dx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,n){let s;if(n===qt.STROKE||n===qt.FILL){const a=t.current.getClippedPathBoundingBox(n,et(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),i=se.transform(i,[1,0,0,1,a[0],a[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),wb(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(i);s.setTransform(h)}else wb(e,this._bbox),s=this._createGradient(e);return s}}function Qg(r,e,t,i,n,s,a,o){const l=e.coords,c=e.colors,u=r.data,h=r.width*4;let f;l[t+1]>l[i+1]&&(f=t,t=i,i=f,f=s,s=a,a=f),l[i+1]>l[n+1]&&(f=i,i=n,n=f,f=a,a=o,o=f),l[t+1]>l[i+1]&&(f=t,t=i,i=f,f=s,s=a,a=f);const m=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,b=(l[i+1]+e.offsetY)*e.scaleY,y=(l[n]+e.offsetX)*e.scaleX,N=(l[n+1]+e.offsetY)*e.scaleY;if(p>=N)return;const w=c[s],_=c[s+1],P=c[s+2],O=c[a],T=c[a+1],C=c[a+2],D=c[o],k=c[o+1],M=c[o+2],j=Math.round(p),V=Math.round(N);let B,X,$,U,oe,Q,ye,te;for(let H=j;H<=V;H++){if(H<b){const fe=H<p?0:(p-H)/(p-b);B=m-(m-g)*fe,X=w-(w-O)*fe,$=_-(_-T)*fe,U=P-(P-C)*fe}else{let fe;H>N?fe=1:b===N?fe=0:fe=(b-H)/(b-N),B=g-(g-y)*fe,X=O-(O-D)*fe,$=T-(T-k)*fe,U=C-(C-M)*fe}let z;H<p?z=0:H>N?z=1:z=(p-H)/(p-N),oe=m-(m-y)*z,Q=w-(w-D)*z,ye=_-(_-k)*z,te=P-(P-M)*z;const Ee=Math.round(Math.min(B,oe)),ue=Math.round(Math.max(B,oe));let Te=h*H+Ee*4;for(let fe=Ee;fe<=ue;fe++)z=(B-fe)/(B-oe),z<0?z=0:z>1&&(z=1),u[Te++]=X-(X-Q)*z|0,u[Te++]=$-($-ye)*z|0,u[Te++]=U-(U-te)*z|0,u[Te++]=255}}function K6(r,e,t){const i=e.coords,n=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let u=s*o;for(let h=0;h<c;h++,u++)Qg(r,t,i[u],i[u+1],i[u+o],n[u],n[u+1],n[u+o]),Qg(r,t,i[u+o+1],i[u+1],i[u+o],n[u+o+1],n[u+1],n[u+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Qg(r,t,i[s],i[s+1],i[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}class Q6 extends Dx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),m=c/h,p=u/f,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/p},b=h+2*2,y=f+2*2,N=i.getCanvas("mesh",b,y),w=N.context,_=w.createImageData(h,f);if(t){const O=_.data;for(let T=0,C=O.length;T<C;T+=4)O[T]=t[0],O[T+1]=t[1],O[T+2]=t[2],O[T+3]=255}for(const O of this._figures)K6(_,O,g);return w.putImageData(_,2,2),{canvas:N.canvas,offsetX:o-2*m,offsetY:l-2*p,scaleX:m,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,n){wb(e,this._bbox);const s=new Float32Array(2);if(n===qt.SHADING)se.singularValueDecompose2dScale(et(e),s);else if(this.matrix){se.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;se.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=o,s[1]*=l}else se.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,n===qt.SHADING?null:this._background,t.cachedCanvases);return n!==qt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Y6 extends Dx{getPattern(){return"hotpink"}}function X6(r){switch(r[0]){case"RadialAxial":return new G6(r);case"Mesh":return new Q6(r);case"Dummy":return new Y6}throw new Error(`Unknown IR type: ${r[0]}`)}const Hw={COLORED:1,UNCOLORED:2},ip=class ip{constructor(e,t,i,n){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=n}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:n,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),hg("TilingType: "+s);const u=t[0],h=t[1],f=t[2],m=t[3],p=f-u,g=m-h,b=new Float32Array(2);se.singularValueDecompose2dScale(this.matrix,b);const[y,N]=b;se.singularValueDecompose2dScale(this.baseTransform,b);const w=y*b[0],_=N*b[1];let P=p,O=g,T=!1,C=!1;const D=Math.ceil(l*w),k=Math.ceil(c*_),M=Math.ceil(p*w),j=Math.ceil(g*_);D>=M?P=l:T=!0,k>=j?O=c:C=!0;const V=this.getSizeAndScale(P,this.ctx.canvas.width,w),B=this.getSizeAndScale(O,this.ctx.canvas.height,_),X=e.cachedCanvases.getCanvas("pattern",V.size,B.size),$=X.context,U=o.createCanvasGraphics($);if(U.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(U,n,a),$.translate(-V.scale*u,-B.scale*h),U.transform(V.scale,0,0,B.scale,0,0),$.save(),this.clipBbox(U,u,h,f,m),U.baseTransform=et(U.ctx),U.executeOperatorList(i),U.endDrawing(),$.restore(),T||C){const oe=X.canvas;T&&(P=l),C&&(O=c);const Q=this.getSizeAndScale(P,this.ctx.canvas.width,w),ye=this.getSizeAndScale(O,this.ctx.canvas.height,_),te=Q.size,H=ye.size,z=e.cachedCanvases.getCanvas("pattern-workaround",te,H),Ee=z.context,ue=T?Math.floor(p/l):0,Te=C?Math.floor(g/c):0;for(let fe=0;fe<=ue;fe++)for(let R=0;R<=Te;R++)Ee.drawImage(oe,te*fe,H*R,te,H,0,0,te,H);return{canvas:z.canvas,scaleX:Q.scale,scaleY:ye.scale,offsetX:u,offsetY:h}}return{canvas:X.canvas,scaleX:V.scale,scaleY:B.scale,offsetX:u,offsetY:h}}getSizeAndScale(e,t,i){const n=Math.max(ip.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=n?s=n:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,n,s){const a=n-t,o=s-i;e.ctx.rect(t,i,a,o),se.axialAlignedBoundingBox([t,i,n,s],et(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const n=e.ctx,s=e.current;switch(t){case Hw.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;n.fillStyle=s.fillColor=a,n.strokeStyle=s.strokeColor=o;break;case Hw.UNCOLORED:n.fillStyle=n.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new g6(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,n){let s=i;n!==qt.SHADING&&(s=se.transform(s,t.baseTransform),this.matrix&&(s=se.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};q(ip,"MAX_PATTERN_SIZE",3e3);let Ab=ip;function Z6({src:r,srcPos:e=0,dest:t,width:i,height:n,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Qt.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],u=i>>3,h=i&7,f=r.length;t=new Uint32Array(t.buffer);let m=0;for(let p=0;p<n;p++){for(const b=e+u;e<b;e++){const y=e<f?r[e]:255;t[m++]=y&128?c:l,t[m++]=y&64?c:l,t[m++]=y&32?c:l,t[m++]=y&16?c:l,t[m++]=y&8?c:l,t[m++]=y&4?c:l,t[m++]=y&2?c:l,t[m++]=y&1?c:l}if(h===0)continue;const g=e<f?r[e++]:255;for(let b=0;b<h;b++)t[m++]=g&1<<7-b?c:l}return{srcPos:e,destPos:m}}const zw=16,qw=100,J6=15,Ww=10,_r=16,Yg=new DOMMatrix,Wr=new Float32Array(2),Pl=new Float32Array([1/0,1/0,-1/0,-1/0]);function e7(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},r.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},r.transform=function(t,i,n,s,a,o){e.transform(t,i,n,s,a,o),this.__originalTransform(t,i,n,s,a,o)},r.setTransform=function(t,i,n,s,a,o){e.setTransform(t,i,n,s,a,o),this.__originalSetTransform(t,i,n,s,a,o)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},r.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},r.bezierCurveTo=function(t,i,n,s,a,o){e.bezierCurveTo(t,i,n,s,a,o),this.__originalBezierCurveTo(t,i,n,s,a,o)},r.rect=function(t,i,n,s){e.rect(t,i,n,s),this.__originalRect(t,i,n,s)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class t7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,t,i)):(n=this.canvasFactory.create(t,i),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Nf(r,e,t,i,n,s,a,o,l,c){const[u,h,f,m,p,g]=et(r);if(h===0&&f===0){const N=a*u+p,w=Math.round(N),_=o*m+g,P=Math.round(_),O=(a+l)*u+p,T=Math.abs(Math.round(O)-w)||1,C=(o+c)*m+g,D=Math.abs(Math.round(C)-P)||1;return r.setTransform(Math.sign(u),0,0,Math.sign(m),w,P),r.drawImage(e,t,i,n,s,0,0,T,D),r.setTransform(u,h,f,m,p,g),[T,D]}if(u===0&&m===0){const N=o*f+p,w=Math.round(N),_=a*h+g,P=Math.round(_),O=(o+c)*f+p,T=Math.abs(Math.round(O)-w)||1,C=(a+l)*h+g,D=Math.abs(Math.round(C)-P)||1;return r.setTransform(0,Math.sign(h),Math.sign(f),0,w,P),r.drawImage(e,t,i,n,s,0,0,D,T),r.setTransform(u,h,f,m,p,g),[D,T]}r.drawImage(e,t,i,n,s,a,o,l,c);const b=Math.hypot(u,h),y=Math.hypot(f,m);return[b*l,y*c]}class Gw{constructor(e,t){q(this,"alphaIsShape",!1);q(this,"fontSize",0);q(this,"fontSizeScale",1);q(this,"textMatrix",null);q(this,"textMatrixScale",1);q(this,"fontMatrix",Zv);q(this,"leading",0);q(this,"x",0);q(this,"y",0);q(this,"lineX",0);q(this,"lineY",0);q(this,"charSpacing",0);q(this,"wordSpacing",0);q(this,"textHScale",1);q(this,"textRenderingMode",Xt.FILL);q(this,"textRise",0);q(this,"fillColor","#000000");q(this,"strokeColor","#000000");q(this,"patternFill",!1);q(this,"patternStroke",!1);q(this,"fillAlpha",1);q(this,"strokeAlpha",1);q(this,"lineWidth",1);q(this,"activeSMask",null);q(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Pl.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=qt.FILL,t=null){const i=this.minMax.slice();if(e===qt.STROKE){t||Ue("Stroke bounding box must include transform."),se.singularValueDecompose2dScale(t,Wr);const n=Wr[0]*this.lineWidth/2,s=Wr[1]*this.lineWidth/2;i[0]-=n,i[1]-=s,i[2]+=n,i[3]+=s}return i}updateClipFromPath(){const e=se.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Pl,0)}getClippedPathBoundingBox(e=qt.FILL,t=null){return se.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Kw(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,i=e.width,n=t%_r,s=(t-n)/_r,a=n===0?s:s+1,o=r.createImageData(i,_r);let l=0,c;const u=e.data,h=o.data;let f,m,p,g;if(e.kind===Cf.GRAYSCALE_1BPP){const b=u.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),N=y.length,w=i+7>>3,_=4294967295,P=Qt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(p=f<s?_r:n,c=0,m=0;m<p;m++){const O=b-l;let T=0;const C=O>w?i:O*8-7,D=C&-8;let k=0,M=0;for(;T<D;T+=8)M=u[l++],y[c++]=M&128?_:P,y[c++]=M&64?_:P,y[c++]=M&32?_:P,y[c++]=M&16?_:P,y[c++]=M&8?_:P,y[c++]=M&4?_:P,y[c++]=M&2?_:P,y[c++]=M&1?_:P;for(;T<C;T++)k===0&&(M=u[l++],k=128),y[c++]=M&k?_:P,k>>=1}for(;c<N;)y[c++]=0;r.putImageData(o,0,f*_r)}}else if(e.kind===Cf.RGBA_32BPP){for(m=0,g=i*_r*4,f=0;f<s;f++)h.set(u.subarray(l,l+g)),l+=g,r.putImageData(o,0,m),m+=_r;f<a&&(g=i*n*4,h.set(u.subarray(l,l+g)),r.putImageData(o,0,m))}else if(e.kind===Cf.RGB_24BPP)for(p=_r,g=i*p,f=0;f<a;f++){for(f>=s&&(p=n,g=i*p),c=0,m=g;m--;)h[c++]=u[l++],h[c++]=u[l++],h[c++]=u[l++],h[c++]=255;r.putImageData(o,0,f*_r)}else throw new Error(`bad image kind: ${e.kind}`)}function Qw(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,n=t%_r,s=(t-n)/_r,a=n===0?s:s+1,o=r.createImageData(i,_r);let l=0;const c=e.data,u=o.data;for(let h=0;h<a;h++){const f=h<s?_r:n;({srcPos:l}=Z6({src:c,srcPos:l,dest:u,width:i,height:f,nonBlackColor:0})),r.putImageData(o,0,h*_r)}}function xu(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)r[i]!==void 0&&(e[i]=r[i]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function wf(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function Yw(r,e){if(e)return!0;se.singularValueDecompose2dScale(r,Wr);const t=Math.fround(xn.pixelRatio*xa.PDF_TO_CSS_UNITS);return Wr[0]<=t&&Wr[1]<=t}const r7=["butt","round","square"],i7=["miter","round","bevel"],n7={},Xw={};var zi,Eb,Sb,_b;const jx=class jx{constructor(e,t,i,n,s,{optionalContentConfig:a,markedContentStack:o=null},l,c){E(this,zi);this.ctx=e,this.current=new Gw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new t7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:n=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...et(this.compositeCtx))}this.ctx.save(),wf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=et(this.ctx)}executeOperatorList(e,t,i,n){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>Ww&&typeof i=="function",u=c?Date.now()+J6:0;let h=0;const f=this.commonObjs,m=this.objs;let p;for(;;){if(n!==void 0&&o===n.nextBreakPoint)return n.breakIt(o,i),o;if(p=a[o],p!==Vm.dependency)this[p].apply(this,s[o]);else for(const g of s[o]){const b=g.startsWith("g_")?f:m;if(!b.has(g))return b.get(g,i),o}if(o++,o===l)return o;if(c&&++h>Ww){if(Date.now()>u)return i(),o;h=0}}}endDrawing(){S(this,zi,Eb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),S(this,zi,Sb).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,n=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,l=n,c="prescale1",u,h;for(;s>2&&o>1||a>2&&l>1;){let f=o,m=l;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/m),u=this.cachedCanvases.getCanvas(c,f,m),h=u.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,o,l,0,0,f,m),e=u.canvas,o=f,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:n}=e,s=this.current.fillColor,a=this.current.patternFill,o=et(t);let l,c,u,h;if((e.bitmap||e.data)&&e.count>1){const D=e.bitmap||e.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(D),l||(l=new Map,this._cachedBitmapsMap.set(D,l));const k=l.get(c);if(k&&!a){const M=Math.round(Math.min(o[0],o[2])+o[4]),j=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:k,offsetX:M,offsetY:j}}u=k}u||(h=this.cachedCanvases.getCanvas("maskCanvas",i,n),Qw(h.context,e));let f=se.transform(o,[1/i,0,0,-1/n,0,0]);f=se.transform(f,[1,0,0,1,0,-n]);const m=Pl.slice();se.axialAlignedBoundingBox([0,0,i,n],f,m);const[p,g,b,y]=m,N=Math.round(b-p)||1,w=Math.round(y-g)||1,_=this.cachedCanvases.getCanvas("fillCanvas",N,w),P=_.context,O=p,T=g;P.translate(-O,-T),P.transform(...f),u||(u=this._scaleImage(h.canvas,Yi(P)),u=u.img,l&&a&&l.set(c,u)),P.imageSmoothingEnabled=Yw(et(P),e.interpolate),Nf(P,u,0,0,u.width,u.height,0,0,i,n),P.globalCompositeOperation="source-in";const C=se.transform(Yi(P),[1,0,0,1,-O,-T]);return P.fillStyle=a?s.getPattern(t,this,C,qt.FILL):s,P.fillRect(0,0,i,n),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,_.canvas)),{canvas:_.canvas,offsetX:Math.round(O),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=r7[e]}setLineJoin(e){this.ctx.lineJoin=i7[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx;const s=this.ctx=n.context;s.setTransform(this.suspendedCtx.getTransform()),xu(this.suspendedCtx,s),e7(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),xu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,n){const s=n[0],a=n[1],o=n[2]-s,l=n[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,i,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,n,s,a,o,l,c,u,h){let f=e.canvas,m=l-u,p=c-h;if(a)if(m<0||p<0||m+i>f.width||p+n>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",i,n),y=b.context;y.drawImage(f,-m,-p),y.globalCompositeOperation="destination-atop",y.fillStyle=a,y.fillRect(0,0,i,n),y.globalCompositeOperation="source-over",f=b.canvas,m=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(m,p,i,n),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,p,i,n),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,c,i,n),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,m,p,i,n,l,c,i,n),t.restore()}save(){this.inSMaskMode&&xu(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&xu(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,n,s,a){this.ctx.transform(e,t,i,n,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let[n]=t;if(!i){n||(n=t[0]=new Path2D),this[e](n);return}if(!(n instanceof Path2D)){const s=t[0]=new Path2D;for(let a=0,o=n.length;a<o;)switch(n[a++]){case bf.moveTo:s.moveTo(n[a++],n[a++]);break;case bf.lineTo:s.lineTo(n[a++],n[a++]);break;case bf.curveTo:s.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);break;case bf.closePath:s.closePath();break;default:he(`Unrecognized drawing path operator: ${n[a-1]}`);break}n=s}se.axialAlignedBoundingBox(i,et(this.ctx),this.current.minMax),this[e](n)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const i=this.ctx,n=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const s=n.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=n.getPattern(i,this,Yi(i),qt.STROKE),s){const a=new Path2D;a.addPath(e,i.getTransform().invertSelf().multiplySelf(s)),e=a}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(qt.STROKE,et(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const i=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let a=!1;if(s){const l=n.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=n.getPattern(i,this,Yi(i),qt.FILL),l){const c=new Path2D;c.addPath(e,i.getTransform().invertSelf().multiplySelf(l)),e=c}a=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),a&&i.restore(),t&&this.consumePath(e,o)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=n7}eoClip(){this.pendingClip=Xw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const i=new Path2D,n=t.getTransform().invertSelf();for(const{transform:s,x:a,y:o,fontSize:l,path:c}of e)i.addPath(c,new DOMMatrix(s).preMultiplySelf(n).translate(a,o).scale(l,-l));t.clip(i),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const i=this.commonObjs.get(e),n=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=i.fontMatrix||Zv,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&he("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=((u=i.systemFontInfo)==null?void 0:u.css)||`"${s}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<zw?c=zw:t>qw&&(c=qw),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,n,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&Xt.FILL_STROKE_MASK,f=!!(c&Xt.ADD_TO_PATH_FLAG),m=o.patternFill&&!l.missingFile,p=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||f||m||p)&&(g=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||m||p){a.save(),a.translate(t,i),a.scale(u,-u);let b;if((h===Xt.FILL||h===Xt.FILL_STROKE)&&(n?(b=a.getTransform(),a.setTransform(...n),a.fill(S(this,zi,_b).call(this,g,b,n))):a.fill(g)),h===Xt.STROKE||h===Xt.FILL_STROKE)if(s){b||(b=a.getTransform()),a.setTransform(...s);const{a:y,b:N,c:w,d:_}=b,P=se.inverseTransform(s),O=se.transform([y,N,w,_,0,0],P);se.singularValueDecompose2dScale(O,Wr),a.lineWidth*=Math.max(Wr[0],Wr[1])/u,a.stroke(S(this,zi,_b).call(this,g,b,s))}else a.lineWidth/=u,a.stroke(g);a.restore()}else(h===Xt.FILL||h===Xt.FILL_STROKE)&&a.fillText(e,t,i),(h===Xt.STROKE||h===Xt.FILL_STROKE)&&a.strokeText(e,t,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:et(a),x:t,y:i,fontSize:u,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){i=!0;break}return we(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const n=t.fontSize;if(n===0)return;const s=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,h=e.length,f=i.vertical,m=f?1:-1,p=i.defaultVMetrics,g=n*t.fontMatrix[0],b=t.textRenderingMode===Xt.FILL&&!i.disableFontFace&&!t.patternFill;s.save(),t.textMatrix&&s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),c>0?s.scale(u,-1):s.scale(u,1);let y,N;if(t.patternFill){s.save();const T=t.fillColor.getPattern(s,this,Yi(s),qt.FILL);y=et(s),s.restore(),s.fillStyle=T}if(t.patternStroke){s.save();const T=t.strokeColor.getPattern(s,this,Yi(s),qt.STROKE);N=et(s),s.restore(),s.strokeStyle=T}let w=t.lineWidth;const _=t.textMatrixScale;if(_===0||w===0){const T=t.textRenderingMode&Xt.FILL_STROKE_MASK;(T===Xt.STROKE||T===Xt.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=_;if(a!==1&&(s.scale(a,a),w/=a),s.lineWidth=w,i.isInvalidPDFjsFont){const T=[];let C=0;for(const D of e)T.push(D.unicode),C+=D.width;s.fillText(T.join(""),0,0),t.x+=C*g*u,s.restore(),this.compose();return}let P=0,O;for(O=0;O<h;++O){const T=e[O];if(typeof T=="number"){P+=m*T*n/1e3;continue}let C=!1;const D=(T.isSpace?l:0)+o,k=T.fontChar,M=T.accent;let j,V,B=T.width;if(f){const $=T.vmetric||p,U=-(T.vmetric?$[1]:B*.5)*g,oe=$[2]*g;B=$?-$[0]:B,j=U/a,V=(P+oe)/a}else j=P/a,V=0;if(i.remeasure&&B>0){const $=s.measureText(k).width*1e3/n*a;if(B<$&&this.isFontSubpixelAAEnabled){const U=B/$;C=!0,s.save(),s.scale(U,1),j/=U}else B!==$&&(j+=(B-$)/2e3*n/a)}if(this.contentVisible&&(T.isInFont||i.missingFile)){if(b&&!M)s.fillText(k,j,V);else if(this.paintChar(k,j,V,y,N),M){const $=j+n*M.offset.x/a,U=V-n*M.offset.y/a;this.paintChar(M.fontChar,$,U,y,N)}}const X=f?B*g-D*c:B*g+D*c;P+=X,C&&s.restore()}f?t.y-=P:t.x+=P*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,n=i.font,s=i.fontSize,a=i.fontDirection,o=n.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*a,h=i.fontMatrix||Zv,f=e.length,m=i.textRenderingMode===Xt.INVISIBLE;let p,g,b,y;if(!(m||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),i.textMatrix&&t.transform(...i.textMatrix),t.translate(i.x,i.y+i.textRise),t.scale(u,a),p=0;p<f;++p){if(g=e[p],typeof g=="number"){y=o*g*s/1e3,this.ctx.translate(y,0),i.x+=y*u;continue}const N=(g.isSpace?c:0)+l,w=n.charProcOperatorList[g.operatorListId];w?this.contentVisible&&(this.save(),t.scale(s,s),t.transform(...h),this.executeOperatorList(w),this.restore()):he(`Type3 character "${g.operatorListId}" is not available.`);const _=[g.width,0];se.applyTransform(_,h),b=_[0]*s+N,t.translate(b,0),i.x+=b*u}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,s,a){const o=new Path2D;o.rect(i,n,s-i,a-n),this.ctx.clip(o),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=this.baseTransform||et(this.ctx),n={createCanvasGraphics:s=>new jx(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Ab(e,this.ctx,n,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=X6(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Yi(t),qt.SHADING);const n=Yi(t);if(n){const{width:s,height:a}=t.canvas,o=Pl.slice();se.axialAlignedBoundingBox([0,0,s,a],n,o);const[l,c,u,h]=o;this.ctx.fillRect(l,c,u-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ue("Should not call beginInlineImage")}beginImageData(){Ue("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=et(this.ctx),t)){se.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[i,n,s,a]=t,o=new Path2D;o.rect(i,n,s-i,a-n),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||hg("TODO: Support non-isolated groups."),e.knockout&&he("Knockout groups not supported.");const i=et(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=Pl.slice();se.axialAlignedBoundingBox(e.bbox,et(t),n);const s=[0,0,t.canvas.width,t.canvas.height];n=se.intersect(n,s)||[0,0,0,0];const a=Math.floor(n[0]),o=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),c=Math.max(Math.ceil(n[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,l,c),f=h.context;f.translate(-a,-o),f.transform(...i);let m=new Path2D;const[p,g,b,y]=e.bbox;if(m.rect(p,g,b-p,y-g),e.matrix){const N=new Path2D;N.addPath(m,new DOMMatrix(e.matrix)),m=N}f.clip(m),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),xu(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=et(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const s=Pl.slice();se.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],n,s),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,n,s){if(S(this,zi,Eb).call(this),wf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o,se.singularValueDecompose2dScale(et(this.ctx),Wr);const{viewportScale:l}=this,c=Math.ceil(a*this.outputScaleX*l),u=Math.ceil(o*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(Wr[0],0,0,-Wr[1],0,o*Wr[1]),wf(this.ctx)}else{wf(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],a,o),this.ctx.clip(l)}}this.current=new Gw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,zi,Sb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,n=this._createMaskCanvas(e),s=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,n=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=et(o);o.transform(t,i,n,s,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,h=a.length;u<h;u+=2){const f=se.transform(l,[t,i,n,s,a[u],a[u+1]]);o.drawImage(c.canvas,f[4],f[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of e){const{data:a,width:o,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=u.context;h.save();const f=this.getObject(a,s);Qw(h,f),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,Yi(t),qt.FILL):i,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...c),t.scale(1,-1),Nf(t,u.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){he("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){he("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let c=0,u=n.length;c<u;c+=2)l.push({transform:[t,0,0,i,n[c],n[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:n}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,n),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,n=this.ctx;this.save();const{filter:s}=n;s!=="none"&&s!==""&&(n.filter="none"),n.scale(1/t,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Kw(c,e),a=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(a,Yi(n));n.imageSmoothingEnabled=Yw(et(n),e.interpolate),Nf(n,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const s=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;Kw(l,e),n=this.applyTransferMapsToCanvas(l)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),Nf(i,n,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(i||(this.pendingClip===Xw?n.clip(e,"evenodd"):n.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=et(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:n,d:s}=this.ctx.getTransform();let a,o;if(i===0&&n===0){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(e===0)a=o=1/l;else{const u=l*e;a=o=u<1?1/u:1}else if(e===0)a=1/l,o=1/c;else{const u=l*e,h=c*e;a=u<1?1/u:1,o=h<1?1/h:1}}else{const l=Math.abs(t*s-i*n),c=Math.hypot(t,i),u=Math.hypot(n,s);if(e===0)a=u/l,o=c/l;else{const h=e*l;a=u>h?u/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:n}}=this,[s,a]=this.getScaleForStroking();if(s===a){i.lineWidth=(n||1)*s,i.stroke(e);return}const o=i.getLineDash();t&&i.save(),i.scale(s,a),Yg.a=1/s,Yg.d=1/a;const l=new Path2D;if(l.addPath(e,Yg),o.length>0){const c=Math.max(s,a);i.setLineDash(o.map(u=>u/c)),i.lineDashOffset/=c}i.lineWidth=n||1,i.stroke(l),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};zi=new WeakSet,Eb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Sb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},_b=function(e,t,i){const n=new Path2D;return n.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),n};let kl=jx;for(const r in Vm)kl.prototype[r]!==void 0&&(kl.prototype[Vm[r]]=kl.prototype[r]);var Md,Rd;class gi{static get workerPort(){return d(this,Md)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,Md,e)}static get workerSrc(){return d(this,Rd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,Rd,e)}}Md=new WeakMap,Rd=new WeakMap,E(gi,Md,null),E(gi,Rd,"");var Xl,jd;class s7{constructor({parsedData:e,rawData:t}){E(this,Xl);E(this,jd);x(this,Xl,e),x(this,jd,t)}getRaw(){return d(this,jd)}get(e){return d(this,Xl).get(e)??null}[Symbol.iterator](){return d(this,Xl).entries()}}Xl=new WeakMap,jd=new WeakMap;const wl=Symbol("INTERNAL");var Id,Ld,Ud,Zl;class a7{constructor(e,{name:t,intent:i,usage:n,rbGroups:s}){E(this,Id,!1);E(this,Ld,!1);E(this,Ud,!1);E(this,Zl,!0);x(this,Id,!!(e&zr.DISPLAY)),x(this,Ld,!!(e&zr.PRINT)),this.name=t,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(d(this,Ud))return d(this,Zl);if(!d(this,Zl))return!1;const{print:e,view:t}=this.usage;return d(this,Id)?(t==null?void 0:t.viewState)!=="OFF":d(this,Ld)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==wl&&Ue("Internal method `_setVisible` called."),x(this,Ud,i),x(this,Zl,t)}}Id=new WeakMap,Ld=new WeakMap,Ud=new WeakMap,Zl=new WeakMap;var Ws,je,Jl,ec,Fd,Pb;class o7{constructor(e,t=zr.DISPLAY){E(this,Fd);E(this,Ws,null);E(this,je,new Map);E(this,Jl,null);E(this,ec,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,ec,e.order);for(const i of e.groups)d(this,je).set(i.id,new a7(t,i));if(e.baseState==="OFF")for(const i of d(this,je).values())i._setVisible(wl,!1);for(const i of e.on)d(this,je).get(i)._setVisible(wl,!0);for(const i of e.off)d(this,je).get(i)._setVisible(wl,!1);x(this,Jl,this.getHash())}}isVisible(e){if(d(this,je).size===0)return!0;if(!e)return hg("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,je).has(e.id)?d(this,je).get(e.id).visible:(he(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return S(this,Fd,Pb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,je).has(t))return he(`Optional content group not found: ${t}`),!0;if(d(this,je).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,je).has(t))return he(`Optional content group not found: ${t}`),!0;if(!d(this,je).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,je).has(t))return he(`Optional content group not found: ${t}`),!0;if(!d(this,je).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,je).has(t))return he(`Optional content group not found: ${t}`),!0;if(d(this,je).get(t).visible)return!1}return!0}return he(`Unknown optional content policy ${e.policy}.`),!0}return he(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var s;const n=d(this,je).get(e);if(!n){he(`Optional content group not found: ${e}`);return}if(i&&t&&n.rbGroups.length)for(const a of n.rbGroups)for(const o of a)o!==e&&((s=d(this,je).get(o))==null||s._setVisible(wl,!1,!0));n._setVisible(wl,!!t,!0),x(this,Ws,null)}setOCGState({state:e,preserveRB:t}){let i;for(const n of e){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const s=d(this,je).get(n);if(s)switch(i){case"ON":this.setVisibility(n,!0,t);break;case"OFF":this.setVisibility(n,!1,t);break;case"Toggle":this.setVisibility(n,!s.visible,t);break}}x(this,Ws,null)}get hasInitialVisibility(){return d(this,Jl)===null||this.getHash()===d(this,Jl)}getOrder(){return d(this,je).size?d(this,ec)?d(this,ec).slice():[...d(this,je).keys()]:null}getGroup(e){return d(this,je).get(e)||null}getHash(){if(d(this,Ws)!==null)return d(this,Ws);const e=new qC;for(const[t,i]of d(this,je))e.update(`${t}:${i.visible}`);return x(this,Ws,e.hexdigest())}[Symbol.iterator](){return d(this,je).entries()}}Ws=new WeakMap,je=new WeakMap,Jl=new WeakMap,ec=new WeakMap,Fd=new WeakSet,Pb=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let n=1;n<t;n++){const s=e[n];let a;if(Array.isArray(s))a=S(this,Fd,Pb).call(this,s);else if(d(this,je).has(s))a=d(this,je).get(s).visible;else return he(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class l7{constructor(e,{disableRange:t=!1,disableStream:i=!1}){ft(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});ft(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,n,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||s.call(n,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ft(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new c7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new u7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class c7{constructor(e,t,i=!1,n=null){this._stream=e,this._done=i||!1,this._filename=Ex(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class u7{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function d7(r){let e=!0,t=i("filename\\*","i").exec(r);if(t){t=t[1];let u=o(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=a(r),t){const u=c(t);return s(u)}if(t=i("filename","i").exec(r),t){t=t[1];let u=o(t);return u=c(u),s(u)}function i(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function n(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(u,{fatal:!0}),m=Yh(h);h=f.decode(m),e=!1}catch{}}return h}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),e&&(u=n("iso-8859-1",u))),u}function a(u){const h=[];let f;const m=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(u))!==null;){let[,g,b,y]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[b,y]}const p=[];for(let g=0;g<h.length&&g in h;++g){let[b,y]=h[g];y=o(y),b&&(y=unescape(y),g===0&&(y=l(y))),p.push(y)}return p.join("")}function o(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function l(u){const h=u.indexOf("'");if(h===-1)return u;const f=u.slice(0,h),p=u.slice(h+1).replace(/^[^']*'/,"");return n(f,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,p){if(m==="q"||m==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),n(f,p);try{p=atob(p)}catch{}return n(f,p)})}return""}function iD(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const i in e){const n=e[i];n!==void 0&&t.append(i,n)}return t}function mg(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function nD({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(n.suggestedLength=s,s<=2*t)||i||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function sD(r){const e=r.get("Content-Disposition");if(e){let t=d7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ex(t))return t}return null}function ef(r,e){return new $m(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function aD(r){return r===200||r===206}function oD(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function lD(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(he(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class h7{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=iD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ft(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new m7(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class f7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),n=t.url;fetch(n,oD(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=mg(s.url),!aD(s.status))throw ef(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=nD({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=sD(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ya("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class m7{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const a=n.url;fetch(a,oD(s,this._withCredentials,this._abortController)).then(o=>{const l=mg(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!aD(o.status))throw ef(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:lD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Xg=200,Zg=206;function p7(r){const e=r.response;return typeof e!="string"?e:Yh(e).buffer}class g7{constructor({url:e,httpHeaders:t,withCredentials:i}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=iD(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=Zg):n.expectedStatus=Xg,t.responseType="arraybuffer",ft(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&((n=i.onProgress)==null||n.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){i.onError(n.status);return}const s=n.status||Xg;if(!(s===Xg&&i.expectedStatus===Zg)&&s!==i.expectedStatus){i.onError(n.status);return}const o=p7(n);if(s===Zg){const l=n.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?i.onDone({begin:parseInt(c[1],10),chunk:o}):(he('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class v7{constructor(e){this._source=e,this._manager=new g7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ft(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new y7(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class b7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=mg(t.responseURL);const i=t.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=nD({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=sD(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ef(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class y7{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=mg((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=ef(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const x7=/^[a-z][a-z0-9\-+.]+:/i;function N7(r){if(x7.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class w7{constructor(e){this.source=e,this.url=N7(e.url),ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ft(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new A7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new E7(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class A7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=ef(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ya("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E7{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=e.source;this._isStreamingSupported=!n.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Nu=Symbol("INITIAL_DATA");var Rr,Vd,Cb;class cD{constructor(){E(this,Vd);E(this,Rr,Object.create(null))}get(e,t=null){if(t){const n=S(this,Vd,Cb).call(this,e);return n.promise.then(()=>t(n.data)),null}const i=d(this,Rr)[e];if(!i||i.data===Nu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=d(this,Rr)[e];return!!t&&t.data!==Nu}delete(e){const t=d(this,Rr)[e];return!t||t.data===Nu?!1:(delete d(this,Rr)[e],!0)}resolve(e,t=null){const i=S(this,Vd,Cb).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in d(this,Rr)){const{data:i}=d(this,Rr)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}x(this,Rr,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,Rr)){const{data:t}=d(this,Rr)[e];t!==Nu&&(yield[e,t])}}}Rr=new WeakMap,Vd=new WeakSet,Cb=function(e){var t;return(t=d(this,Rr))[e]||(t[e]={...Promise.withResolvers(),data:Nu})};const S7=1e5,Zw=30;var iA,Gs,Ar,$d,Bd,uo,Bn,Hd,zd,ho,tc,rc,Ks,ic,qd,nc,fo,Wd,Gd,sc,mo,Kd,Qs,ac,vs,uD,dD,Db,Xr,Ff,Ob,hD,fD;const xt=class xt{constructor({textContentSource:e,container:t,viewport:i}){E(this,vs);E(this,Gs,Promise.withResolvers());E(this,Ar,null);E(this,$d,!1);E(this,Bd,!!((iA=globalThis.FontInspector)!=null&&iA.enabled));E(this,uo,null);E(this,Bn,null);E(this,Hd,0);E(this,zd,0);E(this,ho,null);E(this,tc,null);E(this,rc,0);E(this,Ks,0);E(this,ic,Object.create(null));E(this,qd,[]);E(this,nc,null);E(this,fo,[]);E(this,Wd,new WeakMap);E(this,Gd,null);var l;if(e instanceof ReadableStream)x(this,nc,e);else if(typeof e=="object")x(this,nc,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Ar,x(this,tc,t)),x(this,Ks,i.scale*xn.pixelRatio),x(this,rc,i.rotation),x(this,Bn,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:s,pageX:a,pageY:o}=i.rawDims;x(this,Gd,[1,0,0,-1,-a,o+s]),x(this,zd,n),x(this,Hd,s),S(l=xt,Xr,hD).call(l),nl(t,i),d(this,Gs).promise.finally(()=>{d(xt,ac).delete(this),x(this,Bn,null),x(this,ic,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Qt.platform;return we(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,ho).read().then(({value:t,done:i})=>{if(i){d(this,Gs).resolve();return}d(this,uo)??x(this,uo,t.lang),Object.assign(d(this,ic),t.styles),S(this,vs,uD).call(this,t.items),e()},d(this,Gs).reject)};return x(this,ho,d(this,nc).getReader()),d(xt,ac).add(this),e(),d(this,Gs).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*xn.pixelRatio,n=e.rotation;if(n!==d(this,rc)&&(t==null||t(),x(this,rc,n),nl(d(this,tc),{rotation:n})),i!==d(this,Ks)){t==null||t(),x(this,Ks,i);const a={div:null,properties:null,ctx:S(s=xt,Xr,Ff).call(s,d(this,uo))};for(const o of d(this,fo))a.properties=d(this,Wd).get(o),a.div=o,S(this,vs,Db).call(this,a)}}cancel(){var t;const e=new ya("TextLayer task cancelled.");(t=d(this,ho))==null||t.cancel(e).catch(()=>{}),x(this,ho,null),d(this,Gs).reject(e)}get textDivs(){return d(this,fo)}get textContentItemsStr(){return d(this,qd)}static cleanup(){if(!(d(this,ac).size>0)){d(this,sc).clear();for(const{canvas:e}of d(this,mo).values())e.remove();d(this,mo).clear()}}};Gs=new WeakMap,Ar=new WeakMap,$d=new WeakMap,Bd=new WeakMap,uo=new WeakMap,Bn=new WeakMap,Hd=new WeakMap,zd=new WeakMap,ho=new WeakMap,tc=new WeakMap,rc=new WeakMap,Ks=new WeakMap,ic=new WeakMap,qd=new WeakMap,nc=new WeakMap,fo=new WeakMap,Wd=new WeakMap,Gd=new WeakMap,sc=new WeakMap,mo=new WeakMap,Kd=new WeakMap,Qs=new WeakMap,ac=new WeakMap,vs=new WeakSet,uD=function(e){var n,s;if(d(this,$d))return;(s=d(this,Bn)).ctx??(s.ctx=S(n=xt,Xr,Ff).call(n,d(this,uo)));const t=d(this,fo),i=d(this,qd);for(const a of e){if(t.length>S7){he("Ignoring additional textDivs for performance reasons."),x(this,$d,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=d(this,Ar);x(this,Ar,document.createElement("span")),d(this,Ar).classList.add("markedContent"),a.id!==null&&d(this,Ar).setAttribute("id",`${a.id}`),o.append(d(this,Ar))}else a.type==="endMarkedContent"&&x(this,Ar,d(this,Ar).parentNode);continue}i.push(a.str),S(this,vs,dD).call(this,a)}},dD=function(e){var g;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,fo).push(t);const n=se.transform(d(this,Gd),e.transform);let s=Math.atan2(n[1],n[0]);const a=d(this,ic)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=d(this,Bd)&&a.fontSubstitution||a.fontFamily;o=xt.fontFamilyMap.get(o)||o;const l=Math.hypot(n[2],n[3]),c=l*S(g=xt,Xr,fD).call(g,o,a,d(this,uo));let u,h;s===0?(u=n[4],h=n[5]-c):(u=n[4]+c*Math.sin(s),h=n[5]-c*Math.cos(s));const f="calc(var(--total-scale-factor) *",m=t.style;d(this,Ar)===d(this,tc)?(m.left=`${(100*u/d(this,zd)).toFixed(2)}%`,m.top=`${(100*h/d(this,Hd)).toFixed(2)}%`):(m.left=`${f}${u.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(d(xt,Qs)*l).toFixed(2)}px)`,m.fontFamily=o,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,Bd)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);b!==y&&Math.max(b,y)/Math.min(b,y)>1.5&&(p=!0)}if(p&&(i.canvasWidth=a.vertical?e.height:e.width),d(this,Wd).set(t,i),d(this,Bn).div=t,d(this,Bn).properties=i,S(this,vs,Db).call(this,d(this,Bn)),i.hasText&&d(this,Ar).append(t),i.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),d(this,Ar).append(b)}},Db=function(e){var o;const{div:t,properties:i,ctx:n}=e,{style:s}=t;let a="";if(d(xt,Qs)>1&&(a=`scale(${1/d(xt,Qs)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=s,{canvasWidth:c,fontSize:u}=i;S(o=xt,Xr,Ob).call(o,n,u*d(this,Ks),l);const{width:h}=n.measureText(t.textContent);h>0&&(a=`scaleX(${c*d(this,Ks)/h}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Xr=new WeakSet,Ff=function(e=null){let t=d(this,mo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,mo).set(e,t),d(this,Kd).set(t,{size:0,family:""})}return t},Ob=function(e,t,i){const n=d(this,Kd).get(e);t===n.size&&i===n.family||(e.font=`${t}px ${i}`,n.size=t,n.family=i)},hD=function(){if(d(this,Qs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),x(this,Qs,e.getBoundingClientRect().height),e.remove()},fD=function(e,t,i){const n=d(this,sc).get(e);if(n)return n;const s=S(this,Xr,Ff).call(this,i);s.canvas.width=s.canvas.height=Zw,S(this,Xr,Ob).call(this,s,Zw,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return o?c=o/(o+l):(Qt.platform.isFirefox&&he("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),d(this,sc).set(e,c),c},E(xt,Xr),E(xt,sc,new Map),E(xt,mo,new Map),E(xt,Kd,new WeakMap),E(xt,Qs,null),E(xt,ac,new Set);let nd=xt;class sd{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function n(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(sd.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const c of s.children)n(c)}return n(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const _7=100;function mD(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new Tb,{docId:t}=e,i=r.url?j6(r.url):null,n=r.data?I6(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof pD?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let u=r.worker instanceof ad?r.worker:null;const h=r.verbosity,f=typeof r.docBaseUrl=="string"&&!fg(r.docBaseUrl)?r.docBaseUrl:null,m=yf(r.cMapUrl),p=r.cMapPacked!==!1,g=r.CMapReaderFactory||(hr?z6:Vw),b=yf(r.iccUrl),y=yf(r.standardFontDataUrl),N=r.StandardFontDataFactory||(hr?q6:$w),w=yf(r.wasmUrl),_=r.WasmFactory||(hr?W6:Bw),P=r.stopAtErrors!==!0,O=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,T=r.isEvalSupported!==!1,C=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!hr,D=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!hr&&(Qt.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,M=typeof r.disableFontFace=="boolean"?r.disableFontFace:hr,j=r.fontExtraProperties===!0,V=r.enableXfa===!0,B=r.ownerDocument||globalThis.document,X=r.disableRange===!0,$=r.disableStream===!0,U=r.disableAutoFetch===!0,oe=r.pdfBug===!0,Q=r.CanvasFactory||(hr?H6:V6),ye=r.FilterFactory||(hr?B6:$6),te=r.enableHWA===!0,H=r.useWasm!==!1,z=l?l.length:r.length??NaN,Ee=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!hr&&!M,ue=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(g===Vw&&N===$w&&_===Bw&&m&&y&&w&&_u(m,document.baseURI)&&_u(y,document.baseURI)&&_u(w,document.baseURI)),Te=null;f6(h);const fe={canvasFactory:new Q({ownerDocument:B,enableHWA:te}),filterFactory:new ye({docId:t,ownerDocument:B}),cMapReaderFactory:ue?null:new g({baseUrl:m,isCompressed:p}),standardFontDataFactory:ue?null:new N({baseUrl:y}),wasmFactory:ue?null:new _({baseUrl:w})};u||(u=ad.create({verbosity:h,port:gi.workerPort}),e._worker=u);const R={docId:t,apiVersion:"5.3.31",data:n,password:o,disableAutoFetch:U,rangeChunkSize:c,length:z,docBaseUrl:f,enableXfa:V,evaluatorOptions:{maxImageSize:O,disableFontFace:M,ignoreErrors:P,isEvalSupported:T,isOffscreenCanvasSupported:C,isImageDecoderSupported:D,canvasMaxAreaInBytes:k,fontExtraProperties:j,useSystemFonts:Ee,useWasm:H,useWorkerFetch:ue,cMapUrl:m,iccUrl:b,standardFontDataUrl:y,wasmUrl:w}},I={ownerDocument:B,pdfBug:oe,styleElement:Te,loadingParams:{disableAutoFetch:U,enableXfa:V}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const W=u.messageHandler.sendWithPromise("GetDocRequest",R,n?[n.buffer]:null);let G;if(l)G=new l7(l,{disableRange:X,disableStream:$});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");const F=_u(i)?h7:hr?w7:v7;G=new F({url:i,length:z,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:X,disableStream:$})}return W.then(F=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const be=new Tu(t,F,u.port),re=new D7(be,e,G,I,fe);e._transport=re,be.send("Ready",null)})}).catch(e._capability.reject),e}var np;const sp=class sp{constructor(){q(this,"_capability",Promise.withResolvers());q(this,"_transport",null);q(this,"_worker",null);q(this,"docId",`d${ar(sp,np)._++}`);q(this,"destroyed",!1);q(this,"onPassword",null);q(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,i,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};np=new WeakMap,E(sp,np,0);let Tb=sp;var po,Qd,Yd,Xd,Zd;class pD{constructor(e,t,i=!1,n=null){E(this,po,Promise.withResolvers());E(this,Qd,[]);E(this,Yd,[]);E(this,Xd,[]);E(this,Zd,[]);this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=n}addRangeListener(e){d(this,Zd).push(e)}addProgressListener(e){d(this,Xd).push(e)}addProgressiveReadListener(e){d(this,Yd).push(e)}addProgressiveDoneListener(e){d(this,Qd).push(e)}onDataRange(e,t){for(const i of d(this,Zd))i(e,t)}onDataProgress(e,t){d(this,po).promise.then(()=>{for(const i of d(this,Xd))i(e,t)})}onDataProgressiveRead(e){d(this,po).promise.then(()=>{for(const t of d(this,Yd))t(e)})}onDataProgressiveDone(){d(this,po).promise.then(()=>{for(const e of d(this,Qd))e()})}transportReady(){d(this,po).resolve()}requestDataRange(e,t){Ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}po=new WeakMap,Qd=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,Zd=new WeakMap;class P7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return we(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hn,go,Iu;class C7{constructor(e,t,i,n=!1){E(this,go);E(this,Hn,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=n?new Lw:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new cD,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new Zh({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return we(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:n=Os.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:h=!1}){var _,P;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(i,n,u,h),{renderingIntent:m,cacheKey:p}=f;x(this,Hn,!1),o||(o=this._transport.getOptionalContentConfig(m));let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const b=!!(m&zr.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(f));const y=O=>{var T;g.renderTasks.delete(N),b&&x(this,Hn,!0),S(this,go,Iu).call(this),O?(N.capability.reject(O),this._abortOperatorList({intentState:g,reason:O instanceof Error?O:new Error(O)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new kb({callback:y,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||(g.renderTasks=new Set)).add(N);const w=N.task;return Promise.all([g.displayReadyCapability.promise,o]).then(([O,T])=>{var C;if(this.destroyed){y();return}if((C=this._stats)==null||C.time("Rendering"),!(T.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:O,optionalContentConfig:T}),N.operatorListChanged()}).catch(y),w}getOperatorList({intent:e="display",annotationMode:t=Os.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,i,n,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>sd.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,n){function s(){a.read().then(function({value:l,done:c}){if(c){i(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},n)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),x(this,Hn,!1),Promise.all(e)}cleanup(e=!1){x(this,Hn,!0);const t=S(this,go,Iu).call(this);return e&&t&&this._stats&&(this._stats=new Lw),t}_startRenderPage(e,t){var n,s;const i=this._intentStates.get(t);i&&((n=this._stats)==null||n.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&S(this,go,Iu).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:n}){const{map:s,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:n},a).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:h,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();S(this,go,Iu).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Ax){let n=_7;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new ya(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[n,s]of this._intentStates)if(s===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}Hn=new WeakMap,go=new WeakSet,Iu=function(){if(!d(this,Hn)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Hn,!1),!0};var Ys,Oi,zn,vo,ap,bo,yo,pr,Vf,gD,vD,Lu,oc,$f;const Ge=class Ge{constructor({name:e=null,port:t=null,verbosity:i=m6()}={}){E(this,pr);E(this,Ys,Promise.withResolvers());E(this,Oi,null);E(this,zn,null);E(this,vo,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(d(Ge,yo).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(Ge,yo).set(t,this),S(this,pr,gD).call(this,t)}else S(this,pr,vD).call(this)}get promise(){return d(this,Ys).promise}get port(){return d(this,zn)}get messageHandler(){return d(this,Oi)}destroy(){var e,t;this.destroyed=!0,(e=d(this,vo))==null||e.terminate(),x(this,vo,null),d(Ge,yo).delete(d(this,zn)),x(this,zn,null),(t=d(this,Oi))==null||t.destroy(),x(this,Oi,null)}static create(e){const t=d(this,yo).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ge(e)}static get workerSrc(){if(gi.workerSrc)return gi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return we(this,"_setupFakeWorkerGlobal",(async()=>d(this,oc,$f)?d(this,oc,$f):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ys=new WeakMap,Oi=new WeakMap,zn=new WeakMap,vo=new WeakMap,ap=new WeakMap,bo=new WeakMap,yo=new WeakMap,pr=new WeakSet,Vf=function(){d(this,Ys).resolve(),d(this,Oi).send("configure",{verbosity:this.verbosity})},gD=function(e){x(this,zn,e),x(this,Oi,new Tu("main","worker",e)),d(this,Oi).on("ready",()=>{}),S(this,pr,Vf).call(this)},vD=function(){if(d(Ge,bo)||d(Ge,oc,$f)){S(this,pr,Lu).call(this);return}let{workerSrc:e}=Ge;try{Ge._isSameOrigin(window.location,e)||(e=Ge._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Tu("main","worker",t),n=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?d(this,Ys).reject(new Error("Worker was destroyed")):S(this,pr,Lu).call(this)},s=new AbortController;t.addEventListener("error",()=>{d(this,vo)||n()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){n();return}x(this,Oi,i),x(this,zn,t),x(this,vo,t),S(this,pr,Vf).call(this)}),i.on("ready",o=>{if(s.abort(),this.destroyed){n();return}try{a()}catch{S(this,pr,Lu).call(this)}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{hg("The worker has been disabled.")}S(this,pr,Lu).call(this)},Lu=function(){d(Ge,bo)||(he("Setting up fake worker."),x(Ge,bo,!0)),Ge._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,Ys).reject(new Error("Worker was destroyed"));return}const t=new F6;x(this,zn,t);const i=`fake${ar(Ge,ap)._++}`,n=new Tu(i+"_worker",i,t);e.setup(n,t),x(this,Oi,new Tu(i,i+"_worker",t)),S(this,pr,Vf).call(this)}).catch(e=>{d(this,Ys).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},oc=new WeakSet,$f=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(Ge,oc),E(Ge,ap,0),E(Ge,bo,!1),E(Ge,yo,new WeakMap),hr&&(x(Ge,bo,!0),gi.workerSrc||(gi.workerSrc="./pdf.worker.mjs")),Ge._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const n=new URL(t,i);return i.origin===n.origin},Ge._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ge.fromPort=e=>{if(_6("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ge.create(e)};let ad=Ge;var qn,cn,lc,cc,Wn,xo,Uu;class D7{constructor(e,t,i,n,s){E(this,xo);E(this,qn,new Map);E(this,cn,new Map);E(this,lc,new Map);E(this,cc,new Map);E(this,Wn,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new cD,this.fontLoader=new M6({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return we(this,"annotationStorage",new Px)}getRenderingIntent(e,t=Os.ENABLE,i=null,n=!1,s=!1){let a=zr.DISPLAY,o=bb;switch(e){case"any":a=zr.ANY;break;case"display":break;case"print":a=zr.PRINT;break;default:he(`getRenderingIntent - invalid intent: ${e}`)}const l=a&zr.PRINT&&i instanceof GC?i:this.annotationStorage;switch(t){case Os.DISABLE:a+=zr.ANNOTATIONS_DISABLE;break;case Os.ENABLE:break;case Os.ENABLE_FORMS:a+=zr.ANNOTATIONS_FORMS;break;case Os.ENABLE_STORAGE:a+=zr.ANNOTATIONS_STORAGE,o=l.serializable;break;default:he(`getRenderingIntent - invalid annotationMode: ${t}`)}n&&(a+=zr.IS_EDITING),s&&(a+=zr.OPLIST);const{ids:c,hash:u}=l.modifiedIds,h=[a,o.hash,u];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=d(this,Wn))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of d(this,cn).values())e.push(n._destroy());d(this,cn).clear(),d(this,lc).clear(),d(this,cc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var n,s;this.commonObjs.clear(),this.fontLoader.clear(),d(this,qn).clear(),this.filterFactory.destroy(),nd.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new ya("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,n)=>{ft(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},n.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){n.close();return}ft(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{n.error(s)})},n.onCancel=s=>{this._fullReader.cancel(s),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:a}=this._fullReader;return(!n||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,n)=>{ft(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){n.close();return}n.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){n.close();return}ft(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{s.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new P7(i,this))}),e.on("DocException",i=>{t._capability.reject(xr(i))}),e.on("PasswordRequest",i=>{x(this,Wn,Promise.withResolvers());try{if(!t.onPassword)throw xr(i);const n=s=>{s instanceof Error?d(this,Wn).reject(s):d(this,Wn).resolve({password:s})};t.onPassword(n,i.code)}catch(n){d(this,Wn).reject(n)}return d(this,Wn).promise}),e.on("DataLoaded",i=>{var n;(n=t.onProgress)==null||n.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;d(this,cn).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,n,s])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":if("error"in s){const u=s.error;he(`Error during font loading: ${u}`),this.commonObjs.resolve(i,u);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(u,h)=>globalThis.FontInspector.fontAdded(u,h):null,l=new R6(s,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:c}=s;ft(c,"The imageRef must be defined.");for(const u of d(this,cn).values())for(const[,h]of u.objs)if((h==null?void 0:h.ref)===c)return h.dataLen?(this.commonObjs.resolve(i,structuredClone(h)),h.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([i,n,s,a])=>{var l;if(this.destroyed)return;const o=d(this,cn).get(n);if(!o.objs.has(i)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var n;this.destroyed||(n=t.onProgress)==null||n.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[i.type];if(!n)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&he("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=d(this,lc).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&d(this,cc).set(s.refStr,e);const a=new C7(t,s,this,this._params.pdfBug);return d(this,cn).set(t,a),a});return d(this,lc).set(t,n),n}getPageIndex(e){return yb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return S(this,xo,Uu).call(this,"GetFieldObjects")}hasJSActions(){return S(this,xo,Uu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,xo,Uu).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return S(this,xo,Uu).call(this,"GetOptionalContentConfig").then(t=>new o7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,qn).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(n=>{var s,a;return{info:n[0],metadata:n[1]?new s7(n[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return d(this,qn).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,cn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,qn).clear(),this.filterFactory.destroy(!0),nd.cleanup()}}cachedPageNumber(e){if(!yb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,cc).get(t)??null}}qn=new WeakMap,cn=new WeakMap,lc=new WeakMap,cc=new WeakMap,Wn=new WeakMap,xo=new WeakSet,Uu=function(e,t=null){const i=d(this,qn).get(e);if(i)return i;const n=this.messageHandler.sendWithPromise(e,t);return d(this,qn).set(e,n),n};var Xs;class O7{constructor(e){E(this,Xs,null);q(this,"onContinue",null);q(this,"onError",null);x(this,Xs,e)}get promise(){return d(this,Xs).capability.promise}cancel(e=0){d(this,Xs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,Xs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,Xs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Xs=new WeakMap;var Zs,No;const Ia=class Ia{constructor({callback:e,params:t,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:f=null}){E(this,Zs,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new O7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(d(Ia,No).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Ia,No).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:s,background:a}=this.params;this.gfx=new kl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var i,n,s;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),d(this,Zs)&&(window.cancelAnimationFrame(d(this,Zs)),x(this,Zs,null)),d(Ia,No).delete(this._canvas),e||(e=new Ax(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(n=this.task).onError)==null||s.call(n,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Zs,window.requestAnimationFrame(()=>{x(this,Zs,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Ia,No).delete(this._canvas),this.callback())))}};Zs=new WeakMap,No=new WeakMap,E(Ia,No,new WeakSet);let kb=Ia;const bD="5.3.31",T7="47ad820d9";function Jw(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function wu(r){return Math.max(0,Math.min(255,255*r))}class eA{static CMYK_G([e,t,i,n]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=wu(e),[e,e,e]}static G_HTML([e]){const t=Jw(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(wu)}static RGB_HTML(e){return`#${e.map(Jw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,i+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,i,n]){return[wu(1-Math.min(1,e+n)),wu(1-Math.min(1,i+n)),wu(1-Math.min(1,t+n))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const n=1-e,s=1-t,a=1-i,o=Math.min(n,s,a);return["CMYK",n,s,a,o]}}class k7{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ue("Abstract method `_createSVG` called.")}}class zm extends k7{_createSVG(e){return document.createElementNS(Sn,e)}}class yD{static setupStorage(e,t,i,n,s){const a=n.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{n.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{n.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{n.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:n,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var h,f;const t=e.annotationStorage,i=e.linkService,n=e.xfaHtml,s=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:s,linkService:i});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(n.children.length===0){if(n.value){const m=document.createTextNode(n.value);a.append(m),o&&sd.shouldBuildText(n.name)&&c.push(m)}return{textDivs:c}}const u=[[n,-1,a]];for(;u.length>0;){const[m,p,g]=u.at(-1);if(p+1===m.children.length){u.pop();continue}const b=m.children[++u.at(-1)[1]];if(b===null)continue;const{name:y}=b;if(y==="#text"){const w=document.createTextNode(b.value);c.push(w),g.append(w);continue}const N=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,y):document.createElement(y);if(g.append(N),b.attributes&&this.setAttributes({html:N,element:b,storage:t,intent:s,linkService:i}),((f=b.children)==null?void 0:f.length)>0)u.push([b,-1,N]);else if(b.value){const w=document.createTextNode(b.value);o&&sd.shouldBuildText(y)&&c.push(w),N.append(w)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const tf=1e3,M7=9,al=new WeakSet;class tA{static create(e){switch(e.data.annotationType){case dt.LINK:return new xD(e);case dt.TEXT:return new R7(e);case dt.WIDGET:switch(e.data.fieldType){case"Tx":return new j7(e);case"Btn":return e.data.radioButton?new AD(e):e.data.checkBox?new L7(e):new U7(e);case"Ch":return new F7(e);case"Sig":return new I7(e)}return new fl(e);case dt.POPUP:return new Rb(e);case dt.FREETEXT:return new CD(e);case dt.LINE:return new $7(e);case dt.SQUARE:return new B7(e);case dt.CIRCLE:return new H7(e);case dt.POLYLINE:return new DD(e);case dt.CARET:return new q7(e);case dt.INK:return new Ox(e);case dt.POLYGON:return new z7(e);case dt.HIGHLIGHT:return new OD(e);case dt.UNDERLINE:return new W7(e);case dt.SQUIGGLY:return new G7(e);case dt.STRIKEOUT:return new K7(e);case dt.STAMP:return new TD(e);case dt.FILEATTACHMENT:return new Q7(e);default:return new at(e)}}}var wo,uc,dc,Jd,Mb;const Ix=class Ix{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){E(this,Jd);E(this,wo,null);E(this,uc,!1);E(this,dc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ix._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;d(this,wo)||x(this,wo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&S(this,Jd,Mb).call(this,t),(i=d(this,dc))==null||i.popup.updateEdited(e)}resetEdited(){var e;d(this,wo)&&(S(this,Jd,Mb).call(this,d(this,wo).rect),(e=d(this,dc))==null||e.popup.resetEdited(),x(this,wo,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof fl||(s.tabIndex=tf);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Rb){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const N=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=N}else if(this instanceof AD){const N=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=N}switch(t.borderStyle.style){case bl.SOLID:a.borderStyle="solid";break;case bl.DASHED:a.borderStyle="dashed";break;case bl.BEVELED:he("Unimplemented border style: beveled");break;case bl.INSET:he("Unimplemented border style: inset");break;case bl.UNDERLINE:a.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(x(this,uc,!0),a.borderColor=se.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const c=se.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:h,pageX:f,pageY:m}=n.rawDims;a.left=`${100*(c[0]-f)/u}%`,a.top=`${100*(c[1]-m)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/u}%`,a.height=`${100*l/h}%`):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/i}%`,t.style.height=`${100*a/n}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,n)=>{const s=n.detail[t],a=s[0],o=s.slice(1);n.target.style[i]=eA[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:eA[`${a}_rgb`](o)})};return we(this,"_commonActions",{display:t=>{const{display:i}=t.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const n of Object.keys(t.detail)){const s=e[n]||i[n];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[n,s]of Object.entries(t)){const a=i[n];if(a){const o={detail:{[n]:s},target:e};a(o),delete t[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,n,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,y,N]=e.subarray(2,6);if(n===g&&s===b&&t===y&&i===N)return}const{style:a}=this.container;let o;if(d(this,uc)){const{borderColor:g,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=n-t,c=s-i,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const f=u.createElement("defs");h.append(f);const m=u.createElement("clipPath"),p=`clippath_${this.data.id}`;m.setAttribute("id",p),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let g=2,b=e.length;g<b;g+=8){const y=e[g],N=e[g+1],w=e[g+2],_=e[g+3],P=u.createElement("rect"),O=(w-t)/l,T=(s-N)/c,C=(y-w)/l,D=(N-_)/c;P.setAttribute("x",O),P.setAttribute("y",T),P.setAttribute("width",C),P.setAttribute("height",D),m.append(P),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${T}" width="${C}" height="${D}"/>`)}d(this,uc)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:e}=this,t=x(this,dc,new Rb({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:s,id:a,exportValues:o}of n){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!al.has(c)){he(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:c})}return i}for(const n of document.getElementsByName(e)){const{exportValue:s}=n,a=n.getAttribute("data-element-id");a!==t&&al.has(n)&&i.push({id:a,exportValue:s,domElement:n})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};wo=new WeakMap,uc=new WeakMap,dc=new WeakMap,Jd=new WeakSet,Mb=function(e){const{container:{style:t},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;i==null||i.splice(0,4,...e),t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,n===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(n)};let at=Ix;var Kr,ka,ND,wD;class xD extends at{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});E(this,Kr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.attachment?(S(this,Kr,ND).call(this,n,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(S(this,Kr,wD).call(this,n,t.setOCGState),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&S(this,Kr,ka).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),S(this,Kr,ka).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const a=n.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),S(this,Kr,ka).call(this)}_bindResetFormAction(t,i){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),S(this,Kr,ka).call(this),!this._fieldObjects){he('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var h;n==null||n();const{fields:s,refs:a,include:o}=i,l=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const m of s){const p=this._fieldObjects[m]||[];for(const{id:g}of p)f.add(g)}for(const m of Object.values(this._fieldObjects))for(const p of m)f.has(p.id)===o&&l.push(p)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,u=[];for(const f of l){const{id:m}=f;switch(u.push(m),f.type){case"text":{const g=f.defaultValue||"";c.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;c.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";c.setValue(m,{value:g});break}default:continue}const p=document.querySelector(`[data-element-id="${m}"]`);if(p){if(!al.has(p)){he(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Kr=new WeakSet,ka=function(){this.container.setAttribute("data-internal-link","")},ND=function(t,i,n=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,n),!1},S(this,Kr,ka).call(this)},wD=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),S(this,Kr,ka).call(this)};class R7 extends at{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class fl extends at{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Qt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,n,s){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(a)}}))})}_setEventListeners(e,t,i,n){var s,a,o;for(const[l,c]of i)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,n),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":se.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||M7,s=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(qg*n))||1,h=c/u;a=Math.min(n,l(h/qg))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,l(c/qg))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=se.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class j7 extends fl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,n){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),s.setValue(a.id,{[n]:i})}render(){var n,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",c??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),al.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=tf,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),u.formattedValue=null}),i.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue??"";i.value=u.userValue=m,u.formattedValue=null});let h=f=>{const{formattedValue:m}=u;m!=null&&(f.target.value=m),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var g;if(u.focused)return;const{target:p}=m;u.userValue&&(p.value=u.userValue),u.lastCommittedValue=p.value,u.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(u.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const p={value(g){u.userValue=g.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),g.target.value=u.userValue},formattedValue(g){const{formattedValue:b}=g.detail;u.formattedValue=b,b!=null&&g.target!==document.activeElement&&(g.target.value=b),e.setValue(t,{formattedValue:b})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var w;const{charLimit:b}=g.detail,{target:y}=g;if(b===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",b);let N=u.userValue;!N||N.length<=b||(N=N.slice(0,b),y.value=u.userValue=N,e.setValue(t,{value:N}),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(p,m)}),i.addEventListener("keydown",m=>{var b;u.commitKey=1;let p=-1;if(m.key==="Escape"?p=0:m.key==="Enter"&&!this.data.multiLine?p=2:m.key==="Tab"&&(u.commitKey=3),p===-1)return;const{value:g}=m.target;u.lastCommittedValue!==g&&(u.lastCommittedValue=g,u.userValue=g,(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:p,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const f=h;h=null,i.addEventListener("blur",m=>{var g,b;if(!u.focused||!m.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(u.focused=!1);const{value:p}=m.target;u.userValue=p,u.lastCommittedValue!==p&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),f(m)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",m=>{var P;u.lastCommittedValue=null;const{data:p,target:g}=m,{value:b,selectionStart:y,selectionEnd:N}=g;let w=y,_=N;switch(m.inputType){case"deleteWordBackward":{const O=b.substring(0,y).match(/\w*[^\w]*$/);O&&(w-=O[0].length);break}case"deleteWordForward":{const O=b.substring(y).match(/^[^\w]*\w*/);O&&(_+=O[0].length);break}case"deleteContentBackward":y===N&&(w-=1);break;case"deleteContentForward":y===N&&(_+=1);break}m.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,change:p||"",willCommit:!1,selStart:w,selEnd:_}})}),this._setEventListeners(i,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(h&&i.addEventListener("blur",h),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class I7 extends fl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class L7 extends fl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return al.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=tf,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class AD extends fl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof n=="string"&&(n=n!==t.buttonValue,e.setValue(i,{value:n})),n)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(al.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=tf,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=a===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const f=u&&h.id===i;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class U7 extends xD{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class F7 extends fl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");al.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=tf;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const f of n.options)f.selected=f.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,i.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),s=!1),n.append(h)}let a=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),a=()=>{u.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const o=u=>{const h=u?"value":"textContent",{options:f,multiple:m}=n;return m?Array.prototype.filter.call(f,p=>p.selected).map(p=>p[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=o(!1);const c=u=>{const h=u.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const h={value(f){a==null||a();const m=f.detail.value,p=new Set(Array.isArray(m)?m:[m]);for(const g of n.options)g.selected=p.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(f){n.multiple=!0},remove(f){const m=n.options,p=f.detail.remove;m[p].selected=!1,n.remove(p),m.length>0&&Array.prototype.findIndex.call(m,b=>b.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:c(f)}),l=o(!1)},clear(f){for(;n.length!==0;)n.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(f){const{index:m,displayValue:p,exportValue:g}=f.detail.insert,b=n.children[m],y=document.createElement("option");y.textContent=p,y.value=g,b?b.before(y):n.append(y),e.setValue(t,{value:o(!0),items:c(f)}),l=o(!1)},items(f){const{items:m}=f.detail;for(;n.length!==0;)n.remove(0);for(const p of m){const{displayValue:g,exportValue:b}=p,y=document.createElement("option");y.textContent=g,y.value=b,n.append(y)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(f)}),l=o(!1)},indices(f){const m=new Set(f.detail.indices);for(const p of f.target.options)p.selected=m.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,u)}),n.addEventListener("input",u=>{var m;const h=o(!0),f=o(!1);e.setValue(t,{value:h}),u.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Rb extends at{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:at._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new V7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${wx}${i}`).join(",")),this.container}}var hc,op,lp,fc,mc,tt,Gn,pc,eh,th,gc,Kn,Ti,Qn,rh,Yn,ih,Ao,Eo,Fe,Bf,jb,ED,SD,_D,PD,Hf,zf,Ib;class V7{constructor({container:e,color:t,elements:i,titleObj:n,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h}){E(this,Fe);E(this,hc,S(this,Fe,_D).bind(this));E(this,op,S(this,Fe,Ib).bind(this));E(this,lp,S(this,Fe,zf).bind(this));E(this,fc,S(this,Fe,Hf).bind(this));E(this,mc,null);E(this,tt,null);E(this,Gn,null);E(this,pc,null);E(this,eh,null);E(this,th,null);E(this,gc,null);E(this,Kn,!1);E(this,Ti,null);E(this,Qn,null);E(this,rh,null);E(this,Yn,null);E(this,ih,null);E(this,Ao,null);E(this,Eo,!1);var f;x(this,tt,e),x(this,ih,n),x(this,Gn,a),x(this,Yn,o),x(this,th,l),x(this,mc,t),x(this,rh,c),x(this,gc,u),x(this,eh,i),x(this,pc,Sx.toDateObject(s)),this.trigger=i.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",d(this,fc)),m.addEventListener("mouseenter",d(this,lp)),m.addEventListener("mouseleave",d(this,op)),m.classList.add("popupTriggerArea");for(const m of i)(f=m.container)==null||f.addEventListener("keydown",d(this,hc));d(this,tt).hidden=!0,h&&S(this,Fe,Hf).call(this)}render(){if(d(this,Ti))return;const e=x(this,Ti,document.createElement("div"));if(e.className="popup",d(this,mc)){const s=e.style.outlineColor=se.makeHexColor(...d(this,mc));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=d(this,ih),e.append(t),d(this,pc)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,pc).valueOf()})),t.append(s)}const n=d(this,Fe,Bf);if(n)yD.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(d(this,Gn));e.append(s)}d(this,tt).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let s=0,a=n.length;s<a;++s){const o=n[s];i.append(document.createTextNode(o)),s<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;d(this,Ao)||x(this,Ao,{contentsObj:d(this,Gn),richText:d(this,Yn)}),e&&x(this,Qn,null),t&&(x(this,Yn,S(this,Fe,SD).call(this,t)),x(this,Gn,null)),(i=d(this,Ti))==null||i.remove(),x(this,Ti,null)}resetEdited(){var e;d(this,Ao)&&({contentsObj:ar(this,Gn)._,richText:ar(this,Yn)._}=d(this,Ao),x(this,Ao,null),(e=d(this,Ti))==null||e.remove(),x(this,Ti,null),x(this,Qn,null))}forceHide(){x(this,Eo,this.isVisible),d(this,Eo)&&(d(this,tt).hidden=!0)}maybeShow(){d(this,Eo)&&(d(this,Ti)||S(this,Fe,zf).call(this),x(this,Eo,!1),d(this,tt).hidden=!1)}get isVisible(){return d(this,tt).hidden===!1}}hc=new WeakMap,op=new WeakMap,lp=new WeakMap,fc=new WeakMap,mc=new WeakMap,tt=new WeakMap,Gn=new WeakMap,pc=new WeakMap,eh=new WeakMap,th=new WeakMap,gc=new WeakMap,Kn=new WeakMap,Ti=new WeakMap,Qn=new WeakMap,rh=new WeakMap,Yn=new WeakMap,ih=new WeakMap,Ao=new WeakMap,Eo=new WeakMap,Fe=new WeakSet,Bf=function(){const e=d(this,Yn),t=d(this,Gn);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,Yn).html||null},jb=function(){var e,t,i;return((i=(t=(e=d(this,Fe,Bf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},ED=function(){var e,t,i;return((i=(t=(e=d(this,Fe,Bf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},SD=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:d(this,Fe,ED),fontSize:d(this,Fe,jb)?`calc(${d(this,Fe,jb)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:n});return i},_D=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,Kn))&&S(this,Fe,Hf).call(this)},PD=function(){if(d(this,Qn)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:n,pageY:s}}}=d(this,th);let a=!!d(this,gc),o=a?d(this,gc):d(this,rh);for(const p of d(this,eh))if(!o||se.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=se.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),u=a?o[2]-o[0]+5:0,h=l[0]+u,f=l[1];x(this,Qn,[100*(h-n)/t,100*(f-s)/i]);const{style:m}=d(this,tt);m.left=`${d(this,Qn)[0]}%`,m.top=`${d(this,Qn)[1]}%`},Hf=function(){x(this,Kn,!d(this,Kn)),d(this,Kn)?(S(this,Fe,zf).call(this),d(this,tt).addEventListener("click",d(this,fc)),d(this,tt).addEventListener("keydown",d(this,hc))):(S(this,Fe,Ib).call(this),d(this,tt).removeEventListener("click",d(this,fc)),d(this,tt).removeEventListener("keydown",d(this,hc)))},zf=function(){d(this,Ti)||this.render(),this.isVisible?d(this,Kn)&&d(this,tt).classList.add("focused"):(S(this,Fe,PD).call(this),d(this,tt).hidden=!1,d(this,tt).style.zIndex=parseInt(d(this,tt).style.zIndex)+1e3)},Ib=function(){d(this,tt).classList.remove("focused"),!(d(this,Kn)||!this.isVisible)&&(d(this,tt).hidden=!0,d(this,tt).style.zIndex=parseInt(d(this,tt).style.zIndex)-1e3)};class CD extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=de.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var nh;class $7 extends at{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,nh,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:n}=this,s=this.svgFactory.create(i,n,!0),a=x(this,nh,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}nh=new WeakMap;var sh;class B7 extends at{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,sh,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:n}=this,s=this.svgFactory.create(i,n,!0),a=t.borderStyle.width,o=x(this,sh,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",n-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,sh)}addHighlightArea(){this.container.classList.add("highlightArea")}}sh=new WeakMap;var ah;class H7 extends at{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,ah,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:n}=this,s=this.svgFactory.create(i,n,!0),a=t.borderStyle.width,o=x(this,ah,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",n/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",n/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}ah=new WeakMap;var oh;class DD extends at{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,oh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:n,popupRef:s},width:a,height:o}=this;if(!i)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let h=0,f=i.length;h<f;h+=2){const m=i[h]-t[0],p=t[3]-i[h+1];c.push(`${m},${p}`)}c=c.join(" ");const u=x(this,oh,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}oh=new WeakMap;class z7 extends DD{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class q7 extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var lh,So,ch,Lb;class Ox extends at{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,ch);E(this,lh,null);E(this,So,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?de.HIGHLIGHT:de.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:c}=S(this,ch,Lb).call(this,i,t),u=this.svgFactory.create(l,c,!0),h=x(this,lh,this.svgFactory.createElement("svg:g"));u.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let f=0,m=n.length;f<m;f++){const p=this.svgFactory.createElement(this.svgElementName);d(this,So).push(p),p.setAttribute("points",n[f].join(",")),h.append(p)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:n,rect:s}=t,a=d(this,lh);if(i>=0&&a.setAttribute("stroke-width",i||1),n)for(let o=0,l=d(this,So).length;o<l;o++)d(this,So)[o].setAttribute("points",n[o].join(","));if(s){const{transform:o,width:l,height:c}=S(this,ch,Lb).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return d(this,So)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap,So=new WeakMap,ch=new WeakSet,Lb=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class OD extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=de.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class W7 extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class G7 extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class K7 extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class TD extends at{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=de.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var uh,dh,Ub;class Q7 extends at{constructor(t){var n;super(t,{isRenderable:!0});E(this,dh);E(this,uh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let n;i.hasAppearance||i.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),n.addEventListener("dblclick",S(this,dh,Ub).bind(this)),x(this,uh,n);const{isMac:s}=Qt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&S(this,dh,Ub).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return d(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap,dh=new WeakSet,Ub=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var hh,_o,Js,fh,Aa,Vb,$b;const Lx=class Lx{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:a,structTreeLayer:o}){E(this,Aa);E(this,hh,null);E(this,_o,null);E(this,Js,new Map);E(this,fh,null);this.div=e,x(this,hh,t),x(this,_o,i),x(this,fh,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return d(this,Js).size>0}async render(e){var a;const{annotations:t}=e,i=this.div;nl(i,this.viewport);const n=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new zm,annotationStorage:e.annotationStorage||new Px,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===dt.POPUP;if(l){const h=n.get(o.id);if(!h)continue;s.elements=h}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;const c=tA.create(s);if(!c.isRenderable)continue;if(!l&&o.popupRef){const h=n.get(o.popupRef);h?h.push(c):n.set(o.popupRef,[c])}const u=c.render();o.hidden&&(u.style.visibility="hidden"),await S(this,Aa,Vb).call(this,u,o.id),c._isEditable&&(d(this,Js).set(c.data.id,c),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(c))}S(this,Aa,$b).call(this)}async addLinkAnnotations(e,t){const i={data:null,layer:this.div,linkService:t,svgFactory:new zm,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Lx._defaultBorderStyle),i.data=n;const s=tA.create(i);if(!s.isRenderable)continue;const a=s.render();await S(this,Aa,Vb).call(this,a,n.id)}}update({viewport:e}){const t=this.div;this.viewport=e,nl(t,{rotation:e.rotation}),S(this,Aa,$b).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Js).values())}getEditableAnnotation(e){return d(this,Js).get(e)}static get _defaultBorderStyle(){return we(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:bl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hh=new WeakMap,_o=new WeakMap,Js=new WeakMap,fh=new WeakMap,Aa=new WeakSet,Vb=async function(e,t){var a,o;const i=e.firstChild||e,n=i.id=`${wx}${t}`,s=await((a=d(this,fh))==null?void 0:a.getAriaAttributes(n));if(s)for(const[l,c]of s)i.setAttribute(l,c);this.div.append(e),(o=d(this,hh))==null||o.moveElementInDOM(this.div,e,i,!1)},$b=function(){var t;if(!d(this,_o))return;const e=this.div;for(const[i,n]of d(this,_o)){const s=e.querySelector(`[data-annotation-id="${i}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n);const o=d(this,Js).get(i);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(i,s.id,n),o._hasNoCanvas=!1):o.canvas=n)}d(this,_o).clear()};let Fb=Lx;const Af=/\r\n?|\n/g;var ki,jr,mh,Po,Ir,vt,kD,MD,RD,qf,hs,Wf,Gf,jD,Hb,ID;const Be=class Be extends ze{constructor(t){super({...t,name:"freeTextEditor"});E(this,vt);E(this,ki);E(this,jr,"");E(this,mh,`${this.id}-editor`);E(this,Po,null);E(this,Ir);x(this,ki,t.color||Be._defaultColor||ze._defaultLineColor),x(this,Ir,t.fontSize||Be._defaultFontSize)}static get _keyboardManager(){const t=Be.prototype,i=a=>a.isEmpty(),n=sl.TRANSLATE_SMALL,s=sl.TRANSLATE_BIG;return we(this,"_keyboardManager",new Jh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){ze.initialize(t,i);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ae.FREETEXT_SIZE:Be._defaultFontSize=i;break;case Ae.FREETEXT_COLOR:Be._defaultColor=i;break}}updateParams(t,i){switch(t){case Ae.FREETEXT_SIZE:S(this,vt,kD).call(this,i);break;case Ae.FREETEXT_COLOR:S(this,vt,MD).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ae.FREETEXT_SIZE,Be._defaultFontSize],[Ae.FREETEXT_COLOR,Be._defaultColor||ze._defaultLineColor]]}get propertiesToUpdate(){return[[Ae.FREETEXT_SIZE,d(this,Ir)],[Ae.FREETEXT_COLOR,d(this,ki)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Be._internalPadding*t,-(Be._internalPadding+d(this,Ir))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Po,new AbortController);const t=this._uiManager.combinedSignal(d(this,Po));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,mh)),this._isDraggable=!0,(t=d(this,Po))==null||t.abort(),x(this,Po,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,jr),i=x(this,jr,S(this,vt,RD).call(this).trimEnd());if(t===i)return;const n=s=>{if(x(this,jr,s),!s){this.remove();return}S(this,vt,Gf).call(this),this._uiManager.rebuild(this),S(this,vt,qf).call(this)};this.addCommands({cmd:()=>{n(i)},undo:()=>{n(t)},mustExec:!1}),S(this,vt,qf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,mh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${d(this,Ir)}px * var(--total-scale-factor))`,n.color=d(this,ki),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,h]=this.pageDimensions,[f,m]=this.pageTranslation;let p,g;switch(this.rotation){case 0:p=t+(o[0]-f)/u,g=i+this.height-(o[1]-m)/h;break;case 90:p=t+(o[0]-f)/u,g=i-(o[1]-m)/h,[l,c]=[c,-l];break;case 180:p=t-this.width+(o[0]-f)/u,g=i-(o[1]-m)/h,[l,c]=[-l,-c];break;case 270:p=t+(o[0]-f-this.height*h)/u,g=i+(o[1]-m-this.width*u)/h,[l,c]=[-c,l];break}this.setAt(p*s,g*a,l,c)}else this._moveAfterPaste(t,i);S(this,vt,Gf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,g,b;const i=t.clipboardData||window.clipboardData,{types:n}=i;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=S(p=Be,hs,Hb).call(p,i.getData("text")||"").replaceAll(Af,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,u=[],h=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(Af,"")),y!==this.editorDiv){let N=u;for(const w of this.editorDiv.childNodes){if(w===y){N=h;continue}N.push(S(g=Be,hs,Wf).call(g,w))}}u.push(l.nodeValue.slice(0,c).replaceAll(Af,""))}else if(l===this.editorDiv){let y=u,N=0;for(const w of this.editorDiv.childNodes)N++===c&&(y=h),y.push(S(b=Be,hs,Wf).call(b,w))}x(this,jr,`${u.join(`
`)}${s}${h.join(`
`)}`),S(this,vt,Gf).call(this);const f=new Range;let m=Math.sumPrecise(u.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const N=y.nodeValue.length;if(m<=N){f.setStart(y,m),f.setEnd(y,m);break}m-=N}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,n){var o;let s=null;if(t instanceof CD){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:h,id:f,popupRef:m},textContent:p,textPosition:g,parent:{page:{pageNumber:b}}}=t;if(!p||p.length===0)return null;s=t={annotationType:de.FREETEXT,color:Array.from(c),fontSize:l,value:p.join(`
`),position:g,pageIndex:b-1,rect:u.slice(0),rotation:h,id:f,deleted:!1,popupRef:m}}const a=await super.deserialize(t,i,n);return x(a,Ir,t.fontSize),x(a,ki,se.makeHexColor(...t.color)),x(a,jr,S(o=Be,hs,Hb).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Be._internalPadding*this.parentScale,n=this.getRect(i,i),s=ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,ki)),a={annotationType:de.FREETEXT,color:s,fontSize:d(this,Ir),value:S(this,vt,jD).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.isCopy=!0,a):this.annotationElementId&&!S(this,vt,ID).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:n}=i;n.fontSize=`calc(${d(this,Ir)}px * var(--total-scale-factor))`,n.color=d(this,ki),i.replaceChildren();for(const a of d(this,jr).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const s=Be._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:d(this,jr)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ki=new WeakMap,jr=new WeakMap,mh=new WeakMap,Po=new WeakMap,Ir=new WeakMap,vt=new WeakSet,kD=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-d(this,Ir))*this.parentScale),x(this,Ir,s),S(this,vt,qf).call(this)},n=d(this,Ir);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},MD=function(t){const i=s=>{x(this,ki,this.editorDiv.style.color=s)},n=d(this,ki);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RD=function(){var n;const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(S(n=Be,hs,Wf).call(n,s)),i=s);return t.join(`
`)},qf=function(){const[t,i]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/i):(this.width=n.height/t,this.height=n.width/i),this.fixAndSetPosition()},hs=new WeakSet,Wf=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Af,"")},Gf=function(){if(this.editorDiv.replaceChildren(),!!d(this,jr))for(const t of d(this,jr).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},jD=function(){return d(this,jr).replaceAll(" "," ")},Hb=function(t){return t.replaceAll(" "," ")},ID=function(t){const{value:i,fontSize:n,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==n||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},E(Be,hs),q(Be,"_freeTextDefaultContent",""),q(Be,"_internalPadding",0),q(Be,"_defaultColor",null),q(Be,"_defaultFontSize",10),q(Be,"_type","freetext"),q(Be,"_editorType",de.FREETEXT);let Bb=Be;class Z{toSVGPath(){Ue("Abstract method `toSVGPath` must be implemented.")}get box(){Ue("Abstract getter `box` must be implemented.")}serialize(e,t){Ue("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,n,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*n,a[o+1]=i+e[o+1]*s;return a}static _rescaleAndSwap(e,t,i,n,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*n,a[o+1]=i+e[o]*s;return a}static _translate(e,t,i,n){n||(n=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)n[s]=t+e[s],n[s+1]=i+e[s+1];return n}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,n,s){switch(s){case 90:return[1-t/i,e/n];case 180:return[1-e/i,1-t/n];case 270:return[t/i,1-e/n];default:return[e/i,t/n]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,n,s,a){return[(e+5*i)/6,(t+5*n)/6,(5*i+s)/6,(5*n+a)/6,(i+s)/2,(n+a)/2]}}q(Z,"PRECISION",1e-4);var Lr,Mi,vc,bc,un,xe,Co,Do,ph,gh,yc,xc,ea,vh,cp,up,Et,Fu,LD,UD,FD,VD,$D,BD;const Dn=class Dn{constructor({x:e,y:t},i,n,s,a,o=0){E(this,Et);E(this,Lr);E(this,Mi,[]);E(this,vc);E(this,bc);E(this,un,[]);E(this,xe,new Float32Array(18));E(this,Co);E(this,Do);E(this,ph);E(this,gh);E(this,yc);E(this,xc);E(this,ea,[]);x(this,Lr,i),x(this,xc,s*n),x(this,bc,a),d(this,xe).set([NaN,NaN,NaN,NaN,e,t],6),x(this,vc,o),x(this,gh,d(Dn,vh)*n),x(this,ph,d(Dn,up)*n),x(this,yc,n),d(this,ea).push(e,t)}isEmpty(){return isNaN(d(this,xe)[8])}add({x:e,y:t}){var D;x(this,Co,e),x(this,Do,t);const[i,n,s,a]=d(this,Lr);let[o,l,c,u]=d(this,xe).subarray(8,12);const h=e-c,f=t-u,m=Math.hypot(h,f);if(m<d(this,ph))return!1;const p=m-d(this,gh),g=p/m,b=g*h,y=g*f;let N=o,w=l;o=c,l=u,c+=b,u+=y,(D=d(this,ea))==null||D.push(e,t);const _=-y/p,P=b/p,O=_*d(this,xc),T=P*d(this,xc);return d(this,xe).set(d(this,xe).subarray(2,8),0),d(this,xe).set([c+O,u+T],4),d(this,xe).set(d(this,xe).subarray(14,18),12),d(this,xe).set([c-O,u-T],16),isNaN(d(this,xe)[6])?(d(this,un).length===0&&(d(this,xe).set([o+O,l+T],2),d(this,un).push(NaN,NaN,NaN,NaN,(o+O-i)/s,(l+T-n)/a),d(this,xe).set([o-O,l-T],14),d(this,Mi).push(NaN,NaN,NaN,NaN,(o-O-i)/s,(l-T-n)/a)),d(this,xe).set([N,w,o,l,c,u],6),!this.isEmpty()):(d(this,xe).set([N,w,o,l,c,u],6),Math.abs(Math.atan2(w-l,N-o)-Math.atan2(y,b))<Math.PI/2?([o,l,c,u]=d(this,xe).subarray(2,6),d(this,un).push(NaN,NaN,NaN,NaN,((o+c)/2-i)/s,((l+u)/2-n)/a),[o,l,N,w]=d(this,xe).subarray(14,18),d(this,Mi).push(NaN,NaN,NaN,NaN,((N+o)/2-i)/s,((w+l)/2-n)/a),!0):([N,w,o,l,c,u]=d(this,xe).subarray(0,6),d(this,un).push(((N+5*o)/6-i)/s,((w+5*l)/6-n)/a,((5*o+c)/6-i)/s,((5*l+u)/6-n)/a,((o+c)/2-i)/s,((l+u)/2-n)/a),[c,u,o,l,N,w]=d(this,xe).subarray(12,18),d(this,Mi).push(((N+5*o)/6-i)/s,((w+5*l)/6-n)/a,((5*o+c)/6-i)/s,((5*l+u)/6-n)/a,((o+c)/2-i)/s,((l+u)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,un),t=d(this,Mi);if(isNaN(d(this,xe)[6])&&!this.isEmpty())return S(this,Et,LD).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let n=6;n<e.length;n+=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);S(this,Et,FD).call(this,i);for(let n=t.length-6;n>=6;n-=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);return S(this,Et,UD).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,n,s,a){return new HD(e,t,i,n,s,a)}getOutlines(){var h;const e=d(this,un),t=d(this,Mi),i=d(this,xe),[n,s,a,o]=d(this,Lr),l=new Float32Array((((h=d(this,ea))==null?void 0:h.length)??0)+2);for(let f=0,m=l.length-2;f<m;f+=2)l[f]=(d(this,ea)[f]-n)/a,l[f+1]=(d(this,ea)[f+1]-s)/o;if(l[l.length-2]=(d(this,Co)-n)/a,l[l.length-1]=(d(this,Do)-s)/o,isNaN(i[6])&&!this.isEmpty())return S(this,Et,VD).call(this,l);const c=new Float32Array(d(this,un).length+24+d(this,Mi).length);let u=e.length;for(let f=0;f<u;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}u=S(this,Et,BD).call(this,c,u);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[f+m],c[u+1]=t[f+m+1],u+=2}return S(this,Et,$D).call(this,c,u),this.newFreeDrawOutline(c,l,d(this,Lr),d(this,yc),d(this,vc),d(this,bc))}};Lr=new WeakMap,Mi=new WeakMap,vc=new WeakMap,bc=new WeakMap,un=new WeakMap,xe=new WeakMap,Co=new WeakMap,Do=new WeakMap,ph=new WeakMap,gh=new WeakMap,yc=new WeakMap,xc=new WeakMap,ea=new WeakMap,vh=new WeakMap,cp=new WeakMap,up=new WeakMap,Et=new WeakSet,Fu=function(){const e=d(this,xe).subarray(4,6),t=d(this,xe).subarray(16,18),[i,n,s,a]=d(this,Lr);return[(d(this,Co)+(e[0]-t[0])/2-i)/s,(d(this,Do)+(e[1]-t[1])/2-n)/a,(d(this,Co)+(t[0]-e[0])/2-i)/s,(d(this,Do)+(t[1]-e[1])/2-n)/a]},LD=function(){const[e,t,i,n]=d(this,Lr),[s,a,o,l]=S(this,Et,Fu).call(this);return`M${(d(this,xe)[2]-e)/i} ${(d(this,xe)[3]-t)/n} L${(d(this,xe)[4]-e)/i} ${(d(this,xe)[5]-t)/n} L${s} ${a} L${o} ${l} L${(d(this,xe)[16]-e)/i} ${(d(this,xe)[17]-t)/n} L${(d(this,xe)[14]-e)/i} ${(d(this,xe)[15]-t)/n} Z`},UD=function(e){const t=d(this,Mi);e.push(`L${t[4]} ${t[5]} Z`)},FD=function(e){const[t,i,n,s]=d(this,Lr),a=d(this,xe).subarray(4,6),o=d(this,xe).subarray(16,18),[l,c,u,h]=S(this,Et,Fu).call(this);e.push(`L${(a[0]-t)/n} ${(a[1]-i)/s} L${l} ${c} L${u} ${h} L${(o[0]-t)/n} ${(o[1]-i)/s}`)},VD=function(e){const t=d(this,xe),[i,n,s,a]=d(this,Lr),[o,l,c,u]=S(this,Et,Fu).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-n)/a,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-n)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-n)/a,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-n)/a],0),this.newFreeDrawOutline(h,e,d(this,Lr),d(this,yc),d(this,vc),d(this,bc))},$D=function(e,t){const i=d(this,Mi);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},BD=function(e,t){const i=d(this,xe).subarray(4,6),n=d(this,xe).subarray(16,18),[s,a,o,l]=d(this,Lr),[c,u,h,f]=S(this,Et,Fu).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l],t),t+=24},E(Dn,vh,8),E(Dn,cp,2),E(Dn,up,d(Dn,vh)+d(Dn,cp));let qm=Dn;var Nc,Oo,Xn,bh,Ur,yh,st,dp,zD;class HD extends Z{constructor(t,i,n,s,a,o){super();E(this,dp);E(this,Nc);E(this,Oo,new Float32Array(4));E(this,Xn);E(this,bh);E(this,Ur);E(this,yh);E(this,st);x(this,st,t),x(this,Ur,i),x(this,Nc,n),x(this,yh,s),x(this,Xn,a),x(this,bh,o),this.lastPoint=[NaN,NaN],S(this,dp,zD).call(this,o);const[l,c,u,h]=d(this,Oo);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-l)/u,t[f+1]=(t[f+1]-c)/h;for(let f=0,m=i.length;f<m;f+=2)i[f]=(i[f]-l)/u,i[f+1]=(i[f+1]-c)/h}toSVGPath(){const t=[`M${d(this,st)[4]} ${d(this,st)[5]}`];for(let i=6,n=d(this,st).length;i<n;i+=6){if(isNaN(d(this,st)[i])){t.push(`L${d(this,st)[i+4]} ${d(this,st)[i+5]}`);continue}t.push(`C${d(this,st)[i]} ${d(this,st)[i+1]} ${d(this,st)[i+2]} ${d(this,st)[i+3]} ${d(this,st)[i+4]} ${d(this,st)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,n,s],a){const o=n-t,l=s-i;let c,u;switch(a){case 0:c=Z._rescale(d(this,st),t,s,o,-l),u=Z._rescale(d(this,Ur),t,s,o,-l);break;case 90:c=Z._rescaleAndSwap(d(this,st),t,i,o,l),u=Z._rescaleAndSwap(d(this,Ur),t,i,o,l);break;case 180:c=Z._rescale(d(this,st),n,i,-o,l),u=Z._rescale(d(this,Ur),n,i,-o,l);break;case 270:c=Z._rescaleAndSwap(d(this,st),n,s,-o,-l),u=Z._rescaleAndSwap(d(this,Ur),n,s,-o,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return d(this,Oo)}newOutliner(t,i,n,s,a,o=0){return new qm(t,i,n,s,a,o)}getNewOutline(t,i){const[n,s,a,o]=d(this,Oo),[l,c,u,h]=d(this,Nc),f=a*u,m=o*h,p=n*u+l,g=s*h+c,b=this.newOutliner({x:d(this,Ur)[0]*f+p,y:d(this,Ur)[1]*m+g},d(this,Nc),d(this,yh),t,d(this,bh),i??d(this,Xn));for(let y=2;y<d(this,Ur).length;y+=2)b.add({x:d(this,Ur)[y]*f+p,y:d(this,Ur)[y+1]*m+g});return b.getOutlines()}}Nc=new WeakMap,Oo=new WeakMap,Xn=new WeakMap,bh=new WeakMap,Ur=new WeakMap,yh=new WeakMap,st=new WeakMap,dp=new WeakSet,zD=function(t){const i=d(this,st);let n=i[4],s=i[5];const a=[n,s,n,s];let o=n,l=s;const c=t?Math.max:Math.min;for(let h=6,f=i.length;h<f;h+=6){const m=i[h+4],p=i[h+5];if(isNaN(i[h]))se.pointBoundingBox(m,p,a),l<p?(o=m,l=p):l===p&&(o=c(o,m));else{const g=[1/0,1/0,-1/0,-1/0];se.bezierBoundingBox(n,s,...i.slice(h,h+6),g),se.rectBoundingBox(...g,a),l<g[3]?(o=g[2],l=g[3]):l===g[3]&&(o=c(o,g[2]))}n=m,s=p}const u=d(this,Oo);u[0]=a[0]-d(this,Xn),u[1]=a[1]-d(this,Xn),u[2]=a[2]-a[0]+2*d(this,Xn),u[3]=a[3]-a[1]+2*d(this,Xn),this.lastPoint=[o,l]};var xh,Nh,ta,Ri,vr,qD,Kf,WD,GD,qb;class zb{constructor(e,t=0,i=0,n=!0){E(this,vr);E(this,xh);E(this,Nh);E(this,ta,[]);E(this,Ri,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:m,y:p,width:g,height:b}of e){const y=Math.floor((m-t)/a)*a,N=Math.ceil((m+g+t)/a)*a,w=Math.floor((p-t)/a)*a,_=Math.ceil((p+b+t)/a)*a,P=[y,w,_,!0],O=[N,w,_,!1];d(this,ta).push(P,O),se.rectBoundingBox(y,w,N,_,s)}const o=s[2]-s[0]+2*i,l=s[3]-s[1]+2*i,c=s[0]-i,u=s[1]-i,h=d(this,ta).at(n?-1:-2),f=[h[0],h[2]];for(const m of d(this,ta)){const[p,g,b]=m;m[0]=(p-c)/o,m[1]=(g-u)/l,m[2]=(b-u)/l}x(this,xh,new Float32Array([c,u,o,l])),x(this,Nh,f)}getOutlines(){d(this,ta).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of d(this,ta))t[3]?(e.push(...S(this,vr,qb).call(this,t)),S(this,vr,WD).call(this,t)):(S(this,vr,GD).call(this,t),e.push(...S(this,vr,qb).call(this,t)));return S(this,vr,qD).call(this,e)}}xh=new WeakMap,Nh=new WeakMap,ta=new WeakMap,Ri=new WeakMap,vr=new WeakSet,qD=function(e){const t=[],i=new Set;for(const a of e){const[o,l,c]=a;t.push([o,l,a],[o,c,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],c=t[a+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const n=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,l,c,u,h]=a;i.delete(a);let f=o,m=l;for(s=[o,c],n.push(s);;){let p;if(i.has(u))p=u;else if(i.has(h))p=h;else break;i.delete(p),[o,l,c,u,h]=p,f!==o&&(s.push(f,m,o,m===l?l:c),f=o),m=m===l?c:l}s.push(f,m)}return new Y7(n,d(this,xh),d(this,Nh))},Kf=function(e){const t=d(this,Ri);let i=0,n=t.length-1;for(;i<=n;){const s=i+n>>1,a=t[s][0];if(a===e)return s;a<e?i=s+1:n=s-1}return n+1},WD=function([,e,t]){const i=S(this,vr,Kf).call(this,e);d(this,Ri).splice(i,0,[e,t])},GD=function([,e,t]){const i=S(this,vr,Kf).call(this,e);for(let n=i;n<d(this,Ri).length;n++){const[s,a]=d(this,Ri)[n];if(s!==e)break;if(s===e&&a===t){d(this,Ri).splice(n,1);return}}for(let n=i-1;n>=0;n--){const[s,a]=d(this,Ri)[n];if(s!==e)break;if(s===e&&a===t){d(this,Ri).splice(n,1);return}}},qb=function(e){const[t,i,n]=e,s=[[t,i,n]],a=S(this,vr,Kf).call(this,n);for(let o=0;o<a;o++){const[l,c]=d(this,Ri)[o];for(let u=0,h=s.length;u<h;u++){const[,f,m]=s[u];if(!(c<=f||m<=l)){if(f>=l){if(m>c)s[u][1]=c;else{if(h===1)return[];s.splice(u,1),u--,h--}continue}s[u][2]=l,m>c&&s.push([t,c,m])}}}return s};var wh,wc;class Y7 extends Z{constructor(t,i,n){super();E(this,wh);E(this,wc);x(this,wc,t),x(this,wh,i),this.lastPoint=n}toSVGPath(){const t=[];for(const i of d(this,wc)){let[n,s]=i;t.push(`M${n} ${s}`);for(let a=2;a<i.length;a+=2){const o=i[a],l=i[a+1];o===n?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),n=o)}t.push("Z")}return t.join(" ")}serialize([t,i,n,s],a){const o=[],l=n-t,c=s-i;for(const u of d(this,wc)){const h=new Array(u.length);for(let f=0;f<u.length;f+=2)h[f]=t+u[f]*l,h[f+1]=s-u[f+1]*c;o.push(h)}return o}get box(){return d(this,wh)}get classNamesForOutlining(){return["highlightOutline"]}}wh=new WeakMap,wc=new WeakMap;class Wb extends qm{newFreeDrawOutline(e,t,i,n,s,a){return new X7(e,t,i,n,s,a)}}class X7 extends HD{newOutliner(e,t,i,n,s,a=0){return new Wb(e,t,i,n,s,a)}}var ji,To,Ac,At,Ah,Ec,Eh,Sh,ra,Ii,Sc,_h,Ie,Gb,Kb,Qb,Ma,KD,_s;const Nr=class Nr{constructor({editor:e=null,uiManager:t=null}){E(this,Ie);E(this,ji,null);E(this,To,null);E(this,Ac);E(this,At,null);E(this,Ah,!1);E(this,Ec,!1);E(this,Eh,null);E(this,Sh);E(this,ra,null);E(this,Ii,null);E(this,Sc);var i;e?(x(this,Ec,!1),x(this,Sc,Ae.HIGHLIGHT_COLOR),x(this,Eh,e)):(x(this,Ec,!0),x(this,Sc,Ae.HIGHLIGHT_DEFAULT_COLOR)),x(this,Ii,(e==null?void 0:e._uiManager)||t),x(this,Sh,d(this,Ii)._eventBus),x(this,Ac,(e==null?void 0:e.color)||((i=d(this,Ii))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),d(Nr,_h)||x(Nr,_h,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return we(this,"_keyboardManager",new Jh([[["Escape","mac+Escape"],Nr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nr.prototype._moveToPrevious],[["Home","mac+Home"],Nr.prototype._moveToBeginning],[["End","mac+End"],Nr.prototype._moveToEnd]]))}renderButton(){const e=x(this,ji,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=d(this,Ii)._signal;e.addEventListener("click",S(this,Ie,Ma).bind(this),{signal:t}),e.addEventListener("keydown",S(this,Ie,Qb).bind(this),{signal:t});const i=x(this,To,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=d(this,Ac),e.append(i),e}renderMainDropdown(){const e=x(this,At,S(this,Ie,Gb).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===d(this,ji)){S(this,Ie,Ma).call(this,e);return}const t=e.target.getAttribute("data-color");t&&S(this,Ie,Kb).call(this,t,e)}_moveToNext(e){var t,i;if(!d(this,Ie,_s)){S(this,Ie,Ma).call(this,e);return}if(e.target===d(this,ji)){(t=d(this,At).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=d(this,At))==null?void 0:t.firstChild)||e.target===d(this,ji)){d(this,Ie,_s)&&this._hideDropdownFromKeyboard();return}d(this,Ie,_s)||S(this,Ie,Ma).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!d(this,Ie,_s)){S(this,Ie,Ma).call(this,e);return}(t=d(this,At).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Ie,_s)){S(this,Ie,Ma).call(this,e);return}(t=d(this,At).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,At))==null||e.classList.add("hidden"),(t=d(this,ra))==null||t.abort(),x(this,ra,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,Ec)){if(!d(this,Ie,_s)){(e=d(this,Eh))==null||e.unselect();return}this.hideDropdown(),d(this,ji).focus({preventScroll:!0,focusVisible:d(this,Ah)})}}updateColor(e){if(d(this,To)&&(d(this,To).style.backgroundColor=e),!d(this,At))return;const t=d(this,Ii).highlightColors.values();for(const i of d(this,At).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=d(this,ji))==null||e.remove(),x(this,ji,null),x(this,To,null),(t=d(this,At))==null||t.remove(),x(this,At,null)}};ji=new WeakMap,To=new WeakMap,Ac=new WeakMap,At=new WeakMap,Ah=new WeakMap,Ec=new WeakMap,Eh=new WeakMap,Sh=new WeakMap,ra=new WeakMap,Ii=new WeakMap,Sc=new WeakMap,_h=new WeakMap,Ie=new WeakSet,Gb=function(){const e=document.createElement("div"),t=d(this,Ii)._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of d(this,Ii).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",d(Nr,_h)[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=n,s.setAttribute("aria-selected",n===d(this,Ac)),s.addEventListener("click",S(this,Ie,Kb).bind(this,n),{signal:t}),e.append(s)}return e.addEventListener("keydown",S(this,Ie,Qb).bind(this),{signal:t}),e},Kb=function(e,t){t.stopPropagation(),d(this,Sh).dispatch("switchannotationeditorparams",{source:this,type:d(this,Sc),value:e})},Qb=function(e){Nr._keyboardManager.exec(this,e)},Ma=function(e){if(d(this,Ie,_s)){this.hideDropdown();return}if(x(this,Ah,e.detail===0),d(this,ra)||(x(this,ra,new AbortController),window.addEventListener("pointerdown",S(this,Ie,KD).bind(this),{signal:d(this,Ii).combinedSignal(d(this,ra))})),d(this,At)){d(this,At).classList.remove("hidden");return}const t=x(this,At,S(this,Ie,Gb).call(this));d(this,ji).append(t)},KD=function(e){var t;(t=d(this,At))!=null&&t.contains(e.target)||this.hideDropdown()},_s=function(){return d(this,At)&&!d(this,At).classList.contains("hidden")},E(Nr,_h,null);let Wm=Nr;var _c,Ph,Zn,ko,Pc,Er,Ch,Dh,Mo,di,Fr,$t,Cc,Jn,tr,Dc,hi,Oh,pe,Yb,Qf,QD,YD,XD,Xb,Ra,vi,Al,ZD,Yf,Vu,JD,e2,t2,r2,i2;const Ce=class Ce extends ze{constructor(t){super({...t,name:"highlightEditor"});E(this,pe);E(this,_c,null);E(this,Ph,0);E(this,Zn);E(this,ko,null);E(this,Pc,null);E(this,Er,null);E(this,Ch,null);E(this,Dh,0);E(this,Mo,null);E(this,di,null);E(this,Fr,null);E(this,$t,!1);E(this,Cc,null);E(this,Jn);E(this,tr,null);E(this,Dc,"");E(this,hi);E(this,Oh,"");this.color=t.color||Ce._defaultColor,x(this,hi,t.thickness||Ce._defaultThickness),x(this,Jn,t.opacity||Ce._defaultOpacity),x(this,Zn,t.boxes||null),x(this,Oh,t.methodOfCreation||""),x(this,Dc,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(x(this,$t,!0),S(this,pe,Qf).call(this,t),S(this,pe,Ra).call(this)):d(this,Zn)&&(x(this,_c,t.anchorNode),x(this,Ph,t.anchorOffset),x(this,Ch,t.focusNode),x(this,Dh,t.focusOffset),S(this,pe,Yb).call(this),S(this,pe,Ra).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ce.prototype;return we(this,"_keyboardManager",new Jh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,$t)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,hi),methodOfCreation:d(this,Oh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var n;ze.initialize(t,i),Ce._defaultColor||(Ce._defaultColor=((n=i.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Ae.HIGHLIGHT_DEFAULT_COLOR:Ce._defaultColor=i;break;case Ae.HIGHLIGHT_THICKNESS:Ce._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return d(this,Cc)}updateParams(t,i){switch(t){case Ae.HIGHLIGHT_COLOR:S(this,pe,QD).call(this,i);break;case Ae.HIGHLIGHT_THICKNESS:S(this,pe,YD).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ae.HIGHLIGHT_DEFAULT_COLOR,Ce._defaultColor],[Ae.HIGHLIGHT_THICKNESS,Ce._defaultThickness]]}get propertiesToUpdate(){return[[Ae.HIGHLIGHT_COLOR,this.color||Ce._defaultColor],[Ae.HIGHLIGHT_THICKNESS,d(this,hi)||Ce._defaultThickness],[Ae.HIGHLIGHT_FREE,d(this,$t)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(x(this,Pc,new Wm({editor:this})),t.addColorPicker(d(this,Pc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,pe,Vu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,S(this,pe,Vu).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){S(this,pe,Xb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,pe,Ra).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let i=!1;this.parent&&!t?S(this,pe,Xb).call(this):t&&(S(this,pe,Ra).call(this,t),i=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,a,o;const{drawLayer:i}=this.parent;let n;d(this,$t)?(t=(t-this.rotation+360)%360,n=S(s=Ce,vi,Al).call(s,d(this,di).box,t)):n=S(a=Ce,vi,Al).call(a,[this.x,this.y,this.width,this.height],t),i.updateProperties(d(this,Fr),{bbox:n,root:{"data-main-rotation":t}}),i.updateProperties(d(this,tr),{bbox:S(o=Ce,vi,Al).call(o,d(this,Er).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,Dc)&&(t.setAttribute("aria-label",d(this,Dc)),t.setAttribute("role","mark")),d(this,$t)?t.classList.add("free"):this.div.addEventListener("keydown",S(this,pe,ZD).bind(this),{signal:this._uiManager._signal});const i=x(this,Mo,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=d(this,ko);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),NC(this,d(this,Mo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,tr),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,tr),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:S(this,pe,Yf).call(this,!0);break;case 1:case 3:S(this,pe,Yf).call(this,!1);break}}select(){var t;super.select(),d(this,tr)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,tr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,tr)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,tr),{rootClass:{selected:!1}}),d(this,$t)||S(this,pe,Yf).call(this,!1))}get _mustFixPosition(){return!d(this,$t)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Fr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,tr),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:n,x:s,y:a}){const{x:o,y:l,width:c,height:u}=n.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),m=p=>{h.abort(),S(this,vi,r2).call(this,t,p)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",ht,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Hi,{signal:f}),n.addEventListener("pointermove",S(this,vi,t2).bind(this,t),{signal:f}),this._freeHighlight=new Wb({x:s,y:a},[o,l,c,u],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,n){var g,b,y,N;let s=null;if(t instanceof OD){const{data:{quadPoints:w,rect:_,rotation:P,id:O,color:T,opacity:C,popupRef:D},parent:{page:{pageNumber:k}}}=t;s=t={annotationType:de.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:w,boxes:null,pageIndex:k-1,rect:_.slice(0),rotation:P,id:O,deleted:!1,popupRef:D}}else if(t instanceof Ox){const{data:{inkLists:w,rect:_,rotation:P,id:O,color:T,borderStyle:{rawWidth:C},popupRef:D},parent:{page:{pageNumber:k}}}=t;s=t={annotationType:de.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:w,boxes:null,pageIndex:k-1,rect:_.slice(0),rotation:P,id:O,deleted:!1,popupRef:D}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=t,u=await super.deserialize(t,i,n);u.color=se.makeHexColor(...a),x(u,Jn,c||1),l&&x(u,hi,t.thickness),u.annotationElementId=t.id||null,u._initialData=s;const[h,f]=u.pageDimensions,[m,p]=u.pageTranslation;if(o){const w=x(u,Zn,[]);for(let _=0;_<o.length;_+=8)w.push({x:(o[_]-m)/h,y:1-(o[_+1]-p)/f,width:(o[_+2]-o[_])/h,height:(o[_+1]-o[_+5])/f});S(g=u,pe,Yb).call(g),S(b=u,pe,Ra).call(b),u.rotate(u.rotation)}else if(l){x(u,$t,!0);const w=l[0],_={x:w[0]-m,y:f-(w[1]-p)},P=new Wb(_,[0,0,h,f],1,d(u,hi)/2,!0,.001);for(let C=0,D=w.length;C<D;C+=2)_.x=w[C]-m,_.y=f-(w[C+1]-p),P.add(_);const{id:O,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:P.toSVGPath()}},!0,!0);S(y=u,pe,Qf).call(y,{highlightOutlines:P.getOutlines(),highlightId:O,clipPathId:T}),S(N=u,pe,Ra).call(N),u.rotate(u.parentRotation)}return u}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),n=ze._colorManager.convert(this.color),s={annotationType:de.HIGHLIGHT,color:n,opacity:d(this,Jn),thickness:d(this,hi),quadPoints:S(this,pe,JD).call(this),outlines:S(this,pe,e2).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:S(this,pe,Vu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!S(this,pe,i2).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};_c=new WeakMap,Ph=new WeakMap,Zn=new WeakMap,ko=new WeakMap,Pc=new WeakMap,Er=new WeakMap,Ch=new WeakMap,Dh=new WeakMap,Mo=new WeakMap,di=new WeakMap,Fr=new WeakMap,$t=new WeakMap,Cc=new WeakMap,Jn=new WeakMap,tr=new WeakMap,Dc=new WeakMap,hi=new WeakMap,Oh=new WeakMap,pe=new WeakSet,Yb=function(){const t=new zb(d(this,Zn),.001);x(this,di,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,di).box;const i=new zb(d(this,Zn),.0025,.001,this._uiManager.direction==="ltr");x(this,Er,i.getOutlines());const{lastPoint:n}=d(this,Er);x(this,Cc,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},Qf=function({highlightOutlines:t,highlightId:i,clipPathId:n}){var h,f;if(x(this,di,t),x(this,Er,t.getNewOutline(d(this,hi)/2+1.5,.0025)),i>=0)x(this,Fr,i),x(this,ko,n),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),x(this,tr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,Er).box,path:{d:d(this,Er).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Fr),{bbox:S(h=Ce,vi,Al).call(h,d(this,di).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,tr),{bbox:S(f=Ce,vi,Al).call(f,d(this,Er).box,m),path:{d:d(this,Er).toSVGPath()}})}const[a,o,l,c]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[m,p]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*p/m,this.height=c*m/p;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[m,p]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*p/m,this.height=c*m/p;break}}const{lastPoint:u}=d(this,Er);x(this,Cc,[(u[0]-a)/l,(u[1]-o)/c])},QD=function(t){const i=(a,o)=>{var l,c;this.color=a,x(this,Jn,o),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,Fr),{root:{fill:a,"fill-opacity":o}}),(c=d(this,Pc))==null||c.updateColor(a)},n=this.color,s=d(this,Jn);this.addCommands({cmd:i.bind(this,t,Ce._defaultOpacity),undo:i.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},YD=function(t){const i=d(this,hi),n=s=>{x(this,hi,s),S(this,pe,XD).call(this,s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},XD=function(t){if(!d(this,$t))return;S(this,pe,Qf).call(this,{highlightOutlines:d(this,di).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)},Xb=function(){d(this,Fr)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Fr)),x(this,Fr,null),this.parent.drawLayer.remove(d(this,tr)),x(this,tr,null))},Ra=function(t=this.parent){d(this,Fr)===null&&({id:ar(this,Fr)._,clipPathId:ar(this,ko)._}=t.drawLayer.draw({bbox:d(this,di).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,Jn)},rootClass:{highlight:!0,free:d(this,$t)},path:{d:d(this,di).toSVGPath()}},!1,!0),x(this,tr,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,$t)},bbox:d(this,Er).box,path:{d:d(this,Er).toSVGPath()}},d(this,$t))),d(this,Mo)&&(d(this,Mo).style.clipPath=d(this,ko)))},vi=new WeakSet,Al=function([t,i,n,s],a){switch(a){case 90:return[1-i-s,t,s,n];case 180:return[1-t-n,1-i-s,n,s];case 270:return[i,1-t-n,s,n]}return[t,i,n,s]},ZD=function(t){Ce._keyboardManager.exec(this,t)},Yf=function(t){if(!d(this,_c))return;const i=window.getSelection();t?i.setPosition(d(this,_c),d(this,Ph)):i.setPosition(d(this,Ch),d(this,Dh))},Vu=function(){return d(this,$t)?this.rotation:0},JD=function(){if(d(this,$t))return null;const[t,i]=this.pageDimensions,[n,s]=this.pageTranslation,a=d(this,Zn),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:u,width:h,height:f}of a){const m=c*t+n,p=(1-u)*i+s;o[l]=o[l+4]=m,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=m+h*t,o[l+5]=o[l+7]=p-f*i,l+=8}return o},e2=function(t){return d(this,di).serialize(t,S(this,pe,Vu).call(this))},t2=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},r2=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},i2=function(t){const{color:i}=this._initialData;return t.color.some((n,s)=>n!==i[s])},E(Ce,vi),q(Ce,"_defaultColor",null),q(Ce,"_defaultOpacity",1),q(Ce,"_defaultThickness",12),q(Ce,"_type","highlight"),q(Ce,"_editorType",de.HIGHLIGHT),q(Ce,"_freeHighlightId",-1),q(Ce,"_freeHighlight",null),q(Ce,"_freeHighlightClipId","");let Gm=Ce;var Ro;class n2{constructor(){E(this,Ro,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){d(this,Ro)[e]=t}toSVGProperties(){const e=d(this,Ro);return x(this,Ro,Object.create(null)),{root:e}}reset(){x(this,Ro,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ue("Not implemented")}}Ro=new WeakMap;var Vr,Oc,Dt,jo,Io,ia,na,sa,Lo,Se,Zb,Jb,e0,$u,s2,Xf,Bu,El;const ee=class ee extends ze{constructor(t){super(t);E(this,Se);E(this,Vr,null);E(this,Oc);q(this,"_drawId",null);x(this,Oc,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(S(this,Se,Zb).call(this,t),S(this,Se,$u).call(this))}static _mergeSVGProperties(t,i){const n=new Set(Object.keys(t));for(const[s,a]of Object.entries(i))n.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Ue("Not implemented")}static get typesMap(){Ue("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(d(ee,Dt).updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,i[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,i[s]]);return t}_updateProperty(t,i,n){const s=this._drawingOptions,a=s[i],o=l=>{var u;s.updateProperty(i,l);const c=d(this,Vr).updateProperty(i,l);c&&S(this,Se,Bu).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(d(this,Vr).getPathResizingSVGProperties(S(this,Se,Xf).call(this)),{bbox:S(this,Se,El).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(d(this,Vr).getPathResizedSVGProperties(S(this,Se,Xf).call(this)),{bbox:S(this,Se,El).call(this)}))}_onTranslating(t,i){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:S(this,Se,El).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(d(this,Vr).getPathTranslatedSVGProperties(S(this,Se,Xf).call(this),this.parentDimensions),{bbox:S(this,Se,El).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Oc)&&(x(this,Oc,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){S(this,Se,e0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Se,$u).call(this),S(this,Se,Bu).call(this,d(this,Vr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),S(this,Se,e0).call(this)):t&&(this._uiManager.addShouldRescale(this),S(this,Se,$u).call(this,t),i=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties({bbox:S(this,Se,El).call(this)},d(this,Vr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,Se,Bu).call(this,d(this,Vr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),n}static createDrawerInstance(t,i,n,s,a){Ue("Not implemented")}static startDrawing(t,i,n,s){var b;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=s;if(d(ee,na)&&d(ee,na)!==u)return;const{viewport:{rotation:h}}=t,{width:f,height:m}=a.getBoundingClientRect(),p=x(ee,jo,new AbortController),g=t.combinedSignal(p);if(d(ee,ia)||x(ee,ia,c),d(ee,na)??x(ee,na,u),window.addEventListener("pointerup",y=>{var N;d(ee,ia)===y.pointerId?this._endDraw(y):(N=d(ee,sa))==null||N.delete(y.pointerId)},{signal:g}),window.addEventListener("pointercancel",y=>{var N;d(ee,ia)===y.pointerId?this._currentParent.endDrawingSession():(N=d(ee,sa))==null||N.delete(y.pointerId)},{signal:g}),window.addEventListener("pointerdown",y=>{d(ee,na)===y.pointerType&&((d(ee,sa)||x(ee,sa,new Set)).add(y.pointerId),d(ee,Dt).isCancellable()&&(d(ee,Dt).removeLastElement(),d(ee,Dt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Hi,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",y=>{y.timeStamp===d(ee,Lo)&&ht(y)},{signal:g}),t.toggleDrawing(),(b=i._editorUndoBar)==null||b.hide(),d(ee,Dt)){t.drawLayer.updateProperties(this._currentDrawId,d(ee,Dt).startNew(o,l,f,m,h));return}i.updateUIForDefaultProperties(this),x(ee,Dt,this.createDrawerInstance(o,l,f,m,h)),x(ee,Io,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(ee,Io).toSVGProperties(),d(ee,Dt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(x(ee,Lo,-1),!d(ee,Dt))return;const{offsetX:i,offsetY:n,pointerId:s}=t;if(d(ee,ia)===s){if(((a=d(ee,sa))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(ee,Dt).add(i,n)),x(ee,Lo,t.timeStamp),ht(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,x(ee,Dt,null),x(ee,Io,null),x(ee,na,null),x(ee,Lo,NaN)),d(ee,jo)&&(d(ee,jo).abort(),x(ee,jo,null),x(ee,ia,NaN),x(ee,sa,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,d(ee,Dt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=d(ee,Dt),s=this._currentDrawId,a=n.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,n.setLastElement(a))},undo:()=>{i.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:Ae.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ae.DRAW_STEP),!d(ee,Dt).isEmpty()){const{pageDimensions:[n,s],scale:a}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(ee,Dt).getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:d(ee,Io),mustBeCommitted:!t});return this._cleanup(!0),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,n,s,a,o){Ue("Not implemented")}static async deserialize(t,i,n){var h,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=i.viewport,c=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),u=await super.deserialize(t,i,n);return u.createDrawingOptions(t),S(h=u,Se,Zb).call(h,{drawOutlines:c}),S(f=u,Se,$u).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[i,n]=this.pageTranslation,[s,a]=this.pageDimensions;return d(this,Vr).serialize([i,n,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Vr=new WeakMap,Oc=new WeakMap,Dt=new WeakMap,jo=new WeakMap,Io=new WeakMap,ia=new WeakMap,na=new WeakMap,sa=new WeakMap,Lo=new WeakMap,Se=new WeakSet,Zb=function({drawOutlines:t,drawId:i,drawingOptions:n}){x(this,Vr,t),this._drawingOptions||(this._drawingOptions=n),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=S(this,Se,Jb).call(this,t,this.parent),S(this,Se,Bu).call(this,t.box)},Jb=function(t,i){const{id:n}=i.drawLayer.draw(ee._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n},e0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},$u=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,Se,Jb).call(this,d(this,Vr),t)}},s2=function([t,i,n,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[i,1-t,n*(o/a),s*(a/o)];case 180:return[1-t,1-i,n,s];case 270:return[1-i,t,n*(o/a),s*(a/o)];default:return[t,i,n,s]}},Xf=function(){const{x:t,y:i,width:n,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-i,t,n*(a/o),s*(o/a)];case 180:return[1-t,1-i,n,s];case 270:return[i,1-t,n*(a/o),s*(o/a)];default:return[t,i,n,s]}},Bu=function(t){if([this.x,this.y,this.width,this.height]=S(this,Se,s2).call(this,t),this.div){this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}this._onResized()},El=function(){const{x:t,y:i,width:n,height:s,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-i-s,t,s,n];case 2:return[1-t-n,1-i-s,n,s];case 3:return[i,1-t-n,s,n];case 4:return[t,i-n*(l/c),s*(c/l),n*(l/c)];case 5:return[1-i,t,n*(l/c),s*(c/l)];case 6:return[1-t-s*(c/l),1-i,s*(c/l),n*(l/c)];case 7:return[i-n*(l/c),1-t-s*(c/l),n*(l/c),s*(c/l)];case 8:return[t-n,i-s,n,s];case 9:return[1-i,t-n,s,n];case 10:return[1-t,1-i,n,s];case 11:return[i-s,1-t,s,n];case 12:return[t-s*(c/l),i,s*(c/l),n*(l/c)];case 13:return[1-i-n*(l/c),t-s*(c/l),n*(l/c),s*(c/l)];case 14:return[1-t,1-i-n*(l/c),s*(c/l),n*(l/c)];case 15:return[i,1-t,n*(l/c),s*(c/l)];default:return[t,i,n,s]}},q(ee,"_currentDrawId",-1),q(ee,"_currentParent",null),E(ee,Dt,null),E(ee,jo,null),E(ee,Io,null),E(ee,ia,NaN),E(ee,na,null),E(ee,sa,null),E(ee,Lo,NaN),q(ee,"_INNER_MARGIN",3);let Km=ee;var dn,Ot,Tt,Uo,Tc,cr,Bt,fi,Fo,Vo,$o,kc,Zf;class Z7{constructor(e,t,i,n,s,a){E(this,kc);E(this,dn,new Float64Array(6));E(this,Ot);E(this,Tt);E(this,Uo);E(this,Tc);E(this,cr);E(this,Bt,"");E(this,fi,0);E(this,Fo,new rf);E(this,Vo);E(this,$o);x(this,Vo,i),x(this,$o,n),x(this,Uo,s),x(this,Tc,a),[e,t]=S(this,kc,Zf).call(this,e,t);const o=x(this,Ot,[NaN,NaN,NaN,NaN,e,t]);x(this,cr,[e,t]),x(this,Tt,[{line:o,points:d(this,cr)}]),d(this,dn).set(o,0)}updateProperty(e,t){e==="stroke-width"&&x(this,Tc,t)}isEmpty(){return!d(this,Tt)||d(this,Tt).length===0}isCancellable(){return d(this,cr).length<=10}add(e,t){[e,t]=S(this,kc,Zf).call(this,e,t);const[i,n,s,a]=d(this,dn).subarray(2,6),o=e-s,l=t-a;return Math.hypot(d(this,Vo)*o,d(this,$o)*l)<=2?null:(d(this,cr).push(e,t),isNaN(i)?(d(this,dn).set([s,a,e,t],2),d(this,Ot).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,dn)[0])&&d(this,Ot).splice(6,6),d(this,dn).set([i,n,s,a,e,t],0),d(this,Ot).push(...Z.createBezierPoints(i,n,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(d(this,cr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,n,s){x(this,Vo,i),x(this,$o,n),x(this,Uo,s),[e,t]=S(this,kc,Zf).call(this,e,t);const a=x(this,Ot,[NaN,NaN,NaN,NaN,e,t]);x(this,cr,[e,t]);const o=d(this,Tt).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),d(this,Tt).push({line:a,points:d(this,cr)}),d(this,dn).set(a,0),x(this,fi,0),this.toSVGPath(),null}getLastElement(){return d(this,Tt).at(-1)}setLastElement(e){return d(this,Tt)?(d(this,Tt).push(e),x(this,Ot,e.line),x(this,cr,e.points),x(this,fi,0),{path:{d:this.toSVGPath()}}):d(this,Fo).setLastElement(e)}removeLastElement(){if(!d(this,Tt))return d(this,Fo).removeLastElement();d(this,Tt).pop(),x(this,Bt,"");for(let e=0,t=d(this,Tt).length;e<t;e++){const{line:i,points:n}=d(this,Tt)[e];x(this,Ot,i),x(this,cr,n),x(this,fi,0),this.toSVGPath()}return{path:{d:d(this,Bt)}}}toSVGPath(){const e=Z.svgRound(d(this,Ot)[4]),t=Z.svgRound(d(this,Ot)[5]);if(d(this,cr).length===2)return x(this,Bt,`${d(this,Bt)} M ${e} ${t} Z`),d(this,Bt);if(d(this,cr).length<=6){const n=d(this,Bt).lastIndexOf("M");x(this,Bt,`${d(this,Bt).slice(0,n)} M ${e} ${t}`),x(this,fi,6)}if(d(this,cr).length===4){const n=Z.svgRound(d(this,Ot)[10]),s=Z.svgRound(d(this,Ot)[11]);return x(this,Bt,`${d(this,Bt)} L ${n} ${s}`),x(this,fi,12),d(this,Bt)}const i=[];d(this,fi)===0&&(i.push(`M ${e} ${t}`),x(this,fi,6));for(let n=d(this,fi),s=d(this,Ot).length;n<s;n+=6){const[a,o,l,c,u,h]=d(this,Ot).slice(n,n+6).map(Z.svgRound);i.push(`C${a} ${o} ${l} ${c} ${u} ${h}`)}return x(this,Bt,d(this,Bt)+i.join(" ")),x(this,fi,d(this,Ot).length),d(this,Bt)}getOutlines(e,t,i,n){const s=d(this,Tt).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),d(this,Fo).build(d(this,Tt),e,t,i,d(this,Uo),d(this,Tc),n),x(this,dn,null),x(this,Ot,null),x(this,Tt,null),x(this,Bt,null),d(this,Fo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}dn=new WeakMap,Ot=new WeakMap,Tt=new WeakMap,Uo=new WeakMap,Tc=new WeakMap,cr=new WeakMap,Bt=new WeakMap,fi=new WeakMap,Fo=new WeakMap,Vo=new WeakMap,$o=new WeakMap,kc=new WeakSet,Zf=function(e,t){return Z._normalizePoint(e,t,d(this,Vo),d(this,$o),d(this,Uo))};var ur,Th,kh,$r,hn,fn,Mc,Rc,Bo,Wt,Pn,a2,o2,l2;class rf extends Z{constructor(){super(...arguments);E(this,Wt);E(this,ur);E(this,Th,0);E(this,kh);E(this,$r);E(this,hn);E(this,fn);E(this,Mc);E(this,Rc);E(this,Bo)}build(t,i,n,s,a,o,l){x(this,hn,i),x(this,fn,n),x(this,Mc,s),x(this,Rc,a),x(this,Bo,o),x(this,kh,l??0),x(this,$r,t),S(this,Wt,o2).call(this)}get thickness(){return d(this,Bo)}setLastElement(t){return d(this,$r).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,$r).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of d(this,$r)){if(t.push(`M${Z.svgRound(i[4])} ${Z.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${Z.svgRound(i[10])} ${Z.svgRound(i[11])}`);continue}for(let n=6,s=i.length;n<s;n+=6){const[a,o,l,c,u,h]=i.subarray(n,n+6).map(Z.svgRound);t.push(`C${a} ${o} ${l} ${c} ${u} ${h}`)}}return t.join("")}serialize([t,i,n,s],a){const o=[],l=[],[c,u,h,f]=S(this,Wt,a2).call(this);let m,p,g,b,y,N,w,_,P;switch(d(this,Rc)){case 0:P=Z._rescale,m=t,p=i+s,g=n,b=-s,y=t+c*n,N=i+(1-u-f)*s,w=t+(c+h)*n,_=i+(1-u)*s;break;case 90:P=Z._rescaleAndSwap,m=t,p=i,g=n,b=s,y=t+u*n,N=i+c*s,w=t+(u+f)*n,_=i+(c+h)*s;break;case 180:P=Z._rescale,m=t+n,p=i,g=-n,b=s,y=t+(1-c-h)*n,N=i+u*s,w=t+(1-c)*n,_=i+(u+f)*s;break;case 270:P=Z._rescaleAndSwap,m=t+n,p=i+s,g=-n,b=-s,y=t+(1-u-f)*n,N=i+(1-c-h)*s,w=t+(1-u)*n,_=i+(1-c)*s;break}for(const{line:O,points:T}of d(this,$r))o.push(P(O,m,p,g,b,a?new Array(O.length):null)),l.push(P(T,m,p,g,b,a?new Array(T.length):null));return{lines:o,points:l,rect:[y,N,w,_]}}static deserialize(t,i,n,s,a,{paths:{lines:o,points:l},rotation:c,thickness:u}){const h=[];let f,m,p,g,b;switch(c){case 0:b=Z._rescale,f=-t/n,m=i/s+1,p=1/n,g=-1/s;break;case 90:b=Z._rescaleAndSwap,f=-i/s,m=-t/n,p=1/s,g=1/n;break;case 180:b=Z._rescale,f=t/n+1,m=-i/s,p=-1/n,g=1/s;break;case 270:b=Z._rescaleAndSwap,f=i/s+1,m=t/n+1,p=-1/s,g=-1/n;break}if(!o){o=[];for(const N of l){const w=N.length;if(w===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(w===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const _=new Float32Array(3*(w-2));o.push(_);let[P,O,T,C]=N.subarray(0,4);_.set([NaN,NaN,NaN,NaN,P,O],0);for(let D=4;D<w;D+=2){const k=N[D],M=N[D+1];_.set(Z.createBezierPoints(P,O,T,C,k,M),(D-2)*3),[P,O,T,C]=[T,C,k,M]}}}for(let N=0,w=o.length;N<w;N++)h.push({line:b(o[N].map(_=>_??NaN),f,m,p,g),points:b(l[N].map(_=>_??NaN),f,m,p,g)});const y=new this.prototype.constructor;return y.build(h,n,s,1,c,u,a),y}get box(){return d(this,ur)}updateProperty(t,i){return t==="stroke-width"?S(this,Wt,l2).call(this,i):null}updateParentDimensions([t,i],n){const[s,a]=S(this,Wt,Pn).call(this);x(this,hn,t),x(this,fn,i),x(this,Mc,n);const[o,l]=S(this,Wt,Pn).call(this),c=o-s,u=l-a,h=d(this,ur);return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateRotation(t){return x(this,Th,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,ur).map(Z.svgRound).join(" ")}get defaultProperties(){const[t,i]=d(this,ur);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=d(this,ur);let n=0,s=0,a=0,o=0,l=0,c=0;switch(d(this,Th)){case 90:s=i/t,a=-t/i,l=t;break;case 180:n=-1,o=-1,l=t,c=i;break;case 270:s=-i/t,a=t/i,c=i;break;default:return""}return`matrix(${n} ${s} ${a} ${o} ${Z.svgRound(l)} ${Z.svgRound(c)})`}getPathResizingSVGProperties([t,i,n,s]){const[a,o]=S(this,Wt,Pn).call(this),[l,c,u,h]=d(this,ur);if(Math.abs(u-a)<=Z.PRECISION||Math.abs(h-o)<=Z.PRECISION){const b=t+n/2-(l+u/2),y=i+s/2-(c+h/2);return{path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(i)}`,transform:`${this.rotationTransform} translate(${b} ${y})`}}}const f=(n-2*a)/(u-2*a),m=(s-2*o)/(h-2*o),p=u/n,g=h/s;return{path:{"transform-origin":`${Z.svgRound(l)} ${Z.svgRound(c)}`,transform:`${this.rotationTransform} scale(${p} ${g}) translate(${Z.svgRound(a)} ${Z.svgRound(o)}) scale(${f} ${m}) translate(${Z.svgRound(-a)} ${Z.svgRound(-o)})`}}}getPathResizedSVGProperties([t,i,n,s]){const[a,o]=S(this,Wt,Pn).call(this),l=d(this,ur),[c,u,h,f]=l;if(l[0]=t,l[1]=i,l[2]=n,l[3]=s,Math.abs(h-a)<=Z.PRECISION||Math.abs(f-o)<=Z.PRECISION){const y=t+n/2-(c+h/2),N=i+s/2-(u+f/2);for(const{line:w,points:_}of d(this,$r))Z._translate(w,y,N,w),Z._translate(_,y,N,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(n-2*a)/(h-2*a),p=(s-2*o)/(f-2*o),g=-m*(c+a)+t+a,b=-p*(u+o)+i+o;if(m!==1||p!==1||g!==0||b!==0)for(const{line:y,points:N}of d(this,$r))Z._rescale(y,g,b,m,p,y),Z._rescale(N,g,b,m,p,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],n){const[s,a]=n,o=d(this,ur),l=t-o[0],c=i-o[1];if(d(this,hn)===s&&d(this,fn)===a)for(const{line:u,points:h}of d(this,$r))Z._translate(u,l,c,u),Z._translate(h,l,c,h);else{const u=d(this,hn)/s,h=d(this,fn)/a;x(this,hn,s),x(this,fn,a);for(const{line:f,points:m}of d(this,$r))Z._rescale(f,l,c,u,h,f),Z._rescale(m,l,c,u,h,m);o[2]*=u,o[3]*=h}return o[0]=t,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(i)}`}}}get defaultSVGProperties(){const t=d(this,ur);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(t[0])} ${Z.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}ur=new WeakMap,Th=new WeakMap,kh=new WeakMap,$r=new WeakMap,hn=new WeakMap,fn=new WeakMap,Mc=new WeakMap,Rc=new WeakMap,Bo=new WeakMap,Wt=new WeakSet,Pn=function(t=d(this,Bo)){const i=d(this,kh)+t/2*d(this,Mc);return d(this,Rc)%180===0?[i/d(this,hn),i/d(this,fn)]:[i/d(this,fn),i/d(this,hn)]},a2=function(){const[t,i,n,s]=d(this,ur),[a,o]=S(this,Wt,Pn).call(this,0);return[t+a,i+o,n-2*a,s-2*o]},o2=function(){const t=x(this,ur,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of d(this,$r)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)se.pointBoundingBox(s[l],s[l+1],t);continue}let a=s[4],o=s[5];for(let l=6,c=s.length;l<c;l+=6){const[u,h,f,m,p,g]=s.subarray(l,l+6);se.bezierBoundingBox(a,o,u,h,f,m,p,g,t),a=p,o=g}}const[i,n]=S(this,Wt,Pn).call(this);t[0]=fr(t[0]-i,0,1),t[1]=fr(t[1]-n,0,1),t[2]=fr(t[2]+i,0,1),t[3]=fr(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]},l2=function(t){const[i,n]=S(this,Wt,Pn).call(this);x(this,Bo,t);const[s,a]=S(this,Wt,Pn).call(this),[o,l]=[s-i,a-n],c=d(this,ur);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};class pg extends n2{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new pg(this._viewParameters);return e.updateAll(this),e}}var hp,c2;const Dl=class Dl extends Km{constructor(t){super({...t,name:"inkEditor"});E(this,hp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){ze.initialize(t,i),this._defaultDrawingOptions=new pg(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return we(this,"typesMap",new Map([[Ae.INK_THICKNESS,"stroke-width"],[Ae.INK_COLOR,"stroke"],[Ae.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,n,s,a){return new Z7(t,i,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,n,s,a,o){return rf.deserialize(t,i,n,s,a,o)}static async deserialize(t,i,n){let s=null;if(t instanceof Ox){const{data:{inkLists:o,rect:l,rotation:c,id:u,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:p},parent:{page:{pageNumber:g}}}=t;s=t={annotationType:de.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:o},boxes:null,pageIndex:g-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:p}}const a=await super.deserialize(t,i,n);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:n}=this;i.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:n}){this._drawingOptions=Dl.getDefaultDrawingOptions({stroke:se.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c={annotationType:de.INK,color:ze._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:i,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.isCopy=!0,c):this.annotationElementId&&!S(this,hp,c2).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const{points:i,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:i}),null}};hp=new WeakSet,c2=function(t){const{color:i,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==i[l])||t.thickness!==n||t.opacity!==s||t.pageIndex!==a},q(Dl,"_type","ink"),q(Dl,"_editorType",de.INK),q(Dl,"_defaultDrawingOptions",null);let t0=Dl;class r0 extends rf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Ef=8,Au=3;var Ho,Oe,i0,Li,u2,d2,n0,Jf,h2,f2,m2,s0,a0,p2;class os{static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:n},s,a,o,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=200,f=u.font=`${i} ${n} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:y,fontBoundingBoxDescent:N,width:w}=u.measureText(e),_=1.5,P=Math.ceil(Math.max(Math.abs(m)+Math.abs(p)||0,w)*_),O=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||h,Math.abs(y)+Math.abs(N)||h)*_);c=new OffscreenCanvas(P,O),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,P,O),u.fillStyle="black",u.fillText(e,P*(_-1)/2,O*(3-_)/2);const T=S(this,Oe,s0).call(this,u.getImageData(0,0,P,O).data),C=S(this,Oe,m2).call(this,T),D=S(this,Oe,a0).call(this,C),k=S(this,Oe,n0).call(this,T,P,O,D);return this.processDrawnLines({lines:{curves:k,width:P,height:O},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,i,n,s){const[a,o,l]=S(this,Oe,p2).call(this,e),[c,u]=S(this,Oe,f2).call(this,a,o,l,Math.hypot(o,l)*d(this,Ho).sigmaSFactor,d(this,Ho).sigmaR,d(this,Ho).kernelSize),h=S(this,Oe,a0).call(this,u),f=S(this,Oe,n0).call(this,c,o,l,h);return this.processDrawnLines({lines:{curves:f,width:o,height:l},pageWidth:t,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:a,areContours:o}){n%180!==0&&([t,i]=[i,t]);const{curves:l,width:c,height:u}=e,h=e.thickness??0,f=[],m=Math.min(t/c,i/u),p=m/t,g=m/i,b=[];for(const{points:N}of l){const w=a?S(this,Oe,h2).call(this,N):N;if(!w)continue;b.push(w);const _=w.length,P=new Float32Array(_),O=new Float32Array(3*(_===2?2:_-2));if(f.push({line:O,points:P}),_===2){P[0]=w[0]*p,P[1]=w[1]*g,O.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[T,C,D,k]=w;T*=p,C*=g,D*=p,k*=g,P.set([T,C,D,k],0),O.set([NaN,NaN,NaN,NaN,T,C],0);for(let M=4;M<_;M+=2){const j=P[M]=w[M]*p,V=P[M+1]=w[M+1]*g;O.set(Z.createBezierPoints(T,C,D,k,j,V),(M-2)*3),[T,C,D,k]=[D,k,j,V]}}if(f.length===0)return null;const y=o?new r0:new rf;return y.build(f,t,i,1,n,o?0:h,s),{outline:y,newCurves:b,areContours:o,thickness:h,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:n,height:s}){let a=1/0,o=-1/0,l=0;for(const w of e){l+=w.length;for(let _=2,P=w.length;_<P;_++){const O=w[_]-w[_-2];a=Math.min(a,O),o=Math.max(o,O)}}let c;a>=-128&&o<=127?c=Int8Array:a>=-32768&&o<=32767?c=Int16Array:c=Int32Array;const u=e.length,h=Ef+Au*u,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=n,f[m++]=s,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(i??0)),f[m++]=u,f[m++]=c.BYTES_PER_ELEMENT;for(const w of e)f[m++]=w.length-2,f[m++]=w[0],f[m++]=w[1];const p=new CompressionStream("deflate-raw"),g=p.writable.getWriter();await g.ready,g.write(f);const b=c.prototype.constructor;for(const w of e){const _=new b(w.length-2);for(let P=2,O=w.length;P<O;P++)_[P-2]=w[P]-w[P-2];g.write(_)}g.close();const y=await new Response(p.readable).arrayBuffer(),N=new Uint8Array(y);return fC(N)}static async decompressSignature(e){try{const t=A6(e),{readable:i,writable:n}=new DecompressionStream("deflate-raw"),s=n.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const w of i)a||(a=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),a.set(w,o),o+=w.length;const l=new Uint32Array(a.buffer,0,a.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],h=l[3],f=l[4]===0,m=l[5],p=l[6],g=l[7],b=[],y=(Ef+Au*p)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(g){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(a.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(a.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(a.buffer,y);break}o=0;for(let w=0;w<p;w++){const _=l[Au*w+Ef],P=new Float32Array(_+2);b.push(P);for(let O=0;O<Au-1;O++)P[O]=l[Au*w+Ef+O+1];for(let O=0;O<_;O++)P[O+2]=P[O]+N[o++]}return{areContours:f,thickness:m,outlines:b,width:u,height:h}}catch(t){return he(`decompressSignature: ${t}`),null}}}Ho=new WeakMap,Oe=new WeakSet,i0=function(e,t,i,n){return i-=e,n-=t,i===0?n>0?0:4:i===1?n+6:2-n},Li=new WeakMap,u2=function(e,t,i,n,s,a,o){const l=S(this,Oe,i0).call(this,i,n,s,a);for(let c=0;c<8;c++){const u=(-c+l-o+16)%8,h=d(this,Li)[2*u],f=d(this,Li)[2*u+1];if(e[(i+h)*t+(n+f)]!==0)return u}return-1},d2=function(e,t,i,n,s,a,o){const l=S(this,Oe,i0).call(this,i,n,s,a);for(let c=0;c<8;c++){const u=(c+l+o+16)%8,h=d(this,Li)[2*u],f=d(this,Li)[2*u+1];if(e[(i+h)*t+(n+f)]!==0)return u}return-1},n0=function(e,t,i,n){const s=e.length,a=new Int32Array(s);for(let u=0;u<s;u++)a[u]=e[u]<=n?1:0;for(let u=1;u<i-1;u++)a[u*t]=a[u*t+t-1]=0;for(let u=0;u<t;u++)a[u]=a[t*i-1-u]=0;let o=1,l;const c=[];for(let u=1;u<i-1;u++){l=1;for(let h=1;h<t-1;h++){const f=u*t+h,m=a[f];if(m===0)continue;let p=u,g=h;if(m===1&&a[f-1]===0)o+=1,g-=1;else if(m>=1&&a[f+1]===0)o+=1,g+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const b=[h,u],y=g===h+1,N={isHole:y,points:b,id:o,parent:0};c.push(N);let w;for(const M of c)if(M.id===l){w=M;break}w?w.isHole?N.parent=y?w.parent:l:N.parent=y?l:w.parent:N.parent=y?l:0;const _=S(this,Oe,u2).call(this,a,t,u,h,p,g,0);if(_===-1){a[f]=-o,a[f]!==1&&(l=Math.abs(a[f]));continue}let P=d(this,Li)[2*_],O=d(this,Li)[2*_+1];const T=u+P,C=h+O;p=T,g=C;let D=u,k=h;for(;;){const M=S(this,Oe,d2).call(this,a,t,D,k,p,g,1);P=d(this,Li)[2*M],O=d(this,Li)[2*M+1];const j=D+P,V=k+O;b.push(V,j);const B=D*t+k;if(a[B+1]===0?a[B]=-o:a[B]===1&&(a[B]=o),j===u&&V===h&&D===T&&k===C){a[f]!==1&&(l=Math.abs(a[f]));break}else p=D,g=k,D=j,k=V}}}return c},Jf=function(e,t,i,n){if(i-t<=4){for(let T=t;T<i-2;T+=2)n.push(e[T],e[T+1]);return}const s=e[t],a=e[t+1],o=e[i-4]-s,l=e[i-3]-a,c=Math.hypot(o,l),u=o/c,h=l/c,f=u*a-h*s,m=l/o,p=1/c,g=Math.atan(m),b=Math.cos(g),y=Math.sin(g),N=p*(Math.abs(b)+Math.abs(y)),w=p*(1-N+N**2),_=Math.max(Math.atan(Math.abs(y+b)*w),Math.atan(Math.abs(y-b)*w));let P=0,O=t;for(let T=t+2;T<i-2;T+=2){const C=Math.abs(f-u*e[T+1]+h*e[T]);C>P&&(O=T,P=C)}P>(c*_)**2?(S(this,Oe,Jf).call(this,e,t,O+2,n),S(this,Oe,Jf).call(this,e,O,i,n)):n.push(s,a)},h2=function(e){const t=[],i=e.length;return S(this,Oe,Jf).call(this,e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t},f2=function(e,t,i,n,s,a){const o=new Float32Array(a**2),l=-2*n**2,c=a>>1;for(let g=0;g<a;g++){const b=(g-c)**2;for(let y=0;y<a;y++)o[g*a+y]=Math.exp((b+(y-c)**2)/l)}const u=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/h);const f=e.length,m=new Uint8Array(f),p=new Uint32Array(256);for(let g=0;g<i;g++)for(let b=0;b<t;b++){const y=g*t+b,N=e[y];let w=0,_=0;for(let O=0;O<a;O++){const T=g+O-c;if(!(T<0||T>=i))for(let C=0;C<a;C++){const D=b+C-c;if(D<0||D>=t)continue;const k=e[T*t+D],M=o[O*a+C]*u[Math.abs(k-N)];w+=k*M,_+=M}}const P=m[y]=Math.round(w/_);p[P]++}return[m,p]},m2=function(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t},s0=function(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let n=-1/0,s=1/0;for(let o=0,l=i.length;o<l;o++){if(e[(o<<2)+3]===0){n=i[o]=255;continue}const u=i[o]=e[o<<2];u>n&&(n=u),u<s&&(s=u)}const a=255/(n-s);for(let o=0;o<t;o++)i[o]=(i[o]-s)*a;return i},a0=function(e){let t,i=-1/0,n=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(t=s;t<256;t++){const l=e[t];l>i&&(t-a>n&&(n=t-a,o=t-1),i=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},p2=function(e){const t=e,{width:i,height:n}=e,{maxDim:s}=d(this,Ho);let a=i,o=n;if(i>s||n>s){let f=i,m=n,p=Math.log2(Math.max(i,n)/s);const g=Math.floor(p);p=p===g?g-1:g;for(let y=0;y<p;y++){a=Math.ceil(f/2),o=Math.ceil(m/2);const N=new OffscreenCanvas(a,o);N.getContext("2d").drawImage(e,0,0,f,m,0,0,a,o),f=a,m=o,e!==t&&e.close(),e=N.transferToImageBitmap()}const b=Math.min(s/a,s/o);a=Math.round(a*b),o=Math.round(o*b)}const c=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,a,o);const u=c.getImageData(0,0,a,o).data;return[S(this,Oe,s0).call(this,u),a,o]},E(os,Oe),E(os,Ho,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),E(os,Li,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Tx extends n2{constructor(){super(),super.updateProperties({fill:ze._defaultLineColor,"stroke-width":0})}clone(){const e=new Tx;return e.updateAll(this),e}}class kx extends pg{constructor(e){super(e),super.updateProperties({stroke:ze._defaultLineColor,"stroke-width":1})}clone(){const e=new kx(this._viewParameters);return e.updateAll(this),e}}var aa,Br,oa,la;const Or=class Or extends Km{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});E(this,aa,!1);E(this,Br,null);E(this,oa,null);E(this,la,null);this._willKeepAspectRatio=!0,x(this,oa,t.signatureData||null),x(this,Br,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){ze.initialize(t,i),this._defaultDrawingOptions=new Tx,this._defaultDrawnSignatureOptions=new kx(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return we(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Br)}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(d(this,oa)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:u}=d(this,oa),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,p=os.processDrawnLines({lines:s,pageWidth:h,pageHeight:f,rotation:m,innerMargin:Or._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(p,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){x(this,la,t),this.addEditToolbar()}getUuid(){return d(this,la)}get description(){return d(this,Br)}set description(t){x(this,Br,t),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:n,width:s,height:a}=d(this,oa),o=Math.max(s,a),l=os.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:n,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:l.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&d(this,Br)!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,d(this,la),d(this,Br)),t.show()),t):null}addSignature(t,i,n,s){const{x:a,y:o}=this,{outline:l}=x(this,oa,t);x(this,aa,l instanceof r0),x(this,Br,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let c;d(this,aa)?c=Or.getDefaultDrawingOptions():(c=Or._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[u,h]=this.parentDimensions,[,f]=this.pageDimensions;let m=i/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(u*this.width,h*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:n},rotation:s}=this.parent.viewport;return os.process(t,i,n,s,Or._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return os.extractContoursFromText(t,i,n,s,a,Or._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:n},rotation:s}=this.parent.viewport;return os.processDrawnLines({lines:t,pageWidth:i,pageHeight:n,rotation:s,innerMargin:Or._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Or.getDefaultDrawingOptions():(this._drawingOptions=Or._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:de.SIGNATURE,isSignature:!0,areContours:d(this,aa),color:[0,0,0],thickness:d(this,aa)?0:a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.paths={lines:i,points:n},o.uuid=d(this,la),o.isCopy=!0):o.lines=i,d(this,Br)&&(o.accessibilityData={type:"Figure",alt:d(this,Br)}),o}static deserializeDraw(t,i,n,s,a,o){return o.areContours?r0.deserialize(t,i,n,s,a,o):rf.deserialize(t,i,n,s,a,o)}static async deserialize(t,i,n){var a;const s=await super.deserialize(t,i,n);return x(s,aa,t.areContours),x(s,Br,((a=t.accessibilityData)==null?void 0:a.alt)||""),x(s,la,t.uuid),s}};aa=new WeakMap,Br=new WeakMap,oa=new WeakMap,la=new WeakMap,q(Or,"_type","signature"),q(Or,"_editorType",de.SIGNATURE),q(Or,"_defaultDrawingOptions",null);let o0=Or;var Ke,kt,ca,es,ua,jc,ts,zo,mn,Hr,Ic,_e,Hu,zu,em,tm,rm,c0,im,g2;class l0 extends ze{constructor(t){super({...t,name:"stampEditor"});E(this,_e);E(this,Ke,null);E(this,kt,null);E(this,ca,null);E(this,es,null);E(this,ua,null);E(this,jc,"");E(this,ts,null);E(this,zo,!1);E(this,mn,null);E(this,Hr,!1);E(this,Ic,!1);x(this,es,t.bitmapUrl),x(this,ua,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){ze.initialize(t,i)}static isHandlingMimeForPasting(t){return tb.includes(t)}static paste(t,i){i.pasteEditor({mode:de.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),i&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;d(this,kt)&&(x(this,Ke,null),this._uiManager.imageManager.deleteId(d(this,kt)),(t=d(this,ts))==null||t.remove(),x(this,ts,null),d(this,mn)&&(clearTimeout(d(this,mn)),x(this,mn,null))),super.remove()}rebuild(){if(!this.parent){d(this,kt)&&S(this,_e,em).call(this);return}super.rebuild(),this.div!==null&&(d(this,kt)&&d(this,ts)===null&&S(this,_e,em).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,ca)||d(this,Ke)||d(this,es)||d(this,ua)||d(this,kt)||d(this,zo))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),d(this,zo)||(d(this,Ke)?S(this,_e,tm).call(this):S(this,_e,em).call(this)),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(x(this,kt,n),s&&x(this,Ke,s),x(this,zo,!1),S(this,_e,tm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,mn)!==null&&clearTimeout(d(this,mn)),x(this,mn,setTimeout(()=>{x(this,mn,null),S(this,_e,c0).call(this)},200))}copyCanvas(t,i,n=!1){var m;t||(t=224);const{width:s,height:a}=d(this,Ke),o=new xn;let l=d(this,Ke),c=s,u=a,h=null;if(i){if(s>i||a>i){const C=Math.min(i/s,i/a);c=Math.floor(s*C),u=Math.floor(a*C)}h=document.createElement("canvas");const p=h.width=Math.ceil(c*o.sx),g=h.height=Math.ceil(u*o.sy);d(this,Hr)||(l=S(this,_e,rm).call(this,p,g));const b=h.getContext("2d");b.filter=this._uiManager.hcmFilter;let y="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",N="#42414d");const w=15,_=w*o.sx,P=w*o.sy,O=new OffscreenCanvas(_*2,P*2),T=O.getContext("2d");T.fillStyle=y,T.fillRect(0,0,_*2,P*2),T.fillStyle=N,T.fillRect(0,0,_,P),T.fillRect(_,P,_,P),b.fillStyle=b.createPattern(O,"repeat"),b.fillRect(0,0,p,g),b.drawImage(l,0,0,l.width,l.height,0,0,p,g)}let f=null;if(n){let p,g;if(o.symmetric&&l.width<t&&l.height<t)p=l.width,g=l.height;else if(l=d(this,Ke),s>t||a>t){const N=Math.min(t/s,t/a);p=Math.floor(s*N),g=Math.floor(a*N),d(this,Hr)||(l=S(this,_e,rm).call(this,p,g))}const y=new OffscreenCanvas(p,g).getContext("2d",{willReadFrequently:!0});y.drawImage(l,0,0,l.width,l.height,0,0,p,g),f={width:p,height:g,data:y.getImageData(0,0,p,g).data}}return{canvas:h,width:c,height:u,imageData:f}}static async deserialize(t,i,n){var b;let s=null,a=!1;if(t instanceof TD){const{data:{rect:y,rotation:N,id:w,structParent:_,popupRef:P},container:O,parent:{page:{pageNumber:T}},canvas:C}=t;let D,k;C?(delete t.canvas,{id:D,bitmap:k}=n.imageManager.getFromCanvas(O.id,C),C.remove()):(a=!0,t._hasNoCanvas=!0);const M=((b=await i._structTree.getAriaAttributes(`${wx}${w}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:de.STAMP,bitmapId:D,bitmap:k,pageIndex:T-1,rect:y.slice(0),rotation:N,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:_,popupRef:P}}const o=await super.deserialize(t,i,n),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:f,accessibilityData:m}=t;a?(n.addMissingCanvas(t.id,o),x(o,zo,!0)):h&&n.imageManager.isValidId(h)?(x(o,kt,h),c&&x(o,Ke,c)):x(o,es,u),x(o,Hr,f);const[p,g]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/g,o.annotationElementId=t.id||null,m&&(o.altTextData=m),o._initialData=s,x(o,Ic,!!s),o}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:de.STAMP,bitmapId:d(this,kt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Hr),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=S(this,_e,im).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=S(this,_e,g2).call(this,n);if(l.isSame)return null;l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,i===null)return n;i.stamps||(i.stamps=new Map);const o=d(this,Hr)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(d(this,kt)))i.stamps.set(d(this,kt),{area:o,serialized:n}),n.bitmap=S(this,_e,im).call(this,!1);else if(d(this,Hr)){const l=i.stamps.get(d(this,kt));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=S(this,_e,im).call(this,!1))}return n}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}Ke=new WeakMap,kt=new WeakMap,ca=new WeakMap,es=new WeakMap,ua=new WeakMap,jc=new WeakMap,ts=new WeakMap,zo=new WeakMap,mn=new WeakMap,Hr=new WeakMap,Ic=new WeakMap,_e=new WeakSet,Hu=function(t,i=!1){if(!t){this.remove();return}x(this,Ke,t.bitmap),i||(x(this,kt,t.id),x(this,Hr,t.isSvg)),t.file&&x(this,jc,t.file.name),S(this,_e,tm).call(this)},zu=function(){if(x(this,ca,null),this._uiManager.enableWaiting(!1),!!d(this,ts)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Ke)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Ke)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},em=function(){if(d(this,kt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,kt)).then(n=>S(this,_e,Hu).call(this,n,!0)).finally(()=>S(this,_e,zu).call(this));return}if(d(this,es)){const n=d(this,es);x(this,es,null),this._uiManager.enableWaiting(!0),x(this,ca,this._uiManager.imageManager.getFromUrl(n).then(s=>S(this,_e,Hu).call(this,s)).finally(()=>S(this,_e,zu).call(this)));return}if(d(this,ua)){const n=d(this,ua);x(this,ua,null),this._uiManager.enableWaiting(!0),x(this,ca,this._uiManager.imageManager.getFromFile(n).then(s=>S(this,_e,Hu).call(this,s)).finally(()=>S(this,_e,zu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=tb.join(",");const i=this._uiManager._signal;x(this,ca,new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,_e,Hu).call(this,s)}n()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:i})}).finally(()=>S(this,_e,zu).call(this))),t.click()},tm=function(){var h;const{div:t}=this;let{width:i,height:n}=d(this,Ke);const[s,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*s,n=this.height*a;else if(i>o*s||n>o*a){const f=Math.min(o*s/i,o*a/n);i*=f,n*=f}const[l,c]=this.parentDimensions;this.setDims(i*l/s,n*c/a),this._uiManager.enableWaiting(!1);const u=x(this,ts,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=i/s,this.height=n/a,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),S(this,_e,c0).call(this),d(this,Ic)||(this.parent.addUndoableEditor(this),x(this,Ic,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,jc)&&this.div.setAttribute("aria-description",d(this,jc))},rm=function(t,i){const{width:n,height:s}=d(this,Ke);let a=n,o=s,l=d(this,Ke);for(;a>2*t||o>2*i;){const c=a,u=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,c,u,0,0,a,o),l=h.transferToImageBitmap()}return l},c0=function(){const[t,i]=this.parentDimensions,{width:n,height:s}=this,a=new xn,o=Math.ceil(n*t*a.sx),l=Math.ceil(s*i*a.sy),c=d(this,ts);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const u=d(this,Hr)?d(this,Ke):S(this,_e,rm).call(this,o,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(u,0,0,u.width,u.height,0,0,o,l)},im=function(t){if(t){if(d(this,Hr)){const s=this._uiManager.imageManager.getSvgUrl(d(this,kt));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=d(this,Ke),i.getContext("2d").drawImage(d(this,Ke),0,0),i.toDataURL()}if(d(this,Hr)){const[i,n]=this.pageDimensions,s=Math.round(this.width*i*xa.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*xa.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(d(this,Ke),0,0,d(this,Ke).width,d(this,Ke).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(d(this,Ke))},g2=function(t){var o;const{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===i,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},q(l0,"_type","stamp"),q(l0,"_editorType",de.STAMP);var qo,Lc,pn,da,rs,mi,ha,Uc,Wo,Ui,is,rr,ns,ie,fa,Qe,v2,Zi,d0,h0,nm;const _i=class _i{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:n,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}){E(this,Qe);E(this,qo);E(this,Lc,!1);E(this,pn,null);E(this,da,null);E(this,rs,null);E(this,mi,new Map);E(this,ha,!1);E(this,Uc,!1);E(this,Wo,!1);E(this,Ui,null);E(this,is,null);E(this,rr,null);E(this,ns,null);E(this,ie);const h=[...d(_i,fa).values()];if(!_i._initialized){_i._initialized=!0;for(const f of h)f.initialize(u,e)}e.registerEditorTypes(h),x(this,ie,e),this.pageIndex=t,this.div=i,x(this,qo,s),x(this,pn,a),this.viewport=c,x(this,rr,l),this.drawLayer=o,this._structTree=n,d(this,ie).addLayer(this)}get isEmpty(){return d(this,mi).size===0}get isInvisible(){return this.isEmpty&&d(this,ie).getMode()===de.NONE}updateToolbar(e){d(this,ie).updateToolbar(e)}updateMode(e=d(this,ie).getMode()){switch(S(this,Qe,nm).call(this),e){case de.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case de.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case de.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of d(_i,fa).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,rr))==null?void 0:t.div)}setEditingState(e){d(this,ie).setEditingState(e)}addCommands(e){d(this,ie).addCommands(e)}cleanUndoStack(e){d(this,ie).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,pn))==null||t.div.classList.toggle("disabled",!e)}async enable(){x(this,Wo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of d(this,mi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(d(this,ie).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!d(this,pn)){x(this,Wo,!1);return}const t=d(this,pn).getEditableAnnotations();for(const i of t){if(i.hide(),d(this,ie).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const n=await this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}x(this,Wo,!1)}disable(){var n;x(this,Uc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of d(this,mi).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(n=this.getEditableAnnotation(s.annotationElementId))==null||n.show(),s.remove()}if(d(this,pn)){const s=d(this,pn).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(d(this,ie).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(d(this,ie).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}S(this,Qe,nm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of d(_i,fa).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Uc,!1)}getEditableAnnotation(e){var t;return((t=d(this,pn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,ie).getActive()!==e&&d(this,ie).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,rr))!=null&&e.div&&!d(this,ns)){x(this,ns,new AbortController);const t=d(this,ie).combinedSignal(d(this,ns));d(this,rr).div.addEventListener("pointerdown",S(this,Qe,v2).bind(this),{signal:t}),d(this,rr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,rr))!=null&&e.div&&d(this,ns)&&(d(this,ns).abort(),x(this,ns,null),d(this,rr).div.classList.remove("highlighting"))}enableClick(){if(d(this,da))return;x(this,da,new AbortController);const e=d(this,ie).combinedSignal(d(this,da));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,da))==null||e.abort(),x(this,da,null)}attach(e){d(this,mi).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,ie).isDeletedAnnotationElement(t)&&d(this,ie).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,mi).delete(e.id),(t=d(this,qo))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,Uc)&&e.annotationElementId&&d(this,ie).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,ie).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,ie).addDeletedAnnotationElement(e.annotationElementId),ze.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,ie).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,Wo)),d(this,ie).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,rs)&&(e._focusEventsAllowed=!1,x(this,rs,setTimeout(()=>{x(this,rs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,ie)._signal}),t.focus())},0))),e._structTreeParentId=(i=d(this,qo))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return d(this,ie).getId()}combinedSignal(e){return d(this,ie).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,Qe,Zi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,ie).updateMode(e.mode);const{offsetX:i,offsetY:n}=S(this,Qe,h0).call(this),s=this.getNextId(),a=S(this,Qe,d0).call(this,{parent:this,id:s,x:i,y:n,uiManager:d(this,ie),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=d(_i,fa).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,ie)))||null}createAndAddNewEditor(e,t,i={}){const n=this.getNextId(),s=S(this,Qe,d0).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:d(this,ie),isCentered:t,...i});return s&&this.add(s),s}addNewEditor(e={}){this.createAndAddNewEditor(S(this,Qe,h0).call(this),!0,e)}setSelected(e){d(this,ie).setSelected(e)}toggleSelected(e){d(this,ie).toggleSelected(e)}unselect(e){d(this,ie).unselect(e)}pointerup(e){var n;const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,ha)||(x(this,ha,!1),(n=d(this,Qe,Zi))!=null&&n.isDrawer&&d(this,Qe,Zi).supportMultipleDrawings))return;if(!d(this,Lc)){x(this,Lc,!0);return}const i=d(this,ie).getMode();if(i===de.STAMP||i===de.SIGNATURE){d(this,ie).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var n;if(d(this,ie).getMode()===de.HIGHLIGHT&&this.enableTextSelection(),d(this,ha)){x(this,ha,!1);return}const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(x(this,ha,!0),(n=d(this,Qe,Zi))!=null&&n.isDrawer){this.startDrawingSession(e);return}const i=d(this,ie).getActive();x(this,Lc,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,Ui)){d(this,Qe,Zi).startDrawing(this,d(this,ie),!1,e);return}d(this,ie).setCurrentDrawingSession(this),x(this,Ui,new AbortController);const t=d(this,ie).combinedSignal(d(this,Ui));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(x(this,is,null),this.commitOrRemove())},{signal:t}),d(this,Qe,Zi).startDrawing(this,d(this,ie),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&x(this,is,t);return}d(this,is)&&setTimeout(()=>{var t;(t=d(this,is))==null||t.focus(),x(this,is,null)},0)}endDrawingSession(e=!1){return d(this,Ui)?(d(this,ie).setCurrentDrawingSession(null),d(this,Ui).abort(),x(this,Ui,null),x(this,is,null),d(this,Qe,Zi).endDrawing(e)):null}findNewParent(e,t,i){const n=d(this,ie).findParent(t,i);return n===null||n===this?!1:(n.changeParent(e),!0)}commitOrRemove(){return d(this,Ui)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Ui)&&d(this,Qe,Zi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,ie).getActive())==null?void 0:e.parent)===this&&(d(this,ie).commitOrRemove(),d(this,ie).setActiveEditor(null)),d(this,rs)&&(clearTimeout(d(this,rs)),x(this,rs,null));for(const i of d(this,mi).values())(t=d(this,qo))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,d(this,mi).clear(),d(this,ie).removeLayer(this)}render({viewport:e}){this.viewport=e,nl(this.div,e);for(const t of d(this,ie).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,ie).commitOrRemove(),S(this,Qe,nm).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,nl(this.div,{rotation:i}),t!==i)for(const n of d(this,mi).values())n.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,ie).viewParameters.realScale}};qo=new WeakMap,Lc=new WeakMap,pn=new WeakMap,da=new WeakMap,rs=new WeakMap,mi=new WeakMap,ha=new WeakMap,Uc=new WeakMap,Wo=new WeakMap,Ui=new WeakMap,is=new WeakMap,rr=new WeakMap,ns=new WeakMap,ie=new WeakMap,fa=new WeakMap,Qe=new WeakSet,v2=function(e){d(this,ie).unselectAll();const{target:t}=e;if(t===d(this,rr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,rr).div.contains(t)){const{isMac:i}=Qt.platform;if(e.button!==0||e.ctrlKey&&i)return;d(this,ie).showAllEditors("highlight",!0,!0),d(this,rr).div.classList.add("free"),this.toggleDrawing(),Gm.startHighlighting(this,d(this,ie).direction==="ltr",{target:d(this,rr).div,x:e.x,y:e.y}),d(this,rr).div.addEventListener("pointerup",()=>{d(this,rr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,ie)._signal}),e.preventDefault()}},Zi=function(){return d(_i,fa).get(d(this,ie).getMode())},d0=function(e){const t=d(this,Qe,Zi);return t?new t.prototype.constructor(e):null},h0=function(){const{x:e,y:t,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+n),c=(s+o)/2-e,u=(a+l)/2-t,[h,f]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:f}},nm=function(){for(const e of d(this,mi).values())e.isEmpty()&&e.remove()},q(_i,"_initialized",!1),E(_i,fa,new Map([Bb,t0,l0,Gm,o0].map(e=>[e._editorType,e])));let u0=_i;var Fi,dr,Go,Mh,fp,b2,Nn,m0,y2,p0;const Nt=class Nt{constructor({pageIndex:e}){E(this,Nn);E(this,Fi,null);E(this,dr,new Map);E(this,Go,new Map);this.pageIndex=e}setParent(e){if(!d(this,Fi)){x(this,Fi,e);return}if(d(this,Fi)!==e){if(d(this,dr).size>0)for(const t of d(this,dr).values())t.remove(),e.append(t);x(this,Fi,e)}}static get _svgFactory(){return we(this,"_svgFactory",new zm)}draw(e,t=!1,i=!1){const n=ar(Nt,Mh)._++,s=S(this,Nn,m0).call(this),a=Nt._svgFactory.createElement("defs");s.append(a);const o=Nt._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,Go).set(n,o);const c=i?S(this,Nn,y2).call(this,a,l):null,u=Nt._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,e),d(this,dr).set(n,s),{id:n,clipPathId:`url(#${c})`}}drawOutline(e,t){const i=ar(Nt,Mh)._++,n=S(this,Nn,m0).call(this),s=Nt._svgFactory.createElement("defs");n.append(s);const a=Nt._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Nt._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${i}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=Nt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=Nt._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=Nt._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return n.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,e),d(this,dr).set(i,n),i}finalizeDraw(e,t){d(this,Go).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:i,bbox:n,rootClass:s,path:a}=t,o=typeof e=="number"?d(this,dr).get(e):e;if(o){if(i&&S(this,Nn,p0).call(this,o,i),n&&S(l=Nt,fp,b2).call(l,o,n),s){const{classList:c}=o;for(const[u,h]of Object.entries(s))c.toggle(u,h)}if(a){const u=o.firstChild.firstChild;S(this,Nn,p0).call(this,u,a)}}}updateParent(e,t){if(t===this)return;const i=d(this,dr).get(e);i&&(d(t,Fi).append(i),d(this,dr).delete(e),d(t,dr).set(e,i))}remove(e){d(this,Go).delete(e),d(this,Fi)!==null&&(d(this,dr).get(e).remove(),d(this,dr).delete(e))}destroy(){x(this,Fi,null);for(const e of d(this,dr).values())e.remove();d(this,dr).clear(),d(this,Go).clear()}};Fi=new WeakMap,dr=new WeakMap,Go=new WeakMap,Mh=new WeakMap,fp=new WeakSet,b2=function(e,[t,i,n,s]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*n}%`,a.height=`${100*s}%`},Nn=new WeakSet,m0=function(){const e=Nt._svgFactory.create(1,1,!0);return d(this,Fi).append(e),e.setAttribute("aria-hidden",!0),e},y2=function(e,t){const i=Nt._svgFactory.createElement("clipPath");e.append(i);const n=`clip_${t}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Nt._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),n},p0=function(e,t){for(const[i,n]of Object.entries(t))n===null?e.removeAttribute(i):e.setAttribute(i,n)},E(Nt,fp),E(Nt,Mh,0);let f0=Nt;globalThis._pdfjsTestingUtils={HighlightOutliner:zb};globalThis.pdfjsLib={AbortException:ya,AnnotationEditorLayer:u0,AnnotationEditorParamsType:Ae,AnnotationEditorType:de,AnnotationEditorUIManager:sl,AnnotationLayer:Fb,AnnotationMode:Os,AnnotationType:dt,build:T7,ColorPicker:Wm,createValidAbsoluteUrl:cC,DOMSVGFactory:zm,DrawLayer:f0,FeatureTest:Qt,fetchData:Xh,getDocument:mD,getFilenameFromUrl:E6,getPdfFilenameFromUrl:S6,getUuid:hC,getXfaPageViewport:P6,GlobalWorkerOptions:gi,ImageKind:Cf,InvalidPDFException:Jv,isDataScheme:fg,isPdfFile:Ex,isValidExplicitDest:U6,MathClamp:fr,noContextMenu:Hi,normalizeUnicode:N6,OPS:Vm,OutputScale:xn,PasswordResponses:h6,PDFDataRangeTransport:pD,PDFDateString:Sx,PDFWorker:ad,PermissionFlag:d6,PixelsPerInch:xa,RenderingCancelledException:Ax,ResponseException:$m,setLayerDimensions:nl,shadow:we,SignatureExtractor:os,stopEvent:ht,SupportedImageMimeTypes:tb,TextLayer:nd,TouchManager:Hm,updateUrlHash:uC,Util:se,VerbosityLevel:ug,version:bD,XfaLayer:yD};var x2={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(r,e){((t,i)=>{r.exports=i()})(E2,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},n,s=!i.document&&!!i.postMessage,a=i.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(D){var k=P(D);k.chunkSize=parseInt(k.chunkSize),D.step||D.chunk||(k.chunkSize=null),this._handle=new g(k),(this._handle.streamer=this)._config=k}).call(this,C),this.parseChunk=function(D,k){var M=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<M){let V=this._config.newline;V||(j=this._config.quoteChar||'"',V=this._handle.guessLineEndings(D,j)),D=[...D.split(V).slice(M)].join(V)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(j=this._config.beforeFirstChunk(D))!==void 0&&(D=j),this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+D,j=(this._partialLine="",this._handle.parse(M,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(D=j.meta.cursor,M=(this._finished||(this._partialLine=M.substring(D-this._baseIndex),this._baseIndex=D),j&&j.data&&(this._rowCount+=j.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)i.postMessage({results:j,workerId:c.WORKER_ID,finished:M});else if(T(this._config.chunk)&&!k){if(this._config.chunk(j,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=j=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(j.data),this._completeResults.errors=this._completeResults.errors.concat(j.errors),this._completeResults.meta=j.meta),this._completed||!M||!T(this._config.complete)||j&&j.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||j&&j.meta.paused||this._nextChunk(),j}this._halted=!0},this._sendError=function(D){T(this._config.error)?this._config.error(D):a&&this._config.error&&i.postMessage({workerId:c.WORKER_ID,error:D,finished:!1})}}function h(C){var D;(C=C||{}).chunkSize||(C.chunkSize=c.RemoteChunkSize),u.call(this,C),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(D=new XMLHttpRequest,this._config.withCredentials&&(D.withCredentials=this._config.withCredentials),s||(D.onload=O(this._chunkLoaded,this),D.onerror=O(this._chunkError,this)),D.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var k,M=this._config.downloadRequestHeaders;for(k in M)D.setRequestHeader(k,M[k])}var j;this._config.chunkSize&&(j=this._start+this._config.chunkSize-1,D.setRequestHeader("Range","bytes="+this._start+"-"+j));try{D.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}s&&D.status===0&&this._chunkError()}},this._chunkLoaded=function(){D.readyState===4&&(D.status<200||400<=D.status?this._chunkError():(this._start+=this._config.chunkSize||D.responseText.length,this._finished=!this._config.chunkSize||this._start>=(k=>(k=k.getResponseHeader("Content-Range"))!==null?parseInt(k.substring(k.lastIndexOf("/")+1)):-1)(D),this.parseChunk(D.responseText)))},this._chunkError=function(k){k=D.statusText||k,this._sendError(new Error(k))}}function f(C){(C=C||{}).chunkSize||(C.chunkSize=c.LocalChunkSize),u.call(this,C);var D,k,M=typeof FileReader<"u";this.stream=function(j){this._input=j,k=j.slice||j.webkitSlice||j.mozSlice,M?((D=new FileReader).onload=O(this._chunkLoaded,this),D.onerror=O(this._chunkError,this)):D=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var j=this._input,V=(this._config.chunkSize&&(V=Math.min(this._start+this._config.chunkSize,this._input.size),j=k.call(j,this._start,V)),D.readAsText(j,this._config.encoding));M||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(j){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(j.target.result)},this._chunkError=function(){this._sendError(D.error)}}function m(C){var D;u.call(this,C=C||{}),this.stream=function(k){return D=k,this._nextChunk()},this._nextChunk=function(){var k,M;if(!this._finished)return k=this._config.chunkSize,D=k?(M=D.substring(0,k),D.substring(k)):(M=D,""),this._finished=!D,this.parseChunk(M)}}function p(C){u.call(this,C=C||{});var D=[],k=!0,M=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(j){this._input=j,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){M&&D.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),D.length?this.parseChunk(D.shift()):k=!0},this._streamData=O(function(j){try{D.push(typeof j=="string"?j:j.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(D.shift()))}catch(V){this._streamError(V)}},this),this._streamError=O(function(j){this._streamCleanUp(),this._sendError(j)},this),this._streamEnd=O(function(){this._streamCleanUp(),M=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(C){var D,k,M,j,V=Math.pow(2,53),B=-V,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,U=this,oe=0,Q=0,ye=!1,te=!1,H=[],z={data:[],errors:[],meta:{}};function Ee(R){return C.skipEmptyLines==="greedy"?R.join("").trim()==="":R.length===1&&R[0].length===0}function ue(){if(z&&M&&(fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),M=!1),C.skipEmptyLines&&(z.data=z.data.filter(function(G){return!Ee(G)})),Te()){let G=function(F,be){T(C.transformHeader)&&(F=C.transformHeader(F,be)),H.push(F)};if(z)if(Array.isArray(z.data[0])){for(var R=0;Te()&&R<z.data.length;R++)z.data[R].forEach(G);z.data.splice(0,1)}else z.data.forEach(G)}function I(G,F){for(var be=C.header?{}:[],re=0;re<G.length;re++){var ge=re,ce=G[re],ce=((bt,me)=>(Ze=>(C.dynamicTypingFunction&&C.dynamicTyping[Ze]===void 0&&(C.dynamicTyping[Ze]=C.dynamicTypingFunction(Ze)),(C.dynamicTyping[Ze]||C.dynamicTyping)===!0))(bt)?me==="true"||me==="TRUE"||me!=="false"&&me!=="FALSE"&&((Ze=>{if(X.test(Ze)&&(Ze=parseFloat(Ze),B<Ze&&Ze<V))return 1})(me)?parseFloat(me):$.test(me)?new Date(me):me===""?null:me):me)(ge=C.header?re>=H.length?"__parsed_extra":H[re]:ge,ce=C.transform?C.transform(ce,ge):ce);ge==="__parsed_extra"?(be[ge]=be[ge]||[],be[ge].push(ce)):be[ge]=ce}return C.header&&(re>H.length?fe("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+re,Q+F):re<H.length&&fe("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+re,Q+F)),be}var W;z&&(C.header||C.dynamicTyping||C.transform)&&(W=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(I),W=z.data.length):z.data=I(z.data,0),C.header&&z.meta&&(z.meta.fields=H),Q+=W)}function Te(){return C.header&&H.length===0}function fe(R,I,W,G){R={type:R,code:I,message:W},G!==void 0&&(R.row=G),z.errors.push(R)}T(C.step)&&(j=C.step,C.step=function(R){z=R,Te()?ue():(ue(),z.data.length!==0&&(oe+=R.data.length,C.preview&&oe>C.preview?k.abort():(z.data=z.data[0],j(z,U))))}),this.parse=function(R,I,W){var G=C.quoteChar||'"',G=(C.newline||(C.newline=this.guessLineEndings(R,G)),M=!1,C.delimiter?T(C.delimiter)&&(C.delimiter=C.delimiter(R),z.meta.delimiter=C.delimiter):((G=((F,be,re,ge,ce)=>{var bt,me,Ze,ws;ce=ce||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ml=0;ml<ce.length;ml++){for(var Wi,cu=ce[ml],Yt=0,Gi=0,_t=0,yr=(Ze=void 0,new y({comments:ge,delimiter:cu,newline:be,preview:10}).parse(F)),En=0;En<yr.data.length;En++)re&&Ee(yr.data[En])?_t++:(Wi=yr.data[En].length,Gi+=Wi,Ze===void 0?Ze=Wi:0<Wi&&(Yt+=Math.abs(Wi-Ze),Ze=Wi));0<yr.data.length&&(Gi/=yr.data.length-_t),(me===void 0||Yt<=me)&&(ws===void 0||ws<Gi)&&1.99<Gi&&(me=Yt,bt=cu,ws=Gi)}return{successful:!!(C.delimiter=bt),bestDelimiter:bt}})(R,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=G.bestDelimiter:(M=!0,C.delimiter=c.DefaultDelimiter),z.meta.delimiter=C.delimiter),P(C));return C.preview&&C.header&&G.preview++,D=R,k=new y(G),z=k.parse(D,I,W),ue(),ye?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return ye},this.pause=function(){ye=!0,k.abort(),D=T(C.chunk)?"":D.substring(k.getCharIndex())},this.resume=function(){U.streamer._halted?(ye=!1,U.streamer.parseChunk(D,!0)):setTimeout(U.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,k.abort(),z.meta.aborted=!0,T(C.complete)&&C.complete(z),D=""},this.guessLineEndings=function(F,G){F=F.substring(0,1048576);var G=new RegExp(b(G)+"([^]*?)"+b(G),"gm"),W=(F=F.replace(G,"")).split("\r"),G=F.split(`
`),F=1<G.length&&G[0].length<W[0].length;if(W.length===1||F)return`
`;for(var be=0,re=0;re<W.length;re++)W[re][0]===`
`&&be++;return be>=W.length/2?`\r
`:"\r"}}function b(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(C){var D=(C=C||{}).delimiter,k=C.newline,M=C.comments,j=C.step,V=C.preview,B=C.fastMode,X=null,$=!1,U=C.quoteChar==null?'"':C.quoteChar,oe=U;if(C.escapeChar!==void 0&&(oe=C.escapeChar),(typeof D!="string"||-1<c.BAD_DELIMITERS.indexOf(D))&&(D=","),M===D)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<c.BAD_DELIMITERS.indexOf(M))&&(M=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var Q=0,ye=!1;this.parse=function(te,H,z){if(typeof te!="string")throw new Error("Input must be a string");var Ee=te.length,ue=D.length,Te=k.length,fe=M.length,R=T(j),I=[],W=[],G=[],F=Q=0;if(!te)return Yt();if(B||B!==!1&&te.indexOf(U)===-1){for(var be=te.split(k),re=0;re<be.length;re++){if(G=be[re],Q+=G.length,re!==be.length-1)Q+=k.length;else if(z)return Yt();if(!M||G.substring(0,fe)!==M){if(R){if(I=[],ws(G.split(D)),Gi(),ye)return Yt()}else ws(G.split(D));if(V&&V<=re)return I=I.slice(0,V),Yt(!0)}}return Yt()}for(var ge=te.indexOf(D,Q),ce=te.indexOf(k,Q),bt=new RegExp(b(oe)+b(U),"g"),me=te.indexOf(U,Q);;)if(te[Q]===U)for(me=Q,Q++;;){if((me=te.indexOf(U,me+1))===-1)return z||W.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:Q}),Wi();if(me===Ee-1)return Wi(te.substring(Q,me).replace(bt,U));if(U===oe&&te[me+1]===oe)me++;else if(U===oe||me===0||te[me-1]!==oe){ge!==-1&&ge<me+1&&(ge=te.indexOf(D,me+1));var Ze=ml((ce=ce!==-1&&ce<me+1?te.indexOf(k,me+1):ce)===-1?ge:Math.min(ge,ce));if(te.substr(me+1+Ze,ue)===D){G.push(te.substring(Q,me).replace(bt,U)),te[Q=me+1+Ze+ue]!==U&&(me=te.indexOf(U,Q)),ge=te.indexOf(D,Q),ce=te.indexOf(k,Q);break}if(Ze=ml(ce),te.substring(me+1+Ze,me+1+Ze+Te)===k){if(G.push(te.substring(Q,me).replace(bt,U)),cu(me+1+Ze+Te),ge=te.indexOf(D,Q),me=te.indexOf(U,Q),R&&(Gi(),ye))return Yt();if(V&&I.length>=V)return Yt(!0);break}W.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:Q}),me++}}else if(M&&G.length===0&&te.substring(Q,Q+fe)===M){if(ce===-1)return Yt();Q=ce+Te,ce=te.indexOf(k,Q),ge=te.indexOf(D,Q)}else if(ge!==-1&&(ge<ce||ce===-1))G.push(te.substring(Q,ge)),Q=ge+ue,ge=te.indexOf(D,Q);else{if(ce===-1)break;if(G.push(te.substring(Q,ce)),cu(ce+Te),R&&(Gi(),ye))return Yt();if(V&&I.length>=V)return Yt(!0)}return Wi();function ws(_t){I.push(_t),F=Q}function ml(_t){var yr=0;return yr=_t!==-1&&(_t=te.substring(me+1,_t))&&_t.trim()===""?_t.length:yr}function Wi(_t){return z||(_t===void 0&&(_t=te.substring(Q)),G.push(_t),Q=Ee,ws(G),R&&Gi()),Yt()}function cu(_t){Q=_t,ws(G),G=[],ce=te.indexOf(k,Q)}function Yt(_t){if(C.header&&!H&&I.length&&!$){var yr=I[0],En=Object.create(null),gg=new Set(yr);let Ux=!1;for(let pl=0;pl<yr.length;pl++){let Ki=yr[pl];if(En[Ki=T(C.transformHeader)?C.transformHeader(Ki,pl):Ki]){let uu,Fx=En[Ki];for(;uu=Ki+"_"+Fx,Fx++,gg.has(uu););gg.add(uu),yr[pl]=uu,En[Ki]++,Ux=!0,(X=X===null?{}:X)[uu]=Ki}else En[Ki]=1,yr[pl]=Ki;gg.add(Ki)}Ux&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:I,errors:W,meta:{delimiter:D,linebreak:k,aborted:ye,truncated:!!_t,cursor:F+(H||0),renamedHeaders:X}}}function Gi(){j(Yt()),I=[],W=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return Q}}function N(C){var D=C.data,k=o[D.workerId],M=!1;if(D.error)k.userError(D.error,D.file);else if(D.results&&D.results.data){var j={abort:function(){M=!0,w(D.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(T(k.userStep)){for(var V=0;V<D.results.data.length&&(k.userStep({data:D.results.data[V],errors:D.results.errors,meta:D.results.meta},j),!M);V++);delete D.results}else T(k.userChunk)&&(k.userChunk(D.results,j,D.file),delete D.results)}D.finished&&!M&&w(D.workerId,D.results)}function w(C,D){var k=o[C];T(k.userComplete)&&k.userComplete(D),k.terminate(),delete o[C]}function _(){throw new Error("Not implemented.")}function P(C){if(typeof C!="object"||C===null)return C;var D,k=Array.isArray(C)?[]:{};for(D in C)k[D]=P(C[D]);return k}function O(C,D){return function(){C.apply(D,arguments)}}function T(C){return typeof C=="function"}return c.parse=function(C,D){var k=(D=D||{}).dynamicTyping||!1;if(T(k)&&(D.dynamicTypingFunction=k,k={}),D.dynamicTyping=k,D.transform=!!T(D.transform)&&D.transform,!D.worker||!c.WORKERS_SUPPORTED)return k=null,c.NODE_STREAM_INPUT,typeof C=="string"?(C=(M=>M.charCodeAt(0)!==65279?M:M.slice(1))(C),k=new(D.download?h:m)(D)):C.readable===!0&&T(C.read)&&T(C.on)?k=new p(D):(i.File&&C instanceof File||C instanceof Object)&&(k=new f(D)),k.stream(C);(k=(()=>{var M;return!!c.WORKERS_SUPPORTED&&(M=(()=>{var j=i.URL||i.webkitURL||null,V=t.toString();return c.BLOB_URL||(c.BLOB_URL=j.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))})(),(M=new i.Worker(M)).onmessage=N,M.id=l++,o[M.id]=M)})()).userStep=D.step,k.userChunk=D.chunk,k.userComplete=D.complete,k.userError=D.error,D.step=T(D.step),D.chunk=T(D.chunk),D.complete=T(D.complete),D.error=T(D.error),delete D.worker,k.postMessage({input:C,config:D,workerId:k.id})},c.unparse=function(C,D){var k=!1,M=!0,j=",",V=`\r
`,B='"',X=B+B,$=!1,U=null,oe=!1,Q=((()=>{if(typeof D=="object"){if(typeof D.delimiter!="string"||c.BAD_DELIMITERS.filter(function(H){return D.delimiter.indexOf(H)!==-1}).length||(j=D.delimiter),typeof D.quotes!="boolean"&&typeof D.quotes!="function"&&!Array.isArray(D.quotes)||(k=D.quotes),typeof D.skipEmptyLines!="boolean"&&typeof D.skipEmptyLines!="string"||($=D.skipEmptyLines),typeof D.newline=="string"&&(V=D.newline),typeof D.quoteChar=="string"&&(B=D.quoteChar),typeof D.header=="boolean"&&(M=D.header),Array.isArray(D.columns)){if(D.columns.length===0)throw new Error("Option columns is empty");U=D.columns}D.escapeChar!==void 0&&(X=D.escapeChar+B),D.escapeFormulae instanceof RegExp?oe=D.escapeFormulae:typeof D.escapeFormulae=="boolean"&&D.escapeFormulae&&(oe=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(B),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return ye(null,C,$);if(typeof C[0]=="object")return ye(U||Object.keys(C[0]),C,$)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||U),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),ye(C.fields||[],C.data||[],$);throw new Error("Unable to serialize unrecognized input");function ye(H,z,Ee){var ue="",Te=(typeof H=="string"&&(H=JSON.parse(H)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(H)&&0<H.length),fe=!Array.isArray(z[0]);if(Te&&M){for(var R=0;R<H.length;R++)0<R&&(ue+=j),ue+=te(H[R],R);0<z.length&&(ue+=V)}for(var I=0;I<z.length;I++){var W=(Te?H:z[I]).length,G=!1,F=Te?Object.keys(z[I]).length===0:z[I].length===0;if(Ee&&!Te&&(G=Ee==="greedy"?z[I].join("").trim()==="":z[I].length===1&&z[I][0].length===0),Ee==="greedy"&&Te){for(var be=[],re=0;re<W;re++){var ge=fe?H[re]:re;be.push(z[I][ge])}G=be.join("").trim()===""}if(!G){for(var ce=0;ce<W;ce++){0<ce&&!F&&(ue+=j);var bt=Te&&fe?H[ce]:ce;ue+=te(z[I][bt],ce)}I<z.length-1&&(!Ee||0<W&&!F)&&(ue+=V)}}return ue}function te(H,z){var Ee,ue;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(ue=!1,oe&&typeof H=="string"&&oe.test(H)&&(H="'"+H,ue=!0),Ee=H.toString().replace(Q,X),(ue=ue||k===!0||typeof k=="function"&&k(H,z)||Array.isArray(k)&&k[z]||((Te,fe)=>{for(var R=0;R<fe.length;R++)if(-1<Te.indexOf(fe[R]))return!0;return!1})(Ee,c.BAD_DELIMITERS)||-1<Ee.indexOf(j)||Ee.charAt(0)===" "||Ee.charAt(Ee.length-1)===" ")?B+Ee+B:Ee)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!i.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=g,c.NetworkStreamer=h,c.FileStreamer=f,c.StringStreamer=m,c.ReadableStreamStreamer=p,i.jQuery&&((n=i.jQuery).fn.parse=function(C){var D=C.config||{},k=[];return this.each(function(V){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)k.push({file:this.files[B],inputElem:this,instanceConfig:n.extend({},D)})}),M(),this;function M(){if(k.length===0)T(C.complete)&&C.complete();else{var V,B,X,$,U=k[0];if(T(C.before)){var oe=C.before(U.file,U.inputElem);if(typeof oe=="object"){if(oe.action==="abort")return V="AbortError",B=U.file,X=U.inputElem,$=oe.reason,void(T(C.error)&&C.error({name:V},B,X,$));if(oe.action==="skip")return void j();typeof oe.config=="object"&&(U.instanceConfig=n.extend(U.instanceConfig,oe.config))}else if(oe==="skip")return void j()}var Q=U.instanceConfig.complete;U.instanceConfig.complete=function(ye){T(Q)&&Q(ye,U.file,U.inputElem),j()},c.parse(U.file,U.instanceConfig)}}function j(){k.splice(0,1),M()}}),a&&(i.onmessage=function(C){C=C.data,c.WORKER_ID===void 0&&C&&(c.WORKER_ID=C.workerId),typeof C.input=="string"?i.postMessage({workerId:c.WORKER_ID,results:c.parse(C.input,C.config),finished:!0}):(i.File&&C.input instanceof File||C.input instanceof Object)&&(C=c.parse(C.input,C.config))&&i.postMessage({workerId:c.WORKER_ID,results:C,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(p.prototype=Object.create(u.prototype)).constructor=p,c})})(x2);var J7=x2.exports;const rA=wn(J7);if(typeof window<"u"&&"Worker"in window)try{gi.workerSrc="/pdf.worker.min.mjs"}catch(r){console.warn("Worker local não disponível, usando CDN:",r),gi.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${bD}/pdf.worker.min.js`}class Jg{static extractQuestionsFromText(e){var n,s;const t=[],i=[/QUESTÃO\s*(\d+)[\.\)]?\s*(.+?)(?=QUESTÃO\s*\d+[\.\)]?|$)/gis,/(\d+)[\.\)]\s*(.+?)(?=\d+[\.\)]|$)/gs,/Q\s*(\d+)[\.\)]?\s*(.+?)(?=Q\s*\d+[\.\)]?|$)/gis,/questão\s*(\d+)[\.\)]?\s*(.+?)(?=questão\s*\d+[\.\)]?|$)/gis];for(const a of i){const o=e.matchAll(a);for(const l of o){const c=l[1],u=(n=l[2])==null?void 0:n.trim();if(u&&u.length>30){console.log(`
--- Processando Questão ${c} ---`),console.log("Texto bruto:",u.substring(0,200)+"...");const{statement:h,alternatives:f}=this.separateStatementAndAlternatives(u,c);h&&f.length>=2?(console.log("Enunciado extraído:",h.substring(0,100)+"..."),console.log("Alternativas encontradas:",f.length),t.push({specialty:"Não identificado",topic:"Não identificado",subtopic:"Não identificado",board:"Não identificado",year:new Date().getFullYear(),statement:h,alternatives:f,correctAnswer:((s=f[0])==null?void 0:s.id)||"",explanation:"Explicação a ser adicionada",comment:"",difficulty:"medium",tags:[]})):console.log("Questão descartada - enunciado ou alternativas insuficientes")}}}return console.log(`
Total de questões extraídas: ${t.length}`),t}static separateStatementAndAlternatives(e,t){var a;const i=[/([A-E])[\.\)]\s*(.+?)(?=[A-E][\.\)]|$)/gs,/([A-E])\s*[\.\)]\s*(.+?)(?=[A-E]\s*[\.\)]|$)/gs,/([A-E])\s*-\s*(.+?)(?=[A-E]\s*-|$)/gs],n=[];let s=e;for(const o of i){const l=e.matchAll(o);for(const c of l){const u=c[1],h=(a=c[2])==null?void 0:a.trim();h&&h.length>5&&(n.find(m=>m.letter===u)||n.push({id:`${t}${u.toLowerCase()}`,text:h,letter:u}))}}if(n.sort((o,l)=>o.letter.localeCompare(l.letter)),n.length>0){const o=n[0],l=new RegExp(`[${o.letter}][\\.\\)]\\s*${o.text.substring(0,20)}`,"i"),c=s.match(l);c&&c.index!==void 0?s=s.substring(0,c.index).trim():s=s.replace(/[A-E][\.\)].*$/gs,"").replace(/[A-E]\s*[\.\)].*$/gs,"").replace(/[A-E]\s*-.*$/gs,"").trim()}return s=s.replace(/\s+/g," ").replace(/\n+/g," ").trim(),{statement:s,alternatives:n}}static async processPDF(e){try{if(console.log("=== INICIANDO PROCESSAMENTO DE PDF ==="),console.log("Arquivo:",e.name,"Tamanho:",e.size,"bytes"),!e||e.type!=="application/pdf")throw new Error("Arquivo deve ser um PDF válido");if(e.size>10*1024*1024)throw new Error("Arquivo muito grande. Máximo 10MB.");console.log("Arquivo validado com sucesso"),console.log("Worker configurado:",gi.workerSrc);const t=await e.arrayBuffer();console.log("Arquivo convertido para ArrayBuffer, tamanho:",t.byteLength),console.log("Carregando PDF...");const i=await mD({data:t,verbosity:0}).promise;console.log("PDF carregado com sucesso!"),console.log("Número de páginas:",i.numPages);let n="";for(let a=1;a<=i.numPages;a++){console.log(`Processando página ${a}/${i.numPages}`);const c=(await(await i.getPage(a)).getTextContent()).items.map(u=>u.str).join(" ");n+=c+`
`,console.log(`Página ${a} processada, texto extraído:`,c.length,"caracteres")}console.log("=== EXTRAÇÃO DE TEXTO CONCLUÍDA ==="),console.log("Texto total extraído:",n.length,"caracteres"),n=this.cleanExtractedText(n),console.log("Texto limpo, tamanho:",n.length,"caracteres"),console.log("Primeiros 500 caracteres:",n.substring(0,500)),console.log("Iniciando extração de questões...");const s=this.extractQuestionsFromText(n);if(console.log("Questões extraídas com padrão principal:",s.length),s.length===0){console.log("Nenhuma questão encontrada com padrão principal, tentando padrões alternativos...");const a=this.extractQuestionsWithAlternativePatterns(n);if(console.log("Questões extraídas com padrões alternativos:",a.length),a.length===0)throw new Error("Nenhuma questão foi encontrada no PDF. Verifique se o arquivo contém questões numeradas.");return a}return console.log("=== PROCESSAMENTO CONCLUÍDO COM SUCESSO ==="),s}catch(t){throw console.error("=== ERRO NO PROCESSAMENTO DE PDF ==="),console.error("Erro detalhado:",t),t instanceof Error?new Error(`Falha ao processar o arquivo PDF: ${t.message}`):new Error("Falha ao processar o arquivo PDF. Verifique se o arquivo é válido.")}}static extractQuestionsWithAlternativePatterns(e){var n,s;const t=[],i=[/QUESTÃO\s*(\d+)[\.\)]?\s*(.+?)(?=QUESTÃO\s*\d+[\.\)]?|$)/gis,/(\d+)[\.\)]\s*(.+?)(?=\d+[\.\)]|$)/gs,/Q\s*(\d+)[\.\)]?\s*(.+?)(?=Q\s*\d+[\.\)]?|$)/gis,/questão\s*(\d+)[\.\)]?\s*(.+?)(?=questão\s*\d+[\.\)]?|$)/gis];for(const a of i){const o=e.matchAll(a);for(const l of o){const c=l[1],u=(n=l[2])==null?void 0:n.trim();if(u&&u.length>30){console.log(`
--- Processando Questão Alternativa ${c} ---`),console.log("Texto bruto:",u.substring(0,200)+"...");const{statement:h,alternatives:f}=this.separateStatementAndAlternatives(u,c);h&&f.length>=2?(console.log("Enunciado extraído:",h.substring(0,100)+"..."),console.log("Alternativas encontradas:",f.length),t.push({specialty:"Não identificado",topic:"Não identificado",subtopic:"Não identificado",board:"Não identificado",year:new Date().getFullYear(),statement:h,alternatives:f,correctAnswer:((s=f[0])==null?void 0:s.id)||"",explanation:"Explicação a ser adicionada",comment:"",difficulty:"medium",tags:[]})):console.log("Questão descartada - enunciado ou alternativas insuficientes")}}}return console.log(`
Total de questões extraídas com padrões alternativos: ${t.length}`),t}static async processCSV(e){return new Promise((t,i)=>{rA.parse(e,{header:!0,skipEmptyLines:!0,complete:n=>{try{console.log("CSV processado:",n.data.length,"linhas");const s=n.data.filter(a=>a.statement&&a.statement.trim()).map((a,o)=>{var h;const l=[];for(let f=0;f<5;f++){const m=String.fromCharCode(65+f),p=a[`alternative_${m.toLowerCase()}`]||a[`alternativa_${m.toLowerCase()}`]||a[`alt_${m.toLowerCase()}`];p&&p.trim()&&l.push({id:`${o+1}${m.toLowerCase()}`,text:p.trim(),letter:m})}let c=a.correct_answer||a.resposta_correta||a.correta||"a";if(c&&l.length>0&&typeof c=="string"&&/^[A-Ea-e]$/.test(c)){const f=l.find(m=>m.letter.toLowerCase()===c.toLowerCase());c=(f==null?void 0:f.id)||((h=l[0])==null?void 0:h.id)||"a"}const u=a.tags?a.tags.split(",").map(f=>f.trim()).filter(f=>f):[];return{specialty:a.specialty||a.especialidade||"Não identificado",topic:a.topic||a.topico||"Não identificado",subtopic:a.subtopic||a.subtopico||"Não identificado",board:a.board||a.banca||"Não identificado",year:parseInt(a.year||a.ano)||new Date().getFullYear(),statement:a.statement||a.enunciado||a.pergunta||"",alternatives:l,correctAnswer:c,explanation:a.explanation||a.explicacao||"Explicação a ser adicionada",comment:a.comment||a.comentario||"",difficulty:a.difficulty||a.dificuldade||"medium",tags:u}}).filter(a=>a.statement&&a.alternatives.length>=2);console.log("Questões extraídas do CSV:",s.length),t(s)}catch(s){console.error("Erro ao processar CSV:",s),i(new Error("Erro ao processar arquivo CSV. Verifique o formato do arquivo."))}},error:n=>{console.error("Erro do Papa Parse:",n),i(new Error("Erro ao ler arquivo CSV. Verifique se o arquivo é válido."))}})})}static generateCSVTemplate(){const e=["specialty","topic","subtopic","board","year","statement","alternative_a","alternative_b","alternative_c","alternative_d","alternative_e","correct_answer","explanation","comment","difficulty","tags"],t=["Cardiologia","Insuficiência Cardíaca","Tratamento","USP","2023","Paciente de 65 anos com insuficiência cardíaca classe funcional II da NYHA apresenta dispneia aos esforços. Qual é o tratamento de primeira linha mais adequado?","Digoxina","IECA + Betabloqueador","Diurético de alça isolado","Anticoagulante oral","Antiarrítmico classe I","b","O tratamento de primeira linha para insuficiência cardíaca classe funcional II da NYHA inclui IECA (ou BRA) e betabloqueador, que reduzem a mortalidade e melhoram a sobrevida.","Questão clássica sobre tratamento de IC. Importante lembrar que IECA e betabloqueador são fundamentais.","medium","cardiologia, insuficiência cardíaca, tratamento"];return rA.unparse([e,t])}static cleanExtractedText(e){return e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n+/g,`
`).replace(/\s+/g," ").trim().replace(/\s*\.\s*/g,". ").replace(/\s*,\s*/g,", ").replace(/\s*:\s*/g,": ").replace(/\s*;\s*/g,"; ").replace(/\s+/g," ").trim()}}const eH=()=>{const{questions:r,addQuestion:e,addQuestions:t}=Rh(),{user:i}=bs(),{canAccessAdmin:n}=c6(),[s,a]=A.useState("upload"),[o,l]=A.useState([]),[c,u]=A.useState(!1),[h,f]=A.useState("");if(A.useRef(null),A.useRef(null),!n())return v.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:v.jsxDEV("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[v.jsxDEV("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsxDEV(_f,{className:"w-8 h-8 text-red-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:27,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:26,columnNumber:11},void 0),v.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:29,columnNumber:11},void 0),v.jsxDEV("p",{className:"text-gray-600 mb-6",children:"Você não tem permissão para acessar o painel administrativo."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:30,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:25,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:24,columnNumber:7},void 0);const m=async O=>{var C;const T=(C=O.target.files)==null?void 0:C[0];if(T){u(!0),f("");try{let D=[];if(T.type==="application/pdf")f("⚠️ Processamento de PDF pode ser impreciso. Recomendamos usar CSV ou inserção manual."),D=await Jg.processPDF(T);else if(T.type==="text/csv"||T.name.endsWith(".csv"))D=await Jg.processCSV(T);else throw new Error("Formato de arquivo não suportado. Use PDF ou CSV.");l(D),f(`✅ ${D.length} questões extraídas com sucesso!`),a("review")}catch(D){f(`❌ Erro: ${D instanceof Error?D.message:"Erro desconhecido"}`)}finally{u(!1)}}},p=O=>{O.preventDefault();const T={id:Date.now().toString(),..._,tags:_.tags.split(",").map(C=>C.trim()).filter(C=>C),alternatives:_.alternatives.filter(C=>C.text.trim()),createdAt:new Date,updatedAt:new Date};e(T),f("✅ Questão adicionada com sucesso!"),P({specialty:"",topic:"",subtopic:"",board:"",year:new Date().getFullYear(),statement:"",alternatives:[{id:"a",text:"",letter:"A"},{id:"b",text:"",letter:"B"},{id:"c",text:"",letter:"C"},{id:"d",text:"",letter:"D"},{id:"e",text:"",letter:"E"}],correctAnswer:"a",explanation:"",comment:"",difficulty:"medium",tags:""})},g=()=>{o.forEach(O=>{e(O)}),f(`✅ ${o.length} questões aprovadas e adicionadas!`),l([])},b=()=>{l([]),f("❌ Questões rejeitadas.")},y=()=>{const O=Jg.generateCSVTemplate(),T=new Blob([O],{type:"text/csv"}),C=URL.createObjectURL(T),D=document.createElement("a");D.href=C,D.download="template_questoes.csv",D.click(),URL.revokeObjectURL(C)},w=(()=>{const O=r.length,T=[...new Set(r.map(D=>D.specialty))],C=[...new Set(r.map(D=>D.year))];return{totalQuestions:O,specialties:T.length,years:C.length}})(),[_,P]=A.useState({specialty:"",topic:"",subtopic:"",board:"",year:new Date().getFullYear(),statement:"",alternatives:[{id:"a",text:"",letter:"A"},{id:"b",text:"",letter:"B"},{id:"c",text:"",letter:"C"},{id:"d",text:"",letter:"D"},{id:"e",text:"",letter:"E"}],correctAnswer:"a",explanation:"",comment:"",difficulty:"medium",tags:""});return v.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:v.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[v.jsxDEV("div",{className:"mb-8",children:v.jsxDEV("div",{className:"flex items-center justify-between",children:[v.jsxDEV("div",{children:[v.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Painel Administrativo"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:167,columnNumber:15},void 0),v.jsxDEV("p",{className:"text-gray-600",children:"Gerencie e importe questões para a plataforma"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:168,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:166,columnNumber:13},void 0),i&&v.jsxDEV("div",{className:"text-right",children:[v.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[v.jsxDEV(_f,{className:"h-4 w-4 text-success-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:173,columnNumber:19},void 0),v.jsxDEV("span",{className:"text-sm font-medium text-success-600 uppercase",children:i.role},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:174,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:172,columnNumber:17},void 0),v.jsxDEV("div",{className:"text-sm text-gray-600",children:["Logado como: ",v.jsxDEV("span",{className:"font-medium",children:i.name},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:179,columnNumber:32},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:178,columnNumber:17},void 0),v.jsxDEV("div",{className:"text-xs text-gray-500",children:i.email},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:181,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:171,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:165,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:164,columnNumber:9},void 0),v.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[v.jsxDEV("div",{className:"border-b border-gray-200",children:v.jsxDEV("nav",{className:"flex space-x-8 px-6",children:[v.jsxDEV("button",{onClick:()=>a("upload"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="upload"?"border-success-500 text-success-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsxDEV(Gx,{className:"inline h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:199,columnNumber:17},void 0),"Upload PDF"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:191,columnNumber:15},void 0),v.jsxDEV("button",{onClick:()=>a("manual"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="manual"?"border-success-500 text-success-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsxDEV(W2,{className:"inline h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:210,columnNumber:17},void 0),"Inserção Manual"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:202,columnNumber:15},void 0),v.jsxDEV("button",{onClick:()=>a("csv"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="csv"?"border-success-500 text-success-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsxDEV(qx,{className:"inline h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:221,columnNumber:17},void 0),"Importar CSV"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:213,columnNumber:15},void 0),o.length>0&&v.jsxDEV("button",{onClick:()=>a("review"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="review"?"border-success-500 text-success-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsxDEV(lA,{className:"inline h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:233,columnNumber:19},void 0),"Revisar (",o.length,")"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:225,columnNumber:17},void 0),v.jsxDEV("button",{onClick:()=>a("stats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="stats"?"border-success-500 text-success-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[v.jsxDEV(_f,{className:"inline h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:245,columnNumber:17},void 0),"Estatísticas"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:237,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:190,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:189,columnNumber:11},void 0),v.jsxDEV("div",{className:"p-6",children:[h&&v.jsxDEV("div",{className:`mb-4 p-4 rounded-lg ${h.includes("✅")?"bg-green-50 border border-green-200 text-green-700":h.includes("❌")?"bg-red-50 border border-red-200 text-red-700":"bg-blue-50 border border-blue-200 text-blue-700"}`,children:h},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:254,columnNumber:15},void 0),s==="upload"&&v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:v.jsxDEV("p",{className:"text-sm text-blue-700",children:[v.jsxDEV("strong",{children:"Processamento Real:"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:268,columnNumber:21},void 0)," O sistema agora extrai todas as questões encontradas no PDF. Certifique-se de que o arquivo contenha questões numeradas com alternativas A, B, C, D, E."]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:267,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:266,columnNumber:17},void 0),v.jsxDEV("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12",children:[v.jsxDEV(Gx,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:273,columnNumber:19},void 0),v.jsxDEV("div",{className:"mt-4",children:[v.jsxDEV("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[v.jsxDEV("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Arraste um arquivo PDF aqui ou clique para selecionar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:276,columnNumber:23},void 0),v.jsxDEV("span",{className:"mt-1 block text-xs text-gray-500",children:"PDF até 10MB"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:279,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:275,columnNumber:21},void 0),v.jsxDEV("input",{id:"file-upload",name:"file-upload",type:"file",accept:".pdf",className:"sr-only",onChange:m},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:283,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:274,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:272,columnNumber:17},void 0),c&&v.jsxDEV("div",{className:"mt-4 flex items-center justify-center",children:[v.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-success-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:295,columnNumber:21},void 0),v.jsxDEV("span",{className:"ml-2 text-sm text-gray-600",children:"Processando PDF..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:296,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:294,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:265,columnNumber:15},void 0),s==="manual"&&v.jsxDEV("div",{className:"space-y-6",children:[v.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:307,columnNumber:21},void 0),v.jsxDEV("input",{type:"text",value:_.specialty,onChange:O=>P({..._,specialty:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",placeholder:"Ex: Cardiologia"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:310,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:306,columnNumber:19},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tópico"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:319,columnNumber:21},void 0),v.jsxDEV("input",{type:"text",value:_.topic,onChange:O=>P({..._,topic:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",placeholder:"Ex: Insuficiência Cardíaca"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:322,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:318,columnNumber:19},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtópico"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:331,columnNumber:21},void 0),v.jsxDEV("input",{type:"text",value:_.subtopic,onChange:O=>P({..._,subtopic:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",placeholder:"Ex: Tratamento"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:334,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:330,columnNumber:19},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banca"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:343,columnNumber:21},void 0),v.jsxDEV("input",{type:"text",value:_.board,onChange:O=>P({..._,board:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",placeholder:"Ex: USP"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:346,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:342,columnNumber:19},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ano"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:355,columnNumber:21},void 0),v.jsxDEV("input",{type:"number",value:_.year,onChange:O=>P({..._,year:parseInt(O.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",placeholder:"2023"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:358,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:354,columnNumber:19},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dificuldade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:367,columnNumber:21},void 0),v.jsxDEV("select",{value:_.difficulty,onChange:O=>P({..._,difficulty:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",children:[v.jsxDEV("option",{value:"easy",children:"Fácil"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:375,columnNumber:23},void 0),v.jsxDEV("option",{value:"medium",children:"Médio"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:376,columnNumber:23},void 0),v.jsxDEV("option",{value:"hard",children:"Difícil"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:377,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:370,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:366,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:305,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enunciado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:383,columnNumber:19},void 0),v.jsxDEV("textarea",{value:_.statement,onChange:O=>P({..._,statement:O.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",placeholder:"Digite o enunciado da questão..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:386,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:382,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Alternativas"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:397,columnNumber:21},void 0),v.jsxDEV("button",{onClick:()=>{const O=[..._.alternatives,{id:`${Date.now()}-${_.alternatives.length}`,text:"",letter:String.fromCharCode(65+_.alternatives.length)}];P({..._,alternatives:O})},className:"px-3 py-1 bg-success-600 text-white text-sm rounded-md hover:bg-success-700",children:"Adicionar Alternativa"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:400,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:396,columnNumber:19},void 0),v.jsxDEV("div",{className:"space-y-3",children:_.alternatives.map((O,T)=>v.jsxDEV("div",{className:"flex items-center gap-3",children:[v.jsxDEV("input",{type:"text",value:O.letter,onChange:C=>{const D=[..._.alternatives];D[T]={...D[T],letter:C.target.value},P({..._,alternatives:D})},className:"w-12 px-2 py-2 border border-gray-300 rounded-md text-center",maxLength:1},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:413,columnNumber:25},void 0),v.jsxDEV("input",{type:"text",value:O.text,onChange:C=>{const D=[..._.alternatives];D[T]={...D[T],text:C.target.value},P({..._,alternatives:D})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md",placeholder:"Texto da alternativa"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:424,columnNumber:25},void 0),v.jsxDEV("button",{onClick:C=>{C.preventDefault();const D=_.alternatives.filter((k,M)=>M!==T);P({..._,alternatives:D})},className:"p-2 text-red-600 hover:text-red-800",children:v.jsxDEV(Ss,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:443,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:435,columnNumber:25},void 0)]},O.id,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:412,columnNumber:23},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:410,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:395,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alternativa Correta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:451,columnNumber:19},void 0),v.jsxDEV("select",{value:_.correctAnswer,onChange:O=>P({..._,correctAnswer:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-success-500",children:[v.jsxDEV("option",{value:"",children:"Selecione a alternativa correta"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:459,columnNumber:21},void 0),_.alternatives.map(O=>v.jsxDEV("option",{value:O.id,children:[O.letter," - ",O.text]},O.id,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:461,columnNumber:23},void 0))]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:454,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:450,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explicação"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:469,columnNumber:19},void 0),v.jsxDEV("textarea",{value:_.explanation,onChange:O=>P({..._,explanation:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Explicação detalhada da resposta correta..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:470,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:468,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentário"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:480,columnNumber:19},void 0),v.jsxDEV("textarea",{value:_.comment,onChange:O=>P({..._,comment:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Comentário adicional, dicas, observações pessoais..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:481,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:479,columnNumber:17},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (separadas por vírgula)"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:491,columnNumber:19},void 0),v.jsxDEV("input",{type:"text",value:_.tags,onChange:O=>P({..._,tags:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"cardiologia, insuficiência cardíaca, tratamento"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:492,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:490,columnNumber:17},void 0),v.jsxDEV("div",{className:"flex justify-end",children:v.jsxDEV("button",{type:"submit",onClick:p,className:"px-6 py-2 bg-success-600 text-white rounded-md hover:bg-success-700",children:"Salvar Questão"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:502,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:501,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:304,columnNumber:15},void 0),s==="csv"&&v.jsxDEV("div",{className:"text-center",children:[v.jsxDEV("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12",children:[v.jsxDEV(qx,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:517,columnNumber:19},void 0),v.jsxDEV("div",{className:"mt-4",children:[v.jsxDEV("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[v.jsxDEV("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Arraste um arquivo CSV aqui ou clique para selecionar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:520,columnNumber:23},void 0),v.jsxDEV("span",{className:"mt-1 block text-xs text-gray-500",children:"CSV com colunas: specialty,topic,subtopic,board,year,statement,alternative_a,alternative_b,alternative_c,alternative_d,alternative_e,correct_answer,explanation,comment,difficulty,tags"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:523,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:519,columnNumber:21},void 0),v.jsxDEV("input",{id:"csv-upload",name:"csv-upload",type:"file",accept:".csv",className:"sr-only",onChange:m},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:527,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:518,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:516,columnNumber:17},void 0),c&&v.jsxDEV("div",{className:"mt-4 flex items-center justify-center",children:[v.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-success-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:539,columnNumber:21},void 0),v.jsxDEV("span",{className:"ml-2 text-sm text-gray-600",children:"Processando CSV..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:540,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:538,columnNumber:19},void 0),h&&v.jsxDEV("div",{className:"mt-4 flex items-center justify-center text-gray-600",children:h},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:544,columnNumber:19},void 0),v.jsxDEV("div",{className:"mt-4",children:v.jsxDEV("button",{onClick:y,className:"text-success-600 hover:text-success-700 text-sm underline",children:"Baixar template CSV"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:549,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:548,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:515,columnNumber:15},void 0),s==="review"&&v.jsxDEV("div",{children:[v.jsxDEV("div",{className:"mb-4",children:[v.jsxDEV("h3",{className:"text-lg font-medium text-gray-900",children:["Revisar Questões Extraídas (",o.length,")"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:563,columnNumber:19},void 0),v.jsxDEV("p",{className:"text-sm text-gray-600",children:"Revise as questões extraídas do PDF antes de salvá-las"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:566,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:562,columnNumber:17},void 0),v.jsxDEV("div",{className:"space-y-4",children:o.map((O,T)=>{var C;return v.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Especialidade"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:576,columnNumber:27},void 0),v.jsxDEV("input",{type:"text",value:O.specialty,onChange:D=>{const k=[...o];k[T]={...k[T],specialty:D.target.value},l(k)},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:579,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:575,columnNumber:25},void 0),v.jsxDEV("div",{children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banca"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:591,columnNumber:27},void 0),v.jsxDEV("input",{type:"text",value:O.board,onChange:D=>{const k=[...o];k[T]={...k[T],board:D.target.value},l(k)},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:594,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:590,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:574,columnNumber:23},void 0),v.jsxDEV("div",{className:"mb-4",children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enunciado"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:608,columnNumber:25},void 0),v.jsxDEV("textarea",{value:O.statement,onChange:D=>{const k=[...o];k[T]={...k[T],statement:D.target.value},l(k)},rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:611,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:607,columnNumber:23},void 0),v.jsxDEV("div",{className:"mb-4",children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alternativas"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:624,columnNumber:25},void 0),v.jsxDEV("div",{className:"space-y-2",children:(C=O.alternatives)==null?void 0:C.map((D,k)=>v.jsxDEV("div",{className:"flex items-center gap-2",children:[v.jsxDEV("span",{className:"w-8 h-8 border border-gray-300 rounded flex items-center justify-center text-sm font-medium",children:D.letter},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:630,columnNumber:31},void 0),v.jsxDEV("input",{type:"text",value:D.text,onChange:M=>{const j=[...o],V=T,B=o[T].alternatives.findIndex(X=>X.id===D.id);j[V]={...j[V],alternatives:j[V].alternatives.map((X,$)=>$===B?{...X,text:M.target.value}:X)},l(j)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:633,columnNumber:31},void 0),v.jsxDEV("input",{type:"radio",name:`correct-${T}`,value:D.id,checked:O.correctAnswer===D.id,onChange:M=>{const j=[...o];j[T]={...j[T],correctAnswer:M.target.value},l(j)},className:"w-4 h-4 text-success-600"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:650,columnNumber:31},void 0)]},k,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:629,columnNumber:29},void 0))},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:627,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:623,columnNumber:23},void 0),v.jsxDEV("div",{className:"mb-4",children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explicação"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:668,columnNumber:25},void 0),v.jsxDEV("textarea",{value:O.explanation||"",onChange:D=>{const k=[...o];k[T]={...k[T],explanation:D.target.value},l(k)},rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Explicação detalhada da resposta correta..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:671,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:667,columnNumber:23},void 0),v.jsxDEV("div",{className:"mb-4",children:[v.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentário"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:685,columnNumber:25},void 0),v.jsxDEV("textarea",{value:O.comment||"",onChange:D=>{const k=[...o];k[T]={...k[T],comment:D.target.value},l(k)},rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Comentário adicional, dicas, observações pessoais..."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:688,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:684,columnNumber:23},void 0)]},T,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:573,columnNumber:21},void 0)})},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:571,columnNumber:17},void 0),v.jsxDEV("div",{className:"flex justify-end space-x-3 mt-6",children:[v.jsxDEV("button",{onClick:b,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:705,columnNumber:19},void 0),v.jsxDEV("button",{onClick:g,className:"px-6 py-2 bg-success-600 text-white rounded-md hover:bg-success-700",children:["Aprovar e Salvar (",o.length," questões)"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:711,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:704,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:561,columnNumber:15},void 0),s==="stats"&&v.jsxDEV("div",{children:[v.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Estatísticas"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:724,columnNumber:17},void 0),v.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[v.jsxDEV("div",{className:"text-blue-600 text-3xl font-bold mb-2",children:w.totalQuestions},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:728,columnNumber:21},void 0),v.jsxDEV("div",{className:"text-blue-800 font-medium",children:"Total de Questões"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:729,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:727,columnNumber:19},void 0),v.jsxDEV("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[v.jsxDEV("div",{className:"text-green-600 text-3xl font-bold mb-2",children:w.specialties},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:733,columnNumber:21},void 0),v.jsxDEV("div",{className:"text-green-800 font-medium",children:"Especialidades"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:734,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:732,columnNumber:19},void 0),v.jsxDEV("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6 text-center",children:[v.jsxDEV("div",{className:"text-purple-600 text-3xl font-bold mb-2",children:w.years},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:738,columnNumber:21},void 0),v.jsxDEV("div",{className:"text-purple-800 font-medium",children:"Anos"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:739,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:737,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:726,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:723,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:251,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:188,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:163,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Admin.tsx",lineNumber:162,columnNumber:5},void 0)};function tH(r){return r==="Ruim"?"bg-red-100 text-red-700 font-bold":r==="Bom"?"bg-blue-100 text-blue-700 font-bold":"bg-green-100 text-green-700 font-bold"}const N2="revisoes_aluno";function rH(){const r=localStorage.getItem(N2);return r?JSON.parse(r):[]}function iH(r){localStorage.setItem(N2,JSON.stringify(r))}function nH(){iH([{tema:"Clínica Médica",microtema:"Hiponatremia",data_estudo:"2025-07-04",n_questoes:10,acertos:6,erros:4,percentual:.6,desempenho:"Bom",n_revisoes:1,proxima_revisao:"2025-07-07"},{tema:"Pediatria",microtema:"Pneumonia em Lactentes",data_estudo:"2025-07-02",n_questoes:8,acertos:2,erros:6,percentual:.25,desempenho:"Ruim",n_revisoes:0,proxima_revisao:"2025-07-03"},{tema:"Cardiologia",microtema:"Arritmias",data_estudo:"2025-06-28",n_questoes:12,acertos:10,erros:2,percentual:.83,desempenho:"Ótimo",n_revisoes:2,proxima_revisao:"2025-07-05"}])}const sH=()=>{const[r,e]=A.useState(""),[t,i]=A.useState([]),n=Xc(),s=new Date().toISOString().slice(0,10),[a,o]=A.useState("");A.useEffect(()=>{nH(),i(rH())},[]);const l=t.filter(h=>{const f=h.tema.toLowerCase().includes(r.toLowerCase())||h.microtema.toLowerCase().includes(r.toLowerCase()),m=!a||h.data_estudo===a;return f&&m}),c=(h,f)=>{n(`/questions/list?microtema=${encodeURIComponent(f)}`)};function u(h){if(!h)return"";const[f,m,p]=h.split("-");return`${p}/${m}/${f}`}return v.jsxDEV("div",{className:"max-w-5xl mx-auto py-10 px-4",children:[v.jsxDEV("h1",{className:"text-2xl font-bold mb-6",children:"Minhas Revisões"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:38,columnNumber:7},void 0),v.jsxDEV("div",{className:"mb-4 flex flex-wrap gap-4 items-center",children:[v.jsxDEV("div",{className:"flex items-center gap-2",children:v.jsxDEV("input",{type:"text",placeholder:"Filtrar por tema ou microtema...",value:r,onChange:h=>e(h.target.value),className:"input-field px-4 py-2 border rounded w-80"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:41,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:40,columnNumber:9},void 0),v.jsxDEV("div",{className:"flex items-center gap-2",children:[v.jsxDEV("label",{className:"text-xs text-gray-500",children:"Data do Estudo:"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:50,columnNumber:11},void 0),v.jsxDEV("input",{type:"date",value:a,onChange:h=>o(h.target.value),className:"input-field px-2 py-1 border rounded"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:51,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:49,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:39,columnNumber:7},void 0),v.jsxDEV("div",{className:"overflow-x-auto rounded shadow bg-white",children:v.jsxDEV("table",{className:"min-w-full text-sm",children:[v.jsxDEV("thead",{children:v.jsxDEV("tr",{className:"bg-gray-50 text-gray-700",children:[v.jsxDEV("th",{className:"py-3 px-4 text-left",children:"Tema"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:58,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-left",children:"Microtema"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:59,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-left",children:"Data do Estudo"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:60,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"Questões"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:61,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"Acertos"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:62,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"Erros"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:63,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"% Acerto"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:64,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"Desempenho"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:65,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"Próxima Revisão"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:66,columnNumber:15},void 0),v.jsxDEV("th",{className:"py-3 px-4 text-center",children:"Ações"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:67,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:57,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:56,columnNumber:11},void 0),v.jsxDEV("tbody",{children:[l.map((h,f)=>v.jsxDEV("tr",{className:h.proxima_revisao===s?"ring-2 ring-yellow-400":"",children:[v.jsxDEV("td",{className:"py-2 px-4",children:h.tema},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:73,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4",children:h.microtema},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:74,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4",children:u(h.data_estudo)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:75,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4 text-center",children:h.n_questoes},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:76,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4 text-center",children:h.acertos},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:77,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4 text-center",children:h.erros},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:78,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4 text-center",children:[Math.round(h.percentual*100),"%"]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:79,columnNumber:17},void 0),v.jsxDEV("td",{className:`py-2 px-4 text-center ${tH(h.desempenho)}`,children:h.desempenho},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:80,columnNumber:17},void 0),v.jsxDEV("td",{className:`py-2 px-4 text-center ${h.proxima_revisao===s?"font-bold text-yellow-700":""}`,children:u(h.proxima_revisao)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:81,columnNumber:17},void 0),v.jsxDEV("td",{className:"py-2 px-4 text-center",children:v.jsxDEV("button",{className:"px-3 py-1 rounded bg-teal-600 text-white font-semibold hover:bg-teal-700 transition text-xs",onClick:()=>c(h.tema,h.microtema),children:"Iniciar Revisão"},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:83,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:82,columnNumber:17},void 0)]},f,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:72,columnNumber:15},void 0)),l.length===0&&v.jsxDEV("tr",{children:v.jsxDEV("td",{colSpan:10,className:"py-8 text-center text-gray-400",children:"Nenhuma revisão encontrada."},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:89,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:88,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:70,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:55,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:54,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/pages/Revisoes.tsx",lineNumber:37,columnNumber:5},void 0)};function aH(){return v.jsxDEV(k2,{children:v.jsxDEV(j2,{children:v.jsxDEV(tO,{children:v.jsxDEV(D2,{children:[v.jsxDEV(Qi,{path:"/",element:v.jsxDEV(iO,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:23,columnNumber:38},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:23,columnNumber:13},this),v.jsxDEV(Qi,{path:"/questions",element:v.jsxDEV(sO,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:24,columnNumber:47},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:24,columnNumber:13},this),v.jsxDEV(Qi,{path:"/questions/list",element:v.jsxDEV(l6,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:25,columnNumber:52},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:25,columnNumber:13},this),v.jsxDEV(Qi,{path:"/question/:id",element:v.jsxDEV(t6,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:26,columnNumber:50},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:26,columnNumber:13},this),v.jsxDEV(Qi,{path:"/dashboard",element:v.jsxDEV(XB,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:27,columnNumber:47},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:27,columnNumber:13},this),v.jsxDEV(Qi,{path:"/profile",element:v.jsxDEV(ZB,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:28,columnNumber:45},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:28,columnNumber:13},this),v.jsxDEV(Qi,{path:"/admin",element:v.jsxDEV(rO,{requiredRole:"admin",children:v.jsxDEV(eH,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:33,columnNumber:19},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:32,columnNumber:17},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:29,columnNumber:13},this),v.jsxDEV(Qi,{path:"/login",element:v.jsxDEV(JB,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:37,columnNumber:43},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:37,columnNumber:13},this),v.jsxDEV(Qi,{path:"/register",element:v.jsxDEV(e6,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:38,columnNumber:46},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:38,columnNumber:13},this),v.jsxDEV(Qi,{path:"/revisoes",element:v.jsxDEV(sH,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:39,columnNumber:46},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:39,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:22,columnNumber:11},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:21,columnNumber:9},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:20,columnNumber:7},this)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/App.tsx",lineNumber:19,columnNumber:5},this)}ev.createRoot(document.getElementById("root")).render(v.jsxDEV(S2.StrictMode,{children:v.jsxDEV(O2,{children:v.jsxDEV(aH,{},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/main.tsx",lineNumber:10,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/main.tsx",lineNumber:9,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/victorrodrigues/residencia/src/main.tsx",lineNumber:8,columnNumber:3},void 0));
